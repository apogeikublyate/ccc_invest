var kA=Object.defineProperty;var CA=(t,e,n)=>e in t?kA(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ty=(t,e,n)=>CA(t,typeof e!="symbol"?e+"":e,n);function EA(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Dn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Hn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var lb={exports:{}},Qu={},cb={exports:{}},Ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _l=Symbol.for("react.element"),NA=Symbol.for("react.portal"),_A=Symbol.for("react.fragment"),TA=Symbol.for("react.strict_mode"),AA=Symbol.for("react.profiler"),PA=Symbol.for("react.provider"),jA=Symbol.for("react.context"),RA=Symbol.for("react.forward_ref"),MA=Symbol.for("react.suspense"),IA=Symbol.for("react.memo"),OA=Symbol.for("react.lazy"),ny=Symbol.iterator;function LA(t){return t===null||typeof t!="object"?null:(t=ny&&t[ny]||t["@@iterator"],typeof t=="function"?t:null)}var ub={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},db=Object.assign,hb={};function Mo(t,e,n){this.props=t,this.context=e,this.refs=hb,this.updater=n||ub}Mo.prototype.isReactComponent={};Mo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Mo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function fb(){}fb.prototype=Mo.prototype;function Pm(t,e,n){this.props=t,this.context=e,this.refs=hb,this.updater=n||ub}var jm=Pm.prototype=new fb;jm.constructor=Pm;db(jm,Mo.prototype);jm.isPureReactComponent=!0;var ry=Array.isArray,pb=Object.prototype.hasOwnProperty,Rm={current:null},mb={key:!0,ref:!0,__self:!0,__source:!0};function gb(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)pb.call(e,r)&&!mb.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:_l,type:t,key:s,ref:o,props:i,_owner:Rm.current}}function $A(t,e){return{$$typeof:_l,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Mm(t){return typeof t=="object"&&t!==null&&t.$$typeof===_l}function DA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var iy=/\/+/g;function dh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?DA(""+t.key):e.toString(36)}function Rc(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case _l:case NA:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+dh(o,0):r,ry(i)?(n="",t!=null&&(n=t.replace(iy,"$&/")+"/"),Rc(i,e,n,"",function(c){return c})):i!=null&&(Mm(i)&&(i=$A(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(iy,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",ry(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+dh(s,a);o+=Rc(s,e,n,l,i)}else if(l=LA(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+dh(s,a++),o+=Rc(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Kl(t,e,n){if(t==null)return t;var r=[],i=0;return Rc(t,r,"","",function(s){return e.call(n,s,i++)}),r}function zA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Lt={current:null},Mc={transition:null},FA={ReactCurrentDispatcher:Lt,ReactCurrentBatchConfig:Mc,ReactCurrentOwner:Rm};function vb(){throw Error("act(...) is not supported in production builds of React.")}Ee.Children={map:Kl,forEach:function(t,e,n){Kl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Kl(t,function(){e++}),e},toArray:function(t){return Kl(t,function(e){return e})||[]},only:function(t){if(!Mm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ee.Component=Mo;Ee.Fragment=_A;Ee.Profiler=AA;Ee.PureComponent=Pm;Ee.StrictMode=TA;Ee.Suspense=MA;Ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FA;Ee.act=vb;Ee.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=db({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Rm.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)pb.call(e,l)&&!mb.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:_l,type:t.type,key:i,ref:s,props:r,_owner:o}};Ee.createContext=function(t){return t={$$typeof:jA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:PA,_context:t},t.Consumer=t};Ee.createElement=gb;Ee.createFactory=function(t){var e=gb.bind(null,t);return e.type=t,e};Ee.createRef=function(){return{current:null}};Ee.forwardRef=function(t){return{$$typeof:RA,render:t}};Ee.isValidElement=Mm;Ee.lazy=function(t){return{$$typeof:OA,_payload:{_status:-1,_result:t},_init:zA}};Ee.memo=function(t,e){return{$$typeof:IA,type:t,compare:e===void 0?null:e}};Ee.startTransition=function(t){var e=Mc.transition;Mc.transition={};try{t()}finally{Mc.transition=e}};Ee.unstable_act=vb;Ee.useCallback=function(t,e){return Lt.current.useCallback(t,e)};Ee.useContext=function(t){return Lt.current.useContext(t)};Ee.useDebugValue=function(){};Ee.useDeferredValue=function(t){return Lt.current.useDeferredValue(t)};Ee.useEffect=function(t,e){return Lt.current.useEffect(t,e)};Ee.useId=function(){return Lt.current.useId()};Ee.useImperativeHandle=function(t,e,n){return Lt.current.useImperativeHandle(t,e,n)};Ee.useInsertionEffect=function(t,e){return Lt.current.useInsertionEffect(t,e)};Ee.useLayoutEffect=function(t,e){return Lt.current.useLayoutEffect(t,e)};Ee.useMemo=function(t,e){return Lt.current.useMemo(t,e)};Ee.useReducer=function(t,e,n){return Lt.current.useReducer(t,e,n)};Ee.useRef=function(t){return Lt.current.useRef(t)};Ee.useState=function(t){return Lt.current.useState(t)};Ee.useSyncExternalStore=function(t,e,n){return Lt.current.useSyncExternalStore(t,e,n)};Ee.useTransition=function(){return Lt.current.useTransition()};Ee.version="18.3.1";cb.exports=Ee;var y=cb.exports;const Le=Hn(y),yb=EA({__proto__:null,default:Le},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BA=y,VA=Symbol.for("react.element"),UA=Symbol.for("react.fragment"),HA=Object.prototype.hasOwnProperty,WA=BA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qA={key:!0,ref:!0,__self:!0,__source:!0};function xb(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)HA.call(e,r)&&!qA.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:VA,type:t,key:s,ref:o,props:i,_owner:WA.current}}Qu.Fragment=UA;Qu.jsx=xb;Qu.jsxs=xb;lb.exports=Qu;var d=lb.exports,Lf={},wb={exports:{}},hn={},bb={exports:{}},Sb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(A,$){var E=A.length;A.push($);e:for(;0<E;){var z=E-1>>>1,q=A[z];if(0<i(q,$))A[z]=$,A[E]=q,E=z;else break e}}function n(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var $=A[0],E=A.pop();if(E!==$){A[0]=E;e:for(var z=0,q=A.length,T=q>>>1;z<T;){var J=2*(z+1)-1,he=A[J],ce=J+1,re=A[ce];if(0>i(he,E))ce<q&&0>i(re,he)?(A[z]=re,A[ce]=E,z=ce):(A[z]=he,A[J]=E,z=J);else if(ce<q&&0>i(re,E))A[z]=re,A[ce]=E,z=ce;else break e}}return $}function i(A,$){var E=A.sortIndex-$.sortIndex;return E!==0?E:A.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,f=3,p=!1,g=!1,m=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(A){for(var $=n(c);$!==null;){if($.callback===null)r(c);else if($.startTime<=A)r(c),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(c)}}function S(A){if(m=!1,b(A),!g)if(n(l)!==null)g=!0,L(N);else{var $=n(c);$!==null&&B(S,$.startTime-A)}}function N(A,$){g=!1,m&&(m=!1,v(P),P=-1),p=!0;var E=f;try{for(b($),h=n(l);h!==null&&(!(h.expirationTime>$)||A&&!O());){var z=h.callback;if(typeof z=="function"){h.callback=null,f=h.priorityLevel;var q=z(h.expirationTime<=$);$=t.unstable_now(),typeof q=="function"?h.callback=q:h===n(l)&&r(l),b($)}else r(l);h=n(l)}if(h!==null)var T=!0;else{var J=n(c);J!==null&&B(S,J.startTime-$),T=!1}return T}finally{h=null,f=E,p=!1}}var C=!1,_=null,P=-1,I=5,R=-1;function O(){return!(t.unstable_now()-R<I)}function j(){if(_!==null){var A=t.unstable_now();R=A;var $=!0;try{$=_(!0,A)}finally{$?F():(C=!1,_=null)}}else C=!1}var F;if(typeof x=="function")F=function(){x(j)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,D=M.port2;M.port1.onmessage=j,F=function(){D.postMessage(null)}}else F=function(){w(j,0)};function L(A){_=A,C||(C=!0,F())}function B(A,$){P=w(function(){A(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(A){A.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,L(N))},t.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<A?Math.floor(1e3/A):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(A){switch(f){case 1:case 2:case 3:var $=3;break;default:$=f}var E=f;f=$;try{return A()}finally{f=E}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(A,$){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var E=f;f=A;try{return $()}finally{f=E}},t.unstable_scheduleCallback=function(A,$,E){var z=t.unstable_now();switch(typeof E=="object"&&E!==null?(E=E.delay,E=typeof E=="number"&&0<E?z+E:z):E=z,A){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=E+q,A={id:u++,callback:$,priorityLevel:A,startTime:E,expirationTime:q,sortIndex:-1},E>z?(A.sortIndex=E,e(c,A),n(l)===null&&A===n(c)&&(m?(v(P),P=-1):m=!0,B(S,E-z))):(A.sortIndex=q,e(l,A),g||p||(g=!0,L(N))),A},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(A){var $=f;return function(){var E=f;f=$;try{return A.apply(this,arguments)}finally{f=E}}}})(Sb);bb.exports=Sb;var KA=bb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YA=y,dn=KA;function Z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var kb=new Set,za={};function ps(t,e){go(t,e),go(t+"Capture",e)}function go(t,e){for(za[t]=e,t=0;t<e.length;t++)kb.add(e[t])}var Rr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$f=Object.prototype.hasOwnProperty,GA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,sy={},oy={};function ZA(t){return $f.call(oy,t)?!0:$f.call(sy,t)?!1:GA.test(t)?oy[t]=!0:(sy[t]=!0,!1)}function XA(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function QA(t,e,n,r){if(e===null||typeof e>"u"||XA(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function $t(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var wt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){wt[t]=new $t(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];wt[e]=new $t(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){wt[t]=new $t(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){wt[t]=new $t(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){wt[t]=new $t(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){wt[t]=new $t(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){wt[t]=new $t(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){wt[t]=new $t(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){wt[t]=new $t(t,5,!1,t.toLowerCase(),null,!1,!1)});var Im=/[\-:]([a-z])/g;function Om(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Im,Om);wt[e]=new $t(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Im,Om);wt[e]=new $t(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Im,Om);wt[e]=new $t(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){wt[t]=new $t(t,1,!1,t.toLowerCase(),null,!1,!1)});wt.xlinkHref=new $t("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){wt[t]=new $t(t,1,!1,t.toLowerCase(),null,!0,!0)});function Lm(t,e,n,r){var i=wt.hasOwnProperty(e)?wt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(QA(e,n,i,r)&&(n=null),r||i===null?ZA(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var zr=YA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Yl=Symbol.for("react.element"),Is=Symbol.for("react.portal"),Os=Symbol.for("react.fragment"),$m=Symbol.for("react.strict_mode"),Df=Symbol.for("react.profiler"),Cb=Symbol.for("react.provider"),Eb=Symbol.for("react.context"),Dm=Symbol.for("react.forward_ref"),zf=Symbol.for("react.suspense"),Ff=Symbol.for("react.suspense_list"),zm=Symbol.for("react.memo"),Qr=Symbol.for("react.lazy"),Nb=Symbol.for("react.offscreen"),ay=Symbol.iterator;function Yo(t){return t===null||typeof t!="object"?null:(t=ay&&t[ay]||t["@@iterator"],typeof t=="function"?t:null)}var Ge=Object.assign,hh;function ua(t){if(hh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);hh=e&&e[1]||""}return`
`+hh+t}var fh=!1;function ph(t,e){if(!t||fh)return"";fh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{fh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ua(t):""}function JA(t){switch(t.tag){case 5:return ua(t.type);case 16:return ua("Lazy");case 13:return ua("Suspense");case 19:return ua("SuspenseList");case 0:case 2:case 15:return t=ph(t.type,!1),t;case 11:return t=ph(t.type.render,!1),t;case 1:return t=ph(t.type,!0),t;default:return""}}function Bf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Os:return"Fragment";case Is:return"Portal";case Df:return"Profiler";case $m:return"StrictMode";case zf:return"Suspense";case Ff:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Eb:return(t.displayName||"Context")+".Consumer";case Cb:return(t._context.displayName||"Context")+".Provider";case Dm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case zm:return e=t.displayName||null,e!==null?e:Bf(t.type)||"Memo";case Qr:e=t._payload,t=t._init;try{return Bf(t(e))}catch{}}return null}function eP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Bf(e);case 8:return e===$m?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function yi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function _b(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function tP(t){var e=_b(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Gl(t){t._valueTracker||(t._valueTracker=tP(t))}function Tb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=_b(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function eu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Vf(t,e){var n=e.checked;return Ge({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ly(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=yi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ab(t,e){e=e.checked,e!=null&&Lm(t,"checked",e,!1)}function Uf(t,e){Ab(t,e);var n=yi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Hf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Hf(t,e.type,yi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function cy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Hf(t,e,n){(e!=="number"||eu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var da=Array.isArray;function Zs(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+yi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Wf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Z(91));return Ge({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function uy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Z(92));if(da(n)){if(1<n.length)throw Error(Z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:yi(n)}}function Pb(t,e){var n=yi(e.value),r=yi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function dy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function jb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?jb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Zl,Rb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Zl=Zl||document.createElement("div"),Zl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Zl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Fa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var wa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nP=["Webkit","ms","Moz","O"];Object.keys(wa).forEach(function(t){nP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),wa[e]=wa[t]})});function Mb(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||wa.hasOwnProperty(t)&&wa[t]?(""+e).trim():e+"px"}function Ib(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Mb(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var rP=Ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Kf(t,e){if(e){if(rP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Z(62))}}function Yf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gf=null;function Fm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Zf=null,Xs=null,Qs=null;function hy(t){if(t=Pl(t)){if(typeof Zf!="function")throw Error(Z(280));var e=t.stateNode;e&&(e=rd(e),Zf(t.stateNode,t.type,e))}}function Ob(t){Xs?Qs?Qs.push(t):Qs=[t]:Xs=t}function Lb(){if(Xs){var t=Xs,e=Qs;if(Qs=Xs=null,hy(t),e)for(t=0;t<e.length;t++)hy(e[t])}}function $b(t,e){return t(e)}function Db(){}var mh=!1;function zb(t,e,n){if(mh)return t(e,n);mh=!0;try{return $b(t,e,n)}finally{mh=!1,(Xs!==null||Qs!==null)&&(Db(),Lb())}}function Ba(t,e){var n=t.stateNode;if(n===null)return null;var r=rd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Z(231,e,typeof n));return n}var Xf=!1;if(Rr)try{var Go={};Object.defineProperty(Go,"passive",{get:function(){Xf=!0}}),window.addEventListener("test",Go,Go),window.removeEventListener("test",Go,Go)}catch{Xf=!1}function iP(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var ba=!1,tu=null,nu=!1,Qf=null,sP={onError:function(t){ba=!0,tu=t}};function oP(t,e,n,r,i,s,o,a,l){ba=!1,tu=null,iP.apply(sP,arguments)}function aP(t,e,n,r,i,s,o,a,l){if(oP.apply(this,arguments),ba){if(ba){var c=tu;ba=!1,tu=null}else throw Error(Z(198));nu||(nu=!0,Qf=c)}}function ms(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Fb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function fy(t){if(ms(t)!==t)throw Error(Z(188))}function lP(t){var e=t.alternate;if(!e){if(e=ms(t),e===null)throw Error(Z(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return fy(i),t;if(s===r)return fy(i),e;s=s.sibling}throw Error(Z(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Z(189))}}if(n.alternate!==r)throw Error(Z(190))}if(n.tag!==3)throw Error(Z(188));return n.stateNode.current===n?t:e}function Bb(t){return t=lP(t),t!==null?Vb(t):null}function Vb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Vb(t);if(e!==null)return e;t=t.sibling}return null}var Ub=dn.unstable_scheduleCallback,py=dn.unstable_cancelCallback,cP=dn.unstable_shouldYield,uP=dn.unstable_requestPaint,Je=dn.unstable_now,dP=dn.unstable_getCurrentPriorityLevel,Bm=dn.unstable_ImmediatePriority,Hb=dn.unstable_UserBlockingPriority,ru=dn.unstable_NormalPriority,hP=dn.unstable_LowPriority,Wb=dn.unstable_IdlePriority,Ju=null,rr=null;function fP(t){if(rr&&typeof rr.onCommitFiberRoot=="function")try{rr.onCommitFiberRoot(Ju,t,void 0,(t.current.flags&128)===128)}catch{}}var In=Math.clz32?Math.clz32:gP,pP=Math.log,mP=Math.LN2;function gP(t){return t>>>=0,t===0?32:31-(pP(t)/mP|0)|0}var Xl=64,Ql=4194304;function ha(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function iu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=ha(a):(s&=o,s!==0&&(r=ha(s)))}else o=n&~i,o!==0?r=ha(o):s!==0&&(r=ha(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-In(e),i=1<<n,r|=t[n],e&=~i;return r}function vP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yP(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-In(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=vP(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Jf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function qb(){var t=Xl;return Xl<<=1,!(Xl&4194240)&&(Xl=64),t}function gh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Tl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-In(e),t[e]=n}function xP(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-In(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Vm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-In(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Me=0;function Kb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Yb,Um,Gb,Zb,Xb,ep=!1,Jl=[],ai=null,li=null,ci=null,Va=new Map,Ua=new Map,ei=[],wP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function my(t,e){switch(t){case"focusin":case"focusout":ai=null;break;case"dragenter":case"dragleave":li=null;break;case"mouseover":case"mouseout":ci=null;break;case"pointerover":case"pointerout":Va.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ua.delete(e.pointerId)}}function Zo(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Pl(e),e!==null&&Um(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function bP(t,e,n,r,i){switch(e){case"focusin":return ai=Zo(ai,t,e,n,r,i),!0;case"dragenter":return li=Zo(li,t,e,n,r,i),!0;case"mouseover":return ci=Zo(ci,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Va.set(s,Zo(Va.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ua.set(s,Zo(Ua.get(s)||null,t,e,n,r,i)),!0}return!1}function Qb(t){var e=Bi(t.target);if(e!==null){var n=ms(e);if(n!==null){if(e=n.tag,e===13){if(e=Fb(n),e!==null){t.blockedOn=e,Xb(t.priority,function(){Gb(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ic(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=tp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Gf=r,n.target.dispatchEvent(r),Gf=null}else return e=Pl(n),e!==null&&Um(e),t.blockedOn=n,!1;e.shift()}return!0}function gy(t,e,n){Ic(t)&&n.delete(e)}function SP(){ep=!1,ai!==null&&Ic(ai)&&(ai=null),li!==null&&Ic(li)&&(li=null),ci!==null&&Ic(ci)&&(ci=null),Va.forEach(gy),Ua.forEach(gy)}function Xo(t,e){t.blockedOn===e&&(t.blockedOn=null,ep||(ep=!0,dn.unstable_scheduleCallback(dn.unstable_NormalPriority,SP)))}function Ha(t){function e(i){return Xo(i,t)}if(0<Jl.length){Xo(Jl[0],t);for(var n=1;n<Jl.length;n++){var r=Jl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ai!==null&&Xo(ai,t),li!==null&&Xo(li,t),ci!==null&&Xo(ci,t),Va.forEach(e),Ua.forEach(e),n=0;n<ei.length;n++)r=ei[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ei.length&&(n=ei[0],n.blockedOn===null);)Qb(n),n.blockedOn===null&&ei.shift()}var Js=zr.ReactCurrentBatchConfig,su=!0;function kP(t,e,n,r){var i=Me,s=Js.transition;Js.transition=null;try{Me=1,Hm(t,e,n,r)}finally{Me=i,Js.transition=s}}function CP(t,e,n,r){var i=Me,s=Js.transition;Js.transition=null;try{Me=4,Hm(t,e,n,r)}finally{Me=i,Js.transition=s}}function Hm(t,e,n,r){if(su){var i=tp(t,e,n,r);if(i===null)Nh(t,e,r,ou,n),my(t,r);else if(bP(i,t,e,n,r))r.stopPropagation();else if(my(t,r),e&4&&-1<wP.indexOf(t)){for(;i!==null;){var s=Pl(i);if(s!==null&&Yb(s),s=tp(t,e,n,r),s===null&&Nh(t,e,r,ou,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Nh(t,e,r,null,n)}}var ou=null;function tp(t,e,n,r){if(ou=null,t=Fm(r),t=Bi(t),t!==null)if(e=ms(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Fb(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ou=t,null}function Jb(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dP()){case Bm:return 1;case Hb:return 4;case ru:case hP:return 16;case Wb:return 536870912;default:return 16}default:return 16}}var ri=null,Wm=null,Oc=null;function e1(){if(Oc)return Oc;var t,e=Wm,n=e.length,r,i="value"in ri?ri.value:ri.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Oc=i.slice(t,1<r?1-r:void 0)}function Lc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ec(){return!0}function vy(){return!1}function fn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ec:vy,this.isPropagationStopped=vy,this}return Ge(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ec)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ec)},persist:function(){},isPersistent:ec}),e}var Io={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qm=fn(Io),Al=Ge({},Io,{view:0,detail:0}),EP=fn(Al),vh,yh,Qo,ed=Ge({},Al,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Km,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Qo&&(Qo&&t.type==="mousemove"?(vh=t.screenX-Qo.screenX,yh=t.screenY-Qo.screenY):yh=vh=0,Qo=t),vh)},movementY:function(t){return"movementY"in t?t.movementY:yh}}),yy=fn(ed),NP=Ge({},ed,{dataTransfer:0}),_P=fn(NP),TP=Ge({},Al,{relatedTarget:0}),xh=fn(TP),AP=Ge({},Io,{animationName:0,elapsedTime:0,pseudoElement:0}),PP=fn(AP),jP=Ge({},Io,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),RP=fn(jP),MP=Ge({},Io,{data:0}),xy=fn(MP),IP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},OP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},LP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $P(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=LP[t])?!!e[t]:!1}function Km(){return $P}var DP=Ge({},Al,{key:function(t){if(t.key){var e=IP[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Lc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?OP[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Km,charCode:function(t){return t.type==="keypress"?Lc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Lc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),zP=fn(DP),FP=Ge({},ed,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wy=fn(FP),BP=Ge({},Al,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Km}),VP=fn(BP),UP=Ge({},Io,{propertyName:0,elapsedTime:0,pseudoElement:0}),HP=fn(UP),WP=Ge({},ed,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),qP=fn(WP),KP=[9,13,27,32],Ym=Rr&&"CompositionEvent"in window,Sa=null;Rr&&"documentMode"in document&&(Sa=document.documentMode);var YP=Rr&&"TextEvent"in window&&!Sa,t1=Rr&&(!Ym||Sa&&8<Sa&&11>=Sa),by=" ",Sy=!1;function n1(t,e){switch(t){case"keyup":return KP.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function r1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ls=!1;function GP(t,e){switch(t){case"compositionend":return r1(e);case"keypress":return e.which!==32?null:(Sy=!0,by);case"textInput":return t=e.data,t===by&&Sy?null:t;default:return null}}function ZP(t,e){if(Ls)return t==="compositionend"||!Ym&&n1(t,e)?(t=e1(),Oc=Wm=ri=null,Ls=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return t1&&e.locale!=="ko"?null:e.data;default:return null}}var XP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ky(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!XP[t.type]:e==="textarea"}function i1(t,e,n,r){Ob(r),e=au(e,"onChange"),0<e.length&&(n=new qm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ka=null,Wa=null;function QP(t){m1(t,0)}function td(t){var e=zs(t);if(Tb(e))return t}function JP(t,e){if(t==="change")return e}var s1=!1;if(Rr){var wh;if(Rr){var bh="oninput"in document;if(!bh){var Cy=document.createElement("div");Cy.setAttribute("oninput","return;"),bh=typeof Cy.oninput=="function"}wh=bh}else wh=!1;s1=wh&&(!document.documentMode||9<document.documentMode)}function Ey(){ka&&(ka.detachEvent("onpropertychange",o1),Wa=ka=null)}function o1(t){if(t.propertyName==="value"&&td(Wa)){var e=[];i1(e,Wa,t,Fm(t)),zb(QP,e)}}function e2(t,e,n){t==="focusin"?(Ey(),ka=e,Wa=n,ka.attachEvent("onpropertychange",o1)):t==="focusout"&&Ey()}function t2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return td(Wa)}function n2(t,e){if(t==="click")return td(e)}function r2(t,e){if(t==="input"||t==="change")return td(e)}function i2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var zn=typeof Object.is=="function"?Object.is:i2;function qa(t,e){if(zn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!$f.call(e,i)||!zn(t[i],e[i]))return!1}return!0}function Ny(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function _y(t,e){var n=Ny(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ny(n)}}function a1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?a1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function l1(){for(var t=window,e=eu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=eu(t.document)}return e}function Gm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function s2(t){var e=l1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&a1(n.ownerDocument.documentElement,n)){if(r!==null&&Gm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=_y(n,s);var o=_y(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var o2=Rr&&"documentMode"in document&&11>=document.documentMode,$s=null,np=null,Ca=null,rp=!1;function Ty(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;rp||$s==null||$s!==eu(r)||(r=$s,"selectionStart"in r&&Gm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ca&&qa(Ca,r)||(Ca=r,r=au(np,"onSelect"),0<r.length&&(e=new qm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=$s)))}function tc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ds={animationend:tc("Animation","AnimationEnd"),animationiteration:tc("Animation","AnimationIteration"),animationstart:tc("Animation","AnimationStart"),transitionend:tc("Transition","TransitionEnd")},Sh={},c1={};Rr&&(c1=document.createElement("div").style,"AnimationEvent"in window||(delete Ds.animationend.animation,delete Ds.animationiteration.animation,delete Ds.animationstart.animation),"TransitionEvent"in window||delete Ds.transitionend.transition);function nd(t){if(Sh[t])return Sh[t];if(!Ds[t])return t;var e=Ds[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in c1)return Sh[t]=e[n];return t}var u1=nd("animationend"),d1=nd("animationiteration"),h1=nd("animationstart"),f1=nd("transitionend"),p1=new Map,Ay="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ti(t,e){p1.set(t,e),ps(e,[t])}for(var kh=0;kh<Ay.length;kh++){var Ch=Ay[kh],a2=Ch.toLowerCase(),l2=Ch[0].toUpperCase()+Ch.slice(1);Ti(a2,"on"+l2)}Ti(u1,"onAnimationEnd");Ti(d1,"onAnimationIteration");Ti(h1,"onAnimationStart");Ti("dblclick","onDoubleClick");Ti("focusin","onFocus");Ti("focusout","onBlur");Ti(f1,"onTransitionEnd");go("onMouseEnter",["mouseout","mouseover"]);go("onMouseLeave",["mouseout","mouseover"]);go("onPointerEnter",["pointerout","pointerover"]);go("onPointerLeave",["pointerout","pointerover"]);ps("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ps("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ps("onBeforeInput",["compositionend","keypress","textInput","paste"]);ps("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ps("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ps("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),c2=new Set("cancel close invalid load scroll toggle".split(" ").concat(fa));function Py(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,aP(r,e,void 0,t),t.currentTarget=null}function m1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Py(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Py(i,a,c),s=l}}}if(nu)throw t=Qf,nu=!1,Qf=null,t}function Be(t,e){var n=e[lp];n===void 0&&(n=e[lp]=new Set);var r=t+"__bubble";n.has(r)||(g1(e,t,2,!1),n.add(r))}function Eh(t,e,n){var r=0;e&&(r|=4),g1(n,t,r,e)}var nc="_reactListening"+Math.random().toString(36).slice(2);function Ka(t){if(!t[nc]){t[nc]=!0,kb.forEach(function(n){n!=="selectionchange"&&(c2.has(n)||Eh(n,!1,t),Eh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[nc]||(e[nc]=!0,Eh("selectionchange",!1,e))}}function g1(t,e,n,r){switch(Jb(e)){case 1:var i=kP;break;case 4:i=CP;break;default:i=Hm}n=i.bind(null,e,n,t),i=void 0,!Xf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Nh(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Bi(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}zb(function(){var c=s,u=Fm(n),h=[];e:{var f=p1.get(t);if(f!==void 0){var p=qm,g=t;switch(t){case"keypress":if(Lc(n)===0)break e;case"keydown":case"keyup":p=zP;break;case"focusin":g="focus",p=xh;break;case"focusout":g="blur",p=xh;break;case"beforeblur":case"afterblur":p=xh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=yy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=_P;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=VP;break;case u1:case d1:case h1:p=PP;break;case f1:p=HP;break;case"scroll":p=EP;break;case"wheel":p=qP;break;case"copy":case"cut":case"paste":p=RP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=wy}var m=(e&4)!==0,w=!m&&t==="scroll",v=m?f!==null?f+"Capture":null:f;m=[];for(var x=c,b;x!==null;){b=x;var S=b.stateNode;if(b.tag===5&&S!==null&&(b=S,v!==null&&(S=Ba(x,v),S!=null&&m.push(Ya(x,S,b)))),w)break;x=x.return}0<m.length&&(f=new p(f,g,null,n,u),h.push({event:f,listeners:m}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==Gf&&(g=n.relatedTarget||n.fromElement)&&(Bi(g)||g[Mr]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(g=n.relatedTarget||n.toElement,p=c,g=g?Bi(g):null,g!==null&&(w=ms(g),g!==w||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=c),p!==g)){if(m=yy,S="onMouseLeave",v="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(m=wy,S="onPointerLeave",v="onPointerEnter",x="pointer"),w=p==null?f:zs(p),b=g==null?f:zs(g),f=new m(S,x+"leave",p,n,u),f.target=w,f.relatedTarget=b,S=null,Bi(u)===c&&(m=new m(v,x+"enter",g,n,u),m.target=b,m.relatedTarget=w,S=m),w=S,p&&g)t:{for(m=p,v=g,x=0,b=m;b;b=Ss(b))x++;for(b=0,S=v;S;S=Ss(S))b++;for(;0<x-b;)m=Ss(m),x--;for(;0<b-x;)v=Ss(v),b--;for(;x--;){if(m===v||v!==null&&m===v.alternate)break t;m=Ss(m),v=Ss(v)}m=null}else m=null;p!==null&&jy(h,f,p,m,!1),g!==null&&w!==null&&jy(h,w,g,m,!0)}}e:{if(f=c?zs(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var N=JP;else if(ky(f))if(s1)N=r2;else{N=t2;var C=e2}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(N=n2);if(N&&(N=N(t,c))){i1(h,N,n,u);break e}C&&C(t,f,c),t==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&Hf(f,"number",f.value)}switch(C=c?zs(c):window,t){case"focusin":(ky(C)||C.contentEditable==="true")&&($s=C,np=c,Ca=null);break;case"focusout":Ca=np=$s=null;break;case"mousedown":rp=!0;break;case"contextmenu":case"mouseup":case"dragend":rp=!1,Ty(h,n,u);break;case"selectionchange":if(o2)break;case"keydown":case"keyup":Ty(h,n,u)}var _;if(Ym)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Ls?n1(t,n)&&(P="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(t1&&n.locale!=="ko"&&(Ls||P!=="onCompositionStart"?P==="onCompositionEnd"&&Ls&&(_=e1()):(ri=u,Wm="value"in ri?ri.value:ri.textContent,Ls=!0)),C=au(c,P),0<C.length&&(P=new xy(P,t,null,n,u),h.push({event:P,listeners:C}),_?P.data=_:(_=r1(n),_!==null&&(P.data=_)))),(_=YP?GP(t,n):ZP(t,n))&&(c=au(c,"onBeforeInput"),0<c.length&&(u=new xy("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:c}),u.data=_))}m1(h,e)})}function Ya(t,e,n){return{instance:t,listener:e,currentTarget:n}}function au(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ba(t,n),s!=null&&r.unshift(Ya(t,s,i)),s=Ba(t,e),s!=null&&r.push(Ya(t,s,i))),t=t.return}return r}function Ss(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function jy(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Ba(n,s),l!=null&&o.unshift(Ya(n,l,a))):i||(l=Ba(n,s),l!=null&&o.push(Ya(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var u2=/\r\n?/g,d2=/\u0000|\uFFFD/g;function Ry(t){return(typeof t=="string"?t:""+t).replace(u2,`
`).replace(d2,"")}function rc(t,e,n){if(e=Ry(e),Ry(t)!==e&&n)throw Error(Z(425))}function lu(){}var ip=null,sp=null;function op(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ap=typeof setTimeout=="function"?setTimeout:void 0,h2=typeof clearTimeout=="function"?clearTimeout:void 0,My=typeof Promise=="function"?Promise:void 0,f2=typeof queueMicrotask=="function"?queueMicrotask:typeof My<"u"?function(t){return My.resolve(null).then(t).catch(p2)}:ap;function p2(t){setTimeout(function(){throw t})}function _h(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ha(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ha(e)}function ui(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Iy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Oo=Math.random().toString(36).slice(2),Jn="__reactFiber$"+Oo,Ga="__reactProps$"+Oo,Mr="__reactContainer$"+Oo,lp="__reactEvents$"+Oo,m2="__reactListeners$"+Oo,g2="__reactHandles$"+Oo;function Bi(t){var e=t[Jn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Mr]||n[Jn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Iy(t);t!==null;){if(n=t[Jn])return n;t=Iy(t)}return e}t=n,n=t.parentNode}return null}function Pl(t){return t=t[Jn]||t[Mr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function zs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Z(33))}function rd(t){return t[Ga]||null}var cp=[],Fs=-1;function Ai(t){return{current:t}}function Ue(t){0>Fs||(t.current=cp[Fs],cp[Fs]=null,Fs--)}function De(t,e){Fs++,cp[Fs]=t.current,t.current=e}var xi={},Tt=Ai(xi),Ut=Ai(!1),Xi=xi;function vo(t,e){var n=t.type.contextTypes;if(!n)return xi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ht(t){return t=t.childContextTypes,t!=null}function cu(){Ue(Ut),Ue(Tt)}function Oy(t,e,n){if(Tt.current!==xi)throw Error(Z(168));De(Tt,e),De(Ut,n)}function v1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Z(108,eP(t)||"Unknown",i));return Ge({},n,r)}function uu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||xi,Xi=Tt.current,De(Tt,t),De(Ut,Ut.current),!0}function Ly(t,e,n){var r=t.stateNode;if(!r)throw Error(Z(169));n?(t=v1(t,e,Xi),r.__reactInternalMemoizedMergedChildContext=t,Ue(Ut),Ue(Tt),De(Tt,t)):Ue(Ut),De(Ut,n)}var Cr=null,id=!1,Th=!1;function y1(t){Cr===null?Cr=[t]:Cr.push(t)}function v2(t){id=!0,y1(t)}function Pi(){if(!Th&&Cr!==null){Th=!0;var t=0,e=Me;try{var n=Cr;for(Me=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Cr=null,id=!1}catch(i){throw Cr!==null&&(Cr=Cr.slice(t+1)),Ub(Bm,Pi),i}finally{Me=e,Th=!1}}return null}var Bs=[],Vs=0,du=null,hu=0,gn=[],vn=0,Qi=null,Nr=1,_r="";function $i(t,e){Bs[Vs++]=hu,Bs[Vs++]=du,du=t,hu=e}function x1(t,e,n){gn[vn++]=Nr,gn[vn++]=_r,gn[vn++]=Qi,Qi=t;var r=Nr;t=_r;var i=32-In(r)-1;r&=~(1<<i),n+=1;var s=32-In(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Nr=1<<32-In(e)+i|n<<i|r,_r=s+t}else Nr=1<<s|n<<i|r,_r=t}function Zm(t){t.return!==null&&($i(t,1),x1(t,1,0))}function Xm(t){for(;t===du;)du=Bs[--Vs],Bs[Vs]=null,hu=Bs[--Vs],Bs[Vs]=null;for(;t===Qi;)Qi=gn[--vn],gn[vn]=null,_r=gn[--vn],gn[vn]=null,Nr=gn[--vn],gn[vn]=null}var an=null,rn=null,He=!1,Rn=null;function w1(t,e){var n=xn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function $y(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,an=t,rn=ui(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,an=t,rn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Qi!==null?{id:Nr,overflow:_r}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=xn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,an=t,rn=null,!0):!1;default:return!1}}function up(t){return(t.mode&1)!==0&&(t.flags&128)===0}function dp(t){if(He){var e=rn;if(e){var n=e;if(!$y(t,e)){if(up(t))throw Error(Z(418));e=ui(n.nextSibling);var r=an;e&&$y(t,e)?w1(r,n):(t.flags=t.flags&-4097|2,He=!1,an=t)}}else{if(up(t))throw Error(Z(418));t.flags=t.flags&-4097|2,He=!1,an=t}}}function Dy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;an=t}function ic(t){if(t!==an)return!1;if(!He)return Dy(t),He=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!op(t.type,t.memoizedProps)),e&&(e=rn)){if(up(t))throw b1(),Error(Z(418));for(;e;)w1(t,e),e=ui(e.nextSibling)}if(Dy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){rn=ui(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}rn=null}}else rn=an?ui(t.stateNode.nextSibling):null;return!0}function b1(){for(var t=rn;t;)t=ui(t.nextSibling)}function yo(){rn=an=null,He=!1}function Qm(t){Rn===null?Rn=[t]:Rn.push(t)}var y2=zr.ReactCurrentBatchConfig;function Jo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Z(309));var r=n.stateNode}if(!r)throw Error(Z(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Z(284));if(!n._owner)throw Error(Z(290,t))}return t}function sc(t,e){throw t=Object.prototype.toString.call(e),Error(Z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function zy(t){var e=t._init;return e(t._payload)}function S1(t){function e(v,x){if(t){var b=v.deletions;b===null?(v.deletions=[x],v.flags|=16):b.push(x)}}function n(v,x){if(!t)return null;for(;x!==null;)e(v,x),x=x.sibling;return null}function r(v,x){for(v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function i(v,x){return v=pi(v,x),v.index=0,v.sibling=null,v}function s(v,x,b){return v.index=b,t?(b=v.alternate,b!==null?(b=b.index,b<x?(v.flags|=2,x):b):(v.flags|=2,x)):(v.flags|=1048576,x)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,x,b,S){return x===null||x.tag!==6?(x=Oh(b,v.mode,S),x.return=v,x):(x=i(x,b),x.return=v,x)}function l(v,x,b,S){var N=b.type;return N===Os?u(v,x,b.props.children,S,b.key):x!==null&&(x.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Qr&&zy(N)===x.type)?(S=i(x,b.props),S.ref=Jo(v,x,b),S.return=v,S):(S=Uc(b.type,b.key,b.props,null,v.mode,S),S.ref=Jo(v,x,b),S.return=v,S)}function c(v,x,b,S){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=Lh(b,v.mode,S),x.return=v,x):(x=i(x,b.children||[]),x.return=v,x)}function u(v,x,b,S,N){return x===null||x.tag!==7?(x=qi(b,v.mode,S,N),x.return=v,x):(x=i(x,b),x.return=v,x)}function h(v,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Oh(""+x,v.mode,b),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Yl:return b=Uc(x.type,x.key,x.props,null,v.mode,b),b.ref=Jo(v,null,x),b.return=v,b;case Is:return x=Lh(x,v.mode,b),x.return=v,x;case Qr:var S=x._init;return h(v,S(x._payload),b)}if(da(x)||Yo(x))return x=qi(x,v.mode,b,null),x.return=v,x;sc(v,x)}return null}function f(v,x,b,S){var N=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return N!==null?null:a(v,x,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Yl:return b.key===N?l(v,x,b,S):null;case Is:return b.key===N?c(v,x,b,S):null;case Qr:return N=b._init,f(v,x,N(b._payload),S)}if(da(b)||Yo(b))return N!==null?null:u(v,x,b,S,null);sc(v,b)}return null}function p(v,x,b,S,N){if(typeof S=="string"&&S!==""||typeof S=="number")return v=v.get(b)||null,a(x,v,""+S,N);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Yl:return v=v.get(S.key===null?b:S.key)||null,l(x,v,S,N);case Is:return v=v.get(S.key===null?b:S.key)||null,c(x,v,S,N);case Qr:var C=S._init;return p(v,x,b,C(S._payload),N)}if(da(S)||Yo(S))return v=v.get(b)||null,u(x,v,S,N,null);sc(x,S)}return null}function g(v,x,b,S){for(var N=null,C=null,_=x,P=x=0,I=null;_!==null&&P<b.length;P++){_.index>P?(I=_,_=null):I=_.sibling;var R=f(v,_,b[P],S);if(R===null){_===null&&(_=I);break}t&&_&&R.alternate===null&&e(v,_),x=s(R,x,P),C===null?N=R:C.sibling=R,C=R,_=I}if(P===b.length)return n(v,_),He&&$i(v,P),N;if(_===null){for(;P<b.length;P++)_=h(v,b[P],S),_!==null&&(x=s(_,x,P),C===null?N=_:C.sibling=_,C=_);return He&&$i(v,P),N}for(_=r(v,_);P<b.length;P++)I=p(_,v,P,b[P],S),I!==null&&(t&&I.alternate!==null&&_.delete(I.key===null?P:I.key),x=s(I,x,P),C===null?N=I:C.sibling=I,C=I);return t&&_.forEach(function(O){return e(v,O)}),He&&$i(v,P),N}function m(v,x,b,S){var N=Yo(b);if(typeof N!="function")throw Error(Z(150));if(b=N.call(b),b==null)throw Error(Z(151));for(var C=N=null,_=x,P=x=0,I=null,R=b.next();_!==null&&!R.done;P++,R=b.next()){_.index>P?(I=_,_=null):I=_.sibling;var O=f(v,_,R.value,S);if(O===null){_===null&&(_=I);break}t&&_&&O.alternate===null&&e(v,_),x=s(O,x,P),C===null?N=O:C.sibling=O,C=O,_=I}if(R.done)return n(v,_),He&&$i(v,P),N;if(_===null){for(;!R.done;P++,R=b.next())R=h(v,R.value,S),R!==null&&(x=s(R,x,P),C===null?N=R:C.sibling=R,C=R);return He&&$i(v,P),N}for(_=r(v,_);!R.done;P++,R=b.next())R=p(_,v,P,R.value,S),R!==null&&(t&&R.alternate!==null&&_.delete(R.key===null?P:R.key),x=s(R,x,P),C===null?N=R:C.sibling=R,C=R);return t&&_.forEach(function(j){return e(v,j)}),He&&$i(v,P),N}function w(v,x,b,S){if(typeof b=="object"&&b!==null&&b.type===Os&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Yl:e:{for(var N=b.key,C=x;C!==null;){if(C.key===N){if(N=b.type,N===Os){if(C.tag===7){n(v,C.sibling),x=i(C,b.props.children),x.return=v,v=x;break e}}else if(C.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Qr&&zy(N)===C.type){n(v,C.sibling),x=i(C,b.props),x.ref=Jo(v,C,b),x.return=v,v=x;break e}n(v,C);break}else e(v,C);C=C.sibling}b.type===Os?(x=qi(b.props.children,v.mode,S,b.key),x.return=v,v=x):(S=Uc(b.type,b.key,b.props,null,v.mode,S),S.ref=Jo(v,x,b),S.return=v,v=S)}return o(v);case Is:e:{for(C=b.key;x!==null;){if(x.key===C)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){n(v,x.sibling),x=i(x,b.children||[]),x.return=v,v=x;break e}else{n(v,x);break}else e(v,x);x=x.sibling}x=Lh(b,v.mode,S),x.return=v,v=x}return o(v);case Qr:return C=b._init,w(v,x,C(b._payload),S)}if(da(b))return g(v,x,b,S);if(Yo(b))return m(v,x,b,S);sc(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,x!==null&&x.tag===6?(n(v,x.sibling),x=i(x,b),x.return=v,v=x):(n(v,x),x=Oh(b,v.mode,S),x.return=v,v=x),o(v)):n(v,x)}return w}var xo=S1(!0),k1=S1(!1),fu=Ai(null),pu=null,Us=null,Jm=null;function eg(){Jm=Us=pu=null}function tg(t){var e=fu.current;Ue(fu),t._currentValue=e}function hp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function eo(t,e){pu=t,Jm=Us=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Vt=!0),t.firstContext=null)}function bn(t){var e=t._currentValue;if(Jm!==t)if(t={context:t,memoizedValue:e,next:null},Us===null){if(pu===null)throw Error(Z(308));Us=t,pu.dependencies={lanes:0,firstContext:t}}else Us=Us.next=t;return e}var Vi=null;function ng(t){Vi===null?Vi=[t]:Vi.push(t)}function C1(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,ng(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ir(t,r)}function Ir(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Jr=!1;function rg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function E1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function jr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function di(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ae&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ir(t,n)}return i=r.interleaved,i===null?(e.next=e,ng(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ir(t,n)}function $c(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Vm(t,n)}}function Fy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function mu(t,e,n,r){var i=t.updateQueue;Jr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,u=c=l=null,a=s;do{var f=a.lane,p=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,m=a;switch(f=e,p=n,m.tag){case 1:if(g=m.payload,typeof g=="function"){h=g.call(p,h,f);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=m.payload,f=typeof g=="function"?g.call(p,h,f):g,f==null)break e;h=Ge({},h,f);break e;case 2:Jr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=h):u=u.next=p,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);es|=o,t.lanes=o,t.memoizedState=h}}function By(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Z(191,i));i.call(r)}}}var jl={},ir=Ai(jl),Za=Ai(jl),Xa=Ai(jl);function Ui(t){if(t===jl)throw Error(Z(174));return t}function ig(t,e){switch(De(Xa,e),De(Za,t),De(ir,jl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:qf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=qf(e,t)}Ue(ir),De(ir,e)}function wo(){Ue(ir),Ue(Za),Ue(Xa)}function N1(t){Ui(Xa.current);var e=Ui(ir.current),n=qf(e,t.type);e!==n&&(De(Za,t),De(ir,n))}function sg(t){Za.current===t&&(Ue(ir),Ue(Za))}var qe=Ai(0);function gu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ah=[];function og(){for(var t=0;t<Ah.length;t++)Ah[t]._workInProgressVersionPrimary=null;Ah.length=0}var Dc=zr.ReactCurrentDispatcher,Ph=zr.ReactCurrentBatchConfig,Ji=0,Ke=null,lt=null,ht=null,vu=!1,Ea=!1,Qa=0,x2=0;function St(){throw Error(Z(321))}function ag(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!zn(t[n],e[n]))return!1;return!0}function lg(t,e,n,r,i,s){if(Ji=s,Ke=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Dc.current=t===null||t.memoizedState===null?k2:C2,t=n(r,i),Ea){s=0;do{if(Ea=!1,Qa=0,25<=s)throw Error(Z(301));s+=1,ht=lt=null,e.updateQueue=null,Dc.current=E2,t=n(r,i)}while(Ea)}if(Dc.current=yu,e=lt!==null&&lt.next!==null,Ji=0,ht=lt=Ke=null,vu=!1,e)throw Error(Z(300));return t}function cg(){var t=Qa!==0;return Qa=0,t}function Xn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ht===null?Ke.memoizedState=ht=t:ht=ht.next=t,ht}function Sn(){if(lt===null){var t=Ke.alternate;t=t!==null?t.memoizedState:null}else t=lt.next;var e=ht===null?Ke.memoizedState:ht.next;if(e!==null)ht=e,lt=t;else{if(t===null)throw Error(Z(310));lt=t,t={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},ht===null?Ke.memoizedState=ht=t:ht=ht.next=t}return ht}function Ja(t,e){return typeof e=="function"?e(t):e}function jh(t){var e=Sn(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var r=lt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Ji&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Ke.lanes|=u,es|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,zn(r,e.memoizedState)||(Vt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ke.lanes|=s,es|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Rh(t){var e=Sn(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);zn(s,e.memoizedState)||(Vt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function _1(){}function T1(t,e){var n=Ke,r=Sn(),i=e(),s=!zn(r.memoizedState,i);if(s&&(r.memoizedState=i,Vt=!0),r=r.queue,ug(j1.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||ht!==null&&ht.memoizedState.tag&1){if(n.flags|=2048,el(9,P1.bind(null,n,r,i,e),void 0,null),pt===null)throw Error(Z(349));Ji&30||A1(n,e,i)}return i}function A1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ke.updateQueue,e===null?(e={lastEffect:null,stores:null},Ke.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function P1(t,e,n,r){e.value=n,e.getSnapshot=r,R1(e)&&M1(t)}function j1(t,e,n){return n(function(){R1(e)&&M1(t)})}function R1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!zn(t,n)}catch{return!0}}function M1(t){var e=Ir(t,1);e!==null&&On(e,t,1,-1)}function Vy(t){var e=Xn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ja,lastRenderedState:t},e.queue=t,t=t.dispatch=S2.bind(null,Ke,t),[e.memoizedState,t]}function el(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ke.updateQueue,e===null?(e={lastEffect:null,stores:null},Ke.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function I1(){return Sn().memoizedState}function zc(t,e,n,r){var i=Xn();Ke.flags|=t,i.memoizedState=el(1|e,n,void 0,r===void 0?null:r)}function sd(t,e,n,r){var i=Sn();r=r===void 0?null:r;var s=void 0;if(lt!==null){var o=lt.memoizedState;if(s=o.destroy,r!==null&&ag(r,o.deps)){i.memoizedState=el(e,n,s,r);return}}Ke.flags|=t,i.memoizedState=el(1|e,n,s,r)}function Uy(t,e){return zc(8390656,8,t,e)}function ug(t,e){return sd(2048,8,t,e)}function O1(t,e){return sd(4,2,t,e)}function L1(t,e){return sd(4,4,t,e)}function $1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function D1(t,e,n){return n=n!=null?n.concat([t]):null,sd(4,4,$1.bind(null,e,t),n)}function dg(){}function z1(t,e){var n=Sn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ag(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function F1(t,e){var n=Sn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ag(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function B1(t,e,n){return Ji&21?(zn(n,e)||(n=qb(),Ke.lanes|=n,es|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Vt=!0),t.memoizedState=n)}function w2(t,e){var n=Me;Me=n!==0&&4>n?n:4,t(!0);var r=Ph.transition;Ph.transition={};try{t(!1),e()}finally{Me=n,Ph.transition=r}}function V1(){return Sn().memoizedState}function b2(t,e,n){var r=fi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},U1(t))H1(e,n);else if(n=C1(t,e,n,r),n!==null){var i=Rt();On(n,t,r,i),W1(n,e,r)}}function S2(t,e,n){var r=fi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(U1(t))H1(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,zn(a,o)){var l=e.interleaved;l===null?(i.next=i,ng(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=C1(t,e,i,r),n!==null&&(i=Rt(),On(n,t,r,i),W1(n,e,r))}}function U1(t){var e=t.alternate;return t===Ke||e!==null&&e===Ke}function H1(t,e){Ea=vu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function W1(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Vm(t,n)}}var yu={readContext:bn,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useInsertionEffect:St,useLayoutEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useMutableSource:St,useSyncExternalStore:St,useId:St,unstable_isNewReconciler:!1},k2={readContext:bn,useCallback:function(t,e){return Xn().memoizedState=[t,e===void 0?null:e],t},useContext:bn,useEffect:Uy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,zc(4194308,4,$1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return zc(4194308,4,t,e)},useInsertionEffect:function(t,e){return zc(4,2,t,e)},useMemo:function(t,e){var n=Xn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Xn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=b2.bind(null,Ke,t),[r.memoizedState,t]},useRef:function(t){var e=Xn();return t={current:t},e.memoizedState=t},useState:Vy,useDebugValue:dg,useDeferredValue:function(t){return Xn().memoizedState=t},useTransition:function(){var t=Vy(!1),e=t[0];return t=w2.bind(null,t[1]),Xn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ke,i=Xn();if(He){if(n===void 0)throw Error(Z(407));n=n()}else{if(n=e(),pt===null)throw Error(Z(349));Ji&30||A1(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Uy(j1.bind(null,r,s,t),[t]),r.flags|=2048,el(9,P1.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Xn(),e=pt.identifierPrefix;if(He){var n=_r,r=Nr;n=(r&~(1<<32-In(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Qa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=x2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},C2={readContext:bn,useCallback:z1,useContext:bn,useEffect:ug,useImperativeHandle:D1,useInsertionEffect:O1,useLayoutEffect:L1,useMemo:F1,useReducer:jh,useRef:I1,useState:function(){return jh(Ja)},useDebugValue:dg,useDeferredValue:function(t){var e=Sn();return B1(e,lt.memoizedState,t)},useTransition:function(){var t=jh(Ja)[0],e=Sn().memoizedState;return[t,e]},useMutableSource:_1,useSyncExternalStore:T1,useId:V1,unstable_isNewReconciler:!1},E2={readContext:bn,useCallback:z1,useContext:bn,useEffect:ug,useImperativeHandle:D1,useInsertionEffect:O1,useLayoutEffect:L1,useMemo:F1,useReducer:Rh,useRef:I1,useState:function(){return Rh(Ja)},useDebugValue:dg,useDeferredValue:function(t){var e=Sn();return lt===null?e.memoizedState=t:B1(e,lt.memoizedState,t)},useTransition:function(){var t=Rh(Ja)[0],e=Sn().memoizedState;return[t,e]},useMutableSource:_1,useSyncExternalStore:T1,useId:V1,unstable_isNewReconciler:!1};function Pn(t,e){if(t&&t.defaultProps){e=Ge({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function fp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ge({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var od={isMounted:function(t){return(t=t._reactInternals)?ms(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Rt(),i=fi(t),s=jr(r,i);s.payload=e,n!=null&&(s.callback=n),e=di(t,s,i),e!==null&&(On(e,t,i,r),$c(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Rt(),i=fi(t),s=jr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=di(t,s,i),e!==null&&(On(e,t,i,r),$c(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Rt(),r=fi(t),i=jr(n,r);i.tag=2,e!=null&&(i.callback=e),e=di(t,i,r),e!==null&&(On(e,t,r,n),$c(e,t,r))}};function Hy(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!qa(n,r)||!qa(i,s):!0}function q1(t,e,n){var r=!1,i=xi,s=e.contextType;return typeof s=="object"&&s!==null?s=bn(s):(i=Ht(e)?Xi:Tt.current,r=e.contextTypes,s=(r=r!=null)?vo(t,i):xi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=od,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Wy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&od.enqueueReplaceState(e,e.state,null)}function pp(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},rg(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=bn(s):(s=Ht(e)?Xi:Tt.current,i.context=vo(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(fp(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&od.enqueueReplaceState(i,i.state,null),mu(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function bo(t,e){try{var n="",r=e;do n+=JA(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Mh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function mp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var N2=typeof WeakMap=="function"?WeakMap:Map;function K1(t,e,n){n=jr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){wu||(wu=!0,Ep=r),mp(t,e)},n}function Y1(t,e,n){n=jr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){mp(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){mp(t,e),typeof r!="function"&&(hi===null?hi=new Set([this]):hi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function qy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new N2;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=F2.bind(null,t,e,n),e.then(t,t))}function Ky(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Yy(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=jr(-1,1),e.tag=2,di(n,e,1))),n.lanes|=1),t)}var _2=zr.ReactCurrentOwner,Vt=!1;function jt(t,e,n,r){e.child=t===null?k1(e,null,n,r):xo(e,t.child,n,r)}function Gy(t,e,n,r,i){n=n.render;var s=e.ref;return eo(e,i),r=lg(t,e,n,r,s,i),n=cg(),t!==null&&!Vt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Or(t,e,i)):(He&&n&&Zm(e),e.flags|=1,jt(t,e,r,i),e.child)}function Zy(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!xg(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,G1(t,e,s,r,i)):(t=Uc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:qa,n(o,r)&&t.ref===e.ref)return Or(t,e,i)}return e.flags|=1,t=pi(s,r),t.ref=e.ref,t.return=e,e.child=t}function G1(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(qa(s,r)&&t.ref===e.ref)if(Vt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Vt=!0);else return e.lanes=t.lanes,Or(t,e,i)}return gp(t,e,n,r,i)}function Z1(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},De(Ws,en),en|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,De(Ws,en),en|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,De(Ws,en),en|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,De(Ws,en),en|=r;return jt(t,e,i,n),e.child}function X1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function gp(t,e,n,r,i){var s=Ht(n)?Xi:Tt.current;return s=vo(e,s),eo(e,i),n=lg(t,e,n,r,s,i),r=cg(),t!==null&&!Vt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Or(t,e,i)):(He&&r&&Zm(e),e.flags|=1,jt(t,e,n,i),e.child)}function Xy(t,e,n,r,i){if(Ht(n)){var s=!0;uu(e)}else s=!1;if(eo(e,i),e.stateNode===null)Fc(t,e),q1(e,n,r),pp(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=bn(c):(c=Ht(n)?Xi:Tt.current,c=vo(e,c));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Wy(e,o,r,c),Jr=!1;var f=e.memoizedState;o.state=f,mu(e,r,o,i),l=e.memoizedState,a!==r||f!==l||Ut.current||Jr?(typeof u=="function"&&(fp(e,n,u,r),l=e.memoizedState),(a=Jr||Hy(e,n,a,r,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,E1(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Pn(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=bn(l):(l=Ht(n)?Xi:Tt.current,l=vo(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&Wy(e,o,r,l),Jr=!1,f=e.memoizedState,o.state=f,mu(e,r,o,i);var g=e.memoizedState;a!==h||f!==g||Ut.current||Jr?(typeof p=="function"&&(fp(e,n,p,r),g=e.memoizedState),(c=Jr||Hy(e,n,c,r,f,g,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return vp(t,e,n,r,s,i)}function vp(t,e,n,r,i,s){X1(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Ly(e,n,!1),Or(t,e,s);r=e.stateNode,_2.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=xo(e,t.child,null,s),e.child=xo(e,null,a,s)):jt(t,e,a,s),e.memoizedState=r.state,i&&Ly(e,n,!0),e.child}function Q1(t){var e=t.stateNode;e.pendingContext?Oy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Oy(t,e.context,!1),ig(t,e.containerInfo)}function Qy(t,e,n,r,i){return yo(),Qm(i),e.flags|=256,jt(t,e,n,r),e.child}var yp={dehydrated:null,treeContext:null,retryLane:0};function xp(t){return{baseLanes:t,cachePool:null,transitions:null}}function J1(t,e,n){var r=e.pendingProps,i=qe.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),De(qe,i&1),t===null)return dp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=cd(o,r,0,null),t=qi(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=xp(n),e.memoizedState=yp,t):hg(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return T2(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=pi(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=pi(a,s):(s=qi(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?xp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=yp,r}return s=t.child,t=s.sibling,r=pi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function hg(t,e){return e=cd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function oc(t,e,n,r){return r!==null&&Qm(r),xo(e,t.child,null,n),t=hg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function T2(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Mh(Error(Z(422))),oc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=cd({mode:"visible",children:r.children},i,0,null),s=qi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&xo(e,t.child,null,o),e.child.memoizedState=xp(o),e.memoizedState=yp,s);if(!(e.mode&1))return oc(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Z(419)),r=Mh(s,r,void 0),oc(t,e,o,r)}if(a=(o&t.childLanes)!==0,Vt||a){if(r=pt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ir(t,i),On(r,t,i,-1))}return yg(),r=Mh(Error(Z(421))),oc(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=B2.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,rn=ui(i.nextSibling),an=e,He=!0,Rn=null,t!==null&&(gn[vn++]=Nr,gn[vn++]=_r,gn[vn++]=Qi,Nr=t.id,_r=t.overflow,Qi=e),e=hg(e,r.children),e.flags|=4096,e)}function Jy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),hp(t.return,e,n)}function Ih(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function eS(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(jt(t,e,r.children,n),r=qe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Jy(t,n,e);else if(t.tag===19)Jy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(De(qe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&gu(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ih(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&gu(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ih(e,!0,n,null,s);break;case"together":Ih(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Fc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Or(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),es|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Z(153));if(e.child!==null){for(t=e.child,n=pi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=pi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function A2(t,e,n){switch(e.tag){case 3:Q1(e),yo();break;case 5:N1(e);break;case 1:Ht(e.type)&&uu(e);break;case 4:ig(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;De(fu,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(De(qe,qe.current&1),e.flags|=128,null):n&e.child.childLanes?J1(t,e,n):(De(qe,qe.current&1),t=Or(t,e,n),t!==null?t.sibling:null);De(qe,qe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return eS(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),De(qe,qe.current),r)break;return null;case 22:case 23:return e.lanes=0,Z1(t,e,n)}return Or(t,e,n)}var tS,wp,nS,rS;tS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};wp=function(){};nS=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ui(ir.current);var s=null;switch(n){case"input":i=Vf(t,i),r=Vf(t,r),s=[];break;case"select":i=Ge({},i,{value:void 0}),r=Ge({},r,{value:void 0}),s=[];break;case"textarea":i=Wf(t,i),r=Wf(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=lu)}Kf(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(za.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(za.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Be("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};rS=function(t,e,n,r){n!==r&&(e.flags|=4)};function ea(t,e){if(!He)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function kt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function P2(t,e,n){var r=e.pendingProps;switch(Xm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(e),null;case 1:return Ht(e.type)&&cu(),kt(e),null;case 3:return r=e.stateNode,wo(),Ue(Ut),Ue(Tt),og(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ic(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Rn!==null&&(Tp(Rn),Rn=null))),wp(t,e),kt(e),null;case 5:sg(e);var i=Ui(Xa.current);if(n=e.type,t!==null&&e.stateNode!=null)nS(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Z(166));return kt(e),null}if(t=Ui(ir.current),ic(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Jn]=e,r[Ga]=s,t=(e.mode&1)!==0,n){case"dialog":Be("cancel",r),Be("close",r);break;case"iframe":case"object":case"embed":Be("load",r);break;case"video":case"audio":for(i=0;i<fa.length;i++)Be(fa[i],r);break;case"source":Be("error",r);break;case"img":case"image":case"link":Be("error",r),Be("load",r);break;case"details":Be("toggle",r);break;case"input":ly(r,s),Be("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Be("invalid",r);break;case"textarea":uy(r,s),Be("invalid",r)}Kf(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&rc(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&rc(r.textContent,a,t),i=["children",""+a]):za.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Be("scroll",r)}switch(n){case"input":Gl(r),cy(r,s,!0);break;case"textarea":Gl(r),dy(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=lu)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=jb(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Jn]=e,t[Ga]=r,tS(t,e,!1,!1),e.stateNode=t;e:{switch(o=Yf(n,r),n){case"dialog":Be("cancel",t),Be("close",t),i=r;break;case"iframe":case"object":case"embed":Be("load",t),i=r;break;case"video":case"audio":for(i=0;i<fa.length;i++)Be(fa[i],t);i=r;break;case"source":Be("error",t),i=r;break;case"img":case"image":case"link":Be("error",t),Be("load",t),i=r;break;case"details":Be("toggle",t),i=r;break;case"input":ly(t,r),i=Vf(t,r),Be("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ge({},r,{value:void 0}),Be("invalid",t);break;case"textarea":uy(t,r),i=Wf(t,r),Be("invalid",t);break;default:i=r}Kf(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Ib(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Rb(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Fa(t,l):typeof l=="number"&&Fa(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(za.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Be("scroll",t):l!=null&&Lm(t,s,l,o))}switch(n){case"input":Gl(t),cy(t,r,!1);break;case"textarea":Gl(t),dy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+yi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Zs(t,!!r.multiple,s,!1):r.defaultValue!=null&&Zs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=lu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return kt(e),null;case 6:if(t&&e.stateNode!=null)rS(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Z(166));if(n=Ui(Xa.current),Ui(ir.current),ic(e)){if(r=e.stateNode,n=e.memoizedProps,r[Jn]=e,(s=r.nodeValue!==n)&&(t=an,t!==null))switch(t.tag){case 3:rc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&rc(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Jn]=e,e.stateNode=r}return kt(e),null;case 13:if(Ue(qe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(He&&rn!==null&&e.mode&1&&!(e.flags&128))b1(),yo(),e.flags|=98560,s=!1;else if(s=ic(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Z(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Z(317));s[Jn]=e}else yo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;kt(e),s=!1}else Rn!==null&&(Tp(Rn),Rn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||qe.current&1?ct===0&&(ct=3):yg())),e.updateQueue!==null&&(e.flags|=4),kt(e),null);case 4:return wo(),wp(t,e),t===null&&Ka(e.stateNode.containerInfo),kt(e),null;case 10:return tg(e.type._context),kt(e),null;case 17:return Ht(e.type)&&cu(),kt(e),null;case 19:if(Ue(qe),s=e.memoizedState,s===null)return kt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ea(s,!1);else{if(ct!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=gu(t),o!==null){for(e.flags|=128,ea(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return De(qe,qe.current&1|2),e.child}t=t.sibling}s.tail!==null&&Je()>So&&(e.flags|=128,r=!0,ea(s,!1),e.lanes=4194304)}else{if(!r)if(t=gu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ea(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!He)return kt(e),null}else 2*Je()-s.renderingStartTime>So&&n!==1073741824&&(e.flags|=128,r=!0,ea(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Je(),e.sibling=null,n=qe.current,De(qe,r?n&1|2:n&1),e):(kt(e),null);case 22:case 23:return vg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?en&1073741824&&(kt(e),e.subtreeFlags&6&&(e.flags|=8192)):kt(e),null;case 24:return null;case 25:return null}throw Error(Z(156,e.tag))}function j2(t,e){switch(Xm(e),e.tag){case 1:return Ht(e.type)&&cu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return wo(),Ue(Ut),Ue(Tt),og(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return sg(e),null;case 13:if(Ue(qe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Z(340));yo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ue(qe),null;case 4:return wo(),null;case 10:return tg(e.type._context),null;case 22:case 23:return vg(),null;case 24:return null;default:return null}}var ac=!1,Et=!1,R2=typeof WeakSet=="function"?WeakSet:Set,se=null;function Hs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ze(t,e,r)}else n.current=null}function bp(t,e,n){try{n()}catch(r){Ze(t,e,r)}}var ex=!1;function M2(t,e){if(ip=su,t=l1(),Gm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=t,f=null;t:for(;;){for(var p;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===n&&++c===i&&(a=o),f===s&&++u===r&&(l=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(sp={focusedElem:t,selectionRange:n},su=!1,se=e;se!==null;)if(e=se,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,se=t;else for(;se!==null;){e=se;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var m=g.memoizedProps,w=g.memoizedState,v=e.stateNode,x=v.getSnapshotBeforeUpdate(e.elementType===e.type?m:Pn(e.type,m),w);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(S){Ze(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,se=t;break}se=e.return}return g=ex,ex=!1,g}function Na(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&bp(e,n,s)}i=i.next}while(i!==r)}}function ad(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Sp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function iS(t){var e=t.alternate;e!==null&&(t.alternate=null,iS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Jn],delete e[Ga],delete e[lp],delete e[m2],delete e[g2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function sS(t){return t.tag===5||t.tag===3||t.tag===4}function tx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||sS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function kp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=lu));else if(r!==4&&(t=t.child,t!==null))for(kp(t,e,n),t=t.sibling;t!==null;)kp(t,e,n),t=t.sibling}function Cp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Cp(t,e,n),t=t.sibling;t!==null;)Cp(t,e,n),t=t.sibling}var vt=null,jn=!1;function qr(t,e,n){for(n=n.child;n!==null;)oS(t,e,n),n=n.sibling}function oS(t,e,n){if(rr&&typeof rr.onCommitFiberUnmount=="function")try{rr.onCommitFiberUnmount(Ju,n)}catch{}switch(n.tag){case 5:Et||Hs(n,e);case 6:var r=vt,i=jn;vt=null,qr(t,e,n),vt=r,jn=i,vt!==null&&(jn?(t=vt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):vt.removeChild(n.stateNode));break;case 18:vt!==null&&(jn?(t=vt,n=n.stateNode,t.nodeType===8?_h(t.parentNode,n):t.nodeType===1&&_h(t,n),Ha(t)):_h(vt,n.stateNode));break;case 4:r=vt,i=jn,vt=n.stateNode.containerInfo,jn=!0,qr(t,e,n),vt=r,jn=i;break;case 0:case 11:case 14:case 15:if(!Et&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&bp(n,e,o),i=i.next}while(i!==r)}qr(t,e,n);break;case 1:if(!Et&&(Hs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ze(n,e,a)}qr(t,e,n);break;case 21:qr(t,e,n);break;case 22:n.mode&1?(Et=(r=Et)||n.memoizedState!==null,qr(t,e,n),Et=r):qr(t,e,n);break;default:qr(t,e,n)}}function nx(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new R2),e.forEach(function(r){var i=V2.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Tn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:vt=a.stateNode,jn=!1;break e;case 3:vt=a.stateNode.containerInfo,jn=!0;break e;case 4:vt=a.stateNode.containerInfo,jn=!0;break e}a=a.return}if(vt===null)throw Error(Z(160));oS(s,o,i),vt=null,jn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Ze(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)aS(e,t),e=e.sibling}function aS(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Tn(e,t),Yn(t),r&4){try{Na(3,t,t.return),ad(3,t)}catch(m){Ze(t,t.return,m)}try{Na(5,t,t.return)}catch(m){Ze(t,t.return,m)}}break;case 1:Tn(e,t),Yn(t),r&512&&n!==null&&Hs(n,n.return);break;case 5:if(Tn(e,t),Yn(t),r&512&&n!==null&&Hs(n,n.return),t.flags&32){var i=t.stateNode;try{Fa(i,"")}catch(m){Ze(t,t.return,m)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Ab(i,s),Yf(a,o);var c=Yf(a,s);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?Ib(i,h):u==="dangerouslySetInnerHTML"?Rb(i,h):u==="children"?Fa(i,h):Lm(i,u,h,c)}switch(a){case"input":Uf(i,s);break;case"textarea":Pb(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Zs(i,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?Zs(i,!!s.multiple,s.defaultValue,!0):Zs(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ga]=s}catch(m){Ze(t,t.return,m)}}break;case 6:if(Tn(e,t),Yn(t),r&4){if(t.stateNode===null)throw Error(Z(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(m){Ze(t,t.return,m)}}break;case 3:if(Tn(e,t),Yn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ha(e.containerInfo)}catch(m){Ze(t,t.return,m)}break;case 4:Tn(e,t),Yn(t);break;case 13:Tn(e,t),Yn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(mg=Je())),r&4&&nx(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Et=(c=Et)||u,Tn(e,t),Et=c):Tn(e,t),Yn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(se=t,u=t.child;u!==null;){for(h=se=u;se!==null;){switch(f=se,p=f.child,f.tag){case 0:case 11:case 14:case 15:Na(4,f,f.return);break;case 1:Hs(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(m){Ze(r,n,m)}}break;case 5:Hs(f,f.return);break;case 22:if(f.memoizedState!==null){ix(h);continue}}p!==null?(p.return=f,se=p):ix(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Mb("display",o))}catch(m){Ze(t,t.return,m)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(m){Ze(t,t.return,m)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Tn(e,t),Yn(t),r&4&&nx(t);break;case 21:break;default:Tn(e,t),Yn(t)}}function Yn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(sS(n)){var r=n;break e}n=n.return}throw Error(Z(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Fa(i,""),r.flags&=-33);var s=tx(t);Cp(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=tx(t);kp(t,a,o);break;default:throw Error(Z(161))}}catch(l){Ze(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function I2(t,e,n){se=t,lS(t)}function lS(t,e,n){for(var r=(t.mode&1)!==0;se!==null;){var i=se,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||ac;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Et;a=ac;var c=Et;if(ac=o,(Et=l)&&!c)for(se=i;se!==null;)o=se,l=o.child,o.tag===22&&o.memoizedState!==null?sx(i):l!==null?(l.return=o,se=l):sx(i);for(;s!==null;)se=s,lS(s),s=s.sibling;se=i,ac=a,Et=c}rx(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,se=s):rx(t)}}function rx(t){for(;se!==null;){var e=se;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Et||ad(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Et)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Pn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&By(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}By(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Ha(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}Et||e.flags&512&&Sp(e)}catch(f){Ze(e,e.return,f)}}if(e===t){se=null;break}if(n=e.sibling,n!==null){n.return=e.return,se=n;break}se=e.return}}function ix(t){for(;se!==null;){var e=se;if(e===t){se=null;break}var n=e.sibling;if(n!==null){n.return=e.return,se=n;break}se=e.return}}function sx(t){for(;se!==null;){var e=se;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ad(4,e)}catch(l){Ze(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ze(e,i,l)}}var s=e.return;try{Sp(e)}catch(l){Ze(e,s,l)}break;case 5:var o=e.return;try{Sp(e)}catch(l){Ze(e,o,l)}}}catch(l){Ze(e,e.return,l)}if(e===t){se=null;break}var a=e.sibling;if(a!==null){a.return=e.return,se=a;break}se=e.return}}var O2=Math.ceil,xu=zr.ReactCurrentDispatcher,fg=zr.ReactCurrentOwner,wn=zr.ReactCurrentBatchConfig,Ae=0,pt=null,it=null,xt=0,en=0,Ws=Ai(0),ct=0,tl=null,es=0,ld=0,pg=0,_a=null,Bt=null,mg=0,So=1/0,kr=null,wu=!1,Ep=null,hi=null,lc=!1,ii=null,bu=0,Ta=0,Np=null,Bc=-1,Vc=0;function Rt(){return Ae&6?Je():Bc!==-1?Bc:Bc=Je()}function fi(t){return t.mode&1?Ae&2&&xt!==0?xt&-xt:y2.transition!==null?(Vc===0&&(Vc=qb()),Vc):(t=Me,t!==0||(t=window.event,t=t===void 0?16:Jb(t.type)),t):1}function On(t,e,n,r){if(50<Ta)throw Ta=0,Np=null,Error(Z(185));Tl(t,n,r),(!(Ae&2)||t!==pt)&&(t===pt&&(!(Ae&2)&&(ld|=n),ct===4&&ti(t,xt)),Wt(t,r),n===1&&Ae===0&&!(e.mode&1)&&(So=Je()+500,id&&Pi()))}function Wt(t,e){var n=t.callbackNode;yP(t,e);var r=iu(t,t===pt?xt:0);if(r===0)n!==null&&py(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&py(n),e===1)t.tag===0?v2(ox.bind(null,t)):y1(ox.bind(null,t)),f2(function(){!(Ae&6)&&Pi()}),n=null;else{switch(Kb(r)){case 1:n=Bm;break;case 4:n=Hb;break;case 16:n=ru;break;case 536870912:n=Wb;break;default:n=ru}n=gS(n,cS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function cS(t,e){if(Bc=-1,Vc=0,Ae&6)throw Error(Z(327));var n=t.callbackNode;if(to()&&t.callbackNode!==n)return null;var r=iu(t,t===pt?xt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Su(t,r);else{e=r;var i=Ae;Ae|=2;var s=dS();(pt!==t||xt!==e)&&(kr=null,So=Je()+500,Wi(t,e));do try{D2();break}catch(a){uS(t,a)}while(!0);eg(),xu.current=s,Ae=i,it!==null?e=0:(pt=null,xt=0,e=ct)}if(e!==0){if(e===2&&(i=Jf(t),i!==0&&(r=i,e=_p(t,i))),e===1)throw n=tl,Wi(t,0),ti(t,r),Wt(t,Je()),n;if(e===6)ti(t,r);else{if(i=t.current.alternate,!(r&30)&&!L2(i)&&(e=Su(t,r),e===2&&(s=Jf(t),s!==0&&(r=s,e=_p(t,s))),e===1))throw n=tl,Wi(t,0),ti(t,r),Wt(t,Je()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Z(345));case 2:Di(t,Bt,kr);break;case 3:if(ti(t,r),(r&130023424)===r&&(e=mg+500-Je(),10<e)){if(iu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Rt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ap(Di.bind(null,t,Bt,kr),e);break}Di(t,Bt,kr);break;case 4:if(ti(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-In(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Je()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*O2(r/1960))-r,10<r){t.timeoutHandle=ap(Di.bind(null,t,Bt,kr),r);break}Di(t,Bt,kr);break;case 5:Di(t,Bt,kr);break;default:throw Error(Z(329))}}}return Wt(t,Je()),t.callbackNode===n?cS.bind(null,t):null}function _p(t,e){var n=_a;return t.current.memoizedState.isDehydrated&&(Wi(t,e).flags|=256),t=Su(t,e),t!==2&&(e=Bt,Bt=n,e!==null&&Tp(e)),t}function Tp(t){Bt===null?Bt=t:Bt.push.apply(Bt,t)}function L2(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!zn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ti(t,e){for(e&=~pg,e&=~ld,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-In(e),r=1<<n;t[n]=-1,e&=~r}}function ox(t){if(Ae&6)throw Error(Z(327));to();var e=iu(t,0);if(!(e&1))return Wt(t,Je()),null;var n=Su(t,e);if(t.tag!==0&&n===2){var r=Jf(t);r!==0&&(e=r,n=_p(t,r))}if(n===1)throw n=tl,Wi(t,0),ti(t,e),Wt(t,Je()),n;if(n===6)throw Error(Z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Di(t,Bt,kr),Wt(t,Je()),null}function gg(t,e){var n=Ae;Ae|=1;try{return t(e)}finally{Ae=n,Ae===0&&(So=Je()+500,id&&Pi())}}function ts(t){ii!==null&&ii.tag===0&&!(Ae&6)&&to();var e=Ae;Ae|=1;var n=wn.transition,r=Me;try{if(wn.transition=null,Me=1,t)return t()}finally{Me=r,wn.transition=n,Ae=e,!(Ae&6)&&Pi()}}function vg(){en=Ws.current,Ue(Ws)}function Wi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,h2(n)),it!==null)for(n=it.return;n!==null;){var r=n;switch(Xm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&cu();break;case 3:wo(),Ue(Ut),Ue(Tt),og();break;case 5:sg(r);break;case 4:wo();break;case 13:Ue(qe);break;case 19:Ue(qe);break;case 10:tg(r.type._context);break;case 22:case 23:vg()}n=n.return}if(pt=t,it=t=pi(t.current,null),xt=en=e,ct=0,tl=null,pg=ld=es=0,Bt=_a=null,Vi!==null){for(e=0;e<Vi.length;e++)if(n=Vi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Vi=null}return t}function uS(t,e){do{var n=it;try{if(eg(),Dc.current=yu,vu){for(var r=Ke.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}vu=!1}if(Ji=0,ht=lt=Ke=null,Ea=!1,Qa=0,fg.current=null,n===null||n.return===null){ct=1,tl=e,it=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=xt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=Ky(o);if(p!==null){p.flags&=-257,Yy(p,o,a,s,e),p.mode&1&&qy(s,c,e),e=p,l=c;var g=e.updateQueue;if(g===null){var m=new Set;m.add(l),e.updateQueue=m}else g.add(l);break e}else{if(!(e&1)){qy(s,c,e),yg();break e}l=Error(Z(426))}}else if(He&&a.mode&1){var w=Ky(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Yy(w,o,a,s,e),Qm(bo(l,a));break e}}s=l=bo(l,a),ct!==4&&(ct=2),_a===null?_a=[s]:_a.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=K1(s,l,e);Fy(s,v);break e;case 1:a=l;var x=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(hi===null||!hi.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=Y1(s,a,e);Fy(s,S);break e}}s=s.return}while(s!==null)}fS(n)}catch(N){e=N,it===n&&n!==null&&(it=n=n.return);continue}break}while(!0)}function dS(){var t=xu.current;return xu.current=yu,t===null?yu:t}function yg(){(ct===0||ct===3||ct===2)&&(ct=4),pt===null||!(es&268435455)&&!(ld&268435455)||ti(pt,xt)}function Su(t,e){var n=Ae;Ae|=2;var r=dS();(pt!==t||xt!==e)&&(kr=null,Wi(t,e));do try{$2();break}catch(i){uS(t,i)}while(!0);if(eg(),Ae=n,xu.current=r,it!==null)throw Error(Z(261));return pt=null,xt=0,ct}function $2(){for(;it!==null;)hS(it)}function D2(){for(;it!==null&&!cP();)hS(it)}function hS(t){var e=mS(t.alternate,t,en);t.memoizedProps=t.pendingProps,e===null?fS(t):it=e,fg.current=null}function fS(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=j2(n,e),n!==null){n.flags&=32767,it=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ct=6,it=null;return}}else if(n=P2(n,e,en),n!==null){it=n;return}if(e=e.sibling,e!==null){it=e;return}it=e=t}while(e!==null);ct===0&&(ct=5)}function Di(t,e,n){var r=Me,i=wn.transition;try{wn.transition=null,Me=1,z2(t,e,n,r)}finally{wn.transition=i,Me=r}return null}function z2(t,e,n,r){do to();while(ii!==null);if(Ae&6)throw Error(Z(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Z(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(xP(t,s),t===pt&&(it=pt=null,xt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||lc||(lc=!0,gS(ru,function(){return to(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=wn.transition,wn.transition=null;var o=Me;Me=1;var a=Ae;Ae|=4,fg.current=null,M2(t,n),aS(n,t),s2(sp),su=!!ip,sp=ip=null,t.current=n,I2(n),uP(),Ae=a,Me=o,wn.transition=s}else t.current=n;if(lc&&(lc=!1,ii=t,bu=i),s=t.pendingLanes,s===0&&(hi=null),fP(n.stateNode),Wt(t,Je()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(wu)throw wu=!1,t=Ep,Ep=null,t;return bu&1&&t.tag!==0&&to(),s=t.pendingLanes,s&1?t===Np?Ta++:(Ta=0,Np=t):Ta=0,Pi(),null}function to(){if(ii!==null){var t=Kb(bu),e=wn.transition,n=Me;try{if(wn.transition=null,Me=16>t?16:t,ii===null)var r=!1;else{if(t=ii,ii=null,bu=0,Ae&6)throw Error(Z(331));var i=Ae;for(Ae|=4,se=t.current;se!==null;){var s=se,o=s.child;if(se.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(se=c;se!==null;){var u=se;switch(u.tag){case 0:case 11:case 15:Na(8,u,s)}var h=u.child;if(h!==null)h.return=u,se=h;else for(;se!==null;){u=se;var f=u.sibling,p=u.return;if(iS(u),u===c){se=null;break}if(f!==null){f.return=p,se=f;break}se=p}}}var g=s.alternate;if(g!==null){var m=g.child;if(m!==null){g.child=null;do{var w=m.sibling;m.sibling=null,m=w}while(m!==null)}}se=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,se=o;else e:for(;se!==null;){if(s=se,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Na(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,se=v;break e}se=s.return}}var x=t.current;for(se=x;se!==null;){o=se;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,se=b;else e:for(o=x;se!==null;){if(a=se,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ad(9,a)}}catch(N){Ze(a,a.return,N)}if(a===o){se=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,se=S;break e}se=a.return}}if(Ae=i,Pi(),rr&&typeof rr.onPostCommitFiberRoot=="function")try{rr.onPostCommitFiberRoot(Ju,t)}catch{}r=!0}return r}finally{Me=n,wn.transition=e}}return!1}function ax(t,e,n){e=bo(n,e),e=K1(t,e,1),t=di(t,e,1),e=Rt(),t!==null&&(Tl(t,1,e),Wt(t,e))}function Ze(t,e,n){if(t.tag===3)ax(t,t,n);else for(;e!==null;){if(e.tag===3){ax(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(hi===null||!hi.has(r))){t=bo(n,t),t=Y1(e,t,1),e=di(e,t,1),t=Rt(),e!==null&&(Tl(e,1,t),Wt(e,t));break}}e=e.return}}function F2(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Rt(),t.pingedLanes|=t.suspendedLanes&n,pt===t&&(xt&n)===n&&(ct===4||ct===3&&(xt&130023424)===xt&&500>Je()-mg?Wi(t,0):pg|=n),Wt(t,e)}function pS(t,e){e===0&&(t.mode&1?(e=Ql,Ql<<=1,!(Ql&130023424)&&(Ql=4194304)):e=1);var n=Rt();t=Ir(t,e),t!==null&&(Tl(t,e,n),Wt(t,n))}function B2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),pS(t,n)}function V2(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Z(314))}r!==null&&r.delete(e),pS(t,n)}var mS;mS=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ut.current)Vt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Vt=!1,A2(t,e,n);Vt=!!(t.flags&131072)}else Vt=!1,He&&e.flags&1048576&&x1(e,hu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Fc(t,e),t=e.pendingProps;var i=vo(e,Tt.current);eo(e,n),i=lg(null,e,r,t,i,n);var s=cg();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ht(r)?(s=!0,uu(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,rg(e),i.updater=od,e.stateNode=i,i._reactInternals=e,pp(e,r,t,n),e=vp(null,e,r,!0,s,n)):(e.tag=0,He&&s&&Zm(e),jt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Fc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=H2(r),t=Pn(r,t),i){case 0:e=gp(null,e,r,t,n);break e;case 1:e=Xy(null,e,r,t,n);break e;case 11:e=Gy(null,e,r,t,n);break e;case 14:e=Zy(null,e,r,Pn(r.type,t),n);break e}throw Error(Z(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Pn(r,i),gp(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Pn(r,i),Xy(t,e,r,i,n);case 3:e:{if(Q1(e),t===null)throw Error(Z(387));r=e.pendingProps,s=e.memoizedState,i=s.element,E1(t,e),mu(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=bo(Error(Z(423)),e),e=Qy(t,e,r,n,i);break e}else if(r!==i){i=bo(Error(Z(424)),e),e=Qy(t,e,r,n,i);break e}else for(rn=ui(e.stateNode.containerInfo.firstChild),an=e,He=!0,Rn=null,n=k1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(yo(),r===i){e=Or(t,e,n);break e}jt(t,e,r,n)}e=e.child}return e;case 5:return N1(e),t===null&&dp(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,op(r,i)?o=null:s!==null&&op(r,s)&&(e.flags|=32),X1(t,e),jt(t,e,o,n),e.child;case 6:return t===null&&dp(e),null;case 13:return J1(t,e,n);case 4:return ig(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=xo(e,null,r,n):jt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Pn(r,i),Gy(t,e,r,i,n);case 7:return jt(t,e,e.pendingProps,n),e.child;case 8:return jt(t,e,e.pendingProps.children,n),e.child;case 12:return jt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,De(fu,r._currentValue),r._currentValue=o,s!==null)if(zn(s.value,o)){if(s.children===i.children&&!Ut.current){e=Or(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=jr(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),hp(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Z(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),hp(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}jt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,eo(e,n),i=bn(i),r=r(i),e.flags|=1,jt(t,e,r,n),e.child;case 14:return r=e.type,i=Pn(r,e.pendingProps),i=Pn(r.type,i),Zy(t,e,r,i,n);case 15:return G1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Pn(r,i),Fc(t,e),e.tag=1,Ht(r)?(t=!0,uu(e)):t=!1,eo(e,n),q1(e,r,i),pp(e,r,i,n),vp(null,e,r,!0,t,n);case 19:return eS(t,e,n);case 22:return Z1(t,e,n)}throw Error(Z(156,e.tag))};function gS(t,e){return Ub(t,e)}function U2(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(t,e,n,r){return new U2(t,e,n,r)}function xg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function H2(t){if(typeof t=="function")return xg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Dm)return 11;if(t===zm)return 14}return 2}function pi(t,e){var n=t.alternate;return n===null?(n=xn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Uc(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")xg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Os:return qi(n.children,i,s,e);case $m:o=8,i|=8;break;case Df:return t=xn(12,n,e,i|2),t.elementType=Df,t.lanes=s,t;case zf:return t=xn(13,n,e,i),t.elementType=zf,t.lanes=s,t;case Ff:return t=xn(19,n,e,i),t.elementType=Ff,t.lanes=s,t;case Nb:return cd(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Cb:o=10;break e;case Eb:o=9;break e;case Dm:o=11;break e;case zm:o=14;break e;case Qr:o=16,r=null;break e}throw Error(Z(130,t==null?t:typeof t,""))}return e=xn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function qi(t,e,n,r){return t=xn(7,t,r,e),t.lanes=n,t}function cd(t,e,n,r){return t=xn(22,t,r,e),t.elementType=Nb,t.lanes=n,t.stateNode={isHidden:!1},t}function Oh(t,e,n){return t=xn(6,t,null,e),t.lanes=n,t}function Lh(t,e,n){return e=xn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function W2(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gh(0),this.expirationTimes=gh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gh(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function wg(t,e,n,r,i,s,o,a,l){return t=new W2(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=xn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},rg(s),t}function q2(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Is,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function vS(t){if(!t)return xi;t=t._reactInternals;e:{if(ms(t)!==t||t.tag!==1)throw Error(Z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ht(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Z(171))}if(t.tag===1){var n=t.type;if(Ht(n))return v1(t,n,e)}return e}function yS(t,e,n,r,i,s,o,a,l){return t=wg(n,r,!0,t,i,s,o,a,l),t.context=vS(null),n=t.current,r=Rt(),i=fi(n),s=jr(r,i),s.callback=e??null,di(n,s,i),t.current.lanes=i,Tl(t,i,r),Wt(t,r),t}function ud(t,e,n,r){var i=e.current,s=Rt(),o=fi(i);return n=vS(n),e.context===null?e.context=n:e.pendingContext=n,e=jr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=di(i,e,o),t!==null&&(On(t,i,o,s),$c(t,i,o)),o}function ku(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function lx(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function bg(t,e){lx(t,e),(t=t.alternate)&&lx(t,e)}function K2(){return null}var xS=typeof reportError=="function"?reportError:function(t){console.error(t)};function Sg(t){this._internalRoot=t}dd.prototype.render=Sg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Z(409));ud(t,e,null,null)};dd.prototype.unmount=Sg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ts(function(){ud(null,t,null,null)}),e[Mr]=null}};function dd(t){this._internalRoot=t}dd.prototype.unstable_scheduleHydration=function(t){if(t){var e=Zb();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ei.length&&e!==0&&e<ei[n].priority;n++);ei.splice(n,0,t),n===0&&Qb(t)}};function kg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function hd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function cx(){}function Y2(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=ku(o);s.call(c)}}var o=yS(e,r,t,0,null,!1,!1,"",cx);return t._reactRootContainer=o,t[Mr]=o.current,Ka(t.nodeType===8?t.parentNode:t),ts(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=ku(l);a.call(c)}}var l=wg(t,0,!1,null,null,!1,!1,"",cx);return t._reactRootContainer=l,t[Mr]=l.current,Ka(t.nodeType===8?t.parentNode:t),ts(function(){ud(e,l,n,r)}),l}function fd(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=ku(o);a.call(l)}}ud(e,o,t,i)}else o=Y2(n,e,t,i,r);return ku(o)}Yb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ha(e.pendingLanes);n!==0&&(Vm(e,n|1),Wt(e,Je()),!(Ae&6)&&(So=Je()+500,Pi()))}break;case 13:ts(function(){var r=Ir(t,1);if(r!==null){var i=Rt();On(r,t,1,i)}}),bg(t,1)}};Um=function(t){if(t.tag===13){var e=Ir(t,134217728);if(e!==null){var n=Rt();On(e,t,134217728,n)}bg(t,134217728)}};Gb=function(t){if(t.tag===13){var e=fi(t),n=Ir(t,e);if(n!==null){var r=Rt();On(n,t,e,r)}bg(t,e)}};Zb=function(){return Me};Xb=function(t,e){var n=Me;try{return Me=t,e()}finally{Me=n}};Zf=function(t,e,n){switch(e){case"input":if(Uf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=rd(r);if(!i)throw Error(Z(90));Tb(r),Uf(r,i)}}}break;case"textarea":Pb(t,n);break;case"select":e=n.value,e!=null&&Zs(t,!!n.multiple,e,!1)}};$b=gg;Db=ts;var G2={usingClientEntryPoint:!1,Events:[Pl,zs,rd,Ob,Lb,gg]},ta={findFiberByHostInstance:Bi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Z2={bundleType:ta.bundleType,version:ta.version,rendererPackageName:ta.rendererPackageName,rendererConfig:ta.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:zr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Bb(t),t===null?null:t.stateNode},findFiberByHostInstance:ta.findFiberByHostInstance||K2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cc.isDisabled&&cc.supportsFiber)try{Ju=cc.inject(Z2),rr=cc}catch{}}hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G2;hn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kg(e))throw Error(Z(200));return q2(t,e,null,n)};hn.createRoot=function(t,e){if(!kg(t))throw Error(Z(299));var n=!1,r="",i=xS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=wg(t,1,!1,null,null,n,!1,r,i),t[Mr]=e.current,Ka(t.nodeType===8?t.parentNode:t),new Sg(e)};hn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Z(188)):(t=Object.keys(t).join(","),Error(Z(268,t)));return t=Bb(e),t=t===null?null:t.stateNode,t};hn.flushSync=function(t){return ts(t)};hn.hydrate=function(t,e,n){if(!hd(e))throw Error(Z(200));return fd(null,t,e,!0,n)};hn.hydrateRoot=function(t,e,n){if(!kg(t))throw Error(Z(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=xS;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=yS(e,null,t,1,n??null,i,!1,s,o),t[Mr]=e.current,Ka(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new dd(e)};hn.render=function(t,e,n){if(!hd(e))throw Error(Z(200));return fd(null,t,e,!1,n)};hn.unmountComponentAtNode=function(t){if(!hd(t))throw Error(Z(40));return t._reactRootContainer?(ts(function(){fd(null,null,t,!1,function(){t._reactRootContainer=null,t[Mr]=null})}),!0):!1};hn.unstable_batchedUpdates=gg;hn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!hd(n))throw Error(Z(200));if(t==null||t._reactInternals===void 0)throw Error(Z(38));return fd(t,e,n,!1,r)};hn.version="18.3.1-next-f1338f8080-20240426";function wS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wS)}catch(t){console.error(t)}}wS(),wb.exports=hn;var gs=wb.exports;const X2=Hn(gs);var ux=gs;Lf.createRoot=ux.createRoot,Lf.hydrateRoot=ux.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nl(){return nl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nl.apply(this,arguments)}var si;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(si||(si={}));const dx="popstate";function Q2(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:a="",hash:l=""}=vs(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Ap("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=i.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof s=="string"?s:Cu(s))}function r(i,s){Cg(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return ej(e,n,r,t)}function Ye(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Cg(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function J2(){return Math.random().toString(36).substr(2,8)}function hx(t,e){return{usr:t.state,key:t.key,idx:e}}function Ap(t,e,n,r){return n===void 0&&(n=null),nl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?vs(e):e,{state:n,key:e&&e.key||r||J2()})}function Cu(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function vs(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function ej(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=si.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(nl({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function h(){a=si.Pop;let w=u(),v=w==null?null:w-c;c=w,l&&l({action:a,location:m.location,delta:v})}function f(w,v){a=si.Push;let x=Ap(m.location,w,v);n&&n(x,w),c=u()+1;let b=hx(x,c),S=m.createHref(x);try{o.pushState(b,"",S)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;i.location.assign(S)}s&&l&&l({action:a,location:m.location,delta:1})}function p(w,v){a=si.Replace;let x=Ap(m.location,w,v);n&&n(x,w),c=u();let b=hx(x,c),S=m.createHref(x);o.replaceState(b,"",S),s&&l&&l({action:a,location:m.location,delta:0})}function g(w){let v=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof w=="string"?w:Cu(w);return x=x.replace(/ $/,"%20"),Ye(v,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,v)}let m={get action(){return a},get location(){return t(i,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(dx,h),l=w,()=>{i.removeEventListener(dx,h),l=null}},createHref(w){return e(i,w)},createURL:g,encodeLocation(w){let v=g(w);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:p,go(w){return o.go(w)}};return m}var fx;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(fx||(fx={}));function tj(t,e,n){return n===void 0&&(n="/"),nj(t,e,n)}function nj(t,e,n,r){let i=typeof e=="string"?vs(e):e,s=ko(i.pathname||"/",n);if(s==null)return null;let o=bS(t);rj(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=pj(s);a=hj(o[l],c)}return a}function bS(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Ye(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=mi([r,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(Ye(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),bS(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:uj(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of SS(s.path))i(s,o,l)}),e}function SS(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=SS(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function rj(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:dj(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const ij=/^:[\w-]+$/,sj=3,oj=2,aj=1,lj=10,cj=-2,px=t=>t==="*";function uj(t,e){let n=t.split("/"),r=n.length;return n.some(px)&&(r+=cj),e&&(r+=oj),n.filter(i=>!px(i)).reduce((i,s)=>i+(ij.test(s)?sj:s===""?aj:lj),r)}function dj(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function hj(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=s==="/"?e:e.slice(s.length)||"/",h=Pp({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:mi([s,h.pathname]),pathnameBase:yj(mi([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=mi([s,h.pathnameBase]))}return o}function Pp(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=fj(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,h)=>{let{paramName:f,isOptional:p}=u;if(f==="*"){let m=a[h]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const g=a[h];return p&&!g?c[f]=void 0:c[f]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function fj(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Cg(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function pj(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Cg(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ko(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function mj(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?vs(t):t;return{pathname:n?n.startsWith("/")?n:gj(n,e):e,search:xj(r),hash:wj(i)}}function gj(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function $h(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function vj(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Eg(t,e){let n=vj(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Ng(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=vs(t):(i=nl({},t),Ye(!i.pathname||!i.pathname.includes("?"),$h("?","pathname","search",i)),Ye(!i.pathname||!i.pathname.includes("#"),$h("#","pathname","hash",i)),Ye(!i.search||!i.search.includes("#"),$h("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=mj(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const mi=t=>t.join("/").replace(/\/\/+/g,"/"),yj=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),xj=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,wj=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function bj(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const kS=["post","put","patch","delete"];new Set(kS);const Sj=["get",...kS];new Set(Sj);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rl(){return rl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rl.apply(this,arguments)}const pd=y.createContext(null),CS=y.createContext(null),Fr=y.createContext(null),md=y.createContext(null),Br=y.createContext({outlet:null,matches:[],isDataRoute:!1}),ES=y.createContext(null);function kj(t,e){let{relative:n}=e===void 0?{}:e;Lo()||Ye(!1);let{basename:r,navigator:i}=y.useContext(Fr),{hash:s,pathname:o,search:a}=gd(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:mi([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Lo(){return y.useContext(md)!=null}function pn(){return Lo()||Ye(!1),y.useContext(md).location}function NS(t){y.useContext(Fr).static||y.useLayoutEffect(t)}function gt(){let{isDataRoute:t}=y.useContext(Br);return t?Lj():Cj()}function Cj(){Lo()||Ye(!1);let t=y.useContext(pd),{basename:e,future:n,navigator:r}=y.useContext(Fr),{matches:i}=y.useContext(Br),{pathname:s}=pn(),o=JSON.stringify(Eg(i,n.v7_relativeSplatPath)),a=y.useRef(!1);return NS(()=>{a.current=!0}),y.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=Ng(c,JSON.parse(o),s,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:mi([e,h.pathname])),(u.replace?r.replace:r.push)(h,u.state,u)},[e,r,o,s,t])}function ys(){let{matches:t}=y.useContext(Br),e=t[t.length-1];return e?e.params:{}}function gd(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=y.useContext(Fr),{matches:i}=y.useContext(Br),{pathname:s}=pn(),o=JSON.stringify(Eg(i,r.v7_relativeSplatPath));return y.useMemo(()=>Ng(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function Ej(t,e){return Nj(t,e)}function Nj(t,e,n,r){Lo()||Ye(!1);let{navigator:i,static:s}=y.useContext(Fr),{matches:o}=y.useContext(Br),a=o[o.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=pn(),h;if(e){var f;let v=typeof e=="string"?vs(e):e;c==="/"||(f=v.pathname)!=null&&f.startsWith(c)||Ye(!1),h=v}else h=u;let p=h.pathname||"/",g=p;if(c!=="/"){let v=c.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(v.length).join("/")}let m=tj(t,{pathname:g}),w=jj(m&&m.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:mi([c,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:mi([c,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),o,n,r);return e&&w?y.createElement(md.Provider,{value:{location:rl({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:si.Pop}},w):w}function _j(){let t=Oj(),e=bj(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},e),n?y.createElement("pre",{style:i},n):null,null)}const Tj=y.createElement(_j,null);class Aj extends y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?y.createElement(Br.Provider,{value:this.props.routeContext},y.createElement(ES.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Pj(t){let{routeContext:e,match:n,children:r}=t,i=y.useContext(pd);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),y.createElement(Br.Provider,{value:e},r)}function jj(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);u>=0||Ye(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:f,errors:p}=n,g=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||g){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,h,f)=>{let p,g=!1,m=null,w=null;n&&(p=a&&h.route.id?a[h.route.id]:void 0,m=h.route.errorElement||Tj,l&&(c<0&&f===0?($j("route-fallback"),g=!0,w=null):c===f&&(g=!0,w=h.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,f+1)),x=()=>{let b;return p?b=m:g?b=w:h.route.Component?b=y.createElement(h.route.Component,null):h.route.element?b=h.route.element:b=u,y.createElement(Pj,{match:h,routeContext:{outlet:u,matches:v,isDataRoute:n!=null},children:b})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?y.createElement(Aj,{location:n.location,revalidation:n.revalidation,component:m,error:p,children:x(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):x()},null)}var _S=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(_S||{}),TS=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(TS||{});function Rj(t){let e=y.useContext(pd);return e||Ye(!1),e}function Mj(t){let e=y.useContext(CS);return e||Ye(!1),e}function Ij(t){let e=y.useContext(Br);return e||Ye(!1),e}function AS(t){let e=Ij(),n=e.matches[e.matches.length-1];return n.route.id||Ye(!1),n.route.id}function Oj(){var t;let e=y.useContext(ES),n=Mj(),r=AS();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Lj(){let{router:t}=Rj(_S.UseNavigateStable),e=AS(TS.UseNavigateStable),n=y.useRef(!1);return NS(()=>{n.current=!0}),y.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,rl({fromRouteId:e},s)))},[t,e])}const mx={};function $j(t,e,n){mx[t]||(mx[t]=!0)}function Dj(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function gi(t){let{to:e,replace:n,state:r,relative:i}=t;Lo()||Ye(!1);let{future:s,static:o}=y.useContext(Fr),{matches:a}=y.useContext(Br),{pathname:l}=pn(),c=gt(),u=Ng(e,Eg(a,s.v7_relativeSplatPath),l,i==="path"),h=JSON.stringify(u);return y.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:i}),[c,h,i,n,r]),null}function Qe(t){Ye(!1)}function zj(t){let{basename:e="/",children:n=null,location:r,navigationType:i=si.Pop,navigator:s,static:o=!1,future:a}=t;Lo()&&Ye(!1);let l=e.replace(/^\/*/,"/"),c=y.useMemo(()=>({basename:l,navigator:s,static:o,future:rl({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=vs(r));let{pathname:u="/",search:h="",hash:f="",state:p=null,key:g="default"}=r,m=y.useMemo(()=>{let w=ko(u,l);return w==null?null:{location:{pathname:w,search:h,hash:f,state:p,key:g},navigationType:i}},[l,u,h,f,p,g,i]);return m==null?null:y.createElement(Fr.Provider,{value:c},y.createElement(md.Provider,{children:n,value:m}))}function PS(t){let{children:e,location:n}=t;return Ej(jp(e),n)}new Promise(()=>{});function jp(t,e){e===void 0&&(e=[]);let n=[];return y.Children.forEach(t,(r,i)=>{if(!y.isValidElement(r))return;let s=[...e,i];if(r.type===y.Fragment){n.push.apply(n,jp(r.props.children,s));return}r.type!==Qe&&Ye(!1),!r.props.index||!r.props.children||Ye(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=jp(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Eu(){return Eu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Eu.apply(this,arguments)}function jS(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Fj(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Bj(t,e){return t.button===0&&(!e||e==="_self")&&!Fj(t)}const Vj=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Uj=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Hj="6";try{window.__reactRouterVersion=Hj}catch{}const Wj=y.createContext({isTransitioning:!1}),qj="startTransition",gx=yb[qj];function Kj(t){let{basename:e,children:n,future:r,window:i}=t,s=y.useRef();s.current==null&&(s.current=Q2({window:i,v5Compat:!0}));let o=s.current,[a,l]=y.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=y.useCallback(h=>{c&&gx?gx(()=>l(h)):l(h)},[l,c]);return y.useLayoutEffect(()=>o.listen(u),[o,u]),y.useEffect(()=>Dj(r),[r]),y.createElement(zj,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const Yj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Gj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zj=y.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:h}=e,f=jS(e,Vj),{basename:p}=y.useContext(Fr),g,m=!1;if(typeof c=="string"&&Gj.test(c)&&(g=c,Yj))try{let b=new URL(window.location.href),S=c.startsWith("//")?new URL(b.protocol+c):new URL(c),N=ko(S.pathname,p);S.origin===b.origin&&N!=null?c=N+S.search+S.hash:m=!0}catch{}let w=kj(c,{relative:i}),v=Jj(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:i,viewTransition:h});function x(b){r&&r(b),b.defaultPrevented||v(b)}return y.createElement("a",Eu({},f,{href:g||w,onClick:m||s?r:x,ref:n,target:l}))}),Xj=y.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:c,children:u}=e,h=jS(e,Uj),f=gd(l,{relative:h.relative}),p=pn(),g=y.useContext(CS),{navigator:m,basename:w}=y.useContext(Fr),v=g!=null&&eR(f)&&c===!0,x=m.encodeLocation?m.encodeLocation(f).pathname:f.pathname,b=p.pathname,S=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;i||(b=b.toLowerCase(),S=S?S.toLowerCase():null,x=x.toLowerCase()),S&&w&&(S=ko(S,w)||S);const N=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let C=b===x||!o&&b.startsWith(x)&&b.charAt(N)==="/",_=S!=null&&(S===x||!o&&S.startsWith(x)&&S.charAt(x.length)==="/"),P={isActive:C,isPending:_,isTransitioning:v},I=C?r:void 0,R;typeof s=="function"?R=s(P):R=[s,C?"active":null,_?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let O=typeof a=="function"?a(P):a;return y.createElement(Zj,Eu({},h,{"aria-current":I,className:R,ref:n,style:O,to:l,viewTransition:c}),typeof u=="function"?u(P):u)});var Rp;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Rp||(Rp={}));var vx;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(vx||(vx={}));function Qj(t){let e=y.useContext(pd);return e||Ye(!1),e}function Jj(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=gt(),c=pn(),u=gd(t,{relative:o});return y.useCallback(h=>{if(Bj(h,n)){h.preventDefault();let f=r!==void 0?r:Cu(c)===Cu(u);l(t,{replace:f,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,u,r,i,n,t,s,o,a])}function eR(t,e){e===void 0&&(e={});let n=y.useContext(Wj);n==null&&Ye(!1);let{basename:r}=Qj(Rp.useViewTransitionState),i=gd(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=ko(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=ko(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Pp(i.pathname,o)!=null||Pp(i.pathname,s)!=null}const tR={},yx=t=>{let e;const n=new Set,r=(u,h)=>{const f=typeof u=="function"?u(e):u;if(!Object.is(f,e)){const p=e;e=h??(typeof f!="object"||f===null)?f:Object.assign({},e,f),n.forEach(g=>g(e,p))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(tR?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=e=t(r,i,l);return l},nR=t=>t?yx(t):yx;var RS={exports:{}},MS={},IS={exports:{}},OS={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Co=y;function rR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var iR=typeof Object.is=="function"?Object.is:rR,sR=Co.useState,oR=Co.useEffect,aR=Co.useLayoutEffect,lR=Co.useDebugValue;function cR(t,e){var n=e(),r=sR({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return aR(function(){i.value=n,i.getSnapshot=e,Dh(i)&&s({inst:i})},[t,n,e]),oR(function(){return Dh(i)&&s({inst:i}),t(function(){Dh(i)&&s({inst:i})})},[t]),lR(n),n}function Dh(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!iR(t,n)}catch{return!0}}function uR(t,e){return e()}var dR=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?uR:cR;OS.useSyncExternalStore=Co.useSyncExternalStore!==void 0?Co.useSyncExternalStore:dR;IS.exports=OS;var hR=IS.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vd=y,fR=hR;function pR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var mR=typeof Object.is=="function"?Object.is:pR,gR=fR.useSyncExternalStore,vR=vd.useRef,yR=vd.useEffect,xR=vd.useMemo,wR=vd.useDebugValue;MS.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=vR(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=xR(function(){function l(p){if(!c){if(c=!0,u=p,p=r(p),i!==void 0&&o.hasValue){var g=o.value;if(i(g,p))return h=g}return h=p}if(g=h,mR(u,p))return g;var m=r(p);return i!==void 0&&i(g,m)?(u=p,g):(u=p,h=m)}var c=!1,u,h,f=n===void 0?null:n;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,n,r,i]);var a=gR(t,s[0],s[1]);return yR(function(){o.hasValue=!0,o.value=a},[a]),wR(a),a};RS.exports=MS;var bR=RS.exports;const LS=Hn(bR),$S={},{useDebugValue:SR}=Le,{useSyncExternalStoreWithSelector:kR}=LS;let xx=!1;const CR=t=>t;function ER(t,e=CR,n){($S?"production":void 0)!=="production"&&n&&!xx&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),xx=!0);const r=kR(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return SR(r),r}const wx=t=>{($S?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?nR(t):t,n=(r,i)=>ER(e,r,i);return Object.assign(n,e),n},fr=t=>t?wx(t):wx;var _e;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(const a of s)o[a]=i[a];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},t.find=(i,s)=>{for(const o of i)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=r,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(_e||(_e={}));var Mp;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(Mp||(Mp={}));const ie=_e.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Er=t=>{switch(typeof t){case"undefined":return ie.undefined;case"string":return ie.string;case"number":return isNaN(t)?ie.nan:ie.number;case"boolean":return ie.boolean;case"function":return ie.function;case"bigint":return ie.bigint;case"symbol":return ie.symbol;case"object":return Array.isArray(t)?ie.array:t===null?ie.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ie.promise:typeof Map<"u"&&t instanceof Map?ie.map:typeof Set<"u"&&t instanceof Set?ie.set:typeof Date<"u"&&t instanceof Date?ie.date:ie.object;default:return ie.unknown}},Y=_e.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),NR=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class ln extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(n(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return i(this),r}static assert(e){if(!(e instanceof ln))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,_e.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}ln.create=t=>new ln(t);const Eo=(t,e)=>{let n;switch(t.code){case Y.invalid_type:t.received===ie.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Y.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,_e.jsonStringifyReplacer)}`;break;case Y.unrecognized_keys:n=`Unrecognized key(s) in object: ${_e.joinValues(t.keys,", ")}`;break;case Y.invalid_union:n="Invalid input";break;case Y.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${_e.joinValues(t.options)}`;break;case Y.invalid_enum_value:n=`Invalid enum value. Expected ${_e.joinValues(t.options)}, received '${t.received}'`;break;case Y.invalid_arguments:n="Invalid function arguments";break;case Y.invalid_return_type:n="Invalid function return type";break;case Y.invalid_date:n="Invalid date";break;case Y.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:_e.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Y.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Y.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Y.custom:n="Invalid input";break;case Y.invalid_intersection_types:n="Intersection results could not be merged";break;case Y.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Y.not_finite:n="Number must be finite";break;default:n=e.defaultError,_e.assertNever(t)}return{message:n}};let DS=Eo;function _R(t){DS=t}function Nu(){return DS}const _u=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,s=[...n,...i.path||[]],o={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let a="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:e,defaultError:a}).message;return{...i,path:s,message:a}},TR=[];function te(t,e){const n=Nu(),r=_u({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Eo?void 0:Eo].filter(i=>!!i)});t.common.issues.push(r)}class At{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return pe;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const s=await i.key,o=await i.value;r.push({key:s,value:o})}return At.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return pe;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:e.value,value:r}}}const pe=Object.freeze({status:"aborted"}),qs=t=>({status:"dirty",value:t}),Mt=t=>({status:"valid",value:t}),Ip=t=>t.status==="aborted",Op=t=>t.status==="dirty",ns=t=>t.status==="valid",il=t=>typeof Promise<"u"&&t instanceof Promise;function Tu(t,e,n,r){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function zS(t,e,n,r,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var oe;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(oe||(oe={}));var pa,ma;class lr{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const bx=(t,e)=>{if(ns(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new ln(t.common.issues);return this._error=n,this._error}}};function we(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,a)=>{var l,c;const{message:u}=t;return o.code==="invalid_enum_value"?{message:u??a.defaultError}:typeof a.data>"u"?{message:(l=u??r)!==null&&l!==void 0?l:a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:(c=u??n)!==null&&c!==void 0?c:a.defaultError}},description:i}}class Se{get description(){return this._def.description}_getType(e){return Er(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Er(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new At,ctx:{common:e.parent.common,data:e.data,parsedType:Er(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(il(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const i={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Er(e)},s=this._parseSync({data:e,path:i.path,parent:i});return bx(i,s)}"~validate"(e){var n,r;const i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Er(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:i});return ns(s)?{value:s.value}:{issues:i.common.issues}}catch(s){!((r=(n=s==null?void 0:s.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(s=>ns(s)?{value:s.value}:{issues:i.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Er(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await(il(i)?i:Promise.resolve(i));return bx(r,s)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,s)=>{const o=e(i),a=()=>s.addIssue({code:Y.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new Fn({schema:this,typeName:de.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return sr.create(this,this._def)}nullable(){return ki.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ln.create(this)}promise(){return _o.create(this,this._def)}or(e){return ll.create([this,e],this._def)}and(e){return cl.create(this,e,this._def)}transform(e){return new Fn({...we(this._def),schema:this,typeName:de.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new pl({...we(this._def),innerType:this,defaultValue:n,typeName:de.ZodDefault})}brand(){return new _g({typeName:de.ZodBranded,type:this,...we(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new ml({...we(this._def),innerType:this,catchValue:n,typeName:de.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Rl.create(this,e)}readonly(){return gl.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const AR=/^c[^\s-]{8,}$/i,PR=/^[0-9a-z]+$/,jR=/^[0-9A-HJKMNP-TV-Z]{26}$/i,RR=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,MR=/^[a-z0-9_-]{21}$/i,IR=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,OR=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,LR=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,$R="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let zh;const DR=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,zR=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,FR=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,BR=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,VR=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,UR=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,FS="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",HR=new RegExp(`^${FS}$`);function BS(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function WR(t){return new RegExp(`^${BS(t)}$`)}function VS(t){let e=`${FS}T${BS(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function qR(t,e){return!!((e==="v4"||!e)&&DR.test(t)||(e==="v6"||!e)&&FR.test(t))}function KR(t,e){if(!IR.test(t))return!1;try{const[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}function YR(t,e){return!!((e==="v4"||!e)&&zR.test(t)||(e==="v6"||!e)&&BR.test(t))}class Mn extends Se{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ie.string){const s=this._getOrReturnCtx(e);return te(s,{code:Y.invalid_type,expected:ie.string,received:s.parsedType}),pe}const r=new At;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),te(i,{code:Y.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),te(i,{code:Y.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(e,i),o?te(i,{code:Y.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&te(i,{code:Y.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")LR.test(e.data)||(i=this._getOrReturnCtx(e,i),te(i,{validation:"email",code:Y.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")zh||(zh=new RegExp($R,"u")),zh.test(e.data)||(i=this._getOrReturnCtx(e,i),te(i,{validation:"emoji",code:Y.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")RR.test(e.data)||(i=this._getOrReturnCtx(e,i),te(i,{validation:"uuid",code:Y.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")MR.test(e.data)||(i=this._getOrReturnCtx(e,i),te(i,{validation:"nanoid",code:Y.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")AR.test(e.data)||(i=this._getOrReturnCtx(e,i),te(i,{validation:"cuid",code:Y.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")PR.test(e.data)||(i=this._getOrReturnCtx(e,i),te(i,{validation:"cuid2",code:Y.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")jR.test(e.data)||(i=this._getOrReturnCtx(e,i),te(i,{validation:"ulid",code:Y.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),te(i,{validation:"url",code:Y.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),te(i,{validation:"regex",code:Y.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),te(i,{code:Y.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),te(i,{code:Y.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),te(i,{code:Y.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?VS(s).test(e.data)||(i=this._getOrReturnCtx(e,i),te(i,{code:Y.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?HR.test(e.data)||(i=this._getOrReturnCtx(e,i),te(i,{code:Y.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?WR(s).test(e.data)||(i=this._getOrReturnCtx(e,i),te(i,{code:Y.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?OR.test(e.data)||(i=this._getOrReturnCtx(e,i),te(i,{validation:"duration",code:Y.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?qR(e.data,s.version)||(i=this._getOrReturnCtx(e,i),te(i,{validation:"ip",code:Y.invalid_string,message:s.message}),r.dirty()):s.kind==="jwt"?KR(e.data,s.alg)||(i=this._getOrReturnCtx(e,i),te(i,{validation:"jwt",code:Y.invalid_string,message:s.message}),r.dirty()):s.kind==="cidr"?YR(e.data,s.version)||(i=this._getOrReturnCtx(e,i),te(i,{validation:"cidr",code:Y.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?VR.test(e.data)||(i=this._getOrReturnCtx(e,i),te(i,{validation:"base64",code:Y.invalid_string,message:s.message}),r.dirty()):s.kind==="base64url"?UR.test(e.data)||(i=this._getOrReturnCtx(e,i),te(i,{validation:"base64url",code:Y.invalid_string,message:s.message}),r.dirty()):_e.assertNever(s);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:Y.invalid_string,...oe.errToObj(r)})}_addCheck(e){return new Mn({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...oe.errToObj(e)})}url(e){return this._addCheck({kind:"url",...oe.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...oe.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...oe.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...oe.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...oe.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...oe.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...oe.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...oe.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...oe.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...oe.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...oe.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...oe.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,...oe.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...oe.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...oe.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...oe.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...oe.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...oe.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...oe.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...oe.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...oe.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...oe.errToObj(n)})}nonempty(e){return this.min(1,oe.errToObj(e))}trim(){return new Mn({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Mn({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Mn({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Mn.create=t=>{var e;return new Mn({checks:[],typeName:de.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...we(t)})};function GR(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,s=parseInt(t.toFixed(i).replace(".","")),o=parseInt(e.toFixed(i).replace(".",""));return s%o/Math.pow(10,i)}class wi extends Se{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ie.number){const s=this._getOrReturnCtx(e);return te(s,{code:Y.invalid_type,expected:ie.number,received:s.parsedType}),pe}let r;const i=new At;for(const s of this._def.checks)s.kind==="int"?_e.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),te(r,{code:Y.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),te(r,{code:Y.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),te(r,{code:Y.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?GR(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),te(r,{code:Y.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),te(r,{code:Y.not_finite,message:s.message}),i.dirty()):_e.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,oe.toString(n))}gt(e,n){return this.setLimit("min",e,!1,oe.toString(n))}lte(e,n){return this.setLimit("max",e,!0,oe.toString(n))}lt(e,n){return this.setLimit("max",e,!1,oe.toString(n))}setLimit(e,n,r,i){return new wi({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:oe.toString(i)}]})}_addCheck(e){return new wi({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:oe.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:oe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:oe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:oe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:oe.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:oe.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:oe.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:oe.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:oe.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&_e.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}wi.create=t=>new wi({checks:[],typeName:de.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...we(t)});class bi extends Se{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ie.bigint)return this._getInvalidInput(e);let r;const i=new At;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),te(r,{code:Y.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),te(r,{code:Y.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),te(r,{code:Y.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):_e.assertNever(s);return{status:i.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return te(n,{code:Y.invalid_type,expected:ie.bigint,received:n.parsedType}),pe}gte(e,n){return this.setLimit("min",e,!0,oe.toString(n))}gt(e,n){return this.setLimit("min",e,!1,oe.toString(n))}lte(e,n){return this.setLimit("max",e,!0,oe.toString(n))}lt(e,n){return this.setLimit("max",e,!1,oe.toString(n))}setLimit(e,n,r,i){return new bi({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:oe.toString(i)}]})}_addCheck(e){return new bi({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:oe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:oe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:oe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:oe.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:oe.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}bi.create=t=>{var e;return new bi({checks:[],typeName:de.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...we(t)})};class sl extends Se{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ie.boolean){const r=this._getOrReturnCtx(e);return te(r,{code:Y.invalid_type,expected:ie.boolean,received:r.parsedType}),pe}return Mt(e.data)}}sl.create=t=>new sl({typeName:de.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...we(t)});class rs extends Se{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ie.date){const s=this._getOrReturnCtx(e);return te(s,{code:Y.invalid_type,expected:ie.date,received:s.parsedType}),pe}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return te(s,{code:Y.invalid_date}),pe}const r=new At;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),te(i,{code:Y.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),te(i,{code:Y.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):_e.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new rs({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:oe.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:oe.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}rs.create=t=>new rs({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:de.ZodDate,...we(t)});class Au extends Se{_parse(e){if(this._getType(e)!==ie.symbol){const r=this._getOrReturnCtx(e);return te(r,{code:Y.invalid_type,expected:ie.symbol,received:r.parsedType}),pe}return Mt(e.data)}}Au.create=t=>new Au({typeName:de.ZodSymbol,...we(t)});class ol extends Se{_parse(e){if(this._getType(e)!==ie.undefined){const r=this._getOrReturnCtx(e);return te(r,{code:Y.invalid_type,expected:ie.undefined,received:r.parsedType}),pe}return Mt(e.data)}}ol.create=t=>new ol({typeName:de.ZodUndefined,...we(t)});class al extends Se{_parse(e){if(this._getType(e)!==ie.null){const r=this._getOrReturnCtx(e);return te(r,{code:Y.invalid_type,expected:ie.null,received:r.parsedType}),pe}return Mt(e.data)}}al.create=t=>new al({typeName:de.ZodNull,...we(t)});class No extends Se{constructor(){super(...arguments),this._any=!0}_parse(e){return Mt(e.data)}}No.create=t=>new No({typeName:de.ZodAny,...we(t)});class Ki extends Se{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Mt(e.data)}}Ki.create=t=>new Ki({typeName:de.ZodUnknown,...we(t)});class Lr extends Se{_parse(e){const n=this._getOrReturnCtx(e);return te(n,{code:Y.invalid_type,expected:ie.never,received:n.parsedType}),pe}}Lr.create=t=>new Lr({typeName:de.ZodNever,...we(t)});class Pu extends Se{_parse(e){if(this._getType(e)!==ie.undefined){const r=this._getOrReturnCtx(e);return te(r,{code:Y.invalid_type,expected:ie.void,received:r.parsedType}),pe}return Mt(e.data)}}Pu.create=t=>new Pu({typeName:de.ZodVoid,...we(t)});class Ln extends Se{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==ie.array)return te(n,{code:Y.invalid_type,expected:ie.array,received:n.parsedType}),pe;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,a=n.data.length<i.exactLength.value;(o||a)&&(te(n,{code:o?Y.too_big:Y.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(te(n,{code:Y.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(te(n,{code:Y.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>i.type._parseAsync(new lr(n,o,n.path,a)))).then(o=>At.mergeArray(r,o));const s=[...n.data].map((o,a)=>i.type._parseSync(new lr(n,o,n.path,a)));return At.mergeArray(r,s)}get element(){return this._def.type}min(e,n){return new Ln({...this._def,minLength:{value:e,message:oe.toString(n)}})}max(e,n){return new Ln({...this._def,maxLength:{value:e,message:oe.toString(n)}})}length(e,n){return new Ln({...this._def,exactLength:{value:e,message:oe.toString(n)}})}nonempty(e){return this.min(1,e)}}Ln.create=(t,e)=>new Ln({type:t,minLength:null,maxLength:null,exactLength:null,typeName:de.ZodArray,...we(e)});function js(t){if(t instanceof We){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=sr.create(js(r))}return new We({...t._def,shape:()=>e})}else return t instanceof Ln?new Ln({...t._def,type:js(t.element)}):t instanceof sr?sr.create(js(t.unwrap())):t instanceof ki?ki.create(js(t.unwrap())):t instanceof cr?cr.create(t.items.map(e=>js(e))):t}class We extends Se{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=_e.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==ie.object){const c=this._getOrReturnCtx(e);return te(c,{code:Y.invalid_type,expected:ie.object,received:c.parsedType}),pe}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Lr&&this._def.unknownKeys==="strip"))for(const c in i.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const u=s[c],h=i.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new lr(i,h,i.path,c)),alwaysSet:c in i.data})}if(this._def.catchall instanceof Lr){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of a)l.push({key:{status:"valid",value:u},value:{status:"valid",value:i.data[u]}});else if(c==="strict")a.length>0&&(te(i,{code:Y.unrecognized_keys,keys:a}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of a){const h=i.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new lr(i,h,i.path,u)),alwaysSet:u in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const h=await u.key,f=await u.value;c.push({key:h,value:f,alwaysSet:u.alwaysSet})}return c}).then(c=>At.mergeObjectSync(r,c)):At.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return oe.errToObj,new We({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,s,o,a;const l=(o=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=oe.errToObj(e).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new We({...this._def,unknownKeys:"strip"})}passthrough(){return new We({...this._def,unknownKeys:"passthrough"})}extend(e){return new We({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new We({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:de.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new We({...this._def,catchall:e})}pick(e){const n={};return _e.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new We({...this._def,shape:()=>n})}omit(e){const n={};return _e.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new We({...this._def,shape:()=>n})}deepPartial(){return js(this)}partial(e){const n={};return _e.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}),new We({...this._def,shape:()=>n})}required(e){const n={};return _e.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof sr;)s=s._def.innerType;n[r]=s}}),new We({...this._def,shape:()=>n})}keyof(){return US(_e.objectKeys(this.shape))}}We.create=(t,e)=>new We({shape:()=>t,unknownKeys:"strip",catchall:Lr.create(),typeName:de.ZodObject,...we(e)});We.strictCreate=(t,e)=>new We({shape:()=>t,unknownKeys:"strict",catchall:Lr.create(),typeName:de.ZodObject,...we(e)});We.lazycreate=(t,e)=>new We({shape:t,unknownKeys:"strip",catchall:Lr.create(),typeName:de.ZodObject,...we(e)});class ll extends Se{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new ln(a.ctx.common.issues));return te(n,{code:Y.invalid_union,unionErrors:o}),pe}if(n.common.async)return Promise.all(r.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const l of r){const c={...n,common:{...n.common,issues:[]},parent:null},u=l._parseSync({data:n.data,path:n.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!s&&(s={result:u,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(l=>new ln(l));return te(n,{code:Y.invalid_union,unionErrors:a}),pe}}get options(){return this._def.options}}ll.create=(t,e)=>new ll({options:t,typeName:de.ZodUnion,...we(e)});const br=t=>t instanceof dl?br(t.schema):t instanceof Fn?br(t.innerType()):t instanceof hl?[t.value]:t instanceof Si?t.options:t instanceof fl?_e.objectValues(t.enum):t instanceof pl?br(t._def.innerType):t instanceof ol?[void 0]:t instanceof al?[null]:t instanceof sr?[void 0,...br(t.unwrap())]:t instanceof ki?[null,...br(t.unwrap())]:t instanceof _g||t instanceof gl?br(t.unwrap()):t instanceof ml?br(t._def.innerType):[];class yd extends Se{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ie.object)return te(n,{code:Y.invalid_type,expected:ie.object,received:n.parsedType}),pe;const r=this.discriminator,i=n.data[r],s=this.optionsMap.get(i);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(te(n,{code:Y.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),pe)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const i=new Map;for(const s of n){const o=br(s.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(i.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);i.set(a,s)}}return new yd({typeName:de.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:i,...we(r)})}}function Lp(t,e){const n=Er(t),r=Er(e);if(t===e)return{valid:!0,data:t};if(n===ie.object&&r===ie.object){const i=_e.objectKeys(e),s=_e.objectKeys(t).filter(a=>i.indexOf(a)!==-1),o={...t,...e};for(const a of s){const l=Lp(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===ie.array&&r===ie.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],l=Lp(o,a);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return n===ie.date&&r===ie.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class cl extends Se{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(s,o)=>{if(Ip(s)||Ip(o))return pe;const a=Lp(s.value,o.value);return a.valid?((Op(s)||Op(o))&&n.dirty(),{status:n.value,value:a.data}):(te(r,{code:Y.invalid_intersection_types}),pe)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}cl.create=(t,e,n)=>new cl({left:t,right:e,typeName:de.ZodIntersection,...we(n)});class cr extends Se{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ie.array)return te(r,{code:Y.invalid_type,expected:ie.array,received:r.parsedType}),pe;if(r.data.length<this._def.items.length)return te(r,{code:Y.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),pe;!this._def.rest&&r.data.length>this._def.items.length&&(te(r,{code:Y.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new lr(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>At.mergeArray(n,o)):At.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new cr({...this._def,rest:e})}}cr.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new cr({items:t,typeName:de.ZodTuple,rest:null,...we(e)})};class ul extends Se{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ie.object)return te(r,{code:Y.invalid_type,expected:ie.object,received:r.parsedType}),pe;const i=[],s=this._def.keyType,o=this._def.valueType;for(const a in r.data)i.push({key:s._parse(new lr(r,a,r.path,a)),value:o._parse(new lr(r,r.data[a],r.path,a)),alwaysSet:a in r.data});return r.common.async?At.mergeObjectAsync(n,i):At.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof Se?new ul({keyType:e,valueType:n,typeName:de.ZodRecord,...we(r)}):new ul({keyType:Mn.create(),valueType:e,typeName:de.ZodRecord,...we(n)})}}class ju extends Se{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ie.map)return te(r,{code:Y.invalid_type,expected:ie.map,received:r.parsedType}),pe;const i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([a,l],c)=>({key:i._parse(new lr(r,a,r.path,[c,"key"])),value:s._parse(new lr(r,l,r.path,[c,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return pe;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return pe;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}}}}ju.create=(t,e,n)=>new ju({valueType:e,keyType:t,typeName:de.ZodMap,...we(n)});class is extends Se{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ie.set)return te(r,{code:Y.invalid_type,expected:ie.set,received:r.parsedType}),pe;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(te(r,{code:Y.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(te(r,{code:Y.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const s=this._def.valueType;function o(l){const c=new Set;for(const u of l){if(u.status==="aborted")return pe;u.status==="dirty"&&n.dirty(),c.add(u.value)}return{status:n.value,value:c}}const a=[...r.data.values()].map((l,c)=>s._parse(new lr(r,l,r.path,c)));return r.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new is({...this._def,minSize:{value:e,message:oe.toString(n)}})}max(e,n){return new is({...this._def,maxSize:{value:e,message:oe.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}is.create=(t,e)=>new is({valueType:t,minSize:null,maxSize:null,typeName:de.ZodSet,...we(e)});class no extends Se{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ie.function)return te(n,{code:Y.invalid_type,expected:ie.function,received:n.parsedType}),pe;function r(a,l){return _u({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Nu(),Eo].filter(c=>!!c),issueData:{code:Y.invalid_arguments,argumentsError:l}})}function i(a,l){return _u({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Nu(),Eo].filter(c=>!!c),issueData:{code:Y.invalid_return_type,returnTypeError:l}})}const s={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof _o){const a=this;return Mt(async function(...l){const c=new ln([]),u=await a._def.args.parseAsync(l,s).catch(p=>{throw c.addIssue(r(l,p)),c}),h=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(h,s).catch(p=>{throw c.addIssue(i(h,p)),c})})}else{const a=this;return Mt(function(...l){const c=a._def.args.safeParse(l,s);if(!c.success)throw new ln([r(l,c.error)]);const u=Reflect.apply(o,this,c.data),h=a._def.returns.safeParse(u,s);if(!h.success)throw new ln([i(u,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new no({...this._def,args:cr.create(e).rest(Ki.create())})}returns(e){return new no({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new no({args:e||cr.create([]).rest(Ki.create()),returns:n||Ki.create(),typeName:de.ZodFunction,...we(r)})}}class dl extends Se{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}dl.create=(t,e)=>new dl({getter:t,typeName:de.ZodLazy,...we(e)});class hl extends Se{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return te(n,{received:n.data,code:Y.invalid_literal,expected:this._def.value}),pe}return{status:"valid",value:e.data}}get value(){return this._def.value}}hl.create=(t,e)=>new hl({value:t,typeName:de.ZodLiteral,...we(e)});function US(t,e){return new Si({values:t,typeName:de.ZodEnum,...we(e)})}class Si extends Se{constructor(){super(...arguments),pa.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return te(n,{expected:_e.joinValues(r),received:n.parsedType,code:Y.invalid_type}),pe}if(Tu(this,pa)||zS(this,pa,new Set(this._def.values)),!Tu(this,pa).has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return te(n,{received:n.data,code:Y.invalid_enum_value,options:r}),pe}return Mt(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Si.create(e,{...this._def,...n})}exclude(e,n=this._def){return Si.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}pa=new WeakMap;Si.create=US;class fl extends Se{constructor(){super(...arguments),ma.set(this,void 0)}_parse(e){const n=_e.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ie.string&&r.parsedType!==ie.number){const i=_e.objectValues(n);return te(r,{expected:_e.joinValues(i),received:r.parsedType,code:Y.invalid_type}),pe}if(Tu(this,ma)||zS(this,ma,new Set(_e.getValidEnumValues(this._def.values))),!Tu(this,ma).has(e.data)){const i=_e.objectValues(n);return te(r,{received:r.data,code:Y.invalid_enum_value,options:i}),pe}return Mt(e.data)}get enum(){return this._def.values}}ma=new WeakMap;fl.create=(t,e)=>new fl({values:t,typeName:de.ZodNativeEnum,...we(e)});class _o extends Se{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ie.promise&&n.common.async===!1)return te(n,{code:Y.invalid_type,expected:ie.promise,received:n.parsedType}),pe;const r=n.parsedType===ie.promise?n.data:Promise.resolve(n.data);return Mt(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}_o.create=(t,e)=>new _o({type:t,typeName:de.ZodPromise,...we(e)});class Fn extends Se{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===de.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:o=>{te(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const o=i.transform(r.data,s);if(r.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return pe;const l=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return l.status==="aborted"?pe:l.status==="dirty"||n.value==="dirty"?qs(l.value):l});{if(n.value==="aborted")return pe;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?pe:a.status==="dirty"||n.value==="dirty"?qs(a.value):a}}if(i.type==="refinement"){const o=a=>{const l=i.refinement(a,s);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?pe:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?pe:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!ns(o))return o;const a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>ns(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:n.value,value:a})):o);_e.assertNever(i)}}Fn.create=(t,e,n)=>new Fn({schema:t,typeName:de.ZodEffects,effect:e,...we(n)});Fn.createWithPreprocess=(t,e,n)=>new Fn({schema:e,effect:{type:"preprocess",transform:t},typeName:de.ZodEffects,...we(n)});class sr extends Se{_parse(e){return this._getType(e)===ie.undefined?Mt(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}sr.create=(t,e)=>new sr({innerType:t,typeName:de.ZodOptional,...we(e)});class ki extends Se{_parse(e){return this._getType(e)===ie.null?Mt(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ki.create=(t,e)=>new ki({innerType:t,typeName:de.ZodNullable,...we(e)});class pl extends Se{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===ie.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}pl.create=(t,e)=>new pl({innerType:t,typeName:de.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...we(e)});class ml extends Se{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return il(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ln(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ln(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}ml.create=(t,e)=>new ml({innerType:t,typeName:de.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...we(e)});class Ru extends Se{_parse(e){if(this._getType(e)!==ie.nan){const r=this._getOrReturnCtx(e);return te(r,{code:Y.invalid_type,expected:ie.nan,received:r.parsedType}),pe}return{status:"valid",value:e.data}}}Ru.create=t=>new Ru({typeName:de.ZodNaN,...we(t)});const ZR=Symbol("zod_brand");class _g extends Se{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Rl extends Se{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?pe:s.status==="dirty"?(n.dirty(),qs(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?pe:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new Rl({in:e,out:n,typeName:de.ZodPipeline})}}class gl extends Se{_parse(e){const n=this._def.innerType._parse(e),r=i=>(ns(i)&&(i.value=Object.freeze(i.value)),i);return il(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}gl.create=(t,e)=>new gl({innerType:t,typeName:de.ZodReadonly,...we(e)});function Sx(t,e){const n=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof n=="string"?{message:n}:n}function HS(t,e={},n){return t?No.create().superRefine((r,i)=>{var s,o;const a=t(r);if(a instanceof Promise)return a.then(l=>{var c,u;if(!l){const h=Sx(e,r),f=(u=(c=h.fatal)!==null&&c!==void 0?c:n)!==null&&u!==void 0?u:!0;i.addIssue({code:"custom",...h,fatal:f})}});if(!a){const l=Sx(e,r),c=(o=(s=l.fatal)!==null&&s!==void 0?s:n)!==null&&o!==void 0?o:!0;i.addIssue({code:"custom",...l,fatal:c})}}):No.create()}const XR={object:We.lazycreate};var de;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(de||(de={}));const QR=(t,e={message:`Input not instance of ${t.name}`})=>HS(n=>n instanceof t,e),WS=Mn.create,qS=wi.create,JR=Ru.create,eM=bi.create,KS=sl.create,tM=rs.create,nM=Au.create,rM=ol.create,iM=al.create,sM=No.create,oM=Ki.create,aM=Lr.create,lM=Pu.create,cM=Ln.create,uM=We.create,dM=We.strictCreate,hM=ll.create,fM=yd.create,pM=cl.create,mM=cr.create,gM=ul.create,vM=ju.create,yM=is.create,xM=no.create,wM=dl.create,bM=hl.create,SM=Si.create,kM=fl.create,CM=_o.create,kx=Fn.create,EM=sr.create,NM=ki.create,_M=Fn.createWithPreprocess,TM=Rl.create,AM=()=>WS().optional(),PM=()=>qS().optional(),jM=()=>KS().optional(),RM={string:t=>Mn.create({...t,coerce:!0}),number:t=>wi.create({...t,coerce:!0}),boolean:t=>sl.create({...t,coerce:!0}),bigint:t=>bi.create({...t,coerce:!0}),date:t=>rs.create({...t,coerce:!0})},MM=pe;var na=Object.freeze({__proto__:null,defaultErrorMap:Eo,setErrorMap:_R,getErrorMap:Nu,makeIssue:_u,EMPTY_PATH:TR,addIssueToContext:te,ParseStatus:At,INVALID:pe,DIRTY:qs,OK:Mt,isAborted:Ip,isDirty:Op,isValid:ns,isAsync:il,get util(){return _e},get objectUtil(){return Mp},ZodParsedType:ie,getParsedType:Er,ZodType:Se,datetimeRegex:VS,ZodString:Mn,ZodNumber:wi,ZodBigInt:bi,ZodBoolean:sl,ZodDate:rs,ZodSymbol:Au,ZodUndefined:ol,ZodNull:al,ZodAny:No,ZodUnknown:Ki,ZodNever:Lr,ZodVoid:Pu,ZodArray:Ln,ZodObject:We,ZodUnion:ll,ZodDiscriminatedUnion:yd,ZodIntersection:cl,ZodTuple:cr,ZodRecord:ul,ZodMap:ju,ZodSet:is,ZodFunction:no,ZodLazy:dl,ZodLiteral:hl,ZodEnum:Si,ZodNativeEnum:fl,ZodPromise:_o,ZodEffects:Fn,ZodTransformer:Fn,ZodOptional:sr,ZodNullable:ki,ZodDefault:pl,ZodCatch:ml,ZodNaN:Ru,BRAND:ZR,ZodBranded:_g,ZodPipeline:Rl,ZodReadonly:gl,custom:HS,Schema:Se,ZodSchema:Se,late:XR,get ZodFirstPartyTypeKind(){return de},coerce:RM,any:sM,array:cM,bigint:eM,boolean:KS,date:tM,discriminatedUnion:fM,effect:kx,enum:SM,function:xM,instanceof:QR,intersection:pM,lazy:wM,literal:bM,map:vM,nan:JR,nativeEnum:kM,never:aM,null:iM,nullable:NM,number:qS,object:uM,oboolean:jM,onumber:PM,optional:EM,ostring:AM,pipeline:TM,preprocess:_M,promise:CM,record:gM,set:yM,strictObject:dM,string:WS,symbol:nM,transformer:kx,tuple:mM,undefined:rM,union:hM,unknown:oM,void:lM,NEVER:MM,ZodIssueCode:Y,quotelessJson:NR,ZodError:ln});const IM=na.object({apiUrl:na.string().url(),useMock:na.boolean().default(!1),mockInitData:na.string().optional().default(""),enableDebugLogging:na.boolean().optional().default(!1)});let Mu=null,Fh=null;async function OM(){try{const t="config.json";k.log(`[Config] Fetching config from: ${t}`);const e=await fetch(t);if(!e.ok)throw new Error(`Failed to fetch ${t}: ${e.status} ${e.statusText}`);const n=await e.json();k.log("[Config] Raw config data:",n);const r=IM.parse(n);return k.log("[Config] Parsed config:",r),r}catch(t){throw k.error("[Config] Error loading or parsing config.json:",t),new Error(`Application configuration is invalid or missing. Details: ${t instanceof Error?t.message:String(t)}`)}}function Ml(){if(!Mu)throw k.error("[Config] getConfig called before initialization!"),new Error("Configuration not loaded");return Mu}async function LM(){if(Mu){k.warn("[Config] Already initialized.");return}Fh||(Fh=OM());try{Mu=await Fh,k.log("[Config] Initialization complete.")}catch(t){throw t}}let Ks=null;const uc=()=>{if(Ks!==null)return Ks;try{return Ks=Ml().enableDebugLogging,Ks}catch{return!1}},$M=t=>{Ks=t.enableDebugLogging,console.log(`[Logger] Config updated. Detailed logging in production is now: ${Ks?"ENABLED":"DISABLED"}`)},k={log:(...t)=>{uc()&&console.log("[APP LOG]",...t)},warn:(...t)=>{uc()&&console.warn("[APP WARN]",...t)},error:(...t)=>{console.error("[APP ERROR]",...t)},info:(...t)=>{uc()&&console.info("[APP INFO]",...t)},debug:(...t)=>{uc()&&(console.debug||console.log)("[APP DEBUG]",...t)}};function YS(t,e){return function(){return t.apply(e,arguments)}}const{toString:DM}=Object.prototype,{getPrototypeOf:Tg}=Object,xd=(t=>e=>{const n=DM.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Wn=t=>(t=t.toLowerCase(),e=>xd(e)===t),wd=t=>e=>typeof e===t,{isArray:$o}=Array,vl=wd("undefined");function zM(t){return t!==null&&!vl(t)&&t.constructor!==null&&!vl(t.constructor)&&cn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const GS=Wn("ArrayBuffer");function FM(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&GS(t.buffer),e}const BM=wd("string"),cn=wd("function"),ZS=wd("number"),bd=t=>t!==null&&typeof t=="object",VM=t=>t===!0||t===!1,Hc=t=>{if(xd(t)!=="object")return!1;const e=Tg(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},UM=Wn("Date"),HM=Wn("File"),WM=Wn("Blob"),qM=Wn("FileList"),KM=t=>bd(t)&&cn(t.pipe),YM=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||cn(t.append)&&((e=xd(t))==="formdata"||e==="object"&&cn(t.toString)&&t.toString()==="[object FormData]"))},GM=Wn("URLSearchParams"),[ZM,XM,QM,JM]=["ReadableStream","Request","Response","Headers"].map(Wn),eI=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Il(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),$o(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,t[a],a,t)}}function XS(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const Hi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,QS=t=>!vl(t)&&t!==Hi;function $p(){const{caseless:t}=QS(this)&&this||{},e={},n=(r,i)=>{const s=t&&XS(e,i)||i;Hc(e[s])&&Hc(r)?e[s]=$p(e[s],r):Hc(r)?e[s]=$p({},r):$o(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Il(arguments[r],n);return e}const tI=(t,e,n,{allOwnKeys:r}={})=>(Il(e,(i,s)=>{n&&cn(i)?t[s]=YS(i,n):t[s]=i},{allOwnKeys:r}),t),nI=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),rI=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},iI=(t,e,n,r)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&Tg(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},sI=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},oI=t=>{if(!t)return null;if($o(t))return t;let e=t.length;if(!ZS(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},aI=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Tg(Uint8Array)),lI=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},cI=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},uI=Wn("HTMLFormElement"),dI=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),Cx=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),hI=Wn("RegExp"),JS=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Il(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},fI=t=>{JS(t,(e,n)=>{if(cn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(cn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},pI=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return $o(t)?r(t):r(String(t).split(e)),n},mI=()=>{},gI=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function vI(t){return!!(t&&cn(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const yI=t=>{const e=new Array(10),n=(r,i)=>{if(bd(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=$o(r)?[]:{};return Il(r,(o,a)=>{const l=n(o,i+1);!vl(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return n(t,0)},xI=Wn("AsyncFunction"),wI=t=>t&&(bd(t)||cn(t))&&cn(t.then)&&cn(t.catch),ek=((t,e)=>t?setImmediate:e?((n,r)=>(Hi.addEventListener("message",({source:i,data:s})=>{i===Hi&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),Hi.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",cn(Hi.postMessage)),bI=typeof queueMicrotask<"u"?queueMicrotask.bind(Hi):typeof process<"u"&&process.nextTick||ek,V={isArray:$o,isArrayBuffer:GS,isBuffer:zM,isFormData:YM,isArrayBufferView:FM,isString:BM,isNumber:ZS,isBoolean:VM,isObject:bd,isPlainObject:Hc,isReadableStream:ZM,isRequest:XM,isResponse:QM,isHeaders:JM,isUndefined:vl,isDate:UM,isFile:HM,isBlob:WM,isRegExp:hI,isFunction:cn,isStream:KM,isURLSearchParams:GM,isTypedArray:aI,isFileList:qM,forEach:Il,merge:$p,extend:tI,trim:eI,stripBOM:nI,inherits:rI,toFlatObject:iI,kindOf:xd,kindOfTest:Wn,endsWith:sI,toArray:oI,forEachEntry:lI,matchAll:cI,isHTMLForm:uI,hasOwnProperty:Cx,hasOwnProp:Cx,reduceDescriptors:JS,freezeMethods:fI,toObjectSet:pI,toCamelCase:dI,noop:mI,toFiniteNumber:gI,findKey:XS,global:Hi,isContextDefined:QS,isSpecCompliantForm:vI,toJSONObject:yI,isAsyncFn:xI,isThenable:wI,setImmediate:ek,asap:bI};function xe(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}V.inherits(xe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:V.toJSONObject(this.config),code:this.code,status:this.status}}});const tk=xe.prototype,nk={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{nk[t]={value:t}});Object.defineProperties(xe,nk);Object.defineProperty(tk,"isAxiosError",{value:!0});xe.from=(t,e,n,r,i,s)=>{const o=Object.create(tk);return V.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),xe.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const SI=null;function Dp(t){return V.isPlainObject(t)||V.isArray(t)}function rk(t){return V.endsWith(t,"[]")?t.slice(0,-2):t}function Ex(t,e,n){return t?t.concat(e).map(function(i,s){return i=rk(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function kI(t){return V.isArray(t)&&!t.some(Dp)}const CI=V.toFlatObject(V,{},null,function(e){return/^is[A-Z]/.test(e)});function Sd(t,e,n){if(!V.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=V.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,w){return!V.isUndefined(w[m])});const r=n.metaTokens,i=n.visitor||u,s=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&V.isSpecCompliantForm(e);if(!V.isFunction(i))throw new TypeError("visitor must be a function");function c(g){if(g===null)return"";if(V.isDate(g))return g.toISOString();if(!l&&V.isBlob(g))throw new xe("Blob is not supported. Use a Buffer instead.");return V.isArrayBuffer(g)||V.isTypedArray(g)?l&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function u(g,m,w){let v=g;if(g&&!w&&typeof g=="object"){if(V.endsWith(m,"{}"))m=r?m:m.slice(0,-2),g=JSON.stringify(g);else if(V.isArray(g)&&kI(g)||(V.isFileList(g)||V.endsWith(m,"[]"))&&(v=V.toArray(g)))return m=rk(m),v.forEach(function(b,S){!(V.isUndefined(b)||b===null)&&e.append(o===!0?Ex([m],S,s):o===null?m:m+"[]",c(b))}),!1}return Dp(g)?!0:(e.append(Ex(w,m,s),c(g)),!1)}const h=[],f=Object.assign(CI,{defaultVisitor:u,convertValue:c,isVisitable:Dp});function p(g,m){if(!V.isUndefined(g)){if(h.indexOf(g)!==-1)throw Error("Circular reference detected in "+m.join("."));h.push(g),V.forEach(g,function(v,x){(!(V.isUndefined(v)||v===null)&&i.call(e,v,V.isString(x)?x.trim():x,m,f))===!0&&p(v,m?m.concat(x):[x])}),h.pop()}}if(!V.isObject(t))throw new TypeError("data must be an object");return p(t),e}function Nx(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Ag(t,e){this._pairs=[],t&&Sd(t,this,e)}const ik=Ag.prototype;ik.append=function(e,n){this._pairs.push([e,n])};ik.toString=function(e){const n=e?function(r){return e.call(this,r,Nx)}:Nx;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function EI(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function sk(t,e,n){if(!e)return t;const r=n&&n.encode||EI;V.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(e,n):s=V.isURLSearchParams(e)?e.toString():new Ag(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class _x{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){V.forEach(this.handlers,function(r){r!==null&&e(r)})}}const ok={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},NI=typeof URLSearchParams<"u"?URLSearchParams:Ag,_I=typeof FormData<"u"?FormData:null,TI=typeof Blob<"u"?Blob:null,AI={isBrowser:!0,classes:{URLSearchParams:NI,FormData:_I,Blob:TI},protocols:["http","https","file","blob","url","data"]},Pg=typeof window<"u"&&typeof document<"u",zp=typeof navigator=="object"&&navigator||void 0,PI=Pg&&(!zp||["ReactNative","NativeScript","NS"].indexOf(zp.product)<0),jI=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",RI=Pg&&window.location.href||"http://localhost",MI=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Pg,hasStandardBrowserEnv:PI,hasStandardBrowserWebWorkerEnv:jI,navigator:zp,origin:RI},Symbol.toStringTag,{value:"Module"})),_t={...MI,...AI};function II(t,e){return Sd(t,new _t.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return _t.isNode&&V.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function OI(t){return V.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function LI(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function ak(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=n.length;return o=!o&&V.isArray(i)?i.length:o,l?(V.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!V.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&V.isArray(i[o])&&(i[o]=LI(i[o])),!a)}if(V.isFormData(t)&&V.isFunction(t.entries)){const n={};return V.forEachEntry(t,(r,i)=>{e(OI(r),i,n,0)}),n}return null}function $I(t,e,n){if(V.isString(t))try{return(e||JSON.parse)(t),V.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Ol={transitional:ok,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=V.isObject(e);if(s&&V.isHTMLForm(e)&&(e=new FormData(e)),V.isFormData(e))return i?JSON.stringify(ak(e)):e;if(V.isArrayBuffer(e)||V.isBuffer(e)||V.isStream(e)||V.isFile(e)||V.isBlob(e)||V.isReadableStream(e))return e;if(V.isArrayBufferView(e))return e.buffer;if(V.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return II(e,this.formSerializer).toString();if((a=V.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Sd(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),$I(e)):e}],transformResponse:[function(e){const n=this.transitional||Ol.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(V.isResponse(e)||V.isReadableStream(e))return e;if(e&&V.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?xe.from(a,xe.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:_t.classes.FormData,Blob:_t.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};V.forEach(["delete","get","head","post","put","patch"],t=>{Ol.headers[t]={}});const DI=V.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),zI=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&DI[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},Tx=Symbol("internals");function ra(t){return t&&String(t).trim().toLowerCase()}function Wc(t){return t===!1||t==null?t:V.isArray(t)?t.map(Wc):String(t)}function FI(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const BI=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Bh(t,e,n,r,i){if(V.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!V.isString(e)){if(V.isString(r))return e.indexOf(r)!==-1;if(V.isRegExp(r))return r.test(e)}}function VI(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function UI(t,e){const n=V.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}let qt=class{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(a,l,c){const u=ra(l);if(!u)throw new Error("header name must be a non-empty string");const h=V.findKey(i,u);(!h||i[h]===void 0||c===!0||c===void 0&&i[h]!==!1)&&(i[h||l]=Wc(a))}const o=(a,l)=>V.forEach(a,(c,u)=>s(c,u,l));if(V.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(V.isString(e)&&(e=e.trim())&&!BI(e))o(zI(e),n);else if(V.isHeaders(e))for(const[a,l]of e.entries())s(l,a,r);else e!=null&&s(n,e,r);return this}get(e,n){if(e=ra(e),e){const r=V.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return FI(i);if(V.isFunction(n))return n.call(this,i,r);if(V.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=ra(e),e){const r=V.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||Bh(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=ra(o),o){const a=V.findKey(r,o);a&&(!n||Bh(r,r[a],a,n))&&(delete r[a],i=!0)}}return V.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||Bh(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return V.forEach(this,(i,s)=>{const o=V.findKey(r,s);if(o){n[o]=Wc(i),delete n[s];return}const a=e?VI(s):String(s).trim();a!==s&&delete n[s],n[a]=Wc(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return V.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&V.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[Tx]=this[Tx]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=ra(o);r[a]||(UI(i,o),r[a]=!0)}return V.isArray(e)?e.forEach(s):s(e),this}};qt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);V.reduceDescriptors(qt.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});V.freezeMethods(qt);function Vh(t,e){const n=this||Ol,r=e||n,i=qt.from(r.headers);let s=r.data;return V.forEach(t,function(a){s=a.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function lk(t){return!!(t&&t.__CANCEL__)}function Do(t,e,n){xe.call(this,t??"canceled",xe.ERR_CANCELED,e,n),this.name="CanceledError"}V.inherits(Do,xe,{__CANCEL__:!0});function ck(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new xe("Request failed with status code "+n.status,[xe.ERR_BAD_REQUEST,xe.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function HI(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function WI(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=r[s];o||(o=c),n[i]=l,r[i]=c;let h=s,f=0;for(;h!==i;)f+=n[h++],h=h%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const p=u&&c-u;return p?Math.round(f*1e3/p):void 0}}function qI(t,e){let n=0,r=1e3/e,i,s;const o=(c,u=Date.now())=>{n=u,i=null,s&&(clearTimeout(s),s=null),t.apply(null,c)};return[(...c)=>{const u=Date.now(),h=u-n;h>=r?o(c,u):(i=c,s||(s=setTimeout(()=>{s=null,o(i)},r-h)))},()=>i&&o(i)]}const Iu=(t,e,n=3)=>{let r=0;const i=WI(50,250);return qI(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-r,c=i(l),u=o<=a;r=o;const h={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-o)/c:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(h)},n)},Ax=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},Px=t=>(...e)=>V.asap(()=>t(...e)),KI=_t.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,_t.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(_t.origin),_t.navigator&&/(msie|trident)/i.test(_t.navigator.userAgent)):()=>!0,YI=_t.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];V.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),V.isString(r)&&o.push("path="+r),V.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function GI(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function ZI(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function uk(t,e,n){let r=!GI(e);return t&&(r||n==!1)?ZI(t,e):e}const jx=t=>t instanceof qt?{...t}:t;function ss(t,e){e=e||{};const n={};function r(c,u,h,f){return V.isPlainObject(c)&&V.isPlainObject(u)?V.merge.call({caseless:f},c,u):V.isPlainObject(u)?V.merge({},u):V.isArray(u)?u.slice():u}function i(c,u,h,f){if(V.isUndefined(u)){if(!V.isUndefined(c))return r(void 0,c,h,f)}else return r(c,u,h,f)}function s(c,u){if(!V.isUndefined(u))return r(void 0,u)}function o(c,u){if(V.isUndefined(u)){if(!V.isUndefined(c))return r(void 0,c)}else return r(void 0,u)}function a(c,u,h){if(h in e)return r(c,u);if(h in t)return r(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u,h)=>i(jx(c),jx(u),h,!0)};return V.forEach(Object.keys(Object.assign({},t,e)),function(u){const h=l[u]||i,f=h(t[u],e[u],u);V.isUndefined(f)&&h!==a||(n[u]=f)}),n}const dk=t=>{const e=ss({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;e.headers=o=qt.from(o),e.url=sk(uk(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(V.isFormData(n)){if(_t.hasStandardBrowserEnv||_t.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...u]=l?l.split(";").map(h=>h.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...u].join("; "))}}if(_t.hasStandardBrowserEnv&&(r&&V.isFunction(r)&&(r=r(e)),r||r!==!1&&KI(e.url))){const c=i&&s&&YI.read(s);c&&o.set(i,c)}return e},XI=typeof XMLHttpRequest<"u",QI=XI&&function(t){return new Promise(function(n,r){const i=dk(t);let s=i.data;const o=qt.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=i,u,h,f,p,g;function m(){p&&p(),g&&g(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let w=new XMLHttpRequest;w.open(i.method.toUpperCase(),i.url,!0),w.timeout=i.timeout;function v(){if(!w)return;const b=qt.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),N={data:!a||a==="text"||a==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:b,config:t,request:w};ck(function(_){n(_),m()},function(_){r(_),m()},N),w=null}"onloadend"in w?w.onloadend=v:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(v)},w.onabort=function(){w&&(r(new xe("Request aborted",xe.ECONNABORTED,t,w)),w=null)},w.onerror=function(){r(new xe("Network Error",xe.ERR_NETWORK,t,w)),w=null},w.ontimeout=function(){let S=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const N=i.transitional||ok;i.timeoutErrorMessage&&(S=i.timeoutErrorMessage),r(new xe(S,N.clarifyTimeoutError?xe.ETIMEDOUT:xe.ECONNABORTED,t,w)),w=null},s===void 0&&o.setContentType(null),"setRequestHeader"in w&&V.forEach(o.toJSON(),function(S,N){w.setRequestHeader(N,S)}),V.isUndefined(i.withCredentials)||(w.withCredentials=!!i.withCredentials),a&&a!=="json"&&(w.responseType=i.responseType),c&&([f,g]=Iu(c,!0),w.addEventListener("progress",f)),l&&w.upload&&([h,p]=Iu(l),w.upload.addEventListener("progress",h),w.upload.addEventListener("loadend",p)),(i.cancelToken||i.signal)&&(u=b=>{w&&(r(!b||b.type?new Do(null,t,w):b),w.abort(),w=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const x=HI(i.url);if(x&&_t.protocols.indexOf(x)===-1){r(new xe("Unsupported protocol "+x+":",xe.ERR_BAD_REQUEST,t));return}w.send(s||null)})},JI=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const s=function(c){if(!i){i=!0,a();const u=c instanceof Error?c:this.reason;r.abort(u instanceof xe?u:new Do(u instanceof Error?u.message:u))}};let o=e&&setTimeout(()=>{o=null,s(new xe(`timeout ${e} of ms exceeded`,xe.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),t=null)};t.forEach(c=>c.addEventListener("abort",s));const{signal:l}=r;return l.unsubscribe=()=>V.asap(a),l}},eO=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},tO=async function*(t,e){for await(const n of nO(t))yield*eO(n,e)},nO=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},Rx=(t,e,n,r)=>{const i=tO(t,e);let s=0,o,a=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await i.next();if(c){a(),l.close();return}let h=u.byteLength;if(n){let f=s+=h;n(f)}l.enqueue(new Uint8Array(u))}catch(c){throw a(c),c}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},kd=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",hk=kd&&typeof ReadableStream=="function",rO=kd&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),fk=(t,...e)=>{try{return!!t(...e)}catch{return!1}},iO=hk&&fk(()=>{let t=!1;const e=new Request(_t.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),Mx=64*1024,Fp=hk&&fk(()=>V.isReadableStream(new Response("").body)),Ou={stream:Fp&&(t=>t.body)};kd&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Ou[e]&&(Ou[e]=V.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new xe(`Response type '${e}' is not supported`,xe.ERR_NOT_SUPPORT,r)})})})(new Response);const sO=async t=>{if(t==null)return 0;if(V.isBlob(t))return t.size;if(V.isSpecCompliantForm(t))return(await new Request(_t.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(V.isArrayBufferView(t)||V.isArrayBuffer(t))return t.byteLength;if(V.isURLSearchParams(t)&&(t=t+""),V.isString(t))return(await rO(t)).byteLength},oO=async(t,e)=>{const n=V.toFiniteNumber(t.getContentLength());return n??sO(e)},aO=kd&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:h="same-origin",fetchOptions:f}=dk(t);c=c?(c+"").toLowerCase():"text";let p=JI([i,s&&s.toAbortSignal()],o),g;const m=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let w;try{if(l&&iO&&n!=="get"&&n!=="head"&&(w=await oO(u,r))!==0){let N=new Request(e,{method:"POST",body:r,duplex:"half"}),C;if(V.isFormData(r)&&(C=N.headers.get("content-type"))&&u.setContentType(C),N.body){const[_,P]=Ax(w,Iu(Px(l)));r=Rx(N.body,Mx,_,P)}}V.isString(h)||(h=h?"include":"omit");const v="credentials"in Request.prototype;g=new Request(e,{...f,signal:p,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:v?h:void 0});let x=await fetch(g);const b=Fp&&(c==="stream"||c==="response");if(Fp&&(a||b&&m)){const N={};["status","statusText","headers"].forEach(I=>{N[I]=x[I]});const C=V.toFiniteNumber(x.headers.get("content-length")),[_,P]=a&&Ax(C,Iu(Px(a),!0))||[];x=new Response(Rx(x.body,Mx,_,()=>{P&&P(),m&&m()}),N)}c=c||"text";let S=await Ou[V.findKey(Ou,c)||"text"](x,t);return!b&&m&&m(),await new Promise((N,C)=>{ck(N,C,{data:S,headers:qt.from(x.headers),status:x.status,statusText:x.statusText,config:t,request:g})})}catch(v){throw m&&m(),v&&v.name==="TypeError"&&/fetch/i.test(v.message)?Object.assign(new xe("Network Error",xe.ERR_NETWORK,t,g),{cause:v.cause||v}):xe.from(v,v&&v.code,t,g)}}),Bp={http:SI,xhr:QI,fetch:aO};V.forEach(Bp,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Ix=t=>`- ${t}`,lO=t=>V.isFunction(t)||t===null||t===!1,pk={getAdapter:t=>{t=V.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!lO(n)&&(r=Bp[(o=String(n)).toLowerCase()],r===void 0))throw new xe(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(Ix).join(`
`):" "+Ix(s[0]):"as no adapter specified";throw new xe("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:Bp};function Uh(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Do(null,t)}function Ox(t){return Uh(t),t.headers=qt.from(t.headers),t.data=Vh.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),pk.getAdapter(t.adapter||Ol.adapter)(t).then(function(r){return Uh(t),r.data=Vh.call(t,t.transformResponse,r),r.headers=qt.from(r.headers),r},function(r){return lk(r)||(Uh(t),r&&r.response&&(r.response.data=Vh.call(t,t.transformResponse,r.response),r.response.headers=qt.from(r.response.headers))),Promise.reject(r)})}const mk="1.8.4",Cd={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Cd[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const Lx={};Cd.transitional=function(e,n,r){function i(s,o){return"[Axios v"+mk+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new xe(i(o," has been removed"+(n?" in "+n:"")),xe.ERR_DEPRECATED);return n&&!Lx[o]&&(Lx[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};Cd.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function cO(t,e,n){if(typeof t!="object")throw new xe("options must be an object",xe.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new xe("option "+s+" must be "+l,xe.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new xe("Unknown option "+s,xe.ERR_BAD_OPTION)}}const qc={assertOptions:cO,validators:Cd},Gn=qc.validators;let Yi=class{constructor(e){this.defaults=e,this.interceptors={request:new _x,response:new _x}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=ss(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&qc.assertOptions(r,{silentJSONParsing:Gn.transitional(Gn.boolean),forcedJSONParsing:Gn.transitional(Gn.boolean),clarifyTimeoutError:Gn.transitional(Gn.boolean)},!1),i!=null&&(V.isFunction(i)?n.paramsSerializer={serialize:i}:qc.assertOptions(i,{encode:Gn.function,serialize:Gn.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),qc.assertOptions(n,{baseUrl:Gn.spelling("baseURL"),withXsrfToken:Gn.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&V.merge(s.common,s[n.method]);s&&V.forEach(["delete","get","head","post","put","patch","common"],g=>{delete s[g]}),n.headers=qt.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(n)===!1||(l=l&&m.synchronous,a.unshift(m.fulfilled,m.rejected))});const c=[];this.interceptors.response.forEach(function(m){c.push(m.fulfilled,m.rejected)});let u,h=0,f;if(!l){const g=[Ox.bind(this),void 0];for(g.unshift.apply(g,a),g.push.apply(g,c),f=g.length,u=Promise.resolve(n);h<f;)u=u.then(g[h++],g[h++]);return u}f=a.length;let p=n;for(h=0;h<f;){const g=a[h++],m=a[h++];try{p=g(p)}catch(w){m.call(this,w);break}}try{u=Ox.call(this,p)}catch(g){return Promise.reject(g)}for(h=0,f=c.length;h<f;)u=u.then(c[h++],c[h++]);return u}getUri(e){e=ss(this.defaults,e);const n=uk(e.baseURL,e.url,e.allowAbsoluteUrls);return sk(n,e.params,e.paramsSerializer)}};V.forEach(["delete","get","head","options"],function(e){Yi.prototype[e]=function(n,r){return this.request(ss(r||{},{method:e,url:n,data:(r||{}).data}))}});V.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,a){return this.request(ss(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Yi.prototype[e]=n(),Yi.prototype[e+"Form"]=n(!0)});let uO=class gk{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new Do(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new gk(function(i){e=i}),cancel:e}}};function dO(t){return function(n){return t.apply(null,n)}}function hO(t){return V.isObject(t)&&t.isAxiosError===!0}const Vp={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Vp).forEach(([t,e])=>{Vp[e]=t});function vk(t){const e=new Yi(t),n=YS(Yi.prototype.request,e);return V.extend(n,Yi.prototype,e,{allOwnKeys:!0}),V.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return vk(ss(t,i))},n}const tt=vk(Ol);tt.Axios=Yi;tt.CanceledError=Do;tt.CancelToken=uO;tt.isCancel=lk;tt.VERSION=mk;tt.toFormData=Sd;tt.AxiosError=xe;tt.Cancel=tt.CanceledError;tt.all=function(e){return Promise.all(e)};tt.spread=dO;tt.isAxiosError=hO;tt.mergeConfig=ss;tt.AxiosHeaders=qt;tt.formToJSON=t=>ak(V.isHTMLForm(t)?new FormData(t):t);tt.getAdapter=pk.getAdapter;tt.HttpStatusCode=Vp;tt.default=tt;const{Axios:u8,AxiosError:d8,CanceledError:h8,isCancel:f8,CancelToken:p8,VERSION:m8,all:g8,Cancel:v8,isAxiosError:y8,spread:x8,toFormData:w8,AxiosHeaders:b8,HttpStatusCode:S8,formToJSON:k8,getAdapter:C8,mergeConfig:E8}=tt,fO={};function xs(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var s;const o=l=>l===null?null:JSON.parse(l,void 0),a=(s=n.getItem(i))!=null?s:null;return a instanceof Promise?a.then(o):o(a)},setItem:(i,s)=>n.setItem(i,JSON.stringify(s,void 0)),removeItem:i=>n.removeItem(i)}}const yl=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return yl(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return yl(r)(n)}}}},pO=(t,e)=>(n,r,i)=>{let s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:w=>w,version:0,merge:(w,v)=>({...v,...w}),...e},o=!1;const a=new Set,l=new Set;let c;try{c=s.getStorage()}catch{}if(!c)return t((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...w)},r,i);const u=yl(s.serialize),h=()=>{const w=s.partialize({...r()});let v;const x=u({state:w,version:s.version}).then(b=>c.setItem(s.name,b)).catch(b=>{v=b});if(v)throw v;return x},f=i.setState;i.setState=(w,v)=>{f(w,v),h()};const p=t((...w)=>{n(...w),h()},r,i);let g;const m=()=>{var w;if(!c)return;o=!1,a.forEach(x=>x(r()));const v=((w=s.onRehydrateStorage)==null?void 0:w.call(s,r()))||void 0;return yl(c.getItem.bind(c))(s.name).then(x=>{if(x)return s.deserialize(x)}).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==s.version){if(s.migrate)return s.migrate(x.state,x.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return x.state}).then(x=>{var b;return g=s.merge(x,(b=r())!=null?b:p),n(g,!0),h()}).then(()=>{v==null||v(g,void 0),o=!0,l.forEach(x=>x(g))}).catch(x=>{v==null||v(void 0,x)})};return i.persist={setOptions:w=>{s={...s,...w},w.getStorage&&(c=w.getStorage())},clearStorage:()=>{c==null||c.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>m(),hasHydrated:()=>o,onHydrate:w=>(a.add(w),()=>{a.delete(w)}),onFinishHydration:w=>(l.add(w),()=>{l.delete(w)})},m(),g||p},mO=(t,e)=>(n,r,i)=>{let s={storage:xs(()=>localStorage),partialize:m=>m,version:0,merge:(m,w)=>({...w,...m}),...e},o=!1;const a=new Set,l=new Set;let c=s.storage;if(!c)return t((...m)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...m)},r,i);const u=()=>{const m=s.partialize({...r()});return c.setItem(s.name,{state:m,version:s.version})},h=i.setState;i.setState=(m,w)=>{h(m,w),u()};const f=t((...m)=>{n(...m),u()},r,i);i.getInitialState=()=>f;let p;const g=()=>{var m,w;if(!c)return;o=!1,a.forEach(x=>{var b;return x((b=r())!=null?b:f)});const v=((w=s.onRehydrateStorage)==null?void 0:w.call(s,(m=r())!=null?m:f))||void 0;return yl(c.getItem.bind(c))(s.name).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==s.version){if(s.migrate)return[!0,s.migrate(x.state,x.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,x.state];return[!1,void 0]}).then(x=>{var b;const[S,N]=x;if(p=s.merge(N,(b=r())!=null?b:f),n(p,!0),S)return u()}).then(()=>{v==null||v(p,void 0),p=r(),o=!0,l.forEach(x=>x(p))}).catch(x=>{v==null||v(void 0,x)})};return i.persist={setOptions:m=>{s={...s,...m},m.storage&&(c=m.storage)},clearStorage:()=>{c==null||c.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>g(),hasHydrated:()=>o,onHydrate:m=>(a.add(m),()=>{a.delete(m)}),onFinishHydration:m=>(l.add(m),()=>{l.delete(m)})},s.skipHydration||g(),p||f},gO=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((fO?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),pO(t,e)):mO(t,e),zo=gO;class ga extends Error{}ga.prototype.name="InvalidTokenError";function vO(t){return decodeURIComponent(atob(t).replace(/(.)/g,(e,n)=>{let r=n.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function yO(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return vO(e)}catch{return atob(e)}}function xO(t,e){if(typeof t!="string")throw new ga("Invalid token specified: must be a string");e||(e={});const n=e.header===!0?0:1,r=t.split(".")[n];if(typeof r!="string")throw new ga(`Invalid token specified: missing part #${n+1}`);let i;try{i=yO(r)}catch(s){throw new ga(`Invalid token specified: invalid base64 for part #${n+1} (${s.message})`)}try{return JSON.parse(i)}catch(s){throw new ga(`Invalid token specified: invalid json for part #${n+1} (${s.message})`)}}const Tr=fr()(zo(t=>({isAdminAuthenticated:!1,isLoading:!0,login:()=>{k.log("[AdminAuthStore] Setting isAdminAuthenticated to true."),t({isAdminAuthenticated:!0,isLoading:!1})},logout:()=>{k.log("[AdminAuthStore] Setting isAdminAuthenticated to false."),t({isAdminAuthenticated:!1,isLoading:!1})}}),{name:"admin-auth-storage",storage:xs(()=>sessionStorage),onRehydrateStorage:()=>t=>{k.log("[AdminAuthStore] onRehydrateStorage: Hydration complete."),t?(t.isLoading=!1,k.log(`[AdminAuthStore] onRehydrateStorage: State initialized. isLoading: ${t.isLoading}, isAdminAuthenticated: ${t.isAdminAuthenticated}`)):(k.warn("[AdminAuthStore] onRehydrateStorage: Rehydrated state is null."),Tr.setState({isLoading:!1,isAdminAuthenticated:!1}))},partialize:t=>({isAdminAuthenticated:t.isAdminAuthenticated})})),ot=(t,e)=>{if(!t||typeof t.data>"u")return k.error("[API Helper] Invalid/Undefined Response Structure:",t),{isSuccess:!1,errorMessage:e,resultObject:null};const n=t.data;if(n===null||typeof n.isSuccess!="boolean"){if(n===null&&t.status>=200&&t.status<300)return k.warn(`[API Helper] Received null data with success status (${t.status}), assuming success with null result.`),{isSuccess:!0,errorMessage:null,resultObject:null};k.error("[API Helper] Invalid Response Data Structure (missing isSuccess or data is null unexpectedly):",n);let r=e;return n!=null&&n.errorMessage?r=n.errorMessage:t!=null&&t.statusText&&(r=t.statusText),{isSuccess:!1,errorMessage:r,resultObject:null}}return!n.isSuccess&&n.errorMessage===null&&(k.warn("[API Helper] Response has isSuccess: false but errorMessage is null. Using default:",e),n.errorMessage=e),n.isSuccess&&typeof n.resultObject>"u"&&(k.warn("[API Helper] Response has isSuccess: true but resultObject is undefined. Setting to null."),n.resultObject=null),n},at=(t,e)=>{var r,i;k.error(`[API Error Handler] ${e}:`,t);let n=e;if(t instanceof Error)n=t.message;else if(t!=null&&t.response){const s=t.response.status,o=t.response.data,a=t.response.statusText;s===401||s===403?n="Ошибка авторизации или доступа.":s===400&&((r=o==null?void 0:o.errorMessage)!=null&&r.includes("Недостаточно средств"))?n="Недостаточно средств на счете.":s===400&&((i=o==null?void 0:o.errorMessage)!=null&&i.includes("Недостаточно активов"))?n="Недостаточно активов для продажи.":o!=null&&o.errorMessage?n=o.errorMessage:o!=null&&o.title?n=o.title:typeof o=="string"&&o.length>0&&o.length<200?n=o:a?n=`Ошибка сервера (${s}): ${a}`:n=`Ошибка сервера (${s}).`}else t!=null&&t.request?n="Ошибка сети или сервер недоступен.":typeof t=="string"?n=t:t!=null&&t.errorMessage&&(n=t.errorMessage);return{isSuccess:!1,errorMessage:n,resultObject:null}},wO=async t=>{var n,r,i;const e="Failed to fetch accounts.";k.log("[API/Portfolio] Fetching broker accounts...");try{const s=await Xe.get("/api/BrokerAccountUser/GetMyBrokerAccounts",{signal:t==null?void 0:t.signal});k.log("[API/Portfolio] Fetched accounts RAW response data:",s==null?void 0:s.data);let o=null;(n=s==null?void 0:s.data)!=null&&n.isSuccess&&s.data.resultObject?(o=s.data.resultObject.map(c=>{if(!c.portfolioItems)return{...c,portfolioItems:[]};const u=c.portfolioItems.map(h=>{if(h.asset&&typeof h.asset=="object"){const f=h.asset;let p;if(typeof f.outOfCirculationAt=="string"?p=f.outOfCirculationAt:typeof f.OutOfCirculationAt=="string"&&(p=f.OutOfCirculationAt,k.warn(`[API/Portfolio Normalization] Found 'OutOfCirculationAt' (uppercase O) for ${f.ticker}. Normalizing.`)),p!==void 0){const g={...h.asset,outOfCirculationAt:p};return delete g.OutOfCirculationAt,{...h,asset:g}}}return h});return{...c,portfolioItems:u}}),o.forEach(c=>{var u;(u=c.portfolioItems)==null||u.forEach(h=>{var f;((f=h.asset)==null?void 0:f.ticker)==="SU26207RMFS9"&&k.warn(`[API/Portfolio NORMALIZED Check - TARGET] Ticker: ${h.asset.ticker}, Normalized outOfCirculationAt: ${h.asset.outOfCirculationAt} (Type: ${typeof h.asset.outOfCirculationAt})`,h.asset)})})):(r=s==null?void 0:s.data)!=null&&r.isSuccess&&s.data.resultObject===null&&(o=null);const a=s?{...s,data:s.data?{...s.data,resultObject:o}:null}:null,l=ot(a,e);return l.isSuccess&&l.resultObject===null?(k.warn("[API/Portfolio] GetMyBrokerAccounts returned success but resultObject is null. Normalizing to an empty array []."),l.resultObject=[]):l.isSuccess&&l.resultObject&&(l.resultObject=l.resultObject.map(c=>({...c,portfolioItems:c.portfolioItems||[]}))),k.log("[API/Portfolio] Processed accounts:",l.isSuccess?`Success, ${((i=l.resultObject)==null?void 0:i.length)??0} accounts`:`Error: ${l.errorMessage}`),l}catch(s){return s.name==="AbortError"?(k.log("[API/Portfolio getMyBrokerAccounts] Request aborted."),{isSuccess:!1,errorMessage:"Request aborted",resultObject:null}):at(s,e)}},bO=async()=>{const t="Failed to create account.";k.log("[API/Portfolio] Attempting to create initial broker account...");try{const e=await Xe.post("/api/BrokerAccountUser/CreateMyInitialBrokerAccount");return k.log("[API/Portfolio] Create account raw response data:",e==null?void 0:e.data),ot(e,t)}catch(e){return at(e,t)}},ur=fr((t,e)=>({accounts:null,isLoading:!1,error:null,isFetching:!1,hasAttemptedFetch:!1,fetchPortfolio:async(n=!1)=>{if(!n&&e().isFetching){k.log("[PortfolioStore] Fetch already in progress. Skipping.");return}k.log(`[PortfolioStore] Starting fetchPortfolio (force=${n})...`),t(o=>({isLoading:n||o.accounts===null,error:null,isFetching:!0,hasAttemptedFetch:!0}));const i=new AbortController().signal;let s=null;try{const o=await wO({signal:i});if(k.log("[PortfolioStore] Accounts API response received:",o==null?void 0:o.isSuccess),i.aborted){k.log("[PortfolioStore] Fetch aborted before state update."),t({isFetching:!1});return}if(!o||typeof o.isSuccess!="boolean")throw new Error("Invalid response structure from getMyBrokerAccounts API.");if(o.isSuccess){const a=o.resultObject||[];k.log("[PortfolioStore] Data before setting state:",a),a.forEach(l=>{var c;(c=l.portfolioItems)==null||c.forEach(u=>{var h;((h=u.asset)==null?void 0:h.ticker)==="SU26207RMFS9"&&k.log(`[PortfolioStore] Storing asset ${u.asset.ticker} with outOfCirculationAt: ${u.asset.outOfCirculationAt}`,u.asset)})}),t({accounts:a,error:null}),k.log(`[PortfolioStore] Accounts updated successfully: ${a.length} accounts.`)}else s=o.errorMessage||"Failed to load portfolio data.",t({accounts:null,error:s})}catch(o){if(o.name==="AbortError"){k.log("[PortfolioStore] Fetch exception: Aborted."),t({isFetching:!1,isLoading:e().accounts===null});return}s=o.message||"Unexpected error fetching portfolio.",k.error("[PortfolioStore] Fetch exception:",o),t({accounts:null,error:s})}finally{i.aborted||(t({isLoading:!1,isFetching:!1}),k.log(`[PortfolioStore] Fetch finished. isLoading: false, isFetching: false, error: ${e().error}`))}}})),$x=async(t,e)=>{var r;const n="Failed to get notifications.";k.log("[API/Notifications] getMyNotifications called with params:",t);try{const i=await Xe.post("/api/UserNotifications/GetMyNotifications",t,{signal:e==null?void 0:e.signal});k.log("[API/Notifications] getMyNotifications response received:",(r=i==null?void 0:i.data)==null?void 0:r.isSuccess);const s=ot(i,n);return s.isSuccess&&s.resultObject?s.resultObject.userNotifications=s.resultObject.userNotifications||[]:s.isSuccess&&!s.resultObject&&(k.warn("[API/Notifications] getMyNotifications success but resultObject is null. Normalizing."),s.resultObject={userNotificationSearchParams:t,foundCount:0,userNotifications:[]}),s}catch(i){return i.name==="AbortError"?(k.log("[API/Notifications getMyNotifications] Request aborted."),{isSuccess:!1,errorMessage:"Request aborted",resultObject:null}):at(i,n)}},SO=async t=>{var n;const e=`Failed to mark notification ${t.UserNotificationId} as read.`;k.log("[API/Notifications] markNotificationAsRead called with payload:",t);try{const r=await Xe.post("/api/UserNotifications/MarkMyNotificationAsRead",t);return k.log("[API/Notifications] markNotificationAsRead response received:",(n=r==null?void 0:r.data)==null?void 0:n.isSuccess),ot(r,e)}catch(r){return r.name==="AbortError"?(k.log("[API/Notifications markNotificationAsRead] Request aborted."),{isSuccess:!1,errorMessage:"Request aborted",resultObject:null}):at(r,e)}},kO=async t=>{var n;const e="Failed to mark all notifications as read.";k.log("[API/Notifications] markAllNotificationsAsRead called");try{const r=await Xe.post("/api/UserNotifications/MarkAllMyNotificationsAsRead",null,{signal:t==null?void 0:t.signal});return k.log("[API/Notifications] markAllNotificationsAsRead response received:",(n=r==null?void 0:r.data)==null?void 0:n.isSuccess),ot(r,e)}catch(r){return r.name==="AbortError"?(k.log("[API/Notifications markAllNotificationsAsRead] Request aborted."),{isSuccess:!1,errorMessage:"Request aborted",resultObject:null}):at(r,e)}},CO=20,Dx=6e4,zx={notifications:[],unreadCount:0,totalCount:0,currentPage:1,filterReadStatus:null,isLoading:!1,isMarkingAsRead:new Set,error:null,hasFetchedInitialCount:!1,notificationsEnabled:!0,countPollingTimeoutId:null},nn=fr()(zo((t,e)=>({...zx,_scheduleNextCountFetch:()=>{const{stopCountPolling:n,countPollingTimeoutId:r,notificationsEnabled:i}=e();if(r&&clearTimeout(r),i){k.log(`[NotificationStore _scheduleNextCountFetch] Scheduling next count fetch in ${Dx}ms`);const s=setTimeout(async()=>{kn.getState().isAuthenticated&&e().notificationsEnabled?(k.log("[NotificationStore Polling Timeout] Fetching unread count..."),await e().fetchUnreadCount(!0)):(k.log("[NotificationStore Polling Timeout] Not fetching (auth or enabled changed). Stopping polling."),n())},Dx);t({countPollingTimeoutId:s})}else k.log("[NotificationStore _scheduleNextCountFetch] Notifications disabled, not scheduling next fetch."),t({countPollingTimeoutId:null})},fetchUnreadCount:async(n=!1)=>{k.log(`[NotificationStore fetchUnreadCount] Fetching unread count (force=${n})...`);try{const i=await $x({PageNumber:1,PageItemsCount:0,MarkedAsRead:!1});if(i.isSuccess&&i.resultObject){const s=i.resultObject.foundCount;t({unreadCount:e().notificationsEnabled?s:0,hasFetchedInitialCount:!0}),k.log(`[NotificationStore fetchUnreadCount] Success. Raw count: ${s}, Stored count: ${e().unreadCount}`)}else k.error("[NotificationStore fetchUnreadCount] Failed to fetch unread count:",i.errorMessage),e().hasFetchedInitialCount||t({hasFetchedInitialCount:!0})}catch(r){k.error("[NotificationStore fetchUnreadCount] Exception:",r),e().hasFetchedInitialCount||t({hasFetchedInitialCount:!0})}finally{(e().countPollingTimeoutId!==null||n)&&e()._scheduleNextCountFetch()}},fetchNotifications:async(n,r,i=!1)=>{var c;const{filterReadStatus:s,currentPage:o}=e(),a=n??(i?o+1:1),l=r!==void 0?r:s;if(e().isLoading){k.log("[NotificationStore fetchNotifications] Fetch skipped, already loading.");return}t({isLoading:!0,error:null}),i||t({notifications:[],totalCount:0}),k.log(`[NotificationStore fetchNotifications] Fetching: page=${a}, readStatus=${l}, append=${i}`);try{const h=await $x({PageNumber:a,PageItemsCount:CO,MarkedAsRead:l});if(h.isSuccess&&h.resultObject){const f=h.resultObject.userNotifications||[];t(p=>{var g;return{notifications:i?[...p.notifications,...f]:f,totalCount:((g=h.resultObject)==null?void 0:g.foundCount)??p.totalCount,currentPage:a,isLoading:!1,error:null}}),k.log(`[NotificationStore fetchNotifications] Success. Fetched ${f.length}. Total: ${((c=h.resultObject)==null?void 0:c.foundCount)??"N/A"}. Current page: ${a}`)}else throw new Error(h.errorMessage||"Не удалось загрузить уведомления.")}catch(u){k.error("[NotificationStore fetchNotifications] Fetch error:",u),t(h=>({error:u.message||"Ошибка загрузки уведомлений.",isLoading:!1,notifications:i?h.notifications:[],totalCount:i?h.totalCount:0,currentPage:i?h.currentPage:1}))}},markAsRead:async n=>{if(e().isMarkingAsRead.has(n))return k.log(`[NotificationStore markAsRead] Marking already in progress for ID: ${n}`),!1;t(i=>({isMarkingAsRead:new Set(i.isMarkingAsRead).add(n)})),k.log(`[NotificationStore markAsRead] Started marking ${n} as read.`);let r=!1;try{const i=await SO({UserNotificationId:n});if(i.isSuccess)k.log(`[NotificationStore markAsRead] API confirmation for ID: ${n}`),t(s=>({notifications:s.notifications.map(o=>o.id===n?{...o,readByUserAt:new Date().toISOString()}:o),unreadCount:s.notificationsEnabled?Math.max(0,s.unreadCount-1):0})),r=!0;else throw new Error(i.errorMessage||`Failed to mark notification ${n} as read.`)}catch(i){k.error(`[NotificationStore markAsRead] API error for ID ${n}:`,i),t({error:`Ошибка отметки уведомления #${n}: ${i.message}`}),r=!1}finally{t(i=>{const s=new Set(i.isMarkingAsRead);return s.delete(n),{isMarkingAsRead:s}}),k.log(`[NotificationStore markAsRead] Finished marking attempt for ${n}. Success: ${r}`)}return r},setFilter:n=>{e().filterReadStatus!==n?(k.log(`[NotificationStore setFilter] Setting filter to: ${n}`),t({filterReadStatus:n,currentPage:1}),e().fetchNotifications(1,n,!1)):k.log(`[NotificationStore setFilter] Filter already set to: ${n}. Skipping fetch.`)},goToPage:n=>{e().currentPage!==n&&!e().isLoading&&(k.log(`[NotificationStore goToPage] Going to page: ${n}`),t({currentPage:n}),e().fetchNotifications(n,e().filterReadStatus,!1))},startCountPolling:()=>{const{stopCountPolling:n,_scheduleNextCountFetch:r}=e();n(),k.log("[NotificationStore startCountPolling] Starting count polling."),r()},stopCountPolling:()=>{const{countPollingTimeoutId:n}=e();n?(k.log("[NotificationStore stopCountPolling] Stopping count polling."),clearTimeout(n),t({countPollingTimeoutId:null})):k.log("[NotificationStore stopCountPolling] Polling was not active.")},setNotificationsEnabled:n=>{k.log(`[NotificationStore setNotificationsEnabled] Setting enabled to: ${n}`);const r=e().notificationsEnabled;t({notificationsEnabled:n}),n?!r&&n&&(e().fetchUnreadCount(!0),e().startCountPolling()):(e().stopCountPolling(),t({unreadCount:0}))},resetNotifications:()=>{k.log("[NotificationStore resetNotifications] Resetting state and stopping polling."),e().stopCountPolling(),t(n=>({...zx,notificationsEnabled:n.notificationsEnabled}))}}),{name:"notification-storage",storage:xs(()=>localStorage),partialize:t=>({notificationsEnabled:t.notificationsEnabled}),onRehydrateStorage:()=>t=>{k.log("[NotificationStore] Hydration finished."),t&&(t.notifications=[],t.unreadCount=0,t.totalCount=0,t.currentPage=1,t.filterReadStatus=null,t.isLoading=!1,t.isMarkingAsRead=new Set,t.error=null,t.hasFetchedInitialCount=!1,t.countPollingTimeoutId=null,t.notificationsEnabled||(t.unreadCount=0),k.log(`[NotificationStore] Rehydrated state. Enabled: ${t.notificationsEnabled}`))}})),kn=fr()(zo((t,e)=>({userId:null,jwt:null,isAuthenticated:!1,isLoading:!0,_checkAdminRole:n=>{if(!n)return!1;try{const r=xO(n),i=r["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"]||r.role;if(i)return Array.isArray(i)?i.includes("Administrator"):i==="Administrator"}catch(r){k.error("[AuthStore _checkAdminRole] Failed to decode JWT:",r)}return!1},login:(n,r)=>{k.log("[AuthStore] Login action called.");const i=e()._checkAdminRole(r);k.log(`[AuthStore] User ${n} logged in. Is admin: ${i}`),t({userId:n,jwt:r,isAuthenticated:!0,isLoading:!1});const s=Tr.getState();i?s.isAdminAuthenticated||(k.log("[AuthStore login] Calling adminAuthStore.login()"),s.login()):s.isAdminAuthenticated&&(k.log("[AuthStore login] User is not admin, calling adminAuthStore.logout()"),s.logout()),ur.setState({hasAttemptedFetch:!1}),k.log("[AuthStore login] Reset portfolio hasAttemptedFetch flag.");const{fetchUnreadCount:o,startCountPolling:a}=nn.getState();o(!0),a(),k.log("[AuthStore login] Triggered fetchUnreadCount and started count polling.")},logout:()=>{k.log("[AuthStore] Logout action called."),t({userId:null,jwt:null,isAuthenticated:!1,isLoading:!1});const n=Tr.getState();n.isAdminAuthenticated&&(k.log("[AuthStore logout] Calling adminAuthStore.logout()"),n.logout()),ur.setState({accounts:null,error:null,isFetching:!1,hasAttemptedFetch:!1,isLoading:!1}),k.log("[AuthStore logout] Reset portfolio state.");const{stopCountPolling:r,resetNotifications:i}=nn.getState();r(),i(),k.log("[AuthStore logout] Stopped count polling and reset notification state.")}}),{name:"auth-storage",storage:xs(()=>sessionStorage),onRehydrateStorage:()=>(t,e)=>{if(e){k.error("[AuthStore] onRehydrateStorage: Error during hydration:",e),t?t.isLoading=!1:kn.setState({isLoading:!1,isAuthenticated:!1});return}if(k.log("[AuthStore] onRehydrateStorage: Hydration start."),t){if(t.jwt){const n=t._checkAdminRole(t.jwt);k.log(`[AuthStore] onRehydrateStorage: JWT found. Is admin: ${n}`),t.isAuthenticated=!0;const r=Tr.getState();n?r.isAdminAuthenticated||(k.log("[AuthStore onRehydrate] Calling adminAuthStore.login()"),r.login()):r.isAdminAuthenticated&&(k.log("[AuthStore onRehydrate] User is not admin, calling adminAuthStore.logout()"),r.logout());const{fetchUnreadCount:i,startCountPolling:s}=nn.getState();i(!0),s(),k.log("[AuthStore onRehydrate] Triggered fetchUnreadCount and started count polling.")}else k.warn("[AuthStore] onRehydrateStorage: JWT not found."),t.isAuthenticated=!1,Tr.getState().logout(),nn.getState().resetNotifications(),k.log("[AuthStore onRehydrate] Reset notification state (no JWT).");t.isLoading=!1,k.log(`[AuthStore] onRehydrateStorage: Hydration finished. isLoading: ${t.isLoading}, isAuthenticated: ${t.isAuthenticated}`)}else k.warn("[AuthStore] onRehydrateStorage: State is undefined after hydration."),kn.setState({isLoading:!1,isAuthenticated:!1}),nn.getState().resetNotifications(),k.log("[AuthStore onRehydrate] Reset notification state (undefined state).")},partialize:t=>({userId:t.userId,jwt:t.jwt})})),Xe=tt.create({});Xe.interceptors.request.use(t=>{if(!t.baseURL)try{const r=Ml();t.baseURL=r.apiUrl}catch(r){return k.error("[API Interceptor] Failed to get config to set baseURL:",r),Promise.reject(new Error("Configuration not loaded, cannot set API base URL."))}const e=kn.getState().jwt,n=t.url==="/Account/LoginByTelegramUserInfo"||t.url==="/Account/LoginByLogPassPair";return e&&!n?t.headers.Authorization=`Bearer ${e}`:!e&&!n&&k.warn(`[API Interceptor] No token found for protected URL: ${t.url}`),t.url==="/Account/LoginByTelegramUserInfo"&&typeof t.data=="string"&&(t.headers["Content-Type"]="text/plain"),t},t=>(k.error("[Axios Interceptor] Request Setup Error:",t),Promise.reject(t)));Xe.interceptors.response.use(t=>t,t=>{var e,n,r;if(t.response){if(k.error(`[Axios Interceptor] Response Error ${t.response.status} for ${(e=t.config)==null?void 0:e.url}:`,t.response.data),t.response.status===401)return k.error("[Axios Interceptor] Unauthorized (401). Logging out."),kn.getState().logout(),Promise.reject(new Error("Unauthorized: Please log in again."));const i=((n=t.response.data)==null?void 0:n.errorMessage)||((r=t.response.data)==null?void 0:r.title)||(typeof t.response.data=="string"?t.response.data:null)||t.response.statusText||`Request failed with status ${t.response.status}`;return Promise.reject(new Error(i))}else return t.request?(k.error("[Axios Interceptor] No response received (Network Error? Backend Down?):",t.request),Promise.reject(new Error("Network error or backend unavailable."))):(k.error("[Axios Interceptor] Request setup error:",t.message),Promise.reject(new Error(t.message||"Request setup error")))});var yk={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Dn,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",l="hour",c="day",u="week",h="month",f="quarter",p="year",g="date",m="Invalid Date",w=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,x={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(M){var D=["th","st","nd","rd"],L=M%100;return"["+M+(D[(L-20)%10]||D[L]||D[0])+"]"}},b=function(M,D,L){var B=String(M);return!B||B.length>=D?M:""+Array(D+1-B.length).join(L)+M},S={s:b,z:function(M){var D=-M.utcOffset(),L=Math.abs(D),B=Math.floor(L/60),A=L%60;return(D<=0?"+":"-")+b(B,2,"0")+":"+b(A,2,"0")},m:function M(D,L){if(D.date()<L.date())return-M(L,D);var B=12*(L.year()-D.year())+(L.month()-D.month()),A=D.clone().add(B,h),$=L-A<0,E=D.clone().add(B+($?-1:1),h);return+(-(B+(L-A)/($?A-E:E-A))||0)},a:function(M){return M<0?Math.ceil(M)||0:Math.floor(M)},p:function(M){return{M:h,y:p,w:u,d:c,D:g,h:l,m:a,s:o,ms:s,Q:f}[M]||String(M||"").toLowerCase().replace(/s$/,"")},u:function(M){return M===void 0}},N="en",C={};C[N]=x;var _="$isDayjsObject",P=function(M){return M instanceof j||!(!M||!M[_])},I=function M(D,L,B){var A;if(!D)return N;if(typeof D=="string"){var $=D.toLowerCase();C[$]&&(A=$),L&&(C[$]=L,A=$);var E=D.split("-");if(!A&&E.length>1)return M(E[0])}else{var z=D.name;C[z]=D,A=z}return!B&&A&&(N=A),A||!B&&N},R=function(M,D){if(P(M))return M.clone();var L=typeof D=="object"?D:{};return L.date=M,L.args=arguments,new j(L)},O=S;O.l=I,O.i=P,O.w=function(M,D){return R(M,{locale:D.$L,utc:D.$u,x:D.$x,$offset:D.$offset})};var j=function(){function M(L){this.$L=I(L.locale,null,!0),this.parse(L),this.$x=this.$x||L.x||{},this[_]=!0}var D=M.prototype;return D.parse=function(L){this.$d=function(B){var A=B.date,$=B.utc;if(A===null)return new Date(NaN);if(O.u(A))return new Date;if(A instanceof Date)return new Date(A);if(typeof A=="string"&&!/Z$/i.test(A)){var E=A.match(w);if(E){var z=E[2]-1||0,q=(E[7]||"0").substring(0,3);return $?new Date(Date.UTC(E[1],z,E[3]||1,E[4]||0,E[5]||0,E[6]||0,q)):new Date(E[1],z,E[3]||1,E[4]||0,E[5]||0,E[6]||0,q)}}return new Date(A)}(L),this.init()},D.init=function(){var L=this.$d;this.$y=L.getFullYear(),this.$M=L.getMonth(),this.$D=L.getDate(),this.$W=L.getDay(),this.$H=L.getHours(),this.$m=L.getMinutes(),this.$s=L.getSeconds(),this.$ms=L.getMilliseconds()},D.$utils=function(){return O},D.isValid=function(){return this.$d.toString()!==m},D.isSame=function(L,B){var A=R(L);return this.startOf(B)<=A&&A<=this.endOf(B)},D.isAfter=function(L,B){return R(L)<this.startOf(B)},D.isBefore=function(L,B){return this.endOf(B)<R(L)},D.$g=function(L,B,A){return O.u(L)?this[B]:this.set(A,L)},D.unix=function(){return Math.floor(this.valueOf()/1e3)},D.valueOf=function(){return this.$d.getTime()},D.startOf=function(L,B){var A=this,$=!!O.u(B)||B,E=O.p(L),z=function(W,K){var ne=O.w(A.$u?Date.UTC(A.$y,K,W):new Date(A.$y,K,W),A);return $?ne:ne.endOf(c)},q=function(W,K){return O.w(A.toDate()[W].apply(A.toDate("s"),($?[0,0,0,0]:[23,59,59,999]).slice(K)),A)},T=this.$W,J=this.$M,he=this.$D,ce="set"+(this.$u?"UTC":"");switch(E){case p:return $?z(1,0):z(31,11);case h:return $?z(1,J):z(0,J+1);case u:var re=this.$locale().weekStart||0,fe=(T<re?T+7:T)-re;return z($?he-fe:he+(6-fe),J);case c:case g:return q(ce+"Hours",0);case l:return q(ce+"Minutes",1);case a:return q(ce+"Seconds",2);case o:return q(ce+"Milliseconds",3);default:return this.clone()}},D.endOf=function(L){return this.startOf(L,!1)},D.$set=function(L,B){var A,$=O.p(L),E="set"+(this.$u?"UTC":""),z=(A={},A[c]=E+"Date",A[g]=E+"Date",A[h]=E+"Month",A[p]=E+"FullYear",A[l]=E+"Hours",A[a]=E+"Minutes",A[o]=E+"Seconds",A[s]=E+"Milliseconds",A)[$],q=$===c?this.$D+(B-this.$W):B;if($===h||$===p){var T=this.clone().set(g,1);T.$d[z](q),T.init(),this.$d=T.set(g,Math.min(this.$D,T.daysInMonth())).$d}else z&&this.$d[z](q);return this.init(),this},D.set=function(L,B){return this.clone().$set(L,B)},D.get=function(L){return this[O.p(L)]()},D.add=function(L,B){var A,$=this;L=Number(L);var E=O.p(B),z=function(J){var he=R($);return O.w(he.date(he.date()+Math.round(J*L)),$)};if(E===h)return this.set(h,this.$M+L);if(E===p)return this.set(p,this.$y+L);if(E===c)return z(1);if(E===u)return z(7);var q=(A={},A[a]=r,A[l]=i,A[o]=n,A)[E]||1,T=this.$d.getTime()+L*q;return O.w(T,this)},D.subtract=function(L,B){return this.add(-1*L,B)},D.format=function(L){var B=this,A=this.$locale();if(!this.isValid())return A.invalidDate||m;var $=L||"YYYY-MM-DDTHH:mm:ssZ",E=O.z(this),z=this.$H,q=this.$m,T=this.$M,J=A.weekdays,he=A.months,ce=A.meridiem,re=function(K,ne,Q,ge){return K&&(K[ne]||K(B,$))||Q[ne].slice(0,ge)},fe=function(K){return O.s(z%12||12,K,"0")},W=ce||function(K,ne,Q){var ge=K<12?"AM":"PM";return Q?ge.toLowerCase():ge};return $.replace(v,function(K,ne){return ne||function(Q){switch(Q){case"YY":return String(B.$y).slice(-2);case"YYYY":return O.s(B.$y,4,"0");case"M":return T+1;case"MM":return O.s(T+1,2,"0");case"MMM":return re(A.monthsShort,T,he,3);case"MMMM":return re(he,T);case"D":return B.$D;case"DD":return O.s(B.$D,2,"0");case"d":return String(B.$W);case"dd":return re(A.weekdaysMin,B.$W,J,2);case"ddd":return re(A.weekdaysShort,B.$W,J,3);case"dddd":return J[B.$W];case"H":return String(z);case"HH":return O.s(z,2,"0");case"h":return fe(1);case"hh":return fe(2);case"a":return W(z,q,!0);case"A":return W(z,q,!1);case"m":return String(q);case"mm":return O.s(q,2,"0");case"s":return String(B.$s);case"ss":return O.s(B.$s,2,"0");case"SSS":return O.s(B.$ms,3,"0");case"Z":return E}return null}(K)||E.replace(":","")})},D.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},D.diff=function(L,B,A){var $,E=this,z=O.p(B),q=R(L),T=(q.utcOffset()-this.utcOffset())*r,J=this-q,he=function(){return O.m(E,q)};switch(z){case p:$=he()/12;break;case h:$=he();break;case f:$=he()/3;break;case u:$=(J-T)/6048e5;break;case c:$=(J-T)/864e5;break;case l:$=J/i;break;case a:$=J/r;break;case o:$=J/n;break;default:$=J}return A?$:O.a($)},D.daysInMonth=function(){return this.endOf(h).$D},D.$locale=function(){return C[this.$L]},D.locale=function(L,B){if(!L)return this.$L;var A=this.clone(),$=I(L,B,!0);return $&&(A.$L=$),A},D.clone=function(){return O.w(this.$d,this)},D.toDate=function(){return new Date(this.valueOf())},D.toJSON=function(){return this.isValid()?this.toISOString():null},D.toISOString=function(){return this.$d.toISOString()},D.toString=function(){return this.$d.toUTCString()},M}(),F=j.prototype;return R.prototype=F,[["$ms",s],["$s",o],["$m",a],["$H",l],["$W",c],["$M",h],["$y",p],["$D",g]].forEach(function(M){F[M[1]]=function(D){return this.$g(D,M[0],M[1])}}),R.extend=function(M,D){return M.$i||(M(D,j,R),M.$i=!0),R},R.locale=I,R.isDayjs=P,R.unix=function(M){return R(1e3*M)},R.en=C[N],R.Ls=C,R.p={},R})})(yk);var xk=yk.exports;const Ie=Hn(xk);var wk={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Dn,function(){var n="minute",r=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(s,o,a){var l=o.prototype;a.utc=function(m){var w={date:m,utc:!0,args:arguments};return new o(w)},l.utc=function(m){var w=a(this.toDate(),{locale:this.$L,utc:!0});return m?w.add(this.utcOffset(),n):w},l.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var c=l.parse;l.parse=function(m){m.utc&&(this.$u=!0),this.$utils().u(m.$offset)||(this.$offset=m.$offset),c.call(this,m)};var u=l.init;l.init=function(){if(this.$u){var m=this.$d;this.$y=m.getUTCFullYear(),this.$M=m.getUTCMonth(),this.$D=m.getUTCDate(),this.$W=m.getUTCDay(),this.$H=m.getUTCHours(),this.$m=m.getUTCMinutes(),this.$s=m.getUTCSeconds(),this.$ms=m.getUTCMilliseconds()}else u.call(this)};var h=l.utcOffset;l.utcOffset=function(m,w){var v=this.$utils().u;if(v(m))return this.$u?0:v(this.$offset)?h.call(this):this.$offset;if(typeof m=="string"&&(m=function(N){N===void 0&&(N="");var C=N.match(r);if(!C)return null;var _=(""+C[0]).match(i)||["-",0,0],P=_[0],I=60*+_[1]+ +_[2];return I===0?0:P==="+"?I:-I}(m),m===null))return this;var x=Math.abs(m)<=16?60*m:m,b=this;if(w)return b.$offset=x,b.$u=m===0,b;if(m!==0){var S=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(b=this.local().add(x+S,n)).$offset=x,b.$x.$localOffset=S}else b=this.utc();return b};var f=l.format;l.format=function(m){var w=m||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return f.call(this,w)},l.valueOf=function(){var m=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*m},l.isUTC=function(){return!!this.$u},l.toISOString=function(){return this.toDate().toISOString()},l.toString=function(){return this.toDate().toUTCString()};var p=l.toDate;l.toDate=function(m){return m==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():p.call(this)};var g=l.diff;l.diff=function(m,w,v){if(m&&this.$u===m.$u)return g.call(this,m,w,v);var x=this.local(),b=a(m).local();return g.call(x,b,w,v)}}})})(wk);var EO=wk.exports;const Ll=Hn(EO);var bk={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Dn,function(){var n={year:0,month:1,day:2,hour:3,minute:4,second:5},r={};return function(i,s,o){var a,l=function(f,p,g){g===void 0&&(g={});var m=new Date(f),w=function(v,x){x===void 0&&(x={});var b=x.timeZoneName||"short",S=v+"|"+b,N=r[S];return N||(N=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:v,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:b}),r[S]=N),N}(p,g);return w.formatToParts(m)},c=function(f,p){for(var g=l(f,p),m=[],w=0;w<g.length;w+=1){var v=g[w],x=v.type,b=v.value,S=n[x];S>=0&&(m[S]=parseInt(b,10))}var N=m[3],C=N===24?0:N,_=m[0]+"-"+m[1]+"-"+m[2]+" "+C+":"+m[4]+":"+m[5]+":000",P=+f;return(o.utc(_).valueOf()-(P-=P%1e3))/6e4},u=s.prototype;u.tz=function(f,p){f===void 0&&(f=a);var g,m=this.utcOffset(),w=this.toDate(),v=w.toLocaleString("en-US",{timeZone:f}),x=Math.round((w-new Date(v))/1e3/60),b=15*-Math.round(w.getTimezoneOffset()/15)-x;if(!Number(b))g=this.utcOffset(0,p);else if(g=o(v,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(b,!0),p){var S=g.utcOffset();g=g.add(m-S,"minute")}return g.$x.$timezone=f,g},u.offsetName=function(f){var p=this.$x.$timezone||o.tz.guess(),g=l(this.valueOf(),p,{timeZoneName:f}).find(function(m){return m.type.toLowerCase()==="timezonename"});return g&&g.value};var h=u.startOf;u.startOf=function(f,p){if(!this.$x||!this.$x.$timezone)return h.call(this,f,p);var g=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return h.call(g,f,p).tz(this.$x.$timezone,!0)},o.tz=function(f,p,g){var m=g&&p,w=g||p||a,v=c(+o(),w);if(typeof f!="string")return o(f).tz(w);var x=function(C,_,P){var I=C-60*_*1e3,R=c(I,P);if(_===R)return[I,_];var O=c(I-=60*(R-_)*1e3,P);return R===O?[I,R]:[C-60*Math.min(R,O)*1e3,Math.max(R,O)]}(o.utc(f,m).valueOf(),v,w),b=x[0],S=x[1],N=o(b).utcOffset(S);return N.$x.$timezone=w,N},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(f){a=f}}})})(bk);var NO=bk.exports;const $l=Hn(NO);var Sk={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Dn,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},r=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,i=/\d/,s=/\d\d/,o=/\d\d?/,a=/\d*[^-_:/,()\s\d]+/,l={},c=function(w){return(w=+w)+(w>68?1900:2e3)},u=function(w){return function(v){this[w]=+v}},h=[/[+-]\d\d:?(\d\d)?|Z/,function(w){(this.zone||(this.zone={})).offset=function(v){if(!v||v==="Z")return 0;var x=v.match(/([+-]|\d\d)/g),b=60*x[1]+(+x[2]||0);return b===0?0:x[0]==="+"?-b:b}(w)}],f=function(w){var v=l[w];return v&&(v.indexOf?v:v.s.concat(v.f))},p=function(w,v){var x,b=l.meridiem;if(b){for(var S=1;S<=24;S+=1)if(w.indexOf(b(S,0,v))>-1){x=S>12;break}}else x=w===(v?"pm":"PM");return x},g={A:[a,function(w){this.afternoon=p(w,!1)}],a:[a,function(w){this.afternoon=p(w,!0)}],Q:[i,function(w){this.month=3*(w-1)+1}],S:[i,function(w){this.milliseconds=100*+w}],SS:[s,function(w){this.milliseconds=10*+w}],SSS:[/\d{3}/,function(w){this.milliseconds=+w}],s:[o,u("seconds")],ss:[o,u("seconds")],m:[o,u("minutes")],mm:[o,u("minutes")],H:[o,u("hours")],h:[o,u("hours")],HH:[o,u("hours")],hh:[o,u("hours")],D:[o,u("day")],DD:[s,u("day")],Do:[a,function(w){var v=l.ordinal,x=w.match(/\d+/);if(this.day=x[0],v)for(var b=1;b<=31;b+=1)v(b).replace(/\[|\]/g,"")===w&&(this.day=b)}],w:[o,u("week")],ww:[s,u("week")],M:[o,u("month")],MM:[s,u("month")],MMM:[a,function(w){var v=f("months"),x=(f("monthsShort")||v.map(function(b){return b.slice(0,3)})).indexOf(w)+1;if(x<1)throw new Error;this.month=x%12||x}],MMMM:[a,function(w){var v=f("months").indexOf(w)+1;if(v<1)throw new Error;this.month=v%12||v}],Y:[/[+-]?\d+/,u("year")],YY:[s,function(w){this.year=c(w)}],YYYY:[/\d{4}/,u("year")],Z:h,ZZ:h};function m(w){var v,x;v=w,x=l&&l.formats;for(var b=(w=v.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(R,O,j){var F=j&&j.toUpperCase();return O||x[j]||n[j]||x[F].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(M,D,L){return D||L.slice(1)})})).match(r),S=b.length,N=0;N<S;N+=1){var C=b[N],_=g[C],P=_&&_[0],I=_&&_[1];b[N]=I?{regex:P,parser:I}:C.replace(/^\[|\]$/g,"")}return function(R){for(var O={},j=0,F=0;j<S;j+=1){var M=b[j];if(typeof M=="string")F+=M.length;else{var D=M.regex,L=M.parser,B=R.slice(F),A=D.exec(B)[0];L.call(O,A),R=R.replace(A,"")}}return function($){var E=$.afternoon;if(E!==void 0){var z=$.hours;E?z<12&&($.hours+=12):z===12&&($.hours=0),delete $.afternoon}}(O),O}}return function(w,v,x){x.p.customParseFormat=!0,w&&w.parseTwoDigitYear&&(c=w.parseTwoDigitYear);var b=v.prototype,S=b.parse;b.parse=function(N){var C=N.date,_=N.utc,P=N.args;this.$u=_;var I=P[1];if(typeof I=="string"){var R=P[2]===!0,O=P[3]===!0,j=R||O,F=P[2];O&&(F=P[2]),l=this.$locale(),!R&&F&&(l=x.Ls[F]),this.$d=function(B,A,$,E){try{if(["x","X"].indexOf(A)>-1)return new Date((A==="X"?1e3:1)*B);var z=m(A)(B),q=z.year,T=z.month,J=z.day,he=z.hours,ce=z.minutes,re=z.seconds,fe=z.milliseconds,W=z.zone,K=z.week,ne=new Date,Q=J||(q||T?1:ne.getDate()),ge=q||ne.getFullYear(),Te=0;q&&!T||(Te=T>0?T-1:ne.getMonth());var nt,dt=he||0,zt=ce||0,Ii=re||0,Nn=fe||0;return W?new Date(Date.UTC(ge,Te,Q,dt,zt,Ii,Nn+60*W.offset*1e3)):$?new Date(Date.UTC(ge,Te,Q,dt,zt,Ii,Nn)):(nt=new Date(ge,Te,Q,dt,zt,Ii,Nn),K&&(nt=E(nt).week(K).toDate()),nt)}catch{return new Date("")}}(C,I,_,x),this.init(),F&&F!==!0&&(this.$L=this.locale(F).$L),j&&C!=this.format(I)&&(this.$d=new Date("")),l={}}else if(I instanceof Array)for(var M=I.length,D=1;D<=M;D+=1){P[1]=I[D-1];var L=x.apply(this,P);if(L.isValid()){this.$d=L.$d,this.$L=L.$L,this.init();break}D===M&&(this.$d=new Date(""))}else S.call(this,N)}}})})(Sk);var _O=Sk.exports;const TO=Hn(_O);Ie.extend(Ll);Ie.extend($l);Ie.extend(TO);const AO=async(t,e)=>{const n={pageNumber:t.pageNumber??1,pageItemsCount:t.pageItemsCount??30,searchString:t.searchString||null,assetTypes:t.assetTypes||null},r="Failed to search assets.";try{const i=await Xe.post("/api/BrokerAccountUser/SearchAssets",n,{signal:e==null?void 0:e.signal}),s=ot(i,r);return s.isSuccess&&(s.resultObject?s.resultObject.assets=s.resultObject.assets||[]:(k.warn("[API/Assets] searchAssets success but resultObject is null. Normalizing."),s.resultObject={searchAssetsParameters:n,foundCount:0,assets:[]})),s}catch(i){return i.name==="AbortError"?(k.log("[API/Assets searchAssets] Request aborted."),{isSuccess:!1,errorMessage:"Request aborted",resultObject:null}):at(i,r)}},kk=async(t,e)=>{const n=`Failed to get asset with ID ${t}.`;k.log(`[API/Assets] Fetching asset by ID: ${t}`);try{const r=await Xe.get(`/api/Assets/${t}`,{signal:e==null?void 0:e.signal}),i=ot(r,n);return i.isSuccess&&i.resultObject===null&&k.warn(`[API/Assets] getAssetById(${t}) returned success but resultObject is null.`),i}catch(r){return r.name==="AbortError"?(k.log(`[API/Assets getAssetById ${t}] Request aborted.`),{isSuccess:!1,errorMessage:"Request aborted",resultObject:null}):at(r,n)}},Ck=async t=>{const e="Failed to get asset types.";try{const n=await Xe.get("/api/BrokerAccountUser/GetAllAssetTypes",{signal:t==null?void 0:t.signal}),r=ot(n,e);return r.isSuccess&&r.resultObject===null&&(k.warn("[API/Assets] getAllAssetTypes success but resultObject is null. Normalizing to empty array."),r.resultObject=[]),r}catch(n){return n.name==="AbortError"?(k.log("[API/Assets getAllAssetTypes] Request aborted."),{isSuccess:!1,errorMessage:"Request aborted",resultObject:null}):at(n,e)}},PO=async(t,e)=>{const n="Failed to get last prices.";if(!t||t.length===0)return k.log("[API/Assets] getLastPrices called with empty tickers, returning empty array."),{isSuccess:!0,errorMessage:null,resultObject:[]};try{const r=await Xe.get("/api/BrokerAccountUser/GetLastPrices",{params:{assetTickers:t.join(",")},signal:e==null?void 0:e.signal}),i=ot(r,n);return i.isSuccess&&i.resultObject===null&&(k.warn("[API/Assets] getLastPrices success but resultObject is null. Normalizing to empty array."),i.resultObject=[]),i}catch(r){return r.name==="AbortError"?(k.log("[API/Assets getLastPrices] Request aborted."),{isSuccess:!1,errorMessage:"Request aborted",resultObject:null}):at(r,n)}},Ek=async(t,e,n)=>{var u,h;const r=`Failed to get price history for asset ${t}, period ${e}.`;k.log(`[API/Assets] getPriceHistory called for asset ${t}, period ${e}. Requesting from backend...`);const i=Ie();let s,o;switch(e){case"1D":s=i.startOf("day"),o=i.endOf("day");break;case"1W":s=i.subtract(1,"week").startOf("day"),o=i.endOf("day");break;case"1M":s=i.subtract(1,"month").startOf("day"),o=i.endOf("day");break;case"1Y":s=i.subtract(1,"year").startOf("day"),o=i.endOf("day");break;case"5Y":s=i.subtract(5,"year").startOf("day"),o=i.endOf("day");break;case"ALL":s=i.subtract(20,"year").startOf("day"),o=i.endOf("day");break;default:k.warn(`[API/Assets getPriceHistory] Unknown period: ${e}. Defaulting to 1M.`),s=i.subtract(1,"month").startOf("day"),o=i.endOf("day")}const a=s.format("YYYY-MM-DDTHH:mm:ss"),l=o.format("YYYY-MM-DDTHH:mm:ss");k.log(`[API/Assets getPriceHistory] Requesting backend with AssetId: ${t}, From: ${a}, Till: ${l}`);const c={AssetId:t,From:a,Till:l};try{const f=await Xe.post("/api/Assets/GetPriceDataForFrontChartFromMoex",c,{signal:n==null?void 0:n.signal}),p=ot(f,r);if(!p.isSuccess||!p.resultObject)return k.error("[API/Assets getPriceHistory] Backend request failed or returned null:",p.errorMessage),{isSuccess:!1,errorMessage:p.errorMessage||r,resultObject:null};const g=p.resultObject;if(!((u=g==null?void 0:g.candles)!=null&&u.columns)||!((h=g==null?void 0:g.candles)!=null&&h.data))return k.error("[API/Assets getPriceHistory] Invalid MOEX data structure:",g),{isSuccess:!1,errorMessage:"Invalid data structure received from server.",resultObject:null};const m=g.candles.columns,w=m.indexOf("begin"),v=m.indexOf("open"),x=m.indexOf("high"),b=m.indexOf("low"),S=m.indexOf("close");if(w===-1||v===-1||x===-1||b===-1||S===-1){const _=`Required columns missing in history data: ${["begin","open","high","low","close"].filter(P=>m.indexOf(P)===-1).join(", ")}`;return k.error(`[API/Assets getPriceHistory] ${_}`,m),{isSuccess:!1,errorMessage:_,resultObject:null}}const N=g.candles.data.map(C=>{const _=C[w];let P=C[v],I=C[x],R=C[b],O=C[S];if(!_||P===null||I===null||R===null||O===null||isNaN(P)||isNaN(I)||isNaN(R)||isNaN(O))return k.warn("[API/Assets getPriceHistory] Skipping row due to invalid data:",C),null;try{const F=Ie.tz(_,"YYYY-MM-DD HH:mm:ss","Europe/Moscow");if(!F.isValid())return k.warn(`[API/Assets getPriceHistory] Skipping row due to invalid date string after dayjs TZ parsing: ${_}`),null;const D=F.unix(),L=Math.max(P,I,R,O),B=Math.min(P,I,R,O);return I=L,R=B,P=Math.max(R,Math.min(I,P)),O=Math.max(R,Math.min(I,O)),{time:D,open:P,high:I,low:R,close:O}}catch(j){return k.error(`[API/Assets getPriceHistory] Error converting row: ${C}`,j),null}}).filter(C=>C!==null).sort((C,_)=>C.time-_.time);return k.log(`[API/Assets getPriceHistory] Successfully processed ${N.length} history points.`),{isSuccess:!0,errorMessage:null,resultObject:N}}catch(f){return f.name==="AbortError"?(k.log(`[API/Assets getPriceHistory] Request aborted for asset ${t}, period ${e}.`),{isSuccess:!1,errorMessage:"Request aborted",resultObject:null}):at(f,r)}},jO=20,Lu="all",Fx={searchTerm:"",activeTabValue:Lu,apiAssetTypes:null,currentPage:1,didPerformSearch:!1,marketTabs:[{value:Lu,label:"Все",apiTitles:null}],isTypesLoading:!1,typesError:null,searchResults:[],totalResults:0,isLoading:!1,error:null},Sr=fr((t,e)=>({...Fx,fetchMarketTabs:async(n=!1)=>{if(!n&&(e().marketTabs.length>1||e().isTypesLoading)){k.log("[MarketPageStore fetchMarketTabs] Skipped fetching tabs (already loaded or loading).");return}t({isTypesLoading:!0,typesError:null}),k.log("[MarketPageStore fetchMarketTabs] Fetching asset types...");try{const r=await Ck();if(r.isSuccess&&r.resultObject){const i=r.resultObject.filter(o=>!!o.title&&!!o.description).map(o=>({value:o.title,label:o.description,apiTitles:[o.title]})),s=[{value:Lu,label:"Все",apiTitles:null},...i];t({marketTabs:s,isTypesLoading:!1}),k.log("[MarketPageStore fetchMarketTabs] Tabs loaded successfully:",s)}else throw new Error(r.errorMessage||"Failed to load asset types.")}catch(r){k.error("[MarketPageStore fetchMarketTabs] Error:",r),t({typesError:r.message||"Error fetching types.",isTypesLoading:!1,marketTabs:[{value:Lu,label:"Все",apiTitles:null}]})}},setSearchTerm:n=>{t({searchTerm:n,currentPage:1,didPerformSearch:!1}),e().fetchMarketAssets(!1)},setActiveTab:(n,r)=>{t({activeTabValue:n,apiAssetTypes:r,currentPage:1,didPerformSearch:!1}),e().fetchMarketAssets(!1),k.log(`[MarketPageStore setActiveTab] Tab set to: ${n}, API types: ${JSON.stringify(r)}`)},fetchMarketAssets:async(n=!1)=>{var a;const{searchTerm:r,apiAssetTypes:i,currentPage:s}=e(),o=n?s+1:1;if(e().isLoading){k.log("[MarketPageStore fetchMarketAssets] Fetch skipped, already loading.");return}t({isLoading:!0,error:null,didPerformSearch:!0}),n||t({searchResults:[],totalResults:0}),k.log(`[MarketPageStore fetchMarketAssets] Fetching: term='${r}', types=${JSON.stringify(i)}, page=${o}, append=${n}`);try{const l={searchString:r.trim()||null,assetTypes:i,pageNumber:o,pageItemsCount:jO},c=await AO(l);if(c!=null&&c.isSuccess&&c.resultObject){const u=c.resultObject.assets||[];k.log("[MarketPageStore] Data before setting state:",u),u.forEach(h=>{(h==null?void 0:h.ticker)==="SU26207RMFS9"&&k.log(`[MarketPageStore] Asset ${h.ticker} in search results:`,h)}),t(h=>{var f;return{searchResults:n?[...h.searchResults,...u]:u,totalResults:((f=c.resultObject)==null?void 0:f.foundCount)??h.totalResults,currentPage:o,isLoading:!1,error:null}}),k.log(`[MarketPageStore fetchMarketAssets] Success. Fetched ${u.length}. New total: ${((a=c.resultObject)==null?void 0:a.foundCount)??"N/A"}. Current page: ${o}`)}else throw new Error((c==null?void 0:c.errorMessage)||"Ничего не найдено или произошла ошибка.")}catch(l){k.error("[MarketPageStore fetchMarketAssets] Fetch error:",l),t(c=>({error:l.message||"Ошибка загрузки активов.",isLoading:!1,searchResults:n?c.searchResults:[],totalResults:n?c.totalResults:0,currentPage:n?c.currentPage:1}))}},resetMarketState:()=>{k.log("[MarketPageStore] Resetting state."),t(Fx)}}));/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RO=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Nk=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var MO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IO=y.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>y.createElement("svg",{ref:l,...MO,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:Nk("lucide",i),...a},[...o.map(([c,u])=>y.createElement(c,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=(t,e)=>{const n=y.forwardRef(({className:r,...i},s)=>y.createElement(IO,{ref:s,iconNode:e,className:Nk(`lucide-${RO(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _k=ue("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OO=ue("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LO=ue("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $O=ue("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=ue("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Up=ue("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hp=ue("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zO=ue("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tk=ue("CandlestickChart",[["path",{d:"M9 5v4",key:"14uxtq"}],["rect",{width:"4",height:"6",x:"7",y:"9",rx:"1",key:"f4fvz0"}],["path",{d:"M9 15v2",key:"r5rk32"}],["path",{d:"M17 3v2",key:"1l2re6"}],["rect",{width:"4",height:"8",x:"15",y:"5",rx:"1",key:"z38je5"}],["path",{d:"M17 13v3",key:"5l0wba"}],["path",{d:"M3 3v18h18",key:"1s2lah"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ak=ue("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $u=ue("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pk=ue("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jk=ue("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=ue("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BO=ue("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Du=ue("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rk=ue("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VO=ue("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UO=ue("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HO=ue("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WO=ue("DatabaseZap",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 15 21.84",key:"14ibmq"}],["path",{d:"M21 5V8",key:"1marbg"}],["path",{d:"M21 12L18 17H22L19 22",key:"zafso"}],["path",{d:"M3 12A9 3 0 0 0 14.59 14.87",key:"1y4wr8"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qO=ue("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KO=ue("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YO=ue("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GO=ue("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mk=ue("LineChart",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZO=ue("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ik=ue("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XO=ue("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QO=ue("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JO=ue("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ok=ue("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eL=ue("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tL=ue("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jg=ue("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nL=ue("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rL=ue("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bx=ue("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iL=ue("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lk=ue("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $k=ue("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sL=ue("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dk=ue("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rg=ue("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oL=ue("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aL=ue("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5v0a5.5 5.5 0 0 1-5.5 5.5H11",key:"llx8ln"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=ue("WalletCards",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2",key:"4125el"}],["path",{d:"M3 11h3c.8 0 1.6.3 2.1.9l1.1.9c1.6 1.6 4.1 1.6 5.7 0l1.1-.9c.5-.5 1.3-.9 2.1-.9H21",key:"1dpki6"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lL=ue("WalletMinimal",[["path",{d:"M17 14h.01",key:"7oqj8z"}],["path",{d:"M7 7h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14",key:"u1rqew"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cL=ue("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ed=ue("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Ce=({size:t="default"})=>{const e={sm:"h-4 w-4",default:"h-6 w-6",lg:"h-8 w-8"};return d.jsx(ZO,{className:`animate-spin text-primary ${e[t]}`})},mt=({message:t,className:e})=>d.jsxs("div",{className:`flex items-center text-destructive p-4 border border-destructive/50 rounded-md bg-destructive/10 ${e}`,children:[d.jsx(Rg,{className:"h-5 w-5 mr-2"}),d.jsx("span",{children:t||"ÐÑÐ¾Ð¸Ð·Ð¾ÑÐ»Ð° Ð½ÐµÐ¿ÑÐµÐ´Ð²Ð¸Ð´ÐµÐ½Ð½Ð°Ñ Ð¾ÑÐ¸Ð±ÐºÐ°."})]});function zk(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=zk(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Fk(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=zk(t))&&(r&&(r+=" "),r+=e);return r}const Mg="-",uL=t=>{const e=hL(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(Mg);return a[0]===""&&a.length!==1&&a.shift(),Bk(a,e)||dL(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},Bk=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?Bk(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(Mg);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId},Ux=/^\[(.+)\]$/,dL=t=>{if(Ux.test(t)){const e=Ux.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},hL=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return pL(Object.entries(t.classGroups),n).forEach(([s,o])=>{Wp(o,r,s,e)}),r},Wp=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:Hx(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(fL(i)){Wp(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{Wp(o,Hx(e,s),n,r)})})},Hx=(t,e)=>{let n=t;return e.split(Mg).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},fL=t=>t.isThemeGetter,pL=(t,e)=>e?t.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[n,i]}):t,mL=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,o)=>{n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}},Vk="!",gL=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],s=e.length,o=a=>{const l=[];let c=0,u=0,h;for(let w=0;w<a.length;w++){let v=a[w];if(c===0){if(v===i&&(r||a.slice(w,w+s)===e)){l.push(a.slice(u,w)),u=w+s;continue}if(v==="/"){h=w;continue}}v==="["?c++:v==="]"&&c--}const f=l.length===0?a:a.substring(u),p=f.startsWith(Vk),g=p?f.substring(1):f,m=h&&h>u?h-u:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:g,maybePostfixModifierPosition:m}};return n?a=>n({className:a,parseClassName:o}):o},vL=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},yL=t=>({cache:mL(t.cacheSize),parseClassName:gL(t),...uL(t)}),xL=/\s+/,wL=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],o=t.trim().split(xL);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:u,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:p}=n(c);let g=!!p,m=r(g?f.substring(0,p):f);if(!m){if(!g){a=c+(a.length>0?" "+a:a);continue}if(m=r(f),!m){a=c+(a.length>0?" "+a:a);continue}g=!1}const w=vL(u).join(":"),v=h?w+Vk:w,x=v+m;if(s.includes(x))continue;s.push(x);const b=i(m,g);for(let S=0;S<b.length;++S){const N=b[S];s.push(v+N)}a=c+(a.length>0?" "+a:a)}return a};function bL(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=Uk(e))&&(r&&(r+=" "),r+=n);return r}const Uk=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=Uk(t[r]))&&(n&&(n+=" "),n+=e);return n};function SL(t,...e){let n,r,i,s=o;function o(l){const c=e.reduce((u,h)=>h(u),t());return n=yL(c),r=n.cache.get,i=n.cache.set,s=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=wL(l,n);return i(l,u),u}return function(){return s(bL.apply(null,arguments))}}const Fe=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},Hk=/^\[(?:([a-z-]+):)?(.+)\]$/i,kL=/^\d+\/\d+$/,CL=new Set(["px","full","screen"]),EL=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,NL=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,_L=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,TL=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,AL=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,yr=t=>ro(t)||CL.has(t)||kL.test(t),Kr=t=>Fo(t,"length",$L),ro=t=>!!t&&!Number.isNaN(Number(t)),Hh=t=>Fo(t,"number",ro),ia=t=>!!t&&Number.isInteger(Number(t)),PL=t=>t.endsWith("%")&&ro(t.slice(0,-1)),be=t=>Hk.test(t),Yr=t=>EL.test(t),jL=new Set(["length","size","percentage"]),RL=t=>Fo(t,jL,Wk),ML=t=>Fo(t,"position",Wk),IL=new Set(["image","url"]),OL=t=>Fo(t,IL,zL),LL=t=>Fo(t,"",DL),sa=()=>!0,Fo=(t,e,n)=>{const r=Hk.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},$L=t=>NL.test(t)&&!_L.test(t),Wk=()=>!1,DL=t=>TL.test(t),zL=t=>AL.test(t),FL=()=>{const t=Fe("colors"),e=Fe("spacing"),n=Fe("blur"),r=Fe("brightness"),i=Fe("borderColor"),s=Fe("borderRadius"),o=Fe("borderSpacing"),a=Fe("borderWidth"),l=Fe("contrast"),c=Fe("grayscale"),u=Fe("hueRotate"),h=Fe("invert"),f=Fe("gap"),p=Fe("gradientColorStops"),g=Fe("gradientColorStopPositions"),m=Fe("inset"),w=Fe("margin"),v=Fe("opacity"),x=Fe("padding"),b=Fe("saturate"),S=Fe("scale"),N=Fe("sepia"),C=Fe("skew"),_=Fe("space"),P=Fe("translate"),I=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto",be,e],j=()=>[be,e],F=()=>["",yr,Kr],M=()=>["auto",ro,be],D=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],L=()=>["solid","dashed","dotted","double","none"],B=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],A=()=>["start","end","center","between","around","evenly","stretch"],$=()=>["","0",be],E=()=>["auto","avoid","all","avoid-page","page","left","right","column"],z=()=>[ro,be];return{cacheSize:500,separator:":",theme:{colors:[sa],spacing:[yr,Kr],blur:["none","",Yr,be],brightness:z(),borderColor:[t],borderRadius:["none","","full",Yr,be],borderSpacing:j(),borderWidth:F(),contrast:z(),grayscale:$(),hueRotate:z(),invert:$(),gap:j(),gradientColorStops:[t],gradientColorStopPositions:[PL,Kr],inset:O(),margin:O(),opacity:z(),padding:j(),saturate:z(),scale:z(),sepia:$(),skew:z(),space:j(),translate:j()},classGroups:{aspect:[{aspect:["auto","square","video",be]}],container:["container"],columns:[{columns:[Yr]}],"break-after":[{"break-after":E()}],"break-before":[{"break-before":E()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...D(),be]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ia,be]}],basis:[{basis:O()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",be]}],grow:[{grow:$()}],shrink:[{shrink:$()}],order:[{order:["first","last","none",ia,be]}],"grid-cols":[{"grid-cols":[sa]}],"col-start-end":[{col:["auto",{span:["full",ia,be]},be]}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":[sa]}],"row-start-end":[{row:["auto",{span:[ia,be]},be]}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",be]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",be]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...A()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...A(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...A(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[_]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[_]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",be,e]}],"min-w":[{"min-w":[be,e,"min","max","fit"]}],"max-w":[{"max-w":[be,e,"none","full","min","max","fit","prose",{screen:[Yr]},Yr]}],h:[{h:[be,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[be,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[be,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[be,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Yr,Kr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Hh]}],"font-family":[{font:[sa]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",be]}],"line-clamp":[{"line-clamp":["none",ro,Hh]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",yr,be]}],"list-image":[{"list-image":["none",be]}],"list-style-type":[{list:["none","disc","decimal",be]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...L(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",yr,Kr]}],"underline-offset":[{"underline-offset":["auto",yr,be]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:j()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",be]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",be]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...D(),ML]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",RL]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},OL]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...L(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:L()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...L()]}],"outline-offset":[{"outline-offset":[yr,be]}],"outline-w":[{outline:[yr,Kr]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:F()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[yr,Kr]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Yr,LL]}],"shadow-color":[{shadow:[sa]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...B(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":B()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Yr,be]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[b]}],sepia:[{sepia:[N]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[N]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",be]}],duration:[{duration:z()}],ease:[{ease:["linear","in","out","in-out",be]}],delay:[{delay:z()}],animate:[{animate:["none","spin","ping","pulse","bounce",be]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[ia,be]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",be]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",be]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":j()}],"scroll-mx":[{"scroll-mx":j()}],"scroll-my":[{"scroll-my":j()}],"scroll-ms":[{"scroll-ms":j()}],"scroll-me":[{"scroll-me":j()}],"scroll-mt":[{"scroll-mt":j()}],"scroll-mr":[{"scroll-mr":j()}],"scroll-mb":[{"scroll-mb":j()}],"scroll-ml":[{"scroll-ml":j()}],"scroll-p":[{"scroll-p":j()}],"scroll-px":[{"scroll-px":j()}],"scroll-py":[{"scroll-py":j()}],"scroll-ps":[{"scroll-ps":j()}],"scroll-pe":[{"scroll-pe":j()}],"scroll-pt":[{"scroll-pt":j()}],"scroll-pr":[{"scroll-pr":j()}],"scroll-pb":[{"scroll-pb":j()}],"scroll-pl":[{"scroll-pl":j()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",be]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[yr,Kr,Hh]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},BL=SL(FL);function U(...t){return BL(Fk(t))}const bt=y.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:U("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));bt.displayName="Card";const pr=y.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:U("flex flex-col space-y-1.5 p-4 md:p-6",t),...e}));pr.displayName="CardHeader";const Vr=y.forwardRef(({className:t,children:e,...n},r)=>d.jsx("h3",{ref:r,className:U("text-lg font-semibold leading-none tracking-tight",t),...n,children:e}));Vr.displayName="CardTitle";const Nd=y.forwardRef(({className:t,...e},n)=>d.jsx("p",{ref:n,className:U("text-sm text-muted-foreground",t),...e}));Nd.displayName="CardDescription";const Gt=y.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:U("p-4 md:p-6 pt-0",t),...e}));Gt.displayName="CardContent";const VL=y.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:U("flex items-center p-4 md:p-6 pt-0",t),...e}));VL.displayName="CardFooter";const qk=t=>new Intl.NumberFormat("ru-RU",t),oi=(t,e=2)=>{if(t===null||typeof t>"u"||isNaN(t))return"-";const n=Math.max(0,Math.min(e,20));return qk({minimumFractionDigits:0,maximumFractionDigits:n}).format(t)},To=(t,e="₽",n=!0,r)=>{if(t===null||typeof t>"u"||isNaN(t))return"-";const i=t/100;let s=2;r!=null&&typeof r=="number"&&r>=0&&(s=Math.max(2,Math.min(r,20)));const a=qk({minimumFractionDigits:2,maximumFractionDigits:s}).format(i);return n&&e?`${a} ${e}`:a};function dc(t){if(!t)return null;let e=t;e=e.replace(/\s*\(.*\)\s*/g," "),e=e.replace(/^["«“]|["»”]$/g,""),e=e.replace(/["«»”]/g,"");const n=["ORD SHS","ORD","SHS","гдр","ПАО","ОАО","ЗАО","ООО","АО","ап","PLC","GDR"];for(const i of n){const s=new RegExp(`\\s+${i}(?:\\b|$)`,"i");e=e.replace(s,"")}const r=["ГДР","МКПАО","i"];for(const i of r){const s=new RegExp(`^${i}(?:\\s+|(?=[A-ZА-ЯЁ]))`,"i");e=e.replace(s,"")}return e=e.trim().replace(/\s{2,}/g," "),!e||e.length<2||/^[^a-zA-Zа-яА-ЯёЁ0-9]+$/.test(e)?null:e}function Ao(t){var s;if(!t)return"N/A";if(t.displayName)return t.displayName;const e=(s=t.assetType)==null?void 0:s.title,n=t.title,r=t.shortName,i=t.ticker||"N/A";try{if(e==="currency_pair"){const l=/([A-Z]{3})\/([А-Я]{3})/i,c=(i==null?void 0:i.match(l))||(n==null?void 0:n.match(l));if(c&&c[0])return c[0].toUpperCase();const u=n==null?void 0:n.replace(/СВОП/i,"").replace(/[-_]/g," ").replace(/\s+/g," ").trim();return u&&u.includes("/")?u:i}if(e==="fund_share"){const l="БПИФ ",c="ОПИФ ";let u=n||r;return u!=null&&u.startsWith(l)?u.substring(l.length).trim():u!=null&&u.startsWith(c)?u.substring(c.length).trim():dc(n)||dc(r)||i}if(e==="currency")return n||r||i;const o=dc(r);if(o)return o;const a=dc(n);return a||i}catch(o){return k.error("Error formatting asset name:",t,o),i}}const ft=({value:t,currencySymbol:e="₽",showSign:n=!1,showColor:r=!1,includeSymbol:i=!0,className:s,valueClassName:o,signClassName:a,placeholder:l="—",asset:c,forceDecimalPlaces:u=null})=>{if(t===null||typeof t>"u"||isNaN(t))return d.jsx("span",{className:U("text-muted-foreground",s),children:l});let h=2;u!==null&&typeof u=="number"&&u>=0?(h=u,k.debug(`[PriceDisplay] Using forced decimal places: ${h} for value ${t}`)):c&&typeof c.decimals=="number"&&c.decimals>=0?(h=Math.max(2,c.decimals),k.debug(`[PriceDisplay] Using asset decimals: ${c.decimals} -> final: ${h} for value ${t}`)):(h=2,c?k.warn(`[PriceDisplay] Asset ${c.ticker} has invalid decimals: ${c.decimals}. Using default (2).`):k.debug(`[PriceDisplay] No asset or forced decimals. Using default (2) for value ${t}`));const f=To(t,null,!1,h);if(f==="-")return d.jsx("span",{className:U("text-muted-foreground",s),children:l});const p=t>0,g=t<0,m=n&&p?"+":"",w=r?p?"text-success":g?"text-destructive":"text-foreground":"";return d.jsxs("span",{className:U("inline-flex items-baseline tabular-nums-font",w,s),children:[m&&d.jsx("span",{className:U(a),children:m}),d.jsx("span",{className:U("font-medium",o),children:f}),i&&e&&d.jsx("span",{className:U("ml-0.5 text-xs align-baseline",r&&w?w:"text-muted-foreground"),children:e})]})};function io(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,i]of t)if(!Object.is(i,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}const UL=(t,e)=>{let n=null;return(...r)=>{n&&clearTimeout(n),n=setTimeout(()=>{t(...r),n=null},e)}},HL=3e4,WL=300,va=new Map;let qL=0;const KL=()=>`price-sub-${qL++}`,Wx=()=>{const t=new Set;return va.forEach(e=>{e.forEach(n=>t.add(n))}),t},Wh=fr((t,e)=>({prices:new Map,neededTickers:new Set,isLoading:!1,error:null,lastFetchTime:null,fetchIntervalId:null,isPollingActive:!1,_debouncedFetchOnSubscriptionChange:UL(()=>{const{neededTickers:n,_fetchPricesInternal:r}=e(),i=Array.from(n);k.log(`[PriceStore _debouncedFetchOnSubscriptionChange] Triggered. Needed: ${i.length}`),i.length>0&&r(i,!1)},WL),subscribeTickers:(n,r)=>{const i=new Set(r.filter(o=>o&&o!=="RUB")),s=va.get(n);if(!s||!io(s,i)){k.log(`[PriceStore subscribeTickers] Updating subscription for ${n} with ${i.size} tickers.`),va.set(n,i);const o=Wx(),a=e().neededTickers;io(a,o)?(k.log("[PriceStore subscribeTickers] neededTickers set did not change."),e()._checkPollingStatus()):(t({neededTickers:o}),e()._debouncedFetchOnSubscriptionChange(),e()._checkPollingStatus())}else k.log(`[PriceStore subscribeTickers] No change for ${n}, skipping update.`),e()._checkPollingStatus()},unsubscribeTickers:n=>{if(va.delete(n)){k.log(`[PriceStore unsubscribeTickers] Removed subscription for ${n}.`);const r=Wx(),i=e().neededTickers;io(i,r)?(k.log("[PriceStore unsubscribeTickers] neededTickers set did not change."),e()._checkPollingStatus()):(t({neededTickers:r}),e()._checkPollingStatus())}},_fetchPricesInternal:async(n,r=!1)=>{if(e().isLoading&&!r){k.log("[PriceStore _fetchPricesInternal] Non-poll fetch skipped, already loading.");return}if(!n||n.length===0){k.log("[PriceStore _fetchPricesInternal] No tickers provided to fetch."),e().isLoading&&!r&&t({isLoading:!1});return}r||t({isLoading:!0,error:null}),k.log(`[PriceStore _fetchPricesInternal] Fetching ${n.length} tickers... (isPoll: ${r})`);try{const i=await PO(n),s=Date.now();i.isSuccess&&i.resultObject?t(o=>{const a=new Map(o.prices);return i.resultObject.forEach(l=>a.set(l.ticker,l)),k.log(`[PriceStore _fetchPricesInternal] Success. Updated ${i.resultObject.length} prices. Total cached: ${a.size}`),{prices:a,isLoading:r?o.isLoading:!1,error:null,lastFetchTime:s}}):(k.warn("[PriceStore _fetchPricesInternal] Fetch failed:",i.errorMessage),t(o=>({error:i.errorMessage||"Failed to load prices",isLoading:r?o.isLoading:!1,lastFetchTime:s})))}catch(i){k.error("[PriceStore _fetchPricesInternal] Exception:",i),t(s=>({error:i.message||"Failed to fetch prices",isLoading:r?s.isLoading:!1,lastFetchTime:Date.now()}))}},_checkPollingStatus:()=>{const{neededTickers:n,fetchIntervalId:r,isPollingActive:i}=e(),s=n.size>0;if(s&&!i){k.log("[PriceStore _checkPollingStatus] Starting polling.");const o=setInterval(()=>{const a=e().neededTickers;a.size>0?e()._fetchPricesInternal(Array.from(a),!0):(k.warn("[PriceStore poll interval] No tickers needed, but interval still running. Stopping."),e()._checkPollingStatus())},HL);t({fetchIntervalId:o,isPollingActive:!0})}else!s&&i&&(k.log("[PriceStore _checkPollingStatus] Stopping polling."),r&&clearInterval(r),t({fetchIntervalId:null,isPollingActive:!1}))},clearAll:()=>{k.log("[PriceStore clearAll] Clearing all subscriptions and prices, stopping polling.");const{fetchIntervalId:n}=e();n&&clearInterval(n),va.clear(),t({prices:new Map,neededTickers:new Set,isLoading:!1,error:null,lastFetchTime:null,fetchIntervalId:null,isPollingActive:!1})}})),{useDebugValue:YL}=Le,{useSyncExternalStoreWithSelector:GL}=LS,ZL=t=>t;function XL(t,e=ZL,n){const r=GL(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return YL(r),r}const _d=t=>{const e=y.useRef(KL()).current,n=y.useMemo(()=>t.filter(c=>typeof c=="string"&&c!=="RUB"),[t]),r=Wh.getState().subscribeTickers,i=Wh.getState().unsubscribeTickers,{storePrices:s,isLoading:o,error:a}=XL(Wh,c=>({storePrices:c.prices,isLoading:c.isLoading,error:c.error}),io);return y.useEffect(()=>(k.log(`[useAssetPrices Effect ${e}] Running effect. Subscribing to:`,n),r(e,n),()=>{k.log(`[useAssetPrices Cleanup ${e}] Unsubscribing.`),i(e)}),[e,n,r,i]),{prices:y.useMemo(()=>{const c=new Map;return n.forEach(u=>{s.has(u)&&c.set(u,s.get(u))}),c},[n,s]),isLoading:o,error:a}},Kk=()=>{const{accounts:t}=ur(l=>({accounts:l.accounts})),e=y.useMemo(()=>{if(!t)return[];const l=new Set;return t.forEach(c=>{var u;(u=c.portfolioItems)==null||u.forEach(h=>{var g,m,w;const f=(g=h.asset)==null?void 0:g.outOfCirculationAt,p=f&&new Date(f)<new Date;(m=h.asset)!=null&&m.ticker&&h.asset.ticker!=="RUB"&&!p?l.add(h.asset.ticker):(w=h.asset)!=null&&w.ticker&&p&&k.debug(`[usePortfolioCalculations allTickers] Skipping price request for inactive ticker: ${h.asset.ticker}`)})}),k.debug("[usePortfolioCalculations allTickers] Active tickers for price fetching:",Array.from(l)),Array.from(l)},[t]),{prices:n,isLoading:r,error:i}=_d(e),s=y.useCallback((l,c)=>{let u=0,h=0,f=0;return Array.isArray(l)?(l.forEach(g=>{if(!(g!=null&&g.asset))return;const m=g.asset.outOfCirculationAt;if(m&&new Date(m)<new Date){k.debug(`[usePortfolioCalculations calculateAccountTotals] Skipping calculation for inactive asset: ${g.asset.ticker}`);return}const v=g.asset.ticker,x=g.quantity||0,b=g.averagePriceCopecks??0;if(v==="RUB")u=x;else{const S=c.get(v);if(S){const N=S.price*100,C=N*x;if(h+=C,b>0&&x>0){const _=(N-b)*x;f+=_}}else k.warn(`[usePortfolioCalculations calculateAccountTotals] Price not found for active ticker: ${v}. It won't be included in total value.`)}}),{totalValue:u+h,totalProfitLoss:f}):{totalValue:0,totalProfitLoss:0}},[]),o=y.useCallback(l=>{const c=t==null?void 0:t.find(u=>{var h;return((h=u.brokerAccount)==null?void 0:h.id)===l});return s(c==null?void 0:c.portfolioItems,n)},[t,n,s]),a=y.useMemo(()=>{if(!t)return 0;let l=0;return t.forEach(c=>{var u;if((u=c==null?void 0:c.brokerAccount)!=null&&u.id){const h=o(c.brokerAccount.id);l+=h.totalValue}}),l},[t,o]);return{prices:n,isPriceLoading:r,priceError:i,getAccountTotals:o,totalPortfolioValue:a}},Yk=({count:t,className:e,positionClasses:n="absolute -top-1 -right-1"})=>{if(t<=0)return null;const r=t>9?"9+":t.toString();return d.jsx("span",{className:U("inline-flex items-center justify-center rounded-full bg-red-500 text-white","text-[10px] font-bold leading-none",r.length>1?"px-1 min-w-[18px] h-[18px]":"w-[18px] h-[18px]","ring-2 ring-background",n,e),"aria-label":`${t} непрочитанных уведомлений`,children:r})};function qx(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Gk(...t){return e=>{let n=!1;const r=t.map(i=>{const s=qx(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():qx(t[i],null)}}}}function Pe(...t){return y.useCallback(Gk(...t),t)}var os=y.forwardRef((t,e)=>{const{children:n,...r}=t,i=y.Children.toArray(n),s=i.find(QL);if(s){const o=s.props.children,a=i.map(l=>l===s?y.Children.count(o)>1?y.Children.only(null):y.isValidElement(o)?o.props.children:null:l);return d.jsx(qp,{...r,ref:e,children:y.isValidElement(o)?y.cloneElement(o,void 0,a):null})}return d.jsx(qp,{...r,ref:e,children:n})});os.displayName="Slot";var qp=y.forwardRef((t,e)=>{const{children:n,...r}=t;if(y.isValidElement(n)){const i=e$(n),s=JL(r,n.props);return n.type!==y.Fragment&&(s.ref=e?Gk(e,i):i),y.cloneElement(n,s)}return y.Children.count(n)>1?y.Children.only(null):null});qp.displayName="SlotClone";var Zk=({children:t})=>d.jsx(d.Fragment,{children:t});function QL(t){return y.isValidElement(t)&&t.type===Zk}function JL(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function e$(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}const Kx=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Yx=Fk,Td=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return Yx(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(c=>{const u=n==null?void 0:n[c],h=s==null?void 0:s[c];if(u===null)return null;const f=Kx(u)||Kx(h);return i[c][f]}),a=n&&Object.entries(n).reduce((c,u)=>{let[h,f]=u;return f===void 0||(c[h]=f),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:h,className:f,...p}=u;return Object.entries(p).every(g=>{let[m,w]=g;return Array.isArray(w)?w.includes({...s,...a}[m]):{...s,...a}[m]===w})?[...c,h,f]:c},[]);return Yx(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)},Dl=Td("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",success:"bg-success text-success-foreground hover:bg-success/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ke=y.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},s)=>{const o=r?os:"button";return d.jsx(o,{className:U(Dl({variant:e,size:n,className:t})),ref:s,...i})});ke.displayName="Button";const Gx=()=>d.jsxs(bt,{className:"rounded-xl border border-border/60 bg-card shadow-md animate-pulse",children:[" ",d.jsxs("div",{className:"p-5 space-y-5",children:[" ",d.jsxs("div",{className:"flex items-center justify-between",children:[" ",d.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[" ",d.jsx("div",{className:"flex-shrink-0 h-9 w-9 bg-muted rounded-lg"})," ",d.jsx("div",{className:"h-5 bg-muted rounded w-3/5"})," "]})," ",d.jsx("div",{className:"flex-shrink-0 h-6 w-16 bg-muted rounded-md ml-2"})," "]})," ",d.jsxs("div",{className:"flex items-end justify-between gap-4 pt-1",children:[" ",d.jsxs("div",{className:"space-y-2",children:[" ",d.jsx("div",{className:"h-9 bg-muted rounded w-32"})," "]})," ",d.jsxs("div",{className:"text-right flex flex-col items-end flex-shrink-0",children:[" ",d.jsx("div",{className:"h-6 bg-muted rounded w-24 mb-1"})," ",d.jsx("div",{className:"h-4 bg-muted rounded w-16"})," "]})," "]})," "]})," "]}),t$=()=>{const{accounts:t,isLoading:e,error:n,fetchPortfolio:r}=ur(),i=gt(),{getAccountTotals:s,isPriceLoading:o}=Kk(),{unreadCount:a,notificationsEnabled:l}=nn(h=>({unreadCount:h.unreadCount,notificationsEnabled:h.notificationsEnabled}));k.log("[AccountsListPage] Rendering. notificationsEnabled:",l,"unreadCount:",a),y.useEffect(()=>{t===null&&!e&&!n&&r()},[t,e,n,r]);const c=h=>{typeof h=="number"&&i(`/portfolio/${h}`)},u=()=>{k.log("[AccountsListPage] Navigating to /notifications"),i("/notifications")};return e&&t===null?d.jsxs("div",{className:"p-4 space-y-5 pb-24",children:[" ",d.jsxs("div",{className:"flex justify-between items-center mb-5 px-1",children:[" ",d.jsx("h1",{className:"text-2xl font-semibold text-foreground tracking-tight",children:"Мои счета"})," ",d.jsx("div",{className:"h-9 w-9 bg-muted rounded-full animate-pulse"})," "]})," ",d.jsx(Gx,{})," ",d.jsx(Gx,{})," "]}):t===null&&n?d.jsx("div",{className:"p-6 pt-10",children:d.jsx(mt,{message:`Не удалось загрузить счета: ${n}`})}):!e&&(t==null?void 0:t.length)===0?d.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-8rem)] p-6 text-center",children:[" ",d.jsx(Vx,{className:"w-16 h-16 text-muted-foreground mb-4",strokeWidth:1})," ",d.jsx("p",{className:"text-muted-foreground mb-4",children:"У вас пока нет счетов."})," "]}):d.jsxs("div",{className:"p-4 space-y-4 pb-24",children:[d.jsxs("div",{className:"flex justify-between items-center mb-5 px-1",children:[d.jsx("h1",{className:"text-2xl font-semibold text-foreground tracking-tight",children:"Мои счета"}),d.jsxs(ke,{variant:"ghost",size:"icon",className:"relative h-9 w-9 rounded-full text-muted-foreground hover:text-foreground hover:bg-muted/50",onClick:u,"aria-label":`Уведомления (${l?a:0} непрочитанных)`,children:[d.jsx(Hp,{className:"h-5 w-5"}),l&&d.jsx(Yk,{count:a,positionClasses:"absolute top-0 right-0"})]})]}),o&&t&&t.length>0&&d.jsx("div",{className:"fixed top-4 right-4 p-1 bg-card/80 rounded-full shadow z-20 animate-pulse backdrop-blur-sm",children:d.jsx(Ce,{size:"sm"})}),Array.isArray(t)&&t.map(h=>{var N;if(!((N=h==null?void 0:h.brokerAccount)!=null&&N.id))return null;const f=h.brokerAccount.id,{totalValue:p,totalProfitLoss:g}=s(f);let m=0;h.portfolioItems&&h.portfolioItems.forEach(C=>{var _;((_=C.asset)==null?void 0:_.ticker)!=="RUB"&&C.averagePriceCopecks&&C.averagePriceCopecks>0&&C.quantity&&C.quantity>0&&(m+=C.averagePriceCopecks*C.quantity)});const w=m>0?g/m*100:0,v=g>0,x=g<0,b=v?"text-success":x?"text-destructive":"text-muted-foreground",S=(h.brokerAccount.title||`Счет #${f}`).replace(/["«»]/g,"");return d.jsx("div",{onClick:()=>c(f),className:"cursor-pointer group",children:d.jsx(bt,{className:U("rounded-xl border border-border/60 bg-card text-card-foreground shadow-md overflow-hidden","group-hover:border-primary/50 group-hover:shadow-md transition-all duration-200 group-active:scale-[0.98]"),children:d.jsxs(pr,{className:"p-5 space-y-3",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[d.jsxs("div",{className:"flex-shrink-0 grid place-items-center h-9 w-9 bg-primary/10 text-primary rounded-lg",children:[" ",t.length>1?d.jsx(Vx,{size:20,strokeWidth:1.75}):d.jsx(cL,{size:20,strokeWidth:1.75})," "]}),d.jsxs("div",{className:"min-w-0",children:[" ",d.jsx("h3",{className:"text-lg font-medium text-foreground truncate",children:S})," "]})]}),d.jsxs("span",{className:"flex-shrink-0 text-xs font-medium bg-muted/70 text-muted-foreground/90 px-2.5 py-1 rounded-md ml-2",children:[" ID:",f," "]})]}),d.jsxs("div",{className:"flex items-baseline justify-between gap-2 pt-1",children:[d.jsx("div",{className:"text-3xl text-foreground tracking-tight leading-none",children:d.jsx(ft,{value:p})}),d.jsxs("div",{className:U("text-right flex flex-col items-end flex-shrink-0",b),children:[d.jsx("div",{className:"text-base font-medium",children:g!==0?d.jsx(ft,{value:g,showSign:!0}):d.jsx("span",{children:"—"})}),d.jsxs("span",{className:"text-sm opacity-90 mt-0.5",children:[" (",oi(w,2),"%) "]})]})]})]})})},f)})]})},n$="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='lucide%20lucide-landmark'%3e%3cline%20x1='3'%20x2='21'%20y1='22'%20y2='22'/%3e%3cline%20x1='6'%20x2='6'%20y1='18'%20y2='11'/%3e%3cline%20x1='10'%20x2='10'%20y1='18'%20y2='11'/%3e%3cline%20x1='14'%20x2='14'%20y1='18'%20y2='11'/%3e%3cline%20x1='18'%20x2='18'%20y1='18'%20y2='11'/%3e%3cpolygon%20points='12%202%2020%207%204%207'/%3e%3c/svg%3e",ks=new Map,oa=new Set,qh=5*60*1e3,r$=t=>{const e="Failed to fetch proxied image.";if(!t)return k.warn("[API/Proxy] fetchProxiedImageBase64 called with empty URL."),Promise.resolve({isSuccess:!1,errorMessage:"Image URL is required.",resultObject:null});if(oa.has(t))return k.log(`[API/Proxy Cache] URL known to fail, returning cached error: ${t}`),Promise.resolve({isSuccess:!1,errorMessage:e,resultObject:null});if(ks.has(t))return k.log(`[API/Proxy Cache] Returning cached promise for: ${t}`),ks.get(t);k.log(`[API/Proxy] Requesting Base64 for URL (no cache): ${t}`);const n={PictureUrl:t},r=Xe.post("/api/Proxy/DownloadPictureBase64",n).then(i=>{const s=ot(i,e);return k.log(`[API/Proxy] Response processed for ${t}: Success=${s.isSuccess}`),s.isSuccess?setTimeout(()=>{k.log(`[API/Proxy Cache] Removing successful promise from cache: ${t}`),ks.delete(t)},qh):(oa.add(t),setTimeout(()=>{k.log(`[API/Proxy Cache] Removing failed URL from cache: ${t}`),oa.delete(t)},qh),ks.delete(t)),s}).catch(i=>{const s=at(i,e);return k.error(`[API/Proxy] Network/Request error for ${t}:`,s.errorMessage),oa.add(t),setTimeout(()=>{k.log(`[API/Proxy Cache] Removing failed URL from cache (network error): ${t}`),oa.delete(t)},qh),ks.delete(t),s});return ks.set(t,r),r},Ad=({logoUrl:t,ticker:e,className:n="h-8 w-8 rounded-full"})=>{const[r,i]=y.useState(t||null),[s,o]=y.useState(!1),[a,l]=y.useState(null),[c,u]=y.useState(!1);y.useEffect(()=>{i(t||null),o(!1),l(null),u(!1),k.log(`[AssetIcon Effect] logoUrl changed for ${e}. Reset state. New URL: ${t}`)},[t,e]);const h=y.useCallback(()=>{if(k.log(`[AssetIcon handleError] Direct load failed for: ${t}`),c||s||!t){k.log(`[AssetIcon handleError] Aborting fallback: attemptedProxy=${c}, isLoadingProxy=${s}, no logoUrl=${!t}`),c&&!s&&(l(p=>p||"Direct load failed, proxy attempt already made or failed."),i(null));return}u(!0),o(!0),l(null),k.log(`[AssetIcon handleError] Attempting proxy load for: ${t}`),r$(t).then(p=>{if(p.isSuccess&&p.resultObject){k.log(`[AssetIcon handleError] Proxy load successful for: ${t}. Setting Data URL.`);const g=`data:image/png;base64,${p.resultObject}`;i(g),l(null)}else{const g=p.errorMessage||"Proxy fetch failed";k.warn(`[AssetIcon handleError] Proxy load failed for ${t}: ${g}`),l(g),i(null)}}).catch(p=>{const g=p.message||"Proxy network error";k.error(`[AssetIcon handleError] Proxy fetch exception for ${t}:`,p),l(g),i(null)}).finally(()=>{o(!1)})},[t,c,s]);if(s)return d.jsx("div",{className:U(n,"flex items-center justify-center bg-muted border border-border"),children:d.jsx(Ce,{size:"sm"})});if(r)return d.jsx("img",{src:r,alt:e?`${e} logo`:"Asset Logo",onError:r.startsWith("data:")?void 0:h,className:U(n,"object-cover"),loading:"lazy"},r.startsWith("data:")?"data-url":r);const f=a?`Не удалось загрузить логотип (${e||"N/A"}): ${a}`:e?`Логотип ${e}`:"Логотип актива";return d.jsx("img",{src:n$,alt:e?`Fallback icon for ${e}`:"Fallback Asset Icon",title:f,className:U(n,"object-contain p-1 bg-muted border border-border opacity-70")})},Ig=({asset:t,showLotSize:e=!0,className:n,nameClassName:r="text-sm font-medium",tickerClassName:i="text-xs",iconClassName:s="h-8 w-8 rounded-full flex-shrink-0"})=>{if(!t)return d.jsxs("div",{className:U("flex items-center space-x-2 animate-pulse",n),children:[d.jsx("div",{className:U("bg-muted",s)}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("div",{className:"h-3 w-24 rounded bg-muted"}),d.jsx("div",{className:"h-2.5 w-16 rounded bg-muted"})]})]});const o=Ao(t);return d.jsxs("div",{className:U("flex items-center space-x-2 min-w-0",n),children:[d.jsx(Ad,{logoUrl:t.logoUrl,ticker:t.ticker,className:s}),d.jsxs("div",{className:"overflow-hidden min-w-0",children:[d.jsx("p",{className:U("font-medium",r),title:t.title||t.shortName||t.ticker,children:o}),d.jsxs("p",{className:U("text-muted-foreground uppercase",i),children:[t.ticker,e&&t.lotSize>1&&d.jsxs("span",{className:"ml-1 normal-case opacity-70",children:["× ",oi(t.lotSize,0)]})]})]})]})},Xk=Le.memo(({item:t,currentPriceInfo:e})=>{const n=gt(),r=pn();if(!t||!t.asset)return d.jsx("div",{className:"p-4 text-muted-foreground",children:"Ошибка: Неверные данные элемента портфеля."});const{asset:i,quantity:s,averagePriceCopecks:o}=t,a=e?Math.round(e.price*100):null,l=a!==null?a*s:null,c=o!==null?o*s:null,u=l!==null&&c!==null&&c>0?l-c:null,h=c&&c>0&&u!==null?u/c*100:null,f=u!==null&&u>0,p=u!==null&&u<0,g=f?"text-success":p?"text-destructive":"text-muted-foreground",m=()=>{i.id&&n(`/asset/${i.id}`,{state:{from:r.pathname}})};return d.jsxs("div",{className:"flex items-start justify-between py-1.5 px-2 space-x-2 cursor-pointer hover:bg-muted/50 transition-colors",onClick:m,role:"button",tabIndex:0,onKeyDown:w=>(w.key==="Enter"||w.key===" ")&&m(),children:[d.jsxs("div",{className:"flex-grow min-w-0",children:[d.jsx(Ig,{asset:i,showLotSize:!1,className:"w-full",iconClassName:"h-8 w-8 rounded-full flex-shrink-0",nameClassName:"text-sm font-medium",tickerClassName:"text-xs"}),o!==null&&o>0&&d.jsx("div",{className:"pl-10 -mt-1",children:d.jsxs("span",{className:"text-xs text-muted-foreground",children:["Средняя:",d.jsx(ft,{value:o,className:"font-normal",asset:i})]})})]}),d.jsxs("div",{className:"text-right flex-shrink-0 ml-2 min-w-[90px] pt-1",children:[l!==null?d.jsx(ft,{value:l,className:"text-sm font-medium tabular-nums-font",asset:i}):e===void 0?d.jsx(Ce,{size:"sm"}):d.jsx("span",{className:"text-xs text-muted-foreground",children:"—"}),u!==null?d.jsxs("div",{className:U("text-xs tabular-nums-font mt-0.5",g),children:[d.jsx(ft,{value:u,showSign:!0,placeholder:To(0)}),h!==null&&h!==0&&d.jsxs("span",{className:"ml-1 opacity-80",children:["(",oi(h,1),"%)"]})]}):l!==null&&d.jsxs("p",{className:"text-xs text-muted-foreground mt-0.5 tabular-nums-font",children:[To(0)," (0%)"]})]})]})});Xk.displayName="AssetCard";function i$(t,e){const n=y.createContext(e),r=s=>{const{children:o,...a}=s,l=y.useMemo(()=>a,Object.values(a));return d.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function i(s){const o=y.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[r,i]}function Dt(t,e=[]){let n=[];function r(s,o){const a=y.createContext(o),l=n.length;n=[...n,o];const c=h=>{var v;const{scope:f,children:p,...g}=h,m=((v=f==null?void 0:f[t])==null?void 0:v[l])||a,w=y.useMemo(()=>g,Object.values(g));return d.jsx(m.Provider,{value:w,children:p})};c.displayName=s+"Provider";function u(h,f){var m;const p=((m=f==null?void 0:f[t])==null?void 0:m[l])||a,g=y.useContext(p);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${s}\``)}return[c,u]}const i=()=>{const s=n.map(o=>y.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return y.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,s$(i,...e)]}function s$(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(s)[`__scope${c}`];return{...a,...h}},{});return y.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Pd(t){const e=t+"CollectionProvider",[n,r]=Dt(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=p=>{const{scope:g,children:m}=p,w=Le.useRef(null),v=Le.useRef(new Map).current;return d.jsx(i,{scope:g,itemMap:v,collectionRef:w,children:m})};o.displayName=e;const a=t+"CollectionSlot",l=Le.forwardRef((p,g)=>{const{scope:m,children:w}=p,v=s(a,m),x=Pe(g,v.collectionRef);return d.jsx(os,{ref:x,children:w})});l.displayName=a;const c=t+"CollectionItemSlot",u="data-radix-collection-item",h=Le.forwardRef((p,g)=>{const{scope:m,children:w,...v}=p,x=Le.useRef(null),b=Pe(g,x),S=s(c,m);return Le.useEffect(()=>(S.itemMap.set(x,{ref:x,...v}),()=>void S.itemMap.delete(x))),d.jsx(os,{[u]:"",ref:b,children:w})});h.displayName=c;function f(p){const g=s(t+"CollectionConsumer",p);return Le.useCallback(()=>{const w=g.collectionRef.current;if(!w)return[];const v=Array.from(w.querySelectorAll(`[${u}]`));return Array.from(g.itemMap.values()).sort((S,N)=>v.indexOf(S.ref.current)-v.indexOf(N.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:o,Slot:l,ItemSlot:h},f,r]}function le(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function It(t){const e=y.useRef(t);return y.useEffect(()=>{e.current=t}),y.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function Cn({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=o$({defaultProp:e,onChange:n}),s=t!==void 0,o=s?t:r,a=It(n),l=y.useCallback(c=>{if(s){const h=typeof c=="function"?c(t):c;h!==t&&a(h)}else i(c)},[s,t,i,a]);return[o,l]}function o$({defaultProp:t,onChange:e}){const n=y.useState(t),[r]=n,i=y.useRef(r),s=It(e);return y.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}var a$=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],ae=a$.reduce((t,e)=>{const n=y.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?os:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),d.jsx(a,{...o,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function Qk(t,e){t&&gs.flushSync(()=>t.dispatchEvent(e))}var ut=globalThis!=null&&globalThis.document?y.useLayoutEffect:()=>{};function l$(t,e){return y.useReducer((n,r)=>e[n][r]??n,t)}var Ur=t=>{const{present:e,children:n}=t,r=c$(e),i=typeof n=="function"?n({present:r.isPresent}):y.Children.only(n),s=Pe(r.ref,u$(i));return typeof n=="function"||r.isPresent?y.cloneElement(i,{ref:s}):null};Ur.displayName="Presence";function c$(t){const[e,n]=y.useState(),r=y.useRef({}),i=y.useRef(t),s=y.useRef("none"),o=t?"mounted":"unmounted",[a,l]=l$(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return y.useEffect(()=>{const c=hc(r.current);s.current=a==="mounted"?c:"none"},[a]),ut(()=>{const c=r.current,u=i.current;if(u!==t){const f=s.current,p=hc(c);t?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==p?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),ut(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,h=p=>{const m=hc(r.current).includes(p.animationName);if(p.target===e&&m&&(l("ANIMATION_END"),!i.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},f=p=>{p.target===e&&(s.current=hc(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:y.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function hc(t){return(t==null?void 0:t.animationName)||"none"}function u$(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var d$=yb.useId||(()=>{}),h$=0;function or(t){const[e,n]=y.useState(d$());return ut(()=>{n(r=>r??String(h$++))},[t]),e?`radix-${e}`:""}var Og="Collapsible",[f$,Jk]=Dt(Og),[p$,Lg]=f$(Og),eC=y.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:i,disabled:s,onOpenChange:o,...a}=t,[l=!1,c]=Cn({prop:r,defaultProp:i,onChange:o});return d.jsx(p$,{scope:n,disabled:s,contentId:or(),open:l,onOpenToggle:y.useCallback(()=>c(u=>!u),[c]),children:d.jsx(ae.div,{"data-state":Dg(l),"data-disabled":s?"":void 0,...a,ref:e})})});eC.displayName=Og;var tC="CollapsibleTrigger",nC=y.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,i=Lg(tC,n);return d.jsx(ae.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":Dg(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...r,ref:e,onClick:le(t.onClick,i.onOpenToggle)})});nC.displayName=tC;var $g="CollapsibleContent",rC=y.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=Lg($g,t.__scopeCollapsible);return d.jsx(Ur,{present:n||i.open,children:({present:s})=>d.jsx(m$,{...r,ref:e,present:s})})});rC.displayName=$g;var m$=y.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:i,...s}=t,o=Lg($g,n),[a,l]=y.useState(r),c=y.useRef(null),u=Pe(e,c),h=y.useRef(0),f=h.current,p=y.useRef(0),g=p.current,m=o.open||a,w=y.useRef(m),v=y.useRef(void 0);return y.useEffect(()=>{const x=requestAnimationFrame(()=>w.current=!1);return()=>cancelAnimationFrame(x)},[]),ut(()=>{const x=c.current;if(x){v.current=v.current||{transitionDuration:x.style.transitionDuration,animationName:x.style.animationName},x.style.transitionDuration="0s",x.style.animationName="none";const b=x.getBoundingClientRect();h.current=b.height,p.current=b.width,w.current||(x.style.transitionDuration=v.current.transitionDuration,x.style.animationName=v.current.animationName),l(r)}},[o.open,r]),d.jsx(ae.div,{"data-state":Dg(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!m,...s,ref:u,style:{"--radix-collapsible-content-height":f?`${f}px`:void 0,"--radix-collapsible-content-width":g?`${g}px`:void 0,...t.style},children:m&&i})});function Dg(t){return t?"open":"closed"}var g$=eC,v$=nC,y$=rC,x$=y.createContext(void 0);function zl(t){const e=y.useContext(x$);return t||e||"ltr"}var Hr="Accordion",w$=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[zg,b$,S$]=Pd(Hr),[jd,N8]=Dt(Hr,[S$,Jk]),Fg=Jk(),iC=Le.forwardRef((t,e)=>{const{type:n,...r}=t,i=r,s=r;return d.jsx(zg.Provider,{scope:t.__scopeAccordion,children:n==="multiple"?d.jsx(N$,{...s,ref:e}):d.jsx(E$,{...i,ref:e})})});iC.displayName=Hr;var[sC,k$]=jd(Hr),[oC,C$]=jd(Hr,{collapsible:!1}),E$=Le.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},collapsible:s=!1,...o}=t,[a,l]=Cn({prop:n,defaultProp:r,onChange:i});return d.jsx(sC,{scope:t.__scopeAccordion,value:a?[a]:[],onItemOpen:l,onItemClose:Le.useCallback(()=>s&&l(""),[s,l]),children:d.jsx(oC,{scope:t.__scopeAccordion,collapsible:s,children:d.jsx(aC,{...o,ref:e})})})}),N$=Le.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},...s}=t,[o=[],a]=Cn({prop:n,defaultProp:r,onChange:i}),l=Le.useCallback(u=>a((h=[])=>[...h,u]),[a]),c=Le.useCallback(u=>a((h=[])=>h.filter(f=>f!==u)),[a]);return d.jsx(sC,{scope:t.__scopeAccordion,value:o,onItemOpen:l,onItemClose:c,children:d.jsx(oC,{scope:t.__scopeAccordion,collapsible:!0,children:d.jsx(aC,{...s,ref:e})})})}),[_$,Rd]=jd(Hr),aC=Le.forwardRef((t,e)=>{const{__scopeAccordion:n,disabled:r,dir:i,orientation:s="vertical",...o}=t,a=Le.useRef(null),l=Pe(a,e),c=b$(n),h=zl(i)==="ltr",f=le(t.onKeyDown,p=>{var P;if(!w$.includes(p.key))return;const g=p.target,m=c().filter(I=>{var R;return!((R=I.ref.current)!=null&&R.disabled)}),w=m.findIndex(I=>I.ref.current===g),v=m.length;if(w===-1)return;p.preventDefault();let x=w;const b=0,S=v-1,N=()=>{x=w+1,x>S&&(x=b)},C=()=>{x=w-1,x<b&&(x=S)};switch(p.key){case"Home":x=b;break;case"End":x=S;break;case"ArrowRight":s==="horizontal"&&(h?N():C());break;case"ArrowDown":s==="vertical"&&N();break;case"ArrowLeft":s==="horizontal"&&(h?C():N());break;case"ArrowUp":s==="vertical"&&C();break}const _=x%v;(P=m[_].ref.current)==null||P.focus()});return d.jsx(_$,{scope:n,disabled:r,direction:i,orientation:s,children:d.jsx(zg.Slot,{scope:n,children:d.jsx(ae.div,{...o,"data-orientation":s,ref:l,onKeyDown:r?void 0:f})})})}),zu="AccordionItem",[T$,Bg]=jd(zu),lC=Le.forwardRef((t,e)=>{const{__scopeAccordion:n,value:r,...i}=t,s=Rd(zu,n),o=k$(zu,n),a=Fg(n),l=or(),c=r&&o.value.includes(r)||!1,u=s.disabled||t.disabled;return d.jsx(T$,{scope:n,open:c,disabled:u,triggerId:l,children:d.jsx(g$,{"data-orientation":s.orientation,"data-state":pC(c),...a,...i,ref:e,disabled:u,open:c,onOpenChange:h=>{h?o.onItemOpen(r):o.onItemClose(r)}})})});lC.displayName=zu;var cC="AccordionHeader",uC=Le.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,i=Rd(Hr,n),s=Bg(cC,n);return d.jsx(ae.h3,{"data-orientation":i.orientation,"data-state":pC(s.open),"data-disabled":s.disabled?"":void 0,...r,ref:e})});uC.displayName=cC;var Kp="AccordionTrigger",dC=Le.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,i=Rd(Hr,n),s=Bg(Kp,n),o=C$(Kp,n),a=Fg(n);return d.jsx(zg.ItemSlot,{scope:n,children:d.jsx(v$,{"aria-disabled":s.open&&!o.collapsible||void 0,"data-orientation":i.orientation,id:s.triggerId,...a,...r,ref:e})})});dC.displayName=Kp;var hC="AccordionContent",fC=Le.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,i=Rd(Hr,n),s=Bg(hC,n),o=Fg(n);return d.jsx(y$,{role:"region","aria-labelledby":s.triggerId,"data-orientation":i.orientation,...o,...r,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});fC.displayName=hC;function pC(t){return t?"open":"closed"}var A$=iC,P$=lC,j$=uC,mC=dC,gC=fC;const R$=A$,vC=y.forwardRef(({className:t,...e},n)=>d.jsx(P$,{ref:n,className:U("",t),...e}));vC.displayName="AccordionItem";const yC=y.forwardRef(({className:t,children:e,...n},r)=>d.jsx(j$,{className:"flex",children:d.jsx(mC,{ref:r,className:U("flex flex-1 items-center justify-between font-medium transition-all",t),...n,children:e})}));yC.displayName=mC.displayName;const xC=y.forwardRef(({className:t,children:e,...n},r)=>d.jsxs(gC,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:[d.jsx("div",{className:U("",t),children:e})," "]}));xC.displayName=gC.displayName;const ya="Валюта и металлы",M$="Акции",I$="Фонды",O$="Облигации",Zx="Прочее",L$=(t,e,n)=>{const r={};t.forEach(l=>{if(!l.asset)return;const c=l.asset.assetTypeId,u=l.asset.ticker;let h=Zx;if(u==="RUB")h=ya;else if(c){const g=e.get(c);g&&(g.id===1||g.id===2||g.title==="currency"||g.title==="currency_pair"?h=ya:g.id===3||g.title==="stock"?h=M$:g.id===4||g.title==="fund_share"?h=I$:g.id===5||g.title==="bond"?h=O$:h=g.description||Zx)}r[h]||(r[h]={items:[],groupTotalValue:0}),r[h].items.push(l);const f=n.get(l.asset.ticker),p=l.quantity||0;if(u==="RUB")h===ya&&(r[h].groupTotalValue+=p);else if(f&&p>0){const m=f.price*100*p;r[h].groupTotalValue+=m}}),Object.keys(r).forEach(l=>{r[l].items.sort((c,u)=>{var p,g;if(c.asset.ticker==="RUB")return-1;if(u.asset.ticker==="RUB")return 1;const h=(((p=n.get(c.asset.ticker))==null?void 0:p.price)??0)*100*(c.quantity??0);return(((g=n.get(u.asset.ticker))==null?void 0:g.price)??0)*100*(u.quantity??0)-h})});const i=Object.entries(r);let s;const o=[];i.forEach(l=>{l[0]===ya?s=l:o.push(l)}),o.sort(([,l],[,c])=>c.groupTotalValue-l.groupTotalValue);const a=[];return s&&a.push(s),a.push(...o),a},$$=({portfolioItems:t,assetTypesMap:e,prices:n,isPriceLoading:r,priceError:i})=>{const s=y.useMemo(()=>L$(t,e,n),[t,e,n]),o=t.length>0;return d.jsxs("div",{className:"space-y-3",children:[i&&d.jsx(mt,{message:`Ошибка загрузки цен: ${i}`,className:"mx-4 mb-3"}),!i&&!o&&!r&&d.jsx("p",{className:"p-4 pt-10 text-center text-muted-foreground",children:"На счете нет активов."}),!i&&s.length>0&&d.jsx(R$,{type:"multiple",defaultValue:s.map(([a])=>a),className:"w-full space-y-3",children:s.map(([a,l])=>{const{items:c,groupTotalValue:u}=l,h=a!==ya||c.some(f=>{var p;return((p=f.asset)==null?void 0:p.ticker)!=="RUB"});return c.length===0?null:d.jsx(bt,{className:"border border-border/60 rounded-lg shadow-sm overflow-hidden",children:d.jsxs(vC,{value:a,className:"border-none",children:[d.jsx(yC,{className:U("px-4 py-3 text-sm font-medium border-b cursor-pointer","hover:bg-muted/30 active:bg-muted/50","data-[state=open]:bg-muted/20"),children:d.jsxs("div",{className:"flex justify-between items-center w-full",children:[d.jsx("span",{className:"text-base font-medium",children:a}),h&&d.jsx("div",{className:"text-right flex-shrink-0",children:d.jsx(ft,{value:u,className:"text-base font-medium"})})]})}),d.jsx(xC,{className:"p-0",children:d.jsx("div",{className:"divide-y divide-border",children:c.map(f=>{var p;return((p=f.asset)==null?void 0:p.ticker)==="RUB"?d.jsxs("div",{className:"flex items-center justify-between p-2 space-x-3",children:[d.jsx(Ig,{asset:f.asset,showLotSize:!1,className:"flex-grow min-w-0",iconClassName:"h-8 w-8 rounded-full flex-shrink-0",nameClassName:"text-sm font-medium",tickerClassName:"text-xs"}),d.jsx("div",{className:"text-right flex-shrink-0 ml-2",children:d.jsx(ft,{value:f.quantity,className:"text-base font-medium"})})]},f.id):f.asset&&d.jsx(Xk,{item:f,currentPriceInfo:n.get(f.asset.ticker)},f.id)})})})]})},a)})}),r&&o&&d.jsx("div",{className:"flex justify-center p-4",children:d.jsx(Ce,{size:"sm"})})]})};var ab;const je=typeof window<"u"?(ab=window.Telegram)==null?void 0:ab.WebApp:void 0;function Zt(){var n,r;return{onClose:()=>{je==null||je.close()},onToggleButton:()=>{je!=null&&je.MainButton.isVisible?je==null||je.MainButton.hide():je==null||je.MainButton.show()},tg:je,user:(n=je==null?void 0:je.initDataUnsafe)==null?void 0:n.user,initDataUnsafe:je==null?void 0:je.initDataUnsafe,initData:je==null?void 0:je.initData,queryId:(r=je==null?void 0:je.initDataUnsafe)==null?void 0:r.query_id,themeParams:je==null?void 0:je.themeParams,colorScheme:je==null?void 0:je.colorScheme}}const D$=()=>{const{accountId:t}=ys(),e=Number(t),n=gt(),{accounts:r,isLoading:i,error:s}=ur(),{isPriceLoading:o,priceError:a,getAccountTotals:l,prices:c}=Kk(),[u,h]=y.useState(new Map),[f,p]=y.useState(!0),[g,m]=y.useState(null),{tg:w}=Zt(),v=y.useMemo(()=>{if(!(!r||!e))return r.find(R=>{var O;return((O=R.brokerAccount)==null?void 0:O.id)===e})},[r,e]),x=y.useMemo(()=>{const R=(v==null?void 0:v.portfolioItems)??[];k.log(`[AccountDetailPage activePortfolioItems] Filtering ${R.length} items for account ${e}...`);const O=R.filter(j=>{var L,B;const F=(L=j.asset)==null?void 0:L.ticker,M=(B=j.asset)==null?void 0:B.outOfCirculationAt,D=M&&new Date(M)<new Date;return F==="SU26207RMFS9"&&k.warn(`[AccountDetailPage Filter Check - TARGET] Ticker: ${F}, outOfCirculationAt: ${M} (Type: ${typeof M}), IsInactive: ${D}`),D&&k.log(`[AccountDetailPage activePortfolioItems] Filtering out: ${F} (Inactive date: ${M})`),!D});return k.log(`[AccountDetailPage activePortfolioItems] Result: ${O.length} active items.`),O},[v==null?void 0:v.portfolioItems,e]),{totalValue:b,totalProfitLoss:S}=y.useMemo(()=>!e||!l?{totalValue:0,totalProfitLoss:0}:l(e),[e,l]);if(y.useEffect(()=>{let R=!0;return p(!0),m(null),Ck().then(O=>{if(R)if(O.isSuccess&&O.resultObject){const j=new Map;O.resultObject.forEach(F=>j.set(F.id,F)),h(j)}else m(O.errorMessage||"Не удалось загрузить типы активов.")}).catch(O=>{R&&m(O.message||"Ошибка загрузки типов активов.")}).finally(()=>{R&&p(!1)}),()=>{R=!1}},[]),y.useEffect(()=>{const R=()=>n("/portfolio");return w&&(w.BackButton.show(),w.onEvent("backButtonClicked",R)),()=>{w&&(w.BackButton.hide(),w.offEvent("backButtonClicked",R))}},[w,n]),i||f)return d.jsx("div",{className:"flex items-center justify-center h-[calc(100vh-10rem)]",children:d.jsx(Ce,{size:"lg"})});if(s)return d.jsx("div",{className:"p-4",children:d.jsx(mt,{message:`Ошибка загрузки данных портфеля: ${s}`})});if(g)return d.jsx("div",{className:"p-4",children:d.jsx(mt,{message:`Ошибка загрузки типов активов: ${g}`})});if(!(v!=null&&v.brokerAccount))return d.jsxs("div",{className:"p-4 text-center",children:[" ",d.jsx(mt,{message:`Счёт с ID ${e} не найден.`})," "]});let C=0;x&&x.forEach(R=>{var O;((O=R.asset)==null?void 0:O.ticker)!=="RUB"&&R.averagePriceCopecks&&R.averagePriceCopecks>0&&R.quantity&&R.quantity>0&&(C+=R.averagePriceCopecks*R.quantity)});const _=C>0?S/C*100:0,P=S>0?"text-success":S<0?"text-destructive":"text-muted-foreground",I=(v.brokerAccount.title||`Счет #${e}`).replace(/["«»]/g,"");return d.jsxs("div",{className:"p-4 space-y-3 pb-20",children:[d.jsxs("div",{className:"bg-card p-4 rounded-lg shadow-sm space-y-2",children:[d.jsxs("div",{className:"flex justify-between items-start mb-2",children:[d.jsxs("div",{className:"flex flex-col text-left",children:[d.jsxs("h2",{className:"text-2xl font-semibold leading-tight",children:[" ",I," "]}),d.jsxs("span",{className:"text-base text-muted-foreground leading-snug",children:[" ",v.brokerAccount.telegramUserId||"ID не найден"," "]})]}),d.jsxs(ke,{variant:"outline",onClick:()=>n(`/portfolio/${e}/operations`),className:U("flex items-center gap-1.5 min-w-[100px] h-9 px-3 py-1.5","text-sm font-medium rounded-xl","border border-border bg-background hover:bg-muted/50 shadow-sm","flex-shrink-0"),children:[d.jsx(GO,{className:"h-4 w-4"})," Операции"]})]}),d.jsxs("div",{className:"flex items-baseline justify-between gap-2",children:[d.jsx("div",{className:"text-3xl tracking-tight leading-none",children:d.jsx(ft,{value:b})}),d.jsxs("div",{className:U("text-right flex flex-col items-end",P),children:[d.jsx("div",{className:"text-base font-medium",children:d.jsx(ft,{value:S,showSign:!0})}),S!==0&&C>0&&d.jsxs("span",{className:"text-sm opacity-90",children:[" (",oi(_,2),"%) "]})]})]})]}),d.jsx($$,{portfolioItems:x,assetTypesMap:u,prices:c,isPriceLoading:o,priceError:a})]})};var Ct=(t=>(t[t.Buy=0]="Buy",t[t.Sell=1]="Sell",t[t.DividendPayment=2]="DividendPayment",t[t.CouponPayment=3]="CouponPayment",t[t.BondRedemption=4]="BondRedemption",t))(Ct||{});const z$=async(t,e)=>{const n="Failed to search market operations history.";try{const r=await Xe.post("/api/BrokerAccountUser/SearchMarketOperationsHistory",t,{signal:e==null?void 0:e.signal}),i=ot(r,n);return i.isSuccess&&i.resultObject?i.resultObject.marketOperations=i.resultObject.marketOperations||[]:i.isSuccess&&!i.resultObject&&(k.warn("[API/History] searchMarketOperationsHistory success but resultObject is null. Normalizing."),i.resultObject={marketOperationHistorySearchParameters:t,foundCount:0,marketOperations:[]}),i}catch(r){return r.name==="AbortError"?(k.log("[API/History searchMarketOperationsHistory] Request aborted."),{isSuccess:!1,errorMessage:"Request aborted",resultObject:null}):at(r,n)}},F$=20,Xx={operations:[],selectedAccountIds:[],filterOperationType:null,totalCount:0,currentPage:1,isLoading:!1,error:null,isInitialLoad:!0},B$=fr((t,e)=>({...Xx,setAccountFilter:n=>{const r=n===null?[]:[n];JSON.stringify(e().selectedAccountIds)!==JSON.stringify(r)&&(k.log(`[HistoryStore setAccountFilter] Setting account filter to: ${n===null?"All":n}`),t({selectedAccountIds:r,currentPage:1,isInitialLoad:!0}),e().fetchHistory(1,!1))},setOperationTypeFilter:n=>{e().filterOperationType!==n&&(k.log(`[HistoryStore setOperationTypeFilter] Setting type filter to: ${n===null?"All":Ct[n]}`),t({filterOperationType:n,currentPage:1,isInitialLoad:!0}),e().fetchHistory(1,!1))},fetchHistory:async(n,r=!1)=>{var l;const{selectedAccountIds:i,filterOperationType:s,currentPage:o}=e(),a=n??(r?o+1:1);if(i.length===0&&e().isInitialLoad){k.log("[HistoryStore fetchHistory] No account selected, skipping initial fetch."),t({isLoading:!1,isInitialLoad:!1});return}if(e().isLoading){k.log("[HistoryStore fetchHistory] Fetch skipped, already loading.");return}t(c=>({isLoading:!0,error:null,isInitialLoad:c.isInitialLoad&&!r})),r||t({operations:[],totalCount:0}),k.log(`[HistoryStore fetchHistory] Fetching: accounts=${JSON.stringify(i)}, type=${s===null?"All":Ct[s]}(${s}), page=${a}, append=${r}`);try{const c={BrokerAccountIds:i.length>0?i:null,MarketOperationType:s,PageNumber:a,PageItemsCount:F$},u=await z$(c);if(u.isSuccess&&u.resultObject){const h=u.resultObject.marketOperations||[];t(f=>{var p;return{operations:r?[...f.operations,...h]:h,totalCount:((p=u.resultObject)==null?void 0:p.foundCount)??f.totalCount,currentPage:a,isLoading:!1,error:null,isInitialLoad:!1}}),k.log(`[HistoryStore fetchHistory] Success. Fetched ${h.length}. Total: ${((l=u.resultObject)==null?void 0:l.foundCount)??"N/A"}. Current page: ${a}`)}else throw new Error(u.errorMessage||"Не удалось загрузить историю операций.")}catch(c){k.error("[HistoryStore fetchHistory] Fetch error:",c),t(u=>({error:c.message||"Ошибка загрузки истории.",isLoading:!1,operations:r?u.operations:[],totalCount:r?u.totalCount:0,currentPage:r?u.currentPage:1,isInitialLoad:!1}))}},goToPage:n=>{e().currentPage!==n&&!e().isLoading&&(k.log(`[HistoryStore goToPage] Going to page: ${n}`),t({currentPage:n}),e().fetchHistory(n,!1))},resetHistory:()=>{k.log("[HistoryStore resetHistory] Resetting state."),t(Xx)}}));function Qx(t,[e,n]){return Math.min(n,Math.max(e,t))}function V$(t,e=globalThis==null?void 0:globalThis.document){const n=It(t);y.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var U$="DismissableLayer",Yp="dismissableLayer.update",H$="dismissableLayer.pointerDownOutside",W$="dismissableLayer.focusOutside",Jx,wC=y.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Md=y.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=t,c=y.useContext(wC),[u,h]=y.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=y.useState({}),g=Pe(e,_=>h(_)),m=Array.from(c.layers),[w]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),v=m.indexOf(w),x=u?m.indexOf(u):-1,b=c.layersWithOutsidePointerEventsDisabled.size>0,S=x>=v,N=K$(_=>{const P=_.target,I=[...c.branches].some(R=>R.contains(P));!S||I||(i==null||i(_),o==null||o(_),_.defaultPrevented||a==null||a())},f),C=Y$(_=>{const P=_.target;[...c.branches].some(R=>R.contains(P))||(s==null||s(_),o==null||o(_),_.defaultPrevented||a==null||a())},f);return V$(_=>{x===c.layers.size-1&&(r==null||r(_),!_.defaultPrevented&&a&&(_.preventDefault(),a()))},f),y.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(Jx=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),e0(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=Jx)}},[u,f,n,c]),y.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),e0())},[u,c]),y.useEffect(()=>{const _=()=>p({});return document.addEventListener(Yp,_),()=>document.removeEventListener(Yp,_)},[]),d.jsx(ae.div,{...l,ref:g,style:{pointerEvents:b?S?"auto":"none":void 0,...t.style},onFocusCapture:le(t.onFocusCapture,C.onFocusCapture),onBlurCapture:le(t.onBlurCapture,C.onBlurCapture),onPointerDownCapture:le(t.onPointerDownCapture,N.onPointerDownCapture)})});Md.displayName=U$;var q$="DismissableLayerBranch",bC=y.forwardRef((t,e)=>{const n=y.useContext(wC),r=y.useRef(null),i=Pe(e,r);return y.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),d.jsx(ae.div,{...t,ref:i})});bC.displayName=q$;function K$(t,e=globalThis==null?void 0:globalThis.document){const n=It(t),r=y.useRef(!1),i=y.useRef(()=>{});return y.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){SC(H$,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function Y$(t,e=globalThis==null?void 0:globalThis.document){const n=It(t),r=y.useRef(!1);return y.useEffect(()=>{const i=s=>{s.target&&!r.current&&SC(W$,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function e0(){const t=new CustomEvent(Yp);document.dispatchEvent(t)}function SC(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?Qk(i,s):i.dispatchEvent(s)}var G$=Md,Z$=bC,Kh=0;function kC(){y.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??t0()),document.body.insertAdjacentElement("beforeend",t[1]??t0()),Kh++,()=>{Kh===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Kh--}},[])}function t0(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Yh="focusScope.autoFocusOnMount",Gh="focusScope.autoFocusOnUnmount",n0={bubbles:!1,cancelable:!0},X$="FocusScope",Vg=y.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[a,l]=y.useState(null),c=It(i),u=It(s),h=y.useRef(null),f=Pe(e,m=>l(m)),p=y.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;y.useEffect(()=>{if(r){let m=function(b){if(p.paused||!a)return;const S=b.target;a.contains(S)?h.current=S:Xr(h.current,{select:!0})},w=function(b){if(p.paused||!a)return;const S=b.relatedTarget;S!==null&&(a.contains(S)||Xr(h.current,{select:!0}))},v=function(b){if(document.activeElement===document.body)for(const N of b)N.removedNodes.length>0&&Xr(a)};document.addEventListener("focusin",m),document.addEventListener("focusout",w);const x=new MutationObserver(v);return a&&x.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",w),x.disconnect()}}},[r,a,p.paused]),y.useEffect(()=>{if(a){i0.add(p);const m=document.activeElement;if(!a.contains(m)){const v=new CustomEvent(Yh,n0);a.addEventListener(Yh,c),a.dispatchEvent(v),v.defaultPrevented||(Q$(rD(CC(a)),{select:!0}),document.activeElement===m&&Xr(a))}return()=>{a.removeEventListener(Yh,c),setTimeout(()=>{const v=new CustomEvent(Gh,n0);a.addEventListener(Gh,u),a.dispatchEvent(v),v.defaultPrevented||Xr(m??document.body,{select:!0}),a.removeEventListener(Gh,u),i0.remove(p)},0)}}},[a,c,u,p]);const g=y.useCallback(m=>{if(!n&&!r||p.paused)return;const w=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,v=document.activeElement;if(w&&v){const x=m.currentTarget,[b,S]=J$(x);b&&S?!m.shiftKey&&v===S?(m.preventDefault(),n&&Xr(b,{select:!0})):m.shiftKey&&v===b&&(m.preventDefault(),n&&Xr(S,{select:!0})):v===x&&m.preventDefault()}},[n,r,p.paused]);return d.jsx(ae.div,{tabIndex:-1,...o,ref:f,onKeyDown:g})});Vg.displayName=X$;function Q$(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Xr(r,{select:e}),document.activeElement!==n)return}function J$(t){const e=CC(t),n=r0(e,t),r=r0(e.reverse(),t);return[n,r]}function CC(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function r0(t,e){for(const n of t)if(!eD(n,{upTo:e}))return n}function eD(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function tD(t){return t instanceof HTMLInputElement&&"select"in t}function Xr(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&tD(t)&&e&&t.select()}}var i0=nD();function nD(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=s0(t,e),t.unshift(e)},remove(e){var n;t=s0(t,e),(n=t[0])==null||n.resume()}}}function s0(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function rD(t){return t.filter(e=>e.tagName!=="A")}const iD=["top","right","bottom","left"],Ci=Math.min,tn=Math.max,Fu=Math.round,fc=Math.floor,ar=t=>({x:t,y:t}),sD={left:"right",right:"left",bottom:"top",top:"bottom"},oD={start:"end",end:"start"};function Gp(t,e,n){return tn(t,Ci(e,n))}function $r(t,e){return typeof t=="function"?t(e):t}function Dr(t){return t.split("-")[0]}function Bo(t){return t.split("-")[1]}function Ug(t){return t==="x"?"y":"x"}function Hg(t){return t==="y"?"height":"width"}function Ei(t){return["top","bottom"].includes(Dr(t))?"y":"x"}function Wg(t){return Ug(Ei(t))}function aD(t,e,n){n===void 0&&(n=!1);const r=Bo(t),i=Wg(t),s=Hg(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Bu(o)),[o,Bu(o)]}function lD(t){const e=Bu(t);return[Zp(t),e,Zp(e)]}function Zp(t){return t.replace(/start|end/g,e=>oD[e])}function cD(t,e,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function uD(t,e,n,r){const i=Bo(t);let s=cD(Dr(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(Zp)))),s}function Bu(t){return t.replace(/left|right|bottom|top/g,e=>sD[e])}function dD(t){return{top:0,right:0,bottom:0,left:0,...t}}function EC(t){return typeof t!="number"?dD(t):{top:t,right:t,bottom:t,left:t}}function Vu(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function o0(t,e,n){let{reference:r,floating:i}=t;const s=Ei(e),o=Wg(e),a=Hg(o),l=Dr(e),c=s==="y",u=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,f=r[a]/2-i[a]/2;let p;switch(l){case"top":p={x:u,y:r.y-i.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:h};break;case"left":p={x:r.x-i.width,y:h};break;default:p={x:r.x,y:r.y}}switch(Bo(e)){case"start":p[o]-=f*(n&&c?-1:1);break;case"end":p[o]+=f*(n&&c?-1:1);break}return p}const hD=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:h}=o0(c,r,l),f=r,p={},g=0;for(let m=0;m<a.length;m++){const{name:w,fn:v}=a[m],{x,y:b,data:S,reset:N}=await v({x:u,y:h,initialPlacement:r,placement:f,strategy:i,middlewareData:p,rects:c,platform:o,elements:{reference:t,floating:e}});u=x??u,h=b??h,p={...p,[w]:{...p[w],...S}},N&&g<=50&&(g++,typeof N=="object"&&(N.placement&&(f=N.placement),N.rects&&(c=N.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):N.rects),{x:u,y:h}=o0(c,f,l)),m=-1)}return{x:u,y:h,placement:f,strategy:i,middlewareData:p}};async function xl(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:f=!1,padding:p=0}=$r(e,t),g=EC(p),w=a[f?h==="floating"?"reference":"floating":h],v=Vu(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(w)))==null||n?w:w.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),x=h==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),S=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},N=Vu(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:x,offsetParent:b,strategy:l}):x);return{top:(v.top-N.top+g.top)/S.y,bottom:(N.bottom-v.bottom+g.bottom)/S.y,left:(v.left-N.left+g.left)/S.x,right:(N.right-v.right+g.right)/S.x}}const fD=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=$r(t,e)||{};if(c==null)return{};const h=EC(u),f={x:n,y:r},p=Wg(i),g=Hg(p),m=await o.getDimensions(c),w=p==="y",v=w?"top":"left",x=w?"bottom":"right",b=w?"clientHeight":"clientWidth",S=s.reference[g]+s.reference[p]-f[p]-s.floating[g],N=f[p]-s.reference[p],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let _=C?C[b]:0;(!_||!await(o.isElement==null?void 0:o.isElement(C)))&&(_=a.floating[b]||s.floating[g]);const P=S/2-N/2,I=_/2-m[g]/2-1,R=Ci(h[v],I),O=Ci(h[x],I),j=R,F=_-m[g]-O,M=_/2-m[g]/2+P,D=Gp(j,M,F),L=!l.arrow&&Bo(i)!=null&&M!==D&&s.reference[g]/2-(M<j?R:O)-m[g]/2<0,B=L?M<j?M-j:M-F:0;return{[p]:f[p]+B,data:{[p]:D,centerOffset:M-D-B,...L&&{alignmentOffset:B}},reset:L}}}),pD=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:m=!0,...w}=$r(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const v=Dr(i),x=Ei(a),b=Dr(a)===a,S=await(l.isRTL==null?void 0:l.isRTL(c.floating)),N=f||(b||!m?[Bu(a)]:lD(a)),C=g!=="none";!f&&C&&N.push(...uD(a,m,g,S));const _=[a,...N],P=await xl(e,w),I=[];let R=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&I.push(P[v]),h){const M=aD(i,o,S);I.push(P[M[0]],P[M[1]])}if(R=[...R,{placement:i,overflows:I}],!I.every(M=>M<=0)){var O,j;const M=(((O=s.flip)==null?void 0:O.index)||0)+1,D=_[M];if(D)return{data:{index:M,overflows:R},reset:{placement:D}};let L=(j=R.filter(B=>B.overflows[0]<=0).sort((B,A)=>B.overflows[1]-A.overflows[1])[0])==null?void 0:j.placement;if(!L)switch(p){case"bestFit":{var F;const B=(F=R.filter(A=>{if(C){const $=Ei(A.placement);return $===x||$==="y"}return!0}).map(A=>[A.placement,A.overflows.filter($=>$>0).reduce(($,E)=>$+E,0)]).sort((A,$)=>A[1]-$[1])[0])==null?void 0:F[0];B&&(L=B);break}case"initialPlacement":L=a;break}if(i!==L)return{reset:{placement:L}}}return{}}}};function a0(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function l0(t){return iD.some(e=>t[e]>=0)}const mD=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=$r(t,e);switch(r){case"referenceHidden":{const s=await xl(e,{...i,elementContext:"reference"}),o=a0(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:l0(o)}}}case"escaped":{const s=await xl(e,{...i,altBoundary:!0}),o=a0(s,n.floating);return{data:{escapedOffsets:o,escaped:l0(o)}}}default:return{}}}}};async function gD(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Dr(n),a=Bo(n),l=Ei(n)==="y",c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,h=$r(e,t);let{mainAxis:f,crossAxis:p,alignmentAxis:g}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof g=="number"&&(p=a==="end"?g*-1:g),l?{x:p*u,y:f*c}:{x:f*c,y:p*u}}const vD=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await gD(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},yD=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:w=>{let{x:v,y:x}=w;return{x:v,y:x}}},...l}=$r(t,e),c={x:n,y:r},u=await xl(e,l),h=Ei(Dr(i)),f=Ug(h);let p=c[f],g=c[h];if(s){const w=f==="y"?"top":"left",v=f==="y"?"bottom":"right",x=p+u[w],b=p-u[v];p=Gp(x,p,b)}if(o){const w=h==="y"?"top":"left",v=h==="y"?"bottom":"right",x=g+u[w],b=g-u[v];g=Gp(x,g,b)}const m=a.fn({...e,[f]:p,[h]:g});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[f]:s,[h]:o}}}}}},xD=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=$r(t,e),u={x:n,y:r},h=Ei(i),f=Ug(h);let p=u[f],g=u[h];const m=$r(a,e),w=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const b=f==="y"?"height":"width",S=s.reference[f]-s.floating[b]+w.mainAxis,N=s.reference[f]+s.reference[b]-w.mainAxis;p<S?p=S:p>N&&(p=N)}if(c){var v,x;const b=f==="y"?"width":"height",S=["top","left"].includes(Dr(i)),N=s.reference[h]-s.floating[b]+(S&&((v=o.offset)==null?void 0:v[h])||0)+(S?0:w.crossAxis),C=s.reference[h]+s.reference[b]+(S?0:((x=o.offset)==null?void 0:x[h])||0)-(S?w.crossAxis:0);g<N?g=N:g>C&&(g=C)}return{[f]:p,[h]:g}}}},wD=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=$r(t,e),u=await xl(e,c),h=Dr(i),f=Bo(i),p=Ei(i)==="y",{width:g,height:m}=s.floating;let w,v;h==="top"||h==="bottom"?(w=h,v=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(v=h,w=f==="end"?"top":"bottom");const x=m-u.top-u.bottom,b=g-u.left-u.right,S=Ci(m-u[w],x),N=Ci(g-u[v],b),C=!e.middlewareData.shift;let _=S,P=N;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(P=b),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(_=x),C&&!f){const R=tn(u.left,0),O=tn(u.right,0),j=tn(u.top,0),F=tn(u.bottom,0);p?P=g-2*(R!==0||O!==0?R+O:tn(u.left,u.right)):_=m-2*(j!==0||F!==0?j+F:tn(u.top,u.bottom))}await l({...e,availableWidth:P,availableHeight:_});const I=await o.getDimensions(a.floating);return g!==I.width||m!==I.height?{reset:{rects:!0}}:{}}}};function Id(){return typeof window<"u"}function Vo(t){return NC(t)?(t.nodeName||"").toLowerCase():"#document"}function un(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function mr(t){var e;return(e=(NC(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function NC(t){return Id()?t instanceof Node||t instanceof un(t).Node:!1}function Bn(t){return Id()?t instanceof Element||t instanceof un(t).Element:!1}function dr(t){return Id()?t instanceof HTMLElement||t instanceof un(t).HTMLElement:!1}function c0(t){return!Id()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof un(t).ShadowRoot}function Fl(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Vn(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function bD(t){return["table","td","th"].includes(Vo(t))}function Od(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function qg(t){const e=Kg(),n=Bn(t)?Vn(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function SD(t){let e=Ni(t);for(;dr(e)&&!Po(e);){if(qg(e))return e;if(Od(e))return null;e=Ni(e)}return null}function Kg(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Po(t){return["html","body","#document"].includes(Vo(t))}function Vn(t){return un(t).getComputedStyle(t)}function Ld(t){return Bn(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Ni(t){if(Vo(t)==="html")return t;const e=t.assignedSlot||t.parentNode||c0(t)&&t.host||mr(t);return c0(e)?e.host:e}function _C(t){const e=Ni(t);return Po(e)?t.ownerDocument?t.ownerDocument.body:t.body:dr(e)&&Fl(e)?e:_C(e)}function wl(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=_C(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=un(i);if(s){const a=Xp(o);return e.concat(o,o.visualViewport||[],Fl(i)?i:[],a&&n?wl(a):[])}return e.concat(i,wl(i,[],n))}function Xp(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function TC(t){const e=Vn(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=dr(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=Fu(n)!==s||Fu(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function Yg(t){return Bn(t)?t:t.contextElement}function so(t){const e=Yg(t);if(!dr(e))return ar(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=TC(e);let o=(s?Fu(n.width):n.width)/r,a=(s?Fu(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const kD=ar(0);function AC(t){const e=un(t);return!Kg()||!e.visualViewport?kD:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function CD(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==un(t)?!1:e}function as(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=Yg(t);let o=ar(1);e&&(r?Bn(r)&&(o=so(r)):o=so(t));const a=CD(s,n,r)?AC(s):ar(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,h=i.height/o.y;if(s){const f=un(s),p=r&&Bn(r)?un(r):r;let g=f,m=Xp(g);for(;m&&r&&p!==g;){const w=so(m),v=m.getBoundingClientRect(),x=Vn(m),b=v.left+(m.clientLeft+parseFloat(x.paddingLeft))*w.x,S=v.top+(m.clientTop+parseFloat(x.paddingTop))*w.y;l*=w.x,c*=w.y,u*=w.x,h*=w.y,l+=b,c+=S,g=un(m),m=Xp(g)}}return Vu({width:u,height:h,x:l,y:c})}function Gg(t,e){const n=Ld(t).scrollLeft;return e?e.left+n:as(mr(t)).left+n}function PC(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:Gg(t,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function ED(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=mr(r),a=e?Od(e.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=ar(1);const u=ar(0),h=dr(r);if((h||!h&&!s)&&((Vo(r)!=="body"||Fl(o))&&(l=Ld(r)),dr(r))){const p=as(r);c=so(r),u.x=p.x+r.clientLeft,u.y=p.y+r.clientTop}const f=o&&!h&&!s?PC(o,l,!0):ar(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:n.y*c.y-l.scrollTop*c.y+u.y+f.y}}function ND(t){return Array.from(t.getClientRects())}function _D(t){const e=mr(t),n=Ld(t),r=t.ownerDocument.body,i=tn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=tn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Gg(t);const a=-n.scrollTop;return Vn(r).direction==="rtl"&&(o+=tn(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function TD(t,e){const n=un(t),r=mr(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=Kg();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function AD(t,e){const n=as(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=dr(t)?so(t):ar(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function u0(t,e,n){let r;if(e==="viewport")r=TD(t,n);else if(e==="document")r=_D(mr(t));else if(Bn(e))r=AD(e,n);else{const i=AC(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Vu(r)}function jC(t,e){const n=Ni(t);return n===e||!Bn(n)||Po(n)?!1:Vn(n).position==="fixed"||jC(n,e)}function PD(t,e){const n=e.get(t);if(n)return n;let r=wl(t,[],!1).filter(a=>Bn(a)&&Vo(a)!=="body"),i=null;const s=Vn(t).position==="fixed";let o=s?Ni(t):t;for(;Bn(o)&&!Po(o);){const a=Vn(o),l=qg(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Fl(o)&&!l&&jC(t,o))?r=r.filter(u=>u!==o):i=a,o=Ni(o)}return e.set(t,r),r}function jD(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?Od(e)?[]:PD(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,u)=>{const h=u0(e,u,i);return c.top=tn(h.top,c.top),c.right=Ci(h.right,c.right),c.bottom=Ci(h.bottom,c.bottom),c.left=tn(h.left,c.left),c},u0(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function RD(t){const{width:e,height:n}=TC(t);return{width:e,height:n}}function MD(t,e,n){const r=dr(e),i=mr(e),s=n==="fixed",o=as(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=ar(0);if(r||!r&&!s)if((Vo(e)!=="body"||Fl(i))&&(a=Ld(e)),r){const f=as(e,!0,s,e);l.x=f.x+e.clientLeft,l.y=f.y+e.clientTop}else i&&(l.x=Gg(i));const c=i&&!r&&!s?PC(i,a):ar(0),u=o.left+a.scrollLeft-l.x-c.x,h=o.top+a.scrollTop-l.y-c.y;return{x:u,y:h,width:o.width,height:o.height}}function Zh(t){return Vn(t).position==="static"}function d0(t,e){if(!dr(t)||Vn(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return mr(t)===n&&(n=n.ownerDocument.body),n}function RC(t,e){const n=un(t);if(Od(t))return n;if(!dr(t)){let i=Ni(t);for(;i&&!Po(i);){if(Bn(i)&&!Zh(i))return i;i=Ni(i)}return n}let r=d0(t,e);for(;r&&bD(r)&&Zh(r);)r=d0(r,e);return r&&Po(r)&&Zh(r)&&!qg(r)?n:r||SD(t)||n}const ID=async function(t){const e=this.getOffsetParent||RC,n=this.getDimensions,r=await n(t.floating);return{reference:MD(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function OD(t){return Vn(t).direction==="rtl"}const LD={convertOffsetParentRelativeRectToViewportRelativeRect:ED,getDocumentElement:mr,getClippingRect:jD,getOffsetParent:RC,getElementRects:ID,getClientRects:ND,getDimensions:RD,getScale:so,isElement:Bn,isRTL:OD};function MC(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function $D(t,e){let n=null,r;const i=mr(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=t.getBoundingClientRect(),{left:u,top:h,width:f,height:p}=c;if(a||e(),!f||!p)return;const g=fc(h),m=fc(i.clientWidth-(u+f)),w=fc(i.clientHeight-(h+p)),v=fc(u),b={rootMargin:-g+"px "+-m+"px "+-w+"px "+-v+"px",threshold:tn(0,Ci(1,l))||1};let S=!0;function N(C){const _=C[0].intersectionRatio;if(_!==l){if(!S)return o();_?o(!1,_):r=setTimeout(()=>{o(!1,1e-7)},1e3)}_===1&&!MC(c,t.getBoundingClientRect())&&o(),S=!1}try{n=new IntersectionObserver(N,{...b,root:i.ownerDocument})}catch{n=new IntersectionObserver(N,b)}n.observe(t)}return o(!0),s}function DD(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=Yg(t),u=i||s?[...c?wl(c):[],...wl(e)]:[];u.forEach(v=>{i&&v.addEventListener("scroll",n,{passive:!0}),s&&v.addEventListener("resize",n)});const h=c&&a?$D(c,n):null;let f=-1,p=null;o&&(p=new ResizeObserver(v=>{let[x]=v;x&&x.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var b;(b=p)==null||b.observe(e)})),n()}),c&&!l&&p.observe(c),p.observe(e));let g,m=l?as(t):null;l&&w();function w(){const v=as(t);m&&!MC(m,v)&&n(),m=v,g=requestAnimationFrame(w)}return n(),()=>{var v;u.forEach(x=>{i&&x.removeEventListener("scroll",n),s&&x.removeEventListener("resize",n)}),h==null||h(),(v=p)==null||v.disconnect(),p=null,l&&cancelAnimationFrame(g)}}const zD=vD,FD=yD,BD=pD,VD=wD,UD=mD,h0=fD,HD=xD,WD=(t,e,n)=>{const r=new Map,i={platform:LD,...n},s={...i.platform,_c:r};return hD(t,e,{...i,platform:s})};var Kc=typeof document<"u"?y.useLayoutEffect:y.useEffect;function Uu(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Uu(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!Uu(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function IC(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function f0(t,e){const n=IC(t);return Math.round(e*n)/n}function Xh(t){const e=y.useRef(t);return Kc(()=>{e.current=t}),e}function qD(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,h]=y.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,p]=y.useState(r);Uu(f,r)||p(r);const[g,m]=y.useState(null),[w,v]=y.useState(null),x=y.useCallback(A=>{A!==C.current&&(C.current=A,m(A))},[]),b=y.useCallback(A=>{A!==_.current&&(_.current=A,v(A))},[]),S=s||g,N=o||w,C=y.useRef(null),_=y.useRef(null),P=y.useRef(u),I=l!=null,R=Xh(l),O=Xh(i),j=Xh(c),F=y.useCallback(()=>{if(!C.current||!_.current)return;const A={placement:e,strategy:n,middleware:f};O.current&&(A.platform=O.current),WD(C.current,_.current,A).then($=>{const E={...$,isPositioned:j.current!==!1};M.current&&!Uu(P.current,E)&&(P.current=E,gs.flushSync(()=>{h(E)}))})},[f,e,n,O,j]);Kc(()=>{c===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,h(A=>({...A,isPositioned:!1})))},[c]);const M=y.useRef(!1);Kc(()=>(M.current=!0,()=>{M.current=!1}),[]),Kc(()=>{if(S&&(C.current=S),N&&(_.current=N),S&&N){if(R.current)return R.current(S,N,F);F()}},[S,N,F,R,I]);const D=y.useMemo(()=>({reference:C,floating:_,setReference:x,setFloating:b}),[x,b]),L=y.useMemo(()=>({reference:S,floating:N}),[S,N]),B=y.useMemo(()=>{const A={position:n,left:0,top:0};if(!L.floating)return A;const $=f0(L.floating,u.x),E=f0(L.floating,u.y);return a?{...A,transform:"translate("+$+"px, "+E+"px)",...IC(L.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:$,top:E}},[n,a,L.floating,u.x,u.y]);return y.useMemo(()=>({...u,update:F,refs:D,elements:L,floatingStyles:B}),[u,F,D,L,B])}const KD=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?h0({element:r.current,padding:i}).fn(n):{}:r?h0({element:r,padding:i}).fn(n):{}}}},YD=(t,e)=>({...zD(t),options:[t,e]}),GD=(t,e)=>({...FD(t),options:[t,e]}),ZD=(t,e)=>({...HD(t),options:[t,e]}),XD=(t,e)=>({...BD(t),options:[t,e]}),QD=(t,e)=>({...VD(t),options:[t,e]}),JD=(t,e)=>({...UD(t),options:[t,e]}),ez=(t,e)=>({...KD(t),options:[t,e]});var tz="Arrow",OC=y.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...s}=t;return d.jsx(ae.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:d.jsx("polygon",{points:"0,0 30,0 15,10"})})});OC.displayName=tz;var nz=OC;function $d(t){const[e,n]=y.useState(void 0);return ut(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Zg="Popper",[LC,$C]=Dt(Zg),[rz,DC]=LC(Zg),zC=t=>{const{__scopePopper:e,children:n}=t,[r,i]=y.useState(null);return d.jsx(rz,{scope:e,anchor:r,onAnchorChange:i,children:n})};zC.displayName=Zg;var FC="PopperAnchor",BC=y.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=DC(FC,n),o=y.useRef(null),a=Pe(e,o);return y.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:d.jsx(ae.div,{...i,ref:a})});BC.displayName=FC;var Xg="PopperContent",[iz,sz]=LC(Xg),VC=y.forwardRef((t,e)=>{var re,fe,W,K,ne,Q;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:g,...m}=t,w=DC(Xg,n),[v,x]=y.useState(null),b=Pe(e,ge=>x(ge)),[S,N]=y.useState(null),C=$d(S),_=(C==null?void 0:C.width)??0,P=(C==null?void 0:C.height)??0,I=r+(s!=="center"?"-"+s:""),R=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},O=Array.isArray(c)?c:[c],j=O.length>0,F={padding:R,boundary:O.filter(az),altBoundary:j},{refs:M,floatingStyles:D,placement:L,isPositioned:B,middlewareData:A}=qD({strategy:"fixed",placement:I,whileElementsMounted:(...ge)=>DD(...ge,{animationFrame:p==="always"}),elements:{reference:w.anchor},middleware:[YD({mainAxis:i+P,alignmentAxis:o}),l&&GD({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?ZD():void 0,...F}),l&&XD({...F}),QD({...F,apply:({elements:ge,rects:Te,availableWidth:nt,availableHeight:dt})=>{const{width:zt,height:Ii}=Te.reference,Nn=ge.floating.style;Nn.setProperty("--radix-popper-available-width",`${nt}px`),Nn.setProperty("--radix-popper-available-height",`${dt}px`),Nn.setProperty("--radix-popper-anchor-width",`${zt}px`),Nn.setProperty("--radix-popper-anchor-height",`${Ii}px`)}}),S&&ez({element:S,padding:a}),lz({arrowWidth:_,arrowHeight:P}),f&&JD({strategy:"referenceHidden",...F})]}),[$,E]=WC(L),z=It(g);ut(()=>{B&&(z==null||z())},[B,z]);const q=(re=A.arrow)==null?void 0:re.x,T=(fe=A.arrow)==null?void 0:fe.y,J=((W=A.arrow)==null?void 0:W.centerOffset)!==0,[he,ce]=y.useState();return ut(()=>{v&&ce(window.getComputedStyle(v).zIndex)},[v]),d.jsx("div",{ref:M.setFloating,"data-radix-popper-content-wrapper":"",style:{...D,transform:B?D.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:he,"--radix-popper-transform-origin":[(K=A.transformOrigin)==null?void 0:K.x,(ne=A.transformOrigin)==null?void 0:ne.y].join(" "),...((Q=A.hide)==null?void 0:Q.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:d.jsx(iz,{scope:n,placedSide:$,onArrowChange:N,arrowX:q,arrowY:T,shouldHideArrow:J,children:d.jsx(ae.div,{"data-side":$,"data-align":E,...m,ref:b,style:{...m.style,animation:B?void 0:"none"}})})})});VC.displayName=Xg;var UC="PopperArrow",oz={top:"bottom",right:"left",bottom:"top",left:"right"},HC=y.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,s=sz(UC,r),o=oz[s.placedSide];return d.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:d.jsx(nz,{...i,ref:n,style:{...i.style,display:"block"}})})});HC.displayName=UC;function az(t){return t!==null}var lz=t=>({name:"transformOrigin",options:t,fn(e){var w,v,x;const{placement:n,rects:r,middlewareData:i}=e,o=((w=i.arrow)==null?void 0:w.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,u]=WC(n),h={start:"0%",center:"50%",end:"100%"}[u],f=(((v=i.arrow)==null?void 0:v.x)??0)+a/2,p=(((x=i.arrow)==null?void 0:x.y)??0)+l/2;let g="",m="";return c==="bottom"?(g=o?h:`${f}px`,m=`${-l}px`):c==="top"?(g=o?h:`${f}px`,m=`${r.floating.height+l}px`):c==="right"?(g=`${-l}px`,m=o?h:`${p}px`):c==="left"&&(g=`${r.floating.width+l}px`,m=o?h:`${p}px`),{data:{x:g,y:m}}}});function WC(t){const[e,n="center"]=t.split("-");return[e,n]}var cz=zC,uz=BC,dz=VC,hz=HC,fz="Portal",Dd=y.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[i,s]=y.useState(!1);ut(()=>s(!0),[]);const o=n||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?X2.createPortal(d.jsx(ae.div,{...r,ref:e}),o):null});Dd.displayName=fz;function zd(t){const e=y.useRef({value:t,previous:t});return y.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var pz="VisuallyHidden",Fd=y.forwardRef((t,e)=>d.jsx(ae.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));Fd.displayName=pz;var mz=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Cs=new WeakMap,pc=new WeakMap,mc={},Qh=0,qC=function(t){return t&&(t.host||qC(t.parentNode))},gz=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=qC(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},vz=function(t,e,n,r){var i=gz(e,Array.isArray(t)?t:[t]);mc[n]||(mc[n]=new WeakMap);var s=mc[n],o=[],a=new Set,l=new Set(i),c=function(h){!h||a.has(h)||(a.add(h),c(h.parentNode))};i.forEach(c);var u=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(f){if(a.has(f))u(f);else try{var p=f.getAttribute(r),g=p!==null&&p!=="false",m=(Cs.get(f)||0)+1,w=(s.get(f)||0)+1;Cs.set(f,m),s.set(f,w),o.push(f),m===1&&g&&pc.set(f,!0),w===1&&f.setAttribute(n,"true"),g||f.setAttribute(r,"true")}catch(v){console.error("aria-hidden: cannot operate on ",f,v)}})};return u(e),a.clear(),Qh++,function(){o.forEach(function(h){var f=Cs.get(h)-1,p=s.get(h)-1;Cs.set(h,f),s.set(h,p),f||(pc.has(h)||h.removeAttribute(r),pc.delete(h)),p||h.removeAttribute(n)}),Qh--,Qh||(Cs=new WeakMap,Cs=new WeakMap,pc=new WeakMap,mc={})}},KC=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=mz(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),vz(r,i,n,"aria-hidden")):function(){return null}},er=function(){return er=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},er.apply(this,arguments)};function YC(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function yz(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var Yc="right-scroll-bar-position",Gc="width-before-scroll-bar",xz="with-scroll-bars-hidden",wz="--removed-body-scroll-bar-size";function Jh(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function bz(t,e){var n=y.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var Sz=typeof window<"u"?y.useLayoutEffect:y.useEffect,p0=new WeakMap;function kz(t,e){var n=bz(null,function(r){return t.forEach(function(i){return Jh(i,r)})});return Sz(function(){var r=p0.get(n);if(r){var i=new Set(r),s=new Set(t),o=n.current;i.forEach(function(a){s.has(a)||Jh(a,null)}),s.forEach(function(a){i.has(a)||Jh(a,o)})}p0.set(n,t)},[t]),n}function Cz(t){return t}function Ez(t,e){e===void 0&&(e=Cz);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return i}function Nz(t){t===void 0&&(t={});var e=Ez(null);return e.options=er({async:!0,ssr:!1},t),e}var GC=function(t){var e=t.sideCar,n=YC(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return y.createElement(r,er({},n))};GC.isSideCarExport=!0;function _z(t,e){return t.useMedium(e),GC}var ZC=Nz(),ef=function(){},Bd=y.forwardRef(function(t,e){var n=y.useRef(null),r=y.useState({onScrollCapture:ef,onWheelCapture:ef,onTouchMoveCapture:ef}),i=r[0],s=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,h=t.shards,f=t.sideCar,p=t.noIsolation,g=t.inert,m=t.allowPinchZoom,w=t.as,v=w===void 0?"div":w,x=t.gapMode,b=YC(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=f,N=kz([n,e]),C=er(er({},b),i);return y.createElement(y.Fragment,null,u&&y.createElement(S,{sideCar:ZC,removeScrollBar:c,shards:h,noIsolation:p,inert:g,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:x}),o?y.cloneElement(y.Children.only(a),er(er({},C),{ref:N})):y.createElement(v,er({},C,{className:l,ref:N}),a))});Bd.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Bd.classNames={fullWidth:Gc,zeroRight:Yc};var Tz=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Az(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=Tz();return e&&t.setAttribute("nonce",e),t}function Pz(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function jz(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var Rz=function(){var t=0,e=null;return{add:function(n){t==0&&(e=Az())&&(Pz(e,n),jz(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Mz=function(){var t=Rz();return function(e,n){y.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},XC=function(){var t=Mz(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},Iz={left:0,top:0,right:0,gap:0},tf=function(t){return parseInt(t||"",10)||0},Oz=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[tf(n),tf(r),tf(i)]},Lz=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Iz;var e=Oz(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},$z=XC(),oo="data-scroll-locked",Dz=function(t,e,n,r){var i=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(xz,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(oo,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Yc,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Gc,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Yc," .").concat(Yc,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Gc," .").concat(Gc,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(oo,`] {
    `).concat(wz,": ").concat(a,`px;
  }
`)},m0=function(){var t=parseInt(document.body.getAttribute(oo)||"0",10);return isFinite(t)?t:0},zz=function(){y.useEffect(function(){return document.body.setAttribute(oo,(m0()+1).toString()),function(){var t=m0()-1;t<=0?document.body.removeAttribute(oo):document.body.setAttribute(oo,t.toString())}},[])},Fz=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;zz();var s=y.useMemo(function(){return Lz(i)},[i]);return y.createElement($z,{styles:Dz(s,!e,i,n?"":"!important")})},Qp=!1;if(typeof window<"u")try{var gc=Object.defineProperty({},"passive",{get:function(){return Qp=!0,!0}});window.addEventListener("test",gc,gc),window.removeEventListener("test",gc,gc)}catch{Qp=!1}var Es=Qp?{passive:!1}:!1,Bz=function(t){return t.tagName==="TEXTAREA"},QC=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!Bz(t)&&n[e]==="visible")},Vz=function(t){return QC(t,"overflowY")},Uz=function(t){return QC(t,"overflowX")},g0=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=JC(t,r);if(i){var s=eE(t,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Hz=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},Wz=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},JC=function(t,e){return t==="v"?Vz(e):Uz(e)},eE=function(t,e){return t==="v"?Hz(e):Wz(e)},qz=function(t,e){return t==="h"&&e==="rtl"?-1:1},Kz=function(t,e,n,r,i){var s=qz(t,window.getComputedStyle(e).direction),o=s*r,a=n.target,l=e.contains(a),c=!1,u=o>0,h=0,f=0;do{var p=eE(t,a),g=p[0],m=p[1],w=p[2],v=m-w-s*g;(g||v)&&JC(t,a)&&(h+=v,f+=g),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&Math.abs(h)<1||!u&&Math.abs(f)<1)&&(c=!0),c},vc=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},v0=function(t){return[t.deltaX,t.deltaY]},y0=function(t){return t&&"current"in t?t.current:t},Yz=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Gz=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Zz=0,Ns=[];function Xz(t){var e=y.useRef([]),n=y.useRef([0,0]),r=y.useRef(),i=y.useState(Zz++)[0],s=y.useState(XC)[0],o=y.useRef(t);y.useEffect(function(){o.current=t},[t]),y.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var m=yz([t.lockRef.current],(t.shards||[]).map(y0),!0).filter(Boolean);return m.forEach(function(w){return w.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=y.useCallback(function(m,w){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!o.current.allowPinchZoom;var v=vc(m),x=n.current,b="deltaX"in m?m.deltaX:x[0]-v[0],S="deltaY"in m?m.deltaY:x[1]-v[1],N,C=m.target,_=Math.abs(b)>Math.abs(S)?"h":"v";if("touches"in m&&_==="h"&&C.type==="range")return!1;var P=g0(_,C);if(!P)return!0;if(P?N=_:(N=_==="v"?"h":"v",P=g0(_,C)),!P)return!1;if(!r.current&&"changedTouches"in m&&(b||S)&&(r.current=N),!N)return!0;var I=r.current||N;return Kz(I,w,m,I==="h"?b:S)},[]),l=y.useCallback(function(m){var w=m;if(!(!Ns.length||Ns[Ns.length-1]!==s)){var v="deltaY"in w?v0(w):vc(w),x=e.current.filter(function(N){return N.name===w.type&&(N.target===w.target||w.target===N.shadowParent)&&Yz(N.delta,v)})[0];if(x&&x.should){w.cancelable&&w.preventDefault();return}if(!x){var b=(o.current.shards||[]).map(y0).filter(Boolean).filter(function(N){return N.contains(w.target)}),S=b.length>0?a(w,b[0]):!o.current.noIsolation;S&&w.cancelable&&w.preventDefault()}}},[]),c=y.useCallback(function(m,w,v,x){var b={name:m,delta:w,target:v,should:x,shadowParent:Qz(v)};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(S){return S!==b})},1)},[]),u=y.useCallback(function(m){n.current=vc(m),r.current=void 0},[]),h=y.useCallback(function(m){c(m.type,v0(m),m.target,a(m,t.lockRef.current))},[]),f=y.useCallback(function(m){c(m.type,vc(m),m.target,a(m,t.lockRef.current))},[]);y.useEffect(function(){return Ns.push(s),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Es),document.addEventListener("touchmove",l,Es),document.addEventListener("touchstart",u,Es),function(){Ns=Ns.filter(function(m){return m!==s}),document.removeEventListener("wheel",l,Es),document.removeEventListener("touchmove",l,Es),document.removeEventListener("touchstart",u,Es)}},[]);var p=t.removeScrollBar,g=t.inert;return y.createElement(y.Fragment,null,g?y.createElement(s,{styles:Gz(i)}):null,p?y.createElement(Fz,{gapMode:t.gapMode}):null)}function Qz(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Jz=_z(ZC,Xz);var Qg=y.forwardRef(function(t,e){return y.createElement(Bd,er({},t,{ref:e,sideCar:Jz}))});Qg.classNames=Bd.classNames;var eF=[" ","Enter","ArrowUp","ArrowDown"],tF=[" ","Enter"],Bl="Select",[Vd,Ud,nF]=Pd(Bl),[Uo,_8]=Dt(Bl,[nF,$C]),Hd=$C(),[rF,ji]=Uo(Bl),[iF,sF]=Uo(Bl),tE=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:h,disabled:f,required:p,form:g}=t,m=Hd(e),[w,v]=y.useState(null),[x,b]=y.useState(null),[S,N]=y.useState(!1),C=zl(c),[_=!1,P]=Cn({prop:r,defaultProp:i,onChange:s}),[I,R]=Cn({prop:o,defaultProp:a,onChange:l}),O=y.useRef(null),j=w?g||!!w.closest("form"):!0,[F,M]=y.useState(new Set),D=Array.from(F).map(L=>L.props.value).join(";");return d.jsx(cz,{...m,children:d.jsxs(rF,{required:p,scope:e,trigger:w,onTriggerChange:v,valueNode:x,onValueNodeChange:b,valueNodeHasChildren:S,onValueNodeHasChildrenChange:N,contentId:or(),value:I,onValueChange:R,open:_,onOpenChange:P,dir:C,triggerPointerDownPosRef:O,disabled:f,children:[d.jsx(Vd.Provider,{scope:e,children:d.jsx(iF,{scope:t.__scopeSelect,onNativeOptionAdd:y.useCallback(L=>{M(B=>new Set(B).add(L))},[]),onNativeOptionRemove:y.useCallback(L=>{M(B=>{const A=new Set(B);return A.delete(L),A})},[]),children:n})}),j?d.jsxs(NE,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:h,value:I,onChange:L=>R(L.target.value),disabled:f,form:g,children:[I===void 0?d.jsx("option",{value:""}):null,Array.from(F)]},D):null]})})};tE.displayName=Bl;var nE="SelectTrigger",rE=y.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,s=Hd(n),o=ji(nE,n),a=o.disabled||r,l=Pe(e,o.onTriggerChange),c=Ud(n),u=y.useRef("touch"),[h,f,p]=_E(m=>{const w=c().filter(b=>!b.disabled),v=w.find(b=>b.value===o.value),x=TE(w,m,v);x!==void 0&&o.onValueChange(x.value)}),g=m=>{a||(o.onOpenChange(!0),p()),m&&(o.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return d.jsx(uz,{asChild:!0,...s,children:d.jsx(ae.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":EE(o.value)?"":void 0,...i,ref:l,onClick:le(i.onClick,m=>{m.currentTarget.focus(),u.current!=="mouse"&&g(m)}),onPointerDown:le(i.onPointerDown,m=>{u.current=m.pointerType;const w=m.target;w.hasPointerCapture(m.pointerId)&&w.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(g(m),m.preventDefault())}),onKeyDown:le(i.onKeyDown,m=>{const w=h.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&f(m.key),!(w&&m.key===" ")&&eF.includes(m.key)&&(g(),m.preventDefault())})})})});rE.displayName=nE;var iE="SelectValue",sE=y.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:s,placeholder:o="",...a}=t,l=ji(iE,n),{onValueNodeHasChildrenChange:c}=l,u=s!==void 0,h=Pe(e,l.onValueNodeChange);return ut(()=>{c(u)},[c,u]),d.jsx(ae.span,{...a,ref:h,style:{pointerEvents:"none"},children:EE(l.value)?d.jsx(d.Fragment,{children:o}):s})});sE.displayName=iE;var oF="SelectIcon",oE=y.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return d.jsx(ae.span,{"aria-hidden":!0,...i,ref:e,children:r||"▼"})});oE.displayName=oF;var aF="SelectPortal",aE=t=>d.jsx(Dd,{asChild:!0,...t});aE.displayName=aF;var ls="SelectContent",lE=y.forwardRef((t,e)=>{const n=ji(ls,t.__scopeSelect),[r,i]=y.useState();if(ut(()=>{i(new DocumentFragment)},[]),!n.open){const s=r;return s?gs.createPortal(d.jsx(cE,{scope:t.__scopeSelect,children:d.jsx(Vd.Slot,{scope:t.__scopeSelect,children:d.jsx("div",{children:t.children})})}),s):null}return d.jsx(uE,{...t,ref:e})});lE.displayName=ls;var An=10,[cE,Ri]=Uo(ls),lF="SelectContentImpl",uE=y.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:h,collisionBoundary:f,collisionPadding:p,sticky:g,hideWhenDetached:m,avoidCollisions:w,...v}=t,x=ji(ls,n),[b,S]=y.useState(null),[N,C]=y.useState(null),_=Pe(e,re=>S(re)),[P,I]=y.useState(null),[R,O]=y.useState(null),j=Ud(n),[F,M]=y.useState(!1),D=y.useRef(!1);y.useEffect(()=>{if(b)return KC(b)},[b]),kC();const L=y.useCallback(re=>{const[fe,...W]=j().map(Q=>Q.ref.current),[K]=W.slice(-1),ne=document.activeElement;for(const Q of re)if(Q===ne||(Q==null||Q.scrollIntoView({block:"nearest"}),Q===fe&&N&&(N.scrollTop=0),Q===K&&N&&(N.scrollTop=N.scrollHeight),Q==null||Q.focus(),document.activeElement!==ne))return},[j,N]),B=y.useCallback(()=>L([P,b]),[L,P,b]);y.useEffect(()=>{F&&B()},[F,B]);const{onOpenChange:A,triggerPointerDownPosRef:$}=x;y.useEffect(()=>{if(b){let re={x:0,y:0};const fe=K=>{var ne,Q;re={x:Math.abs(Math.round(K.pageX)-(((ne=$.current)==null?void 0:ne.x)??0)),y:Math.abs(Math.round(K.pageY)-(((Q=$.current)==null?void 0:Q.y)??0))}},W=K=>{re.x<=10&&re.y<=10?K.preventDefault():b.contains(K.target)||A(!1),document.removeEventListener("pointermove",fe),$.current=null};return $.current!==null&&(document.addEventListener("pointermove",fe),document.addEventListener("pointerup",W,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",fe),document.removeEventListener("pointerup",W,{capture:!0})}}},[b,A,$]),y.useEffect(()=>{const re=()=>A(!1);return window.addEventListener("blur",re),window.addEventListener("resize",re),()=>{window.removeEventListener("blur",re),window.removeEventListener("resize",re)}},[A]);const[E,z]=_E(re=>{const fe=j().filter(ne=>!ne.disabled),W=fe.find(ne=>ne.ref.current===document.activeElement),K=TE(fe,re,W);K&&setTimeout(()=>K.ref.current.focus())}),q=y.useCallback((re,fe,W)=>{const K=!D.current&&!W;(x.value!==void 0&&x.value===fe||K)&&(I(re),K&&(D.current=!0))},[x.value]),T=y.useCallback(()=>b==null?void 0:b.focus(),[b]),J=y.useCallback((re,fe,W)=>{const K=!D.current&&!W;(x.value!==void 0&&x.value===fe||K)&&O(re)},[x.value]),he=r==="popper"?Jp:dE,ce=he===Jp?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:h,collisionBoundary:f,collisionPadding:p,sticky:g,hideWhenDetached:m,avoidCollisions:w}:{};return d.jsx(cE,{scope:n,content:b,viewport:N,onViewportChange:C,itemRefCallback:q,selectedItem:P,onItemLeave:T,itemTextRefCallback:J,focusSelectedItem:B,selectedItemText:R,position:r,isPositioned:F,searchRef:E,children:d.jsx(Qg,{as:os,allowPinchZoom:!0,children:d.jsx(Vg,{asChild:!0,trapped:x.open,onMountAutoFocus:re=>{re.preventDefault()},onUnmountAutoFocus:le(i,re=>{var fe;(fe=x.trigger)==null||fe.focus({preventScroll:!0}),re.preventDefault()}),children:d.jsx(Md,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:re=>re.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:d.jsx(he,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:re=>re.preventDefault(),...v,...ce,onPlaced:()=>M(!0),ref:_,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:le(v.onKeyDown,re=>{const fe=re.ctrlKey||re.altKey||re.metaKey;if(re.key==="Tab"&&re.preventDefault(),!fe&&re.key.length===1&&z(re.key),["ArrowUp","ArrowDown","Home","End"].includes(re.key)){let K=j().filter(ne=>!ne.disabled).map(ne=>ne.ref.current);if(["ArrowUp","End"].includes(re.key)&&(K=K.slice().reverse()),["ArrowUp","ArrowDown"].includes(re.key)){const ne=re.target,Q=K.indexOf(ne);K=K.slice(Q+1)}setTimeout(()=>L(K)),re.preventDefault()}})})})})})})});uE.displayName=lF;var cF="SelectItemAlignedPosition",dE=y.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,s=ji(ls,n),o=Ri(ls,n),[a,l]=y.useState(null),[c,u]=y.useState(null),h=Pe(e,_=>u(_)),f=Ud(n),p=y.useRef(!1),g=y.useRef(!0),{viewport:m,selectedItem:w,selectedItemText:v,focusSelectedItem:x}=o,b=y.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&c&&m&&w&&v){const _=s.trigger.getBoundingClientRect(),P=c.getBoundingClientRect(),I=s.valueNode.getBoundingClientRect(),R=v.getBoundingClientRect();if(s.dir!=="rtl"){const ne=R.left-P.left,Q=I.left-ne,ge=_.left-Q,Te=_.width+ge,nt=Math.max(Te,P.width),dt=window.innerWidth-An,zt=Qx(Q,[An,Math.max(An,dt-nt)]);a.style.minWidth=Te+"px",a.style.left=zt+"px"}else{const ne=P.right-R.right,Q=window.innerWidth-I.right-ne,ge=window.innerWidth-_.right-Q,Te=_.width+ge,nt=Math.max(Te,P.width),dt=window.innerWidth-An,zt=Qx(Q,[An,Math.max(An,dt-nt)]);a.style.minWidth=Te+"px",a.style.right=zt+"px"}const O=f(),j=window.innerHeight-An*2,F=m.scrollHeight,M=window.getComputedStyle(c),D=parseInt(M.borderTopWidth,10),L=parseInt(M.paddingTop,10),B=parseInt(M.borderBottomWidth,10),A=parseInt(M.paddingBottom,10),$=D+L+F+A+B,E=Math.min(w.offsetHeight*5,$),z=window.getComputedStyle(m),q=parseInt(z.paddingTop,10),T=parseInt(z.paddingBottom,10),J=_.top+_.height/2-An,he=j-J,ce=w.offsetHeight/2,re=w.offsetTop+ce,fe=D+L+re,W=$-fe;if(fe<=J){const ne=O.length>0&&w===O[O.length-1].ref.current;a.style.bottom="0px";const Q=c.clientHeight-m.offsetTop-m.offsetHeight,ge=Math.max(he,ce+(ne?T:0)+Q+B),Te=fe+ge;a.style.height=Te+"px"}else{const ne=O.length>0&&w===O[0].ref.current;a.style.top="0px";const ge=Math.max(J,D+m.offsetTop+(ne?q:0)+ce)+W;a.style.height=ge+"px",m.scrollTop=fe-J+m.offsetTop}a.style.margin=`${An}px 0`,a.style.minHeight=E+"px",a.style.maxHeight=j+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[f,s.trigger,s.valueNode,a,c,m,w,v,s.dir,r]);ut(()=>b(),[b]);const[S,N]=y.useState();ut(()=>{c&&N(window.getComputedStyle(c).zIndex)},[c]);const C=y.useCallback(_=>{_&&g.current===!0&&(b(),x==null||x(),g.current=!1)},[b,x]);return d.jsx(dF,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:p,onScrollButtonChange:C,children:d.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:d.jsx(ae.div,{...i,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});dE.displayName=cF;var uF="SelectPopperPosition",Jp=y.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=An,...s}=t,o=Hd(n);return d.jsx(dz,{...o,...s,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Jp.displayName=uF;var[dF,Jg]=Uo(ls,{}),em="SelectViewport",hE=y.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...i}=t,s=Ri(em,n),o=Jg(em,n),a=Pe(e,s.onViewportChange),l=y.useRef(0);return d.jsxs(d.Fragment,{children:[d.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),d.jsx(Vd.Slot,{scope:n,children:d.jsx(ae.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:le(i.onScroll,c=>{const u=c.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&h){const p=Math.abs(l.current-u.scrollTop);if(p>0){const g=window.innerHeight-An*2,m=parseFloat(h.style.minHeight),w=parseFloat(h.style.height),v=Math.max(m,w);if(v<g){const x=v+p,b=Math.min(g,x),S=x-b;h.style.height=b+"px",h.style.bottom==="0px"&&(u.scrollTop=S>0?S:0,h.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});hE.displayName=em;var fE="SelectGroup",[hF,fF]=Uo(fE),pF=y.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=or();return d.jsx(hF,{scope:n,id:i,children:d.jsx(ae.div,{role:"group","aria-labelledby":i,...r,ref:e})})});pF.displayName=fE;var pE="SelectLabel",mE=y.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=fF(pE,n);return d.jsx(ae.div,{id:i.id,...r,ref:e})});mE.displayName=pE;var Hu="SelectItem",[mF,gE]=Uo(Hu),vE=y.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:s,...o}=t,a=ji(Hu,n),l=Ri(Hu,n),c=a.value===r,[u,h]=y.useState(s??""),[f,p]=y.useState(!1),g=Pe(e,x=>{var b;return(b=l.itemRefCallback)==null?void 0:b.call(l,x,r,i)}),m=or(),w=y.useRef("touch"),v=()=>{i||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return d.jsx(mF,{scope:n,value:r,disabled:i,textId:m,isSelected:c,onItemTextChange:y.useCallback(x=>{h(b=>b||((x==null?void 0:x.textContent)??"").trim())},[]),children:d.jsx(Vd.ItemSlot,{scope:n,value:r,disabled:i,textValue:u,children:d.jsx(ae.div,{role:"option","aria-labelledby":m,"data-highlighted":f?"":void 0,"aria-selected":c&&f,"data-state":c?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:g,onFocus:le(o.onFocus,()=>p(!0)),onBlur:le(o.onBlur,()=>p(!1)),onClick:le(o.onClick,()=>{w.current!=="mouse"&&v()}),onPointerUp:le(o.onPointerUp,()=>{w.current==="mouse"&&v()}),onPointerDown:le(o.onPointerDown,x=>{w.current=x.pointerType}),onPointerMove:le(o.onPointerMove,x=>{var b;w.current=x.pointerType,i?(b=l.onItemLeave)==null||b.call(l):w.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:le(o.onPointerLeave,x=>{var b;x.currentTarget===document.activeElement&&((b=l.onItemLeave)==null||b.call(l))}),onKeyDown:le(o.onKeyDown,x=>{var S;((S=l.searchRef)==null?void 0:S.current)!==""&&x.key===" "||(tF.includes(x.key)&&v(),x.key===" "&&x.preventDefault())})})})})});vE.displayName=Hu;var xa="SelectItemText",yE=y.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...s}=t,o=ji(xa,n),a=Ri(xa,n),l=gE(xa,n),c=sF(xa,n),[u,h]=y.useState(null),f=Pe(e,v=>h(v),l.onItemTextChange,v=>{var x;return(x=a.itemTextRefCallback)==null?void 0:x.call(a,v,l.value,l.disabled)}),p=u==null?void 0:u.textContent,g=y.useMemo(()=>d.jsx("option",{value:l.value,disabled:l.disabled,children:p},l.value),[l.disabled,l.value,p]),{onNativeOptionAdd:m,onNativeOptionRemove:w}=c;return ut(()=>(m(g),()=>w(g)),[m,w,g]),d.jsxs(d.Fragment,{children:[d.jsx(ae.span,{id:l.textId,...s,ref:f}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?gs.createPortal(s.children,o.valueNode):null]})});yE.displayName=xa;var xE="SelectItemIndicator",wE=y.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return gE(xE,n).isSelected?d.jsx(ae.span,{"aria-hidden":!0,...r,ref:e}):null});wE.displayName=xE;var tm="SelectScrollUpButton",bE=y.forwardRef((t,e)=>{const n=Ri(tm,t.__scopeSelect),r=Jg(tm,t.__scopeSelect),[i,s]=y.useState(!1),o=Pe(e,r.onScrollButtonChange);return ut(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollTop>0;s(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),i?d.jsx(kE,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});bE.displayName=tm;var nm="SelectScrollDownButton",SE=y.forwardRef((t,e)=>{const n=Ri(nm,t.__scopeSelect),r=Jg(nm,t.__scopeSelect),[i,s]=y.useState(!1),o=Pe(e,r.onScrollButtonChange);return ut(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;s(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),i?d.jsx(kE,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});SE.displayName=nm;var kE=y.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,s=Ri("SelectScrollButton",n),o=y.useRef(null),a=Ud(n),l=y.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return y.useEffect(()=>()=>l(),[l]),ut(()=>{var u;const c=a().find(h=>h.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[a]),d.jsx(ae.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:le(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:le(i.onPointerMove,()=>{var c;(c=s.onItemLeave)==null||c.call(s),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:le(i.onPointerLeave,()=>{l()})})}),gF="SelectSeparator",CE=y.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return d.jsx(ae.div,{"aria-hidden":!0,...r,ref:e})});CE.displayName=gF;var rm="SelectArrow",vF=y.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Hd(n),s=ji(rm,n),o=Ri(rm,n);return s.open&&o.position==="popper"?d.jsx(hz,{...i,...r,ref:e}):null});vF.displayName=rm;function EE(t){return t===""||t===void 0}var NE=y.forwardRef((t,e)=>{const{value:n,...r}=t,i=y.useRef(null),s=Pe(e,i),o=zd(n);return y.useEffect(()=>{const a=i.current,l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==n&&u){const h=new Event("change",{bubbles:!0});u.call(a,n),a.dispatchEvent(h)}},[o,n]),d.jsx(Fd,{asChild:!0,children:d.jsx("select",{...r,ref:s,defaultValue:n})})});NE.displayName="BubbleSelect";function _E(t){const e=It(t),n=y.useRef(""),r=y.useRef(0),i=y.useCallback(o=>{const a=n.current+o;e(a),function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),s=y.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return y.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,s]}function TE(t,e,n){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=yF(t,Math.max(s,0));i.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function yF(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var xF=tE,AE=rE,wF=sE,bF=oE,SF=aE,PE=lE,kF=hE,jE=mE,RE=vE,CF=yE,EF=wE,ME=bE,IE=SE,OE=CE;const im=xF,NF=wF,Wu=y.forwardRef(({className:t,children:e,...n},r)=>d.jsxs(AE,{ref:r,className:U("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,d.jsx(bF,{asChild:!0,children:d.jsx(Pk,{className:"h-4 w-4 opacity-50"})})]}));Wu.displayName=AE.displayName;const LE=y.forwardRef(({className:t,...e},n)=>d.jsx(ME,{ref:n,className:U("flex cursor-default items-center justify-center py-1",t),...e,children:d.jsx(FO,{className:"h-4 w-4"})}));LE.displayName=ME.displayName;const $E=y.forwardRef(({className:t,...e},n)=>d.jsx(IE,{ref:n,className:U("flex cursor-default items-center justify-center py-1",t),...e,children:d.jsx(Pk,{className:"h-4 w-4"})}));$E.displayName=IE.displayName;const qu=y.forwardRef(({className:t,children:e,position:n="popper",...r},i)=>d.jsx(SF,{children:d.jsxs(PE,{ref:i,className:U("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[d.jsx(LE,{}),d.jsx(kF,{className:U("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),d.jsx($E,{})]})}));qu.displayName=PE.displayName;const _F=y.forwardRef(({className:t,...e},n)=>d.jsx(jE,{ref:n,className:U("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));_F.displayName=jE.displayName;const ni=y.forwardRef(({className:t,children:e,...n},r)=>d.jsxs(RE,{ref:r,className:U("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[d.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:d.jsx(EF,{children:d.jsx($u,{className:"h-4 w-4"})})}),d.jsx(CF,{children:e})]}));ni.displayName=RE.displayName;const TF=y.forwardRef(({className:t,...e},n)=>d.jsx(OE,{ref:n,className:U("-mx-1 my-1 h-px bg-muted",t),...e}));TF.displayName=OE.displayName;const AF=t=>{if(t===null||typeof t>"u"||isNaN(t))return d.jsx("span",{className:"text-muted-foreground",children:"- ₽"});const e=Math.abs(t),n=Math.floor(e/100),r=e%100,i=r>0,o=new Intl.NumberFormat("ru-RU",{minimumFractionDigits:0}).format(n);return d.jsxs(d.Fragment,{children:[d.jsx("span",{children:o}),i&&d.jsxs("span",{className:"opacity-70",children:[",",r.toString().padStart(2,"0")]}),d.jsx("span",{className:U("ml-0.5 align-baseline",i?"opacity-70":"opacity-90"),children:" ₽"})]})},PF=({operation:t,accountSubtitle:e,onItemClick:n})=>{const{asset:r,marketOperationType:i,totalAssetCostCopecks:s}=t;let o="Неизвестная операция",a=Du,l="",c="text-foreground";const u=r?Ao(r):null;switch(i){case Ct.Buy:o=`Покупка ${u||"актива"}`,a=OO,l="-",c="text-foreground";break;case Ct.Sell:o=`Продажа ${u||"актива"}`,a=LO,l="+",c="text-success";break;case Ct.DividendPayment:o=u?`Дивиденды по ${u}`:"Выплата дивидендов",a=qO,l="+",c="text-success";break;case Ct.CouponPayment:o=u?`Купон по ${u}`:"Выплата купона",a=eL,l="+",c="text-success";break;case Ct.BondRedemption:o=u?`Погашение ${u}`:"Погашение облигации",a=aL,l="+",c="text-success";break;default:o=u?`Операция: ${u}`:"Операция по счету",a=Du,l="?",c="text-muted-foreground";break}const h=e||"Счёт не указан";return d.jsxs("button",{className:U("flex items-center px-4 py-3 space-x-3 w-full text-left","hover:bg-muted/30 active:bg-muted/50 transition-colors cursor-pointer","focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 focus-visible:ring-offset-background rounded-sm"),onClick:()=>n==null?void 0:n(t),"aria-label":`Операция: ${o}, Сумма: ${l}${s/100}`,children:[d.jsx("div",{className:"flex-shrink-0",children:r?d.jsx(Ad,{logoUrl:r.logoUrl,ticker:r.ticker,className:"h-9 w-9 rounded-full"}):d.jsx("div",{className:"h-9 w-9 rounded-full bg-muted flex items-center justify-center",children:d.jsx(a,{className:"h-4 w-4 text-muted-foreground"})})}),d.jsxs("div",{className:"flex-grow min-w-0",children:[d.jsx("p",{className:"text-sm font-medium break-words",title:o,children:o}),d.jsxs("p",{className:"text-xs text-muted-foreground truncate mt-0.5",title:h,children:[" ",h," "]})]}),d.jsxs("div",{className:U("text-right flex-shrink-0 ml-2 tabular-nums-font","text-sm font-medium",c),children:[d.jsx("span",{children:l}),d.jsx("span",{children:AF(s)})]})]})},jF=({dateString:t,className:e})=>d.jsx("div",{className:U("px-4 pt-3 pb-1.5 sticky top-0 z-10 bg-background/90 backdrop-blur-sm border-b border-border/50",e),children:d.jsx("h3",{className:"text-sm font-semibold text-foreground tracking-wide",children:t})});var RF={exports:{}};(function(t,e){(function(n,r){t.exports=r(xk)})(Dn,function(n){function r(g){return g&&typeof g=="object"&&"default"in g?g:{default:g}}var i=r(n),s="января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря".split("_"),o="январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_"),a="янв._февр._мар._апр._мая_июня_июля_авг._сент._окт._нояб._дек.".split("_"),l="янв._февр._март_апр._май_июнь_июль_авг._сент._окт._нояб._дек.".split("_"),c=/D[oD]?(\[[^[\]]*\]|\s)+MMMM?/;function u(g,m,w){var v,x;return w==="m"?m?"минута":"минуту":g+" "+(v=+g,x={mm:m?"минута_минуты_минут":"минуту_минуты_минут",hh:"час_часа_часов",dd:"день_дня_дней",MM:"месяц_месяца_месяцев",yy:"год_года_лет"}[w].split("_"),v%10==1&&v%100!=11?x[0]:v%10>=2&&v%10<=4&&(v%100<10||v%100>=20)?x[1]:x[2])}var h=function(g,m){return c.test(m)?s[g.month()]:o[g.month()]};h.s=o,h.f=s;var f=function(g,m){return c.test(m)?a[g.month()]:l[g.month()]};f.s=l,f.f=a;var p={name:"ru",weekdays:"воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),weekdaysShort:"вск_пнд_втр_срд_чтв_птн_сбт".split("_"),weekdaysMin:"вс_пн_вт_ср_чт_пт_сб".split("_"),months:h,monthsShort:f,weekStart:1,yearStart:4,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., H:mm",LLLL:"dddd, D MMMM YYYY г., H:mm"},relativeTime:{future:"через %s",past:"%s назад",s:"несколько секунд",m:u,mm:u,h:"час",hh:u,d:"день",dd:u,M:"месяц",MM:u,y:"год",yy:u},ordinal:function(g){return g},meridiem:function(g){return g<4?"ночи":g<12?"утра":g<17?"дня":"вечера"}};return i.default.locale(p,null,!0),p})})(RF);var DE={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Dn,function(){return function(n,r,i){n=n||{};var s=r.prototype,o={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function a(c,u,h,f){return s.fromToBase(c,u,h,f)}i.en.relativeTime=o,s.fromToBase=function(c,u,h,f,p){for(var g,m,w,v=h.$locale().relativeTime||o,x=n.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],b=x.length,S=0;S<b;S+=1){var N=x[S];N.d&&(g=f?i(c).diff(h,N.d,!0):h.diff(c,N.d,!0));var C=(n.rounding||Math.round)(Math.abs(g));if(w=g>0,C<=N.r||!N.r){C<=1&&S>0&&(N=x[S-1]);var _=v[N.l];p&&(C=p(""+C)),m=typeof _=="string"?_.replace("%d",C):_(C,u,N.l,w);break}}if(u)return m;var P=w?v.future:v.past;return typeof P=="function"?P(m):P.replace("%s",m)},s.to=function(c,u){return a(c,u,this,!0)},s.from=function(c,u){return a(c,u,this)};var l=function(c){return c.$u?i.utc():i()};s.toNow=function(c){return this.to(l(this),c)},s.fromNow=function(c){return this.from(l(this),c)}}})})(DE);var MF=DE.exports;const IF=Hn(MF);var ev="Dialog",[zE,FE]=Dt(ev),[OF,qn]=zE(ev),BE=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=t,a=y.useRef(null),l=y.useRef(null),[c=!1,u]=Cn({prop:r,defaultProp:i,onChange:s});return d.jsx(OF,{scope:e,triggerRef:a,contentRef:l,contentId:or(),titleId:or(),descriptionId:or(),open:c,onOpenChange:u,onOpenToggle:y.useCallback(()=>u(h=>!h),[u]),modal:o,children:n})};BE.displayName=ev;var VE="DialogTrigger",UE=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=qn(VE,n),s=Pe(e,i.triggerRef);return d.jsx(ae.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":rv(i.open),...r,ref:s,onClick:le(t.onClick,i.onOpenToggle)})});UE.displayName=VE;var tv="DialogPortal",[LF,HE]=zE(tv,{forceMount:void 0}),WE=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,s=qn(tv,e);return d.jsx(LF,{scope:e,forceMount:n,children:y.Children.map(r,o=>d.jsx(Ur,{present:n||s.open,children:d.jsx(Dd,{asChild:!0,container:i,children:o})}))})};WE.displayName=tv;var Ku="DialogOverlay",qE=y.forwardRef((t,e)=>{const n=HE(Ku,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=qn(Ku,t.__scopeDialog);return s.modal?d.jsx(Ur,{present:r||s.open,children:d.jsx($F,{...i,ref:e})}):null});qE.displayName=Ku;var $F=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=qn(Ku,n);return d.jsx(Qg,{as:os,allowPinchZoom:!0,shards:[i.contentRef],children:d.jsx(ae.div,{"data-state":rv(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),cs="DialogContent",KE=y.forwardRef((t,e)=>{const n=HE(cs,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=qn(cs,t.__scopeDialog);return d.jsx(Ur,{present:r||s.open,children:s.modal?d.jsx(DF,{...i,ref:e}):d.jsx(zF,{...i,ref:e})})});KE.displayName=cs;var DF=y.forwardRef((t,e)=>{const n=qn(cs,t.__scopeDialog),r=y.useRef(null),i=Pe(e,n.contentRef,r);return y.useEffect(()=>{const s=r.current;if(s)return KC(s)},[]),d.jsx(YE,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:le(t.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:le(t.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:le(t.onFocusOutside,s=>s.preventDefault())})}),zF=y.forwardRef((t,e)=>{const n=qn(cs,t.__scopeDialog),r=y.useRef(!1),i=y.useRef(!1);return d.jsx(YE,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),YE=y.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=t,a=qn(cs,n),l=y.useRef(null),c=Pe(e,l);return kC(),d.jsxs(d.Fragment,{children:[d.jsx(Vg,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:d.jsx(Md,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":rv(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),d.jsxs(d.Fragment,{children:[d.jsx(BF,{titleId:a.titleId}),d.jsx(UF,{contentRef:l,descriptionId:a.descriptionId})]})]})}),nv="DialogTitle",GE=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=qn(nv,n);return d.jsx(ae.h2,{id:i.titleId,...r,ref:e})});GE.displayName=nv;var ZE="DialogDescription",XE=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=qn(ZE,n);return d.jsx(ae.p,{id:i.descriptionId,...r,ref:e})});XE.displayName=ZE;var QE="DialogClose",JE=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=qn(QE,n);return d.jsx(ae.button,{type:"button",...r,ref:e,onClick:le(t.onClick,()=>i.onOpenChange(!1))})});JE.displayName=QE;function rv(t){return t?"open":"closed"}var eN="DialogTitleWarning",[FF,tN]=i$(eN,{contentName:cs,titleName:nv,docsSlug:"dialog"}),BF=({titleId:t})=>{const e=tN(eN),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return y.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},VF="DialogDescriptionWarning",UF=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${tN(VF).contentName}}.`;return y.useEffect(()=>{var s;const i=(s=t.current)==null?void 0:s.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},nN=BE,HF=UE,rN=WE,iv=qE,sv=KE,ov=GE,av=XE,Wd=JE;const Aa=nN,WF=rN,iN=Wd,sN=y.forwardRef(({className:t,...e},n)=>d.jsx(iv,{ref:n,className:U("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));sN.displayName=iv.displayName;const ao=y.forwardRef(({className:t,children:e,...n},r)=>d.jsxs(WF,{children:[d.jsx(sN,{}),d.jsxs(sv,{ref:r,className:U("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,d.jsxs(Wd,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[d.jsx(Ed,{className:"h-4 w-4"}),d.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ao.displayName=sv.displayName;const lo=({className:t,...e})=>d.jsx("div",{className:U("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});lo.displayName="DialogHeader";const lv=({className:t,...e})=>d.jsx("div",{className:U("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});lv.displayName="DialogFooter";const co=y.forwardRef(({className:t,...e},n)=>d.jsx(ov,{ref:n,className:U("text-lg font-semibold leading-none tracking-tight",t),...e}));co.displayName=ov.displayName;const Pa=y.forwardRef(({className:t,...e},n)=>d.jsx(av,{ref:n,className:U("text-sm text-muted-foreground",t),...e}));Pa.displayName=av.displayName;var oN={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Dn,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(r,i,s){var o=i.prototype,a=o.format;s.en.formats=n,o.format=function(l){l===void 0&&(l="YYYY-MM-DDTHH:mm:ssZ");var c=this.$locale().formats,u=function(h,f){return h.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(p,g,m){var w=m&&m.toUpperCase();return g||f[m]||n[m]||f[w].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(v,x,b){return x||b.slice(1)})})}(l,c===void 0?{}:c);return a.call(this,u)}}})})(oN);var qF=oN.exports;const cv=Hn(qF);Ie.extend(Ll);Ie.extend($l);Ie.extend(cv);Ie.locale("ru");const KF=({isOpen:t,onClose:e,operation:n,accountSubtitle:r})=>{if(!t||!n)return null;const{asset:i,marketOperationType:s,totalAssetCostCopecks:o,createdAt:a,commissionCopecks:l}=n,c=s===0,u=i?c?`Покупка ${Ao(i)}`:`Продажа ${Ao(i)}`:c?"Покупка":"Продажа",h=c?"text-foreground":"text-success",f=c?"-":"+",p=Ie.utc(a).tz("Europe/Moscow").format("D MMMM YYYY [г], HH:mm"),g=r||"Счет не указан",m=To(l);return d.jsx(Aa,{open:t,onOpenChange:e,children:d.jsxs(ao,{className:"sm:max-w-md p-0 bg-background text-foreground overflow-hidden rounded-2xl",children:[d.jsx(lo,{className:"p-4 flex flex-row items-center justify-between border-b",children:d.jsx(co,{className:"text-sm font-normal text-muted-foreground",children:p})}),d.jsxs("div",{className:"p-6 flex flex-col items-center text-center space-y-1.5",children:[i&&d.jsx(Ad,{logoUrl:i.logoUrl,ticker:i.ticker,className:"h-16 w-16 rounded-full border mb-2"}),d.jsx("h3",{className:"text-xl font-semibold",children:u}),(i==null?void 0:i.ticker)&&d.jsx("p",{className:"text-sm text-muted-foreground uppercase",children:i.ticker}),d.jsxs("div",{className:U("text-4xl font-bold tracking-tight pt-2",h),children:[f,d.jsx(ft,{value:o,includeSymbol:!1}),d.jsx("span",{className:"text-3xl ml-1",children:"₽"})]}),d.jsx("p",{className:"text-base text-muted-foreground pt-1",children:g}),l>0&&d.jsxs("p",{className:"text-sm text-muted-foreground pt-0.5",children:["Комиссия: ",m]})]})]})})},YF=500,GF=15,ZF=1300,XF=()=>{const[t,e]=y.useState(!1),n=y.useRef(0),r=y.useRef(null),i=y.useCallback(()=>{const o=window.scrollY,l=n.current-o>GF,c=o>YF;l&&c&&(r.current&&clearTimeout(r.current),e(h=>h!==!0?!0:h),r.current=setTimeout(()=>{e(!1),r.current=null},ZF)),n.current=o<=0?0:o},[]);y.useEffect(()=>{const o=window;k.log("[ScrollToTopButton Effect] Adding scroll listener to window");const a=()=>{requestAnimationFrame(i)};return o.addEventListener("scroll",a,{passive:!0}),()=>{k.log("[ScrollToTopButton Effect] Removing scroll listener from window"),o.removeEventListener("scroll",a),r.current&&(clearTimeout(r.current),r.current=null,k.log("[ScrollToTopButton Effect Cleanup] Cleared hide timeout."))}},[i]);const s=y.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);return d.jsx(ke,{variant:"secondary",size:"icon",className:U("fixed bottom-24 right-4 z-[60] h-11 w-11 rounded-full shadow-lg","bg-background/80 backdrop-blur-sm border border-border/50 hover:bg-muted","transition-opacity duration-300 ease-in-out",t?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"),onClick:s,"aria-label":"Прокрутить наверх","aria-hidden":!t,tabIndex:t?0:-1,children:d.jsx($O,{className:"h-5 w-5"})})};var QF="Label",aN=y.forwardRef((t,e)=>d.jsx(ae.label,{...t,ref:e,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));aN.displayName=QF;var lN=aN;const JF=Td("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),st=y.forwardRef(({className:t,...e},n)=>d.jsx(lN,{ref:n,className:U(JF(),t),...e}));st.displayName=lN.displayName;Ie.locale("ru");Ie.extend(IF);Ie.extend(Ll);Ie.extend($l);const e4=({index:t})=>d.jsxs("div",{className:U("flex items-center px-4 py-3 space-x-3 animate-pulse",t%2===0?"bg-muted/30":"bg-card"),children:[d.jsx("div",{className:"h-9 w-9 rounded-full bg-muted flex-shrink-0"}),d.jsxs("div",{className:"flex-grow min-w-0 space-y-1.5",children:[d.jsx("div",{className:"h-3 w-3/5 rounded bg-muted"}),d.jsx("div",{className:"h-2.5 w-2/5 rounded bg-muted"})]}),d.jsx("div",{className:"h-4 w-16 rounded bg-muted flex-shrink-0 ml-2"})]}),t4=t=>{const e={};return t.forEach(n=>{const r=Ie.utc(n.createdAt).tz("Europe/Moscow").startOf("day").toISOString();e[r]||(e[r]=[]),e[r].push(n)}),e},n4=t=>{const e=Ie(t).tz("Europe/Moscow"),n=Ie().year();return e.year()===n?e.format("D MMMM"):e.format("D MMMM YYYY")},r4=()=>{var B;const{accountId:t}=ys(),e=Number(t),n=gt(),{accounts:r}=ur(),{tg:i}=Zt(),{operations:s,selectedAccountIds:o,filterOperationType:a,totalCount:l,isLoading:c,error:u,isInitialLoad:h,setAccountFilter:f,setOperationTypeFilter:p,fetchHistory:g,resetHistory:m}=B$(),w=y.useRef(null),[v,x]=y.useState(null),[b,S]=y.useState(!1);y.useEffect(()=>(e&&!isNaN(e)?f(e):(k.error("Invalid account ID in URL:",t),f(null)),()=>{m()}),[e,f,m]);const N=y.useMemo(()=>{var $;const A=o[0];return!A||!r?null:(($=r.find(E=>{var z;return((z=E.brokerAccount)==null?void 0:z.id)===A}))==null?void 0:$.brokerAccount)??null},[o,r]),C=y.useMemo(()=>N?N.telegramUserId?`Счёт ${N.telegramUserId}`:`Счёт ${N.id}`:"Счёт",[N]),_=y.useMemo(()=>{const A=o[0];if(!A||!r)return"Счёт...";const $=r.find(z=>{var q;return((q=z.brokerAccount)==null?void 0:q.id)===A}),E=$==null?void 0:$.brokerAccount;return E?E.telegramUserId?`Счёт ${E.telegramUserId}`:E.title.replace(/["«»]/g,""):`Счёт #${A}`},[o,r]),P=y.useCallback(A=>{const $=A==="all"?null:Number(A);f($)},[f]),I=y.useCallback(A=>{let $=null;A===Ct.Buy.toString()?$=Ct.Buy:A===Ct.Sell.toString()&&($=Ct.Sell),p($)},[p]),R=y.useCallback(()=>{!c&&s.length<l&&g(void 0,!0)},[c,s.length,l,g]);y.useEffect(()=>{const A=()=>n(`/portfolio/${e}`);return i&&(i.BackButton.show(),i.onEvent("backButtonClicked",A)),()=>{i&&(i.BackButton.hide(),i.offEvent("backButtonClicked",A))}},[i,n,e]),y.useEffect(()=>{const A=w.current;if(!A)return;const $=new IntersectionObserver(([E])=>{E.isIntersecting&&!c&&s.length<l&&(k.log("Intersection observer triggered load more history"),R())},{threshold:.1});return $.observe(A),()=>{A&&$.unobserve(A)}},[c,s.length,l,R]);const O=y.useMemo(()=>t4(s),[s]),j=y.useMemo(()=>Object.keys(O).sort((A,$)=>Ie($).valueOf()-Ie(A).valueOf()),[O]),F=()=>a===Ct.Buy?"Нет операций покупки.":a===Ct.Sell?"Нет операций продажи.":"Операций не найдено.",M=y.useCallback(A=>{x(A),S(!0)},[]),D=y.useCallback(()=>{S(!1),setTimeout(()=>x(null),300)},[]),L=a===null?"all":a.toString();return d.jsxs("div",{className:"p-4 space-y-4 pb-4",children:[d.jsxs(bt,{className:"flex-shrink-0 shadow-sm border rounded-lg",children:[d.jsxs(pr,{className:"pb-2 pt-4",children:[" ",d.jsxs("div",{className:"relative flex justify-center items-center h-8",children:[" ",d.jsx("div",{className:"absolute left-0 h-8 w-8"})," ",d.jsxs("div",{className:"flex flex-col items-center",children:[" ",d.jsx(Vr,{className:"text-lg font-semibold",children:"История операций"})," "]})," "]})," "]}),d.jsx(Gt,{className:"pt-2 pb-4",children:d.jsxs("div",{className:"flex gap-3",children:[d.jsxs("div",{className:"flex-1 space-y-1",children:[d.jsx(st,{htmlFor:"accountSelector",className:"block text-xs font-medium text-muted-foreground",children:"Счет"}),d.jsxs(im,{value:((B=o[0])==null?void 0:B.toString())??"all",onValueChange:P,disabled:c||!r||r.length===0,children:[d.jsx(Wu,{id:"accountSelector",className:"h-9 text-sm w-full",children:d.jsx("span",{className:"truncate",children:_})}),d.jsxs(qu,{children:[r==null?void 0:r.map(A=>{const $=A.brokerAccount;if(!$)return null;const E=$.telegramUserId?`Счёт ${$.telegramUserId}`:$.title.replace(/["«»]/g,"");return d.jsx(ni,{value:$.id.toString(),children:E},$.id)}),(!r||r.length===0)&&d.jsx(ni,{value:"-",disabled:!0,children:"Нет счетов"})]})]})]}),d.jsxs("div",{className:"flex-1 space-y-1",children:[d.jsx(st,{htmlFor:"operationType",className:"block text-xs font-medium text-muted-foreground",children:"Тип операции"}),d.jsxs(im,{value:L,onValueChange:I,disabled:c,children:[d.jsx(Wu,{id:"operationType",className:"h-9 text-sm w-full",children:d.jsx(NF,{placeholder:"Все типы"})}),d.jsxs(qu,{children:[d.jsx(ni,{value:"all",children:"Все типы"}),d.jsx(ni,{value:Ct.Buy.toString(),children:"Покупка"}),d.jsx(ni,{value:Ct.Sell.toString(),children:"Продажа"})]})]})]})]})})]}),d.jsx(bt,{className:"shadow-sm border rounded-lg overflow-hidden",children:d.jsx(Gt,{className:"p-0",children:h?d.jsx("div",{className:"divide-y divide-border/60",children:Array.from({length:7}).map((A,$)=>d.jsx(e4,{index:$},$))}):u?d.jsx("div",{className:"p-6 flex items-center justify-center min-h-[200px]",children:d.jsx(mt,{message:u})}):s.length>0?d.jsxs("div",{className:"relative",children:[j.map(A=>d.jsxs("div",{children:[d.jsx(jF,{dateString:n4(A)}),d.jsx("div",{className:"divide-y divide-border/60",children:O[A].map($=>d.jsx(PF,{operation:$,onItemClick:M,accountSubtitle:C},$.id))})]},A)),d.jsx("div",{ref:w,style:{height:"1px"},"aria-hidden":"true"}),c&&s.length>0&&d.jsx("div",{className:"flex justify-center p-4",children:d.jsx(Ce,{size:"sm"})})]}):d.jsx("div",{className:"flex justify-center items-center min-h-[200px] text-muted-foreground text-center p-4",children:F()})})}),d.jsx(KF,{isOpen:b,onClose:D,operation:v,accountSubtitle:C}),d.jsx(XF,{})]})};var uv="Avatar",[i4,T8]=Dt(uv),[s4,cN]=i4(uv),uN=y.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[i,s]=y.useState("idle");return d.jsx(s4,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:s,children:d.jsx(ae.span,{...r,ref:e})})});uN.displayName=uv;var dN="AvatarImage",hN=y.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:i=()=>{},...s}=t,o=cN(dN,n),a=o4(r,s.referrerPolicy),l=It(c=>{i(c),o.onImageLoadingStatusChange(c)});return ut(()=>{a!=="idle"&&l(a)},[a,l]),a==="loaded"?d.jsx(ae.img,{...s,ref:e,src:r}):null});hN.displayName=dN;var fN="AvatarFallback",pN=y.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...i}=t,s=cN(fN,n),[o,a]=y.useState(r===void 0);return y.useEffect(()=>{if(r!==void 0){const l=window.setTimeout(()=>a(!0),r);return()=>window.clearTimeout(l)}},[r]),o&&s.imageLoadingStatus!=="loaded"?d.jsx(ae.span,{...i,ref:e}):null});pN.displayName=fN;function o4(t,e){const[n,r]=y.useState("idle");return ut(()=>{if(!t){r("error");return}let i=!0;const s=new window.Image,o=a=>()=>{i&&r(a)};return r("loading"),s.onload=o("loaded"),s.onerror=o("error"),s.src=t,e&&(s.referrerPolicy=e),()=>{i=!1}},[t,e]),n}var mN=uN,gN=hN,vN=pN;const qd=y.forwardRef(({className:t,...e},n)=>d.jsx(mN,{ref:n,className:U("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));qd.displayName=mN.displayName;const Kd=y.forwardRef(({className:t,...e},n)=>d.jsx(gN,{ref:n,className:U("aspect-square h-full w-full",t),...e}));Kd.displayName=gN.displayName;const Yd=y.forwardRef(({className:t,...e},n)=>d.jsx(vN,{ref:n,className:U("flex h-full w-full items-center justify-center rounded-full bg-muted uppercase",t),...e}));Yd.displayName=vN.displayName;const a4=5e3;let nf=0;function l4(){return nf=(nf+1)%Number.MAX_VALUE,nf.toString()}const Rs=new Map,c4=(t,e)=>{switch(e.type){case"ADD_TOAST":{const{toasts:n}=t,r={...e.toast,open:!0};return Rs.forEach((i,s)=>{clearTimeout(i),Rs.delete(s)}),{...t,toasts:[r]}}case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"REMOVE_TOAST":{const{toastId:n}=e;return n&&Rs.has(n)&&(clearTimeout(Rs.get(n)),Rs.delete(n)),{...t,toasts:n===void 0?[]:t.toasts.filter(r=>r.id!==n)}}default:return t}},Zc=[];let ja={toasts:[]};function uo(t){ja=c4(ja,t),Zc.forEach(e=>{e(ja)})}function u4(t){const e=l4(),n=()=>{uo({type:"UPDATE_TOAST",toast:{id:e,open:!1}}),setTimeout(()=>{r(e)},1e3)},r=s=>{uo({type:"REMOVE_TOAST",toastId:s})};uo({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||n()}}});const i=t.duration??a4;if(i!==1/0){const s=setTimeout(n,i);Rs.set(e,s)}return{id:e,dismiss:n}}function En(){const[t,e]=y.useState(ja);return y.useEffect(()=>(Zc.push(e),()=>{const n=Zc.indexOf(e);n>-1&&Zc.splice(n,1)}),[t]),{...t,toast:u4,dismiss:n=>{n?ja.toasts.find(i=>i.id===n)&&(uo({type:"UPDATE_TOAST",toast:{id:n,open:!1}}),setTimeout(()=>{uo({type:"REMOVE_TOAST",toastId:n})},1e3)):uo({type:"REMOVE_TOAST"})}}}var rf="rovingFocusGroup.onEntryFocus",d4={bubbles:!1,cancelable:!0},Gd="RovingFocusGroup",[sm,yN,h4]=Pd(Gd),[f4,Zd]=Dt(Gd,[h4]),[p4,m4]=f4(Gd),xN=y.forwardRef((t,e)=>d.jsx(sm.Provider,{scope:t.__scopeRovingFocusGroup,children:d.jsx(sm.Slot,{scope:t.__scopeRovingFocusGroup,children:d.jsx(g4,{...t,ref:e})})}));xN.displayName=Gd;var g4=y.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...h}=t,f=y.useRef(null),p=Pe(e,f),g=zl(s),[m=null,w]=Cn({prop:o,defaultProp:a,onChange:l}),[v,x]=y.useState(!1),b=It(c),S=yN(n),N=y.useRef(!1),[C,_]=y.useState(0);return y.useEffect(()=>{const P=f.current;if(P)return P.addEventListener(rf,b),()=>P.removeEventListener(rf,b)},[b]),d.jsx(p4,{scope:n,orientation:r,dir:g,loop:i,currentTabStopId:m,onItemFocus:y.useCallback(P=>w(P),[w]),onItemShiftTab:y.useCallback(()=>x(!0),[]),onFocusableItemAdd:y.useCallback(()=>_(P=>P+1),[]),onFocusableItemRemove:y.useCallback(()=>_(P=>P-1),[]),children:d.jsx(ae.div,{tabIndex:v||C===0?-1:0,"data-orientation":r,...h,ref:p,style:{outline:"none",...t.style},onMouseDown:le(t.onMouseDown,()=>{N.current=!0}),onFocus:le(t.onFocus,P=>{const I=!N.current;if(P.target===P.currentTarget&&I&&!v){const R=new CustomEvent(rf,d4);if(P.currentTarget.dispatchEvent(R),!R.defaultPrevented){const O=S().filter(L=>L.focusable),j=O.find(L=>L.active),F=O.find(L=>L.id===m),D=[j,F,...O].filter(Boolean).map(L=>L.ref.current);SN(D,u)}}N.current=!1}),onBlur:le(t.onBlur,()=>x(!1))})})}),wN="RovingFocusGroupItem",bN=y.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,...o}=t,a=or(),l=s||a,c=m4(wN,n),u=c.currentTabStopId===l,h=yN(n),{onFocusableItemAdd:f,onFocusableItemRemove:p}=c;return y.useEffect(()=>{if(r)return f(),()=>p()},[r,f,p]),d.jsx(sm.ItemSlot,{scope:n,id:l,focusable:r,active:i,children:d.jsx(ae.span,{tabIndex:u?0:-1,"data-orientation":c.orientation,...o,ref:e,onMouseDown:le(t.onMouseDown,g=>{r?c.onItemFocus(l):g.preventDefault()}),onFocus:le(t.onFocus,()=>c.onItemFocus(l)),onKeyDown:le(t.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){c.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const m=x4(g,c.orientation,c.dir);if(m!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let v=h().filter(x=>x.focusable).map(x=>x.ref.current);if(m==="last")v.reverse();else if(m==="prev"||m==="next"){m==="prev"&&v.reverse();const x=v.indexOf(g.currentTarget);v=c.loop?w4(v,x+1):v.slice(x+1)}setTimeout(()=>SN(v))}})})})});bN.displayName=wN;var v4={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function y4(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function x4(t,e,n){const r=y4(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return v4[r]}function SN(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function w4(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var kN=xN,CN=bN,dv="Radio",[b4,EN]=Dt(dv),[S4,k4]=b4(dv),NN=y.forwardRef((t,e)=>{const{__scopeRadio:n,name:r,checked:i=!1,required:s,disabled:o,value:a="on",onCheck:l,form:c,...u}=t,[h,f]=y.useState(null),p=Pe(e,w=>f(w)),g=y.useRef(!1),m=h?c||!!h.closest("form"):!0;return d.jsxs(S4,{scope:n,checked:i,disabled:o,children:[d.jsx(ae.button,{type:"button",role:"radio","aria-checked":i,"data-state":AN(i),"data-disabled":o?"":void 0,disabled:o,value:a,...u,ref:p,onClick:le(t.onClick,w=>{i||l==null||l(),m&&(g.current=w.isPropagationStopped(),g.current||w.stopPropagation())})}),m&&d.jsx(C4,{control:h,bubbles:!g.current,name:r,value:a,checked:i,required:s,disabled:o,form:c,style:{transform:"translateX(-100%)"}})]})});NN.displayName=dv;var _N="RadioIndicator",TN=y.forwardRef((t,e)=>{const{__scopeRadio:n,forceMount:r,...i}=t,s=k4(_N,n);return d.jsx(Ur,{present:r||s.checked,children:d.jsx(ae.span,{"data-state":AN(s.checked),"data-disabled":s.disabled?"":void 0,...i,ref:e})})});TN.displayName=_N;var C4=t=>{const{control:e,checked:n,bubbles:r=!0,...i}=t,s=y.useRef(null),o=zd(n),a=$d(e);return y.useEffect(()=>{const l=s.current,c=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(c,"checked").set;if(o!==n&&h){const f=new Event("click",{bubbles:r});h.call(l,n),l.dispatchEvent(f)}},[o,n,r]),d.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:s,style:{...t.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function AN(t){return t?"checked":"unchecked"}var E4=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],hv="RadioGroup",[N4,A8]=Dt(hv,[Zd,EN]),PN=Zd(),jN=EN(),[_4,T4]=N4(hv),RN=y.forwardRef((t,e)=>{const{__scopeRadioGroup:n,name:r,defaultValue:i,value:s,required:o=!1,disabled:a=!1,orientation:l,dir:c,loop:u=!0,onValueChange:h,...f}=t,p=PN(n),g=zl(c),[m,w]=Cn({prop:s,defaultProp:i,onChange:h});return d.jsx(_4,{scope:n,name:r,required:o,disabled:a,value:m,onValueChange:w,children:d.jsx(kN,{asChild:!0,...p,orientation:l,dir:g,loop:u,children:d.jsx(ae.div,{role:"radiogroup","aria-required":o,"aria-orientation":l,"data-disabled":a?"":void 0,dir:g,...f,ref:e})})})});RN.displayName=hv;var MN="RadioGroupItem",IN=y.forwardRef((t,e)=>{const{__scopeRadioGroup:n,disabled:r,...i}=t,s=T4(MN,n),o=s.disabled||r,a=PN(n),l=jN(n),c=y.useRef(null),u=Pe(e,c),h=s.value===i.value,f=y.useRef(!1);return y.useEffect(()=>{const p=m=>{E4.includes(m.key)&&(f.current=!0)},g=()=>f.current=!1;return document.addEventListener("keydown",p),document.addEventListener("keyup",g),()=>{document.removeEventListener("keydown",p),document.removeEventListener("keyup",g)}},[]),d.jsx(CN,{asChild:!0,...a,focusable:!o,active:h,children:d.jsx(NN,{disabled:o,required:s.required,checked:h,...l,...i,name:s.name,ref:u,onCheck:()=>s.onValueChange(i.value),onKeyDown:le(p=>{p.key==="Enter"&&p.preventDefault()}),onFocus:le(i.onFocus,()=>{var p;f.current&&((p=c.current)==null||p.click())})})})});IN.displayName=MN;var A4="RadioGroupIndicator",ON=y.forwardRef((t,e)=>{const{__scopeRadioGroup:n,...r}=t,i=jN(n);return d.jsx(TN,{...i,...r,ref:e})});ON.displayName=A4;var LN=RN,$N=IN,P4=ON;const om=y.forwardRef(({className:t,...e},n)=>d.jsx(LN,{className:U("grid gap-2",t),...e,ref:n}));om.displayName=LN.displayName;const Ms=y.forwardRef(({className:t,...e},n)=>d.jsx($N,{ref:n,className:U("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:d.jsx(P4,{className:"flex items-center justify-center",children:d.jsx(UO,{className:"h-2.5 w-2.5 fill-current text-current"})})}));Ms.displayName=$N.displayName;const am="themePreference",j4=()=>{try{const t=localStorage.getItem(am);if(t==="light"||t==="dark"||t==="system")return t}catch(t){k.error("Error reading initial theme preference:",t)}return"system"},Gi=fr()(zo(t=>({preference:j4(),setPreference:e=>{k.log(`[ThemeStore] Setting preference to: ${e}`),t({preference:e});try{localStorage.setItem(am,e)}catch(n){k.error("Error saving theme preference to localStorage:",n)}}}),{name:am,storage:xs(()=>localStorage)})),R4="https://t.me/CounterCulturalConversation",DN="app-dynamic-config",M4=()=>{var t;try{const e=localStorage.getItem(DN);if(e){const n=JSON.parse(e);if((t=n==null?void 0:n.state)!=null&&t.chatLink&&typeof n.state.chatLink=="string")return n.state.chatLink}}catch(e){k.error("Error reading initial chat link:",e)}return R4},I4=fr()(zo(t=>({chatLink:M4(),setChatLink:e=>{k.log(`[ConfigStore] Setting chatLink to: ${e}`),t({chatLink:e})}}),{name:DN,storage:xs(()=>localStorage),partialize:t=>({chatLink:t.chatLink})})),O4=t=>{try{if(!t)return null;const n=new URLSearchParams(t).get("user");if(n){const r=JSON.parse(decodeURIComponent(n));if(r&&typeof r=="object"&&typeof r.id=="number")return{userId:r.id,firstName:r.first_name||null,lastName:r.last_name||null,username:r.username||null,photoUrl:r.photo_url||null,isBot:r.is_bot||!1}}}catch(e){k.error("Failed to parse mock user data:",e)}return null},_s=({label:t,onClick:e,disabled:n=!1,currentValue:r,Icon:i,children:s})=>{const{toast:o}=En(),a=()=>{n?o({title:"В разработке",description:"Этот раздел скоро появится.",duration:2e3}):e&&e()};return d.jsxs("button",{onClick:a,disabled:n,className:U("flex items-center w-full text-left p-4 transition-colors relative",n?"text-muted-foreground cursor-not-allowed opacity-60":"hover:bg-muted/50 active:bg-muted/80 cursor-pointer"),children:[i&&d.jsx(i,{className:"h-5 w-5 mr-3 text-muted-foreground flex-shrink-0"}),d.jsx("span",{className:"text-base flex-grow",children:t}),r&&d.jsx("span",{className:"text-sm text-muted-foreground mr-2",children:r}),s,d.jsx(jk,{className:U("h-5 w-5 flex-shrink-0",n?"text-muted-foreground/50":"text-muted-foreground")})]})},L4=()=>{k.log("[ProfilePage] Rendering...");const{tg:t,user:e}=Zt(),n=kn(z=>z.logout),{isAdminAuthenticated:r}=Tr(),{toast:i}=En(),[s,o]=y.useState(!1),a=Gi(z=>z.preference),l=Gi(z=>z.setPreference),[c,u]=y.useState(!1),[h,f]=y.useState(!1),[p,g]=y.useState(!1),m=I4(z=>z.chatLink),w=gt(),{notificationsEnabled:v,setNotificationsEnabled:x}=nn(),b=y.useMemo(()=>Ml(),[]),S=Le.useMemo(()=>{k.log("[ProfilePage useMemo] Calculating displayUser...",{telegramUserSDK:e,isMock:b.useMock});const z=e;if(z&&typeof z.id=="number")return k.log("[ProfilePage useMemo] Using real Telegram user data."),{userId:z.id,firstName:z.first_name||null,lastName:z.last_name||null,username:z.username||null,photoUrl:z.photo_url||null,isBot:z.is_bot||!1};const q=b.useMock,T=b.mockInitData;if(q&&T){k.log("[ProfilePage useMemo] Using mock data.");const J=O4(T);return k.log("[ProfilePage useMemo] Parsed mock user:",J),J}return k.warn("[ProfilePage useMemo] No real user and no mock data, returning null."),null},[e,b.useMock,b.mockInitData]);k.log("[ProfilePage] displayUser value:",S),y.useEffect(()=>{o(!1)},[S==null?void 0:S.userId]);const N=(S==null?void 0:S.firstName)||"User",C=(S==null?void 0:S.lastName)||"",_=S==null?void 0:S.username,P=S==null?void 0:S.photoUrl,I=S==null?void 0:S.userId,R=[N==null?void 0:N[0],C==null?void 0:C[0]].filter(Boolean).map(z=>z==null?void 0:z.toUpperCase()).join("")||"?",O=()=>{n()},j=()=>{s||o(!0)},F=z=>{l(z),f(!1)},M=()=>{u(!0)},D=()=>{t!=null&&t.openTelegramLink?t.openTelegramLink(m):(window.open(m,"_blank"),i({title:"Открытие ссылки",description:"Попытка открыть ссылку на чат.",duration:2e3})),u(!1)},L=()=>{switch(a){case"light":return"Светлая";case"dark":return"Темная";case"system":default:return"Как в Telegram"}},B=()=>{w("/faq")},A=()=>{w("/admin/panel",{state:{fromProfile:!0}})},$=()=>{g(!0)},E=z=>{x(z==="true"),g(!1)};return S?(k.log("[ProfilePage] Rendering main content..."),d.jsxs("div",{className:"p-4 space-y-4 pb-4 flex flex-col h-full",children:[d.jsx(bt,{className:"flex-grow shadow-sm border rounded-lg overflow-hidden flex flex-col",children:d.jsx(Gt,{className:"p-0 flex-grow overflow-y-auto no-scrollbar",children:d.jsxs("div",{className:"divide-y divide-border/60",children:[d.jsxs("div",{className:"flex items-center p-4 space-x-4",children:[d.jsx(qd,{className:"w-12 h-12 flex-shrink-0 border",children:!s&&P?d.jsx(Kd,{src:P,alt:_||"User",onError:j}):d.jsx(Yd,{className:"text-xl",children:R})}),d.jsxs("div",{className:"overflow-hidden flex-grow",children:[d.jsxs("p",{className:"text-base font-semibold truncate",children:[N," ",C]}),_&&d.jsxs("p",{className:"text-sm text-muted-foreground truncate",children:["@",_]}),I&&d.jsxs("p",{className:"text-xs text-muted-foreground/70 mt-0.5",children:["Telegram ID: ",I]})]}),d.jsxs(ke,{variant:"ghost",size:"icon",className:"flex-shrink-0 text-destructive",onClick:O,children:[d.jsx(Ik,{className:"h-5 w-5"})," ",d.jsx("span",{className:"sr-only",children:"Выйти"})]})]}),d.jsx(_s,{label:"Уведомления",onClick:$,Icon:v?Hp:Up,currentValue:v?"Включены":"Выключены"}),d.jsx(_s,{label:"Ответы на часто задаваемые вопросы",onClick:B,Icon:Du}),d.jsx(_s,{label:"Связаться со службой поддержки",disabled:!0,Icon:XO}),d.jsx(_s,{label:"Тема оформления",onClick:()=>f(!0),Icon:Bx,currentValue:L()}),d.jsx(_s,{label:"Пригласи друга получи подарочные акции",disabled:!0,Icon:YO}),d.jsx(_s,{label:"Наш телеграмм чат",onClick:M,Icon:rL})]})})}),r&&d.jsx("div",{className:"mt-4 flex-shrink-0",children:d.jsxs(ke,{variant:"secondary",className:"w-full h-12 text-base font-medium flex items-center justify-center gap-2 shadow-sm",onClick:A,children:[d.jsx(Lk,{className:"h-5 w-5"})," Админ-панель"]})}),d.jsx(Aa,{open:c,onOpenChange:u,children:d.jsxs(ao,{children:[" ",d.jsxs(lo,{children:[" ",d.jsxs(co,{className:"flex items-center gap-2",children:[" ",d.jsx(KO,{className:"h-5 w-5 text-muted-foreground"})," Переход в Телеграмм "]})," ",d.jsxs(Pa,{className:"pt-2 text-left",children:[" Вы собираетесь открыть наш чат в Телеграмм: ",d.jsxs("a",{href:m,target:"_blank",rel:"noopener noreferrer",className:"block text-primary hover:underline truncate mt-1 text-sm",onClick:z=>z.preventDefault(),children:[" ",m," "]})," "]})," "]})," ",d.jsxs(lv,{className:"mt-4",children:[" ",d.jsxs(iN,{asChild:!0,children:[" ",d.jsx(ke,{type:"button",variant:"outline",children:" Отмена "})," "]})," ",d.jsx(ke,{type:"button",onClick:D,children:" Перейти "})," "]})," "]})}),d.jsx(Aa,{open:h,onOpenChange:f,children:d.jsxs(ao,{className:"sm:max-w-[425px]",children:[" ",d.jsxs(lo,{children:[" ",d.jsx(co,{children:"Выбор темы оформления"})," ",d.jsx(Pa,{children:" Выберите, как должно выглядеть приложение. "})," "]})," ",d.jsxs(om,{value:a,onValueChange:z=>F(z),className:"grid gap-4 py-4",children:[" ",d.jsxs("div",{className:"flex items-center space-x-3 rounded-md border p-3 hover:bg-accent hover:text-accent-foreground transition-colors",children:[" ",d.jsx(Ms,{value:"light",id:"theme-light"})," ",d.jsxs(st,{htmlFor:"theme-light",className:"flex items-center gap-2 cursor-pointer flex-grow",children:[" ",d.jsx(sL,{className:"h-4 w-4"})," Светлая "]})," "]})," ",d.jsxs("div",{className:"flex items-center space-x-3 rounded-md border p-3 hover:bg-accent hover:text-accent-foreground transition-colors",children:[" ",d.jsx(Ms,{value:"dark",id:"theme-dark"})," ",d.jsxs(st,{htmlFor:"theme-dark",className:"flex items-center gap-2 cursor-pointer flex-grow",children:[" ",d.jsx(JO,{className:"h-4 w-4"})," Темная "]})," "]})," ",d.jsxs("div",{className:"flex items-center space-x-3 rounded-md border p-3 hover:bg-accent hover:text-accent-foreground transition-colors",children:[" ",d.jsx(Ms,{value:"system",id:"theme-system"})," ",d.jsxs(st,{htmlFor:"theme-system",className:"flex items-center gap-2 cursor-pointer flex-grow",children:[" ",d.jsx(Bx,{className:"h-4 w-4"})," Как в Telegram "]})," "]})," "]})," "]})}),d.jsx(Aa,{open:p,onOpenChange:g,children:d.jsxs(ao,{className:"sm:max-w-[425px]",children:[d.jsxs(lo,{children:[d.jsx(co,{children:"Настройки уведомлений"}),d.jsx(Pa,{children:"Включите или выключите получение уведомлений от приложения."})]}),d.jsxs(om,{value:v?"true":"false",onValueChange:E,className:"grid gap-4 py-4",children:[d.jsxs("div",{className:"flex items-center space-x-3 rounded-md border p-3 hover:bg-accent hover:text-accent-foreground transition-colors",children:[d.jsx(Ms,{value:"true",id:"notif-enabled"}),d.jsxs(st,{htmlFor:"notif-enabled",className:"flex items-center gap-2 cursor-pointer flex-grow",children:[d.jsx(Hp,{className:"h-4 w-4"})," Включены"]})]}),d.jsxs("div",{className:"flex items-center space-x-3 rounded-md border p-3 hover:bg-accent hover:text-accent-foreground transition-colors",children:[d.jsx(Ms,{value:"false",id:"notif-disabled"}),d.jsxs(st,{htmlFor:"notif-disabled",className:"flex items-center gap-2 cursor-pointer flex-grow",children:[d.jsx(Up,{className:"h-4 w-4"})," Выключены"]})]})]})]})})]})):(k.error("[ProfilePage] displayUser is null or undefined, rendering error message."),d.jsx("div",{className:"p-4 text-center text-muted-foreground",children:" Не удалось загрузить данные пользователя. Попробуйте перезайти. "}))};var fv="Checkbox",[$4,P8]=Dt(fv),[D4,z4]=$4(fv),zN=y.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:i,defaultChecked:s,required:o,disabled:a,value:l="on",onCheckedChange:c,form:u,...h}=t,[f,p]=y.useState(null),g=Pe(e,S=>p(S)),m=y.useRef(!1),w=f?u||!!f.closest("form"):!0,[v=!1,x]=Cn({prop:i,defaultProp:s,onChange:c}),b=y.useRef(v);return y.useEffect(()=>{const S=f==null?void 0:f.form;if(S){const N=()=>x(b.current);return S.addEventListener("reset",N),()=>S.removeEventListener("reset",N)}},[f,x]),d.jsxs(D4,{scope:n,state:v,disabled:a,children:[d.jsx(ae.button,{type:"button",role:"checkbox","aria-checked":vi(v)?"mixed":v,"aria-required":o,"data-state":VN(v),"data-disabled":a?"":void 0,disabled:a,value:l,...h,ref:g,onKeyDown:le(t.onKeyDown,S=>{S.key==="Enter"&&S.preventDefault()}),onClick:le(t.onClick,S=>{x(N=>vi(N)?!0:!N),w&&(m.current=S.isPropagationStopped(),m.current||S.stopPropagation())})}),w&&d.jsx(F4,{control:f,bubbles:!m.current,name:r,value:l,checked:v,required:o,disabled:a,form:u,style:{transform:"translateX(-100%)"},defaultChecked:vi(s)?!1:s})]})});zN.displayName=fv;var FN="CheckboxIndicator",BN=y.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...i}=t,s=z4(FN,n);return d.jsx(Ur,{present:r||vi(s.state)||s.state===!0,children:d.jsx(ae.span,{"data-state":VN(s.state),"data-disabled":s.disabled?"":void 0,...i,ref:e,style:{pointerEvents:"none",...t.style}})})});BN.displayName=FN;var F4=t=>{const{control:e,checked:n,bubbles:r=!0,defaultChecked:i,...s}=t,o=y.useRef(null),a=zd(n),l=$d(e);y.useEffect(()=>{const u=o.current,h=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(h,"checked").set;if(a!==n&&p){const g=new Event("click",{bubbles:r});u.indeterminate=vi(n),p.call(u,vi(n)?!1:n),u.dispatchEvent(g)}},[a,n,r]);const c=y.useRef(vi(n)?!1:n);return d.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i??c.current,...s,tabIndex:-1,ref:o,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function vi(t){return t==="indeterminate"}function VN(t){return vi(t)?"indeterminate":t?"checked":"unchecked"}var UN=zN,B4=BN;const HN=y.forwardRef(({className:t,...e},n)=>d.jsx(UN,{ref:n,className:U("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:d.jsx(B4,{className:U("flex items-center justify-center text-current"),children:d.jsx($u,{className:"h-4 w-4"})})}));HN.displayName=UN.displayName;const V4=()=>{const{fetchPortfolio:t}=ur(),{toast:e}=En(),[n,r]=y.useState(!1),[i,s]=y.useState(!1),o=async()=>{if(!i){e({title:"Требуется подтверждение",description:"Пожалуйста, подтвердите, что вы понимаете, что это обучающее приложение.",variant:"destructive"});return}if(!n){r(!0),k.log("[RegisterInitialPage] Calling createInitialBrokerAccount API...");try{const a=await bO();k.log("[RegisterInitialPage] API Response:",a),a.isSuccess?(e({title:"Счет создан!",description:"Ваш первый брокерский счет готов.",variant:"success"}),await t(!0)):(e({title:"Ошибка создания",description:a.errorMessage||"Не удалось создать счет.",variant:"destructive"}),k.error("[RegisterInitialPage] Account creation failed:",a.errorMessage))}catch(a){k.error("[RegisterInitialPage] Unexpected error in handleCreateAccount:",a),e({title:"Ошибка клиента",description:(a==null?void 0:a.message)||"Произошла непредвиденная ошибка.",variant:"destructive"})}finally{r(!1)}}};return d.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-gray-50",children:d.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white rounded-lg shadow-md",children:[d.jsx("div",{className:"text-center",children:d.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"ВНИМАНИЕ!"})}),d.jsxs("div",{className:"space-y-3 text-sm text-center text-gray-600",children:[d.jsxs("p",{children:["Данное приложение является ",d.jsx("strong",{className:"font-semibold",children:"обучающим"}),"."]}),d.jsxs("p",{children:["Эти заработанные или потерянные деньги - ",d.jsx("strong",{className:"font-semibold text-red-600",children:"не настоящие"}),"."]})]}),d.jsxs("div",{className:"flex items-center space-x-2 p-4 bg-blue-50 border border-blue-200 rounded",children:[d.jsx(HN,{id:"confirmation",checked:i,onCheckedChange:a=>s(!!a),"aria-label":"Confirm understanding"}),d.jsx(st,{htmlFor:"confirmation",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 text-gray-700",children:"Да, я понимаю, что это не настоящее инвестиционное приложение с ненастоящими деньгами."})]}),d.jsx(ke,{onClick:o,disabled:n||!i,className:"w-full",children:n?d.jsx(Ce,{size:"sm"}):"Открыть первый брокерский счет"})]})})},U4=async t=>{const e="Login failed.";if(typeof t!="string"||t.length===0)return k.error("[API/Auth] Invalid initDataString received:",t),{isSuccess:!1,errorMessage:"Invalid initData provided to API call",resultObject:null};const n=`tma ${t}`;k.log("[API/Auth] Sending request body (first 60 chars):",n.substring(0,60)+"...");try{const r=await Xe.post("/Account/LoginByTelegramUserInfo",n,{headers:{"Content-Type":"text/plain"}});return k.log("[API/Auth loginByTelegramUserInfo] Response received:",r==null?void 0:r.data),ot(r,e)}catch(r){return at(r,e)}},H4=async(t,e)=>{const n="Admin login failed.",r={Login:t,Password:e};k.log("[API/Auth loginByLoginPassword] Attempting login with:",{login:t,password:"***"});try{const i=await Xe.post("/Account/LoginByLogPassPair",r);return k.log("[API/Auth loginByLoginPassword] Raw API Response:",i),ot(i,n)}catch(i){return at(i,n)}},W4=t=>{try{if(!t)return null;const n=new URLSearchParams(t).get("user");if(n){const r=JSON.parse(decodeURIComponent(n));if(r&&typeof r=="object"&&typeof r.id=="number")return{userId:r.id,firstName:r.first_name||null,lastName:r.last_name||null,username:r.username||null,photoUrl:r.photo_url||null,isBot:r.is_bot||!1}}}catch(e){k.error("Failed to parse mock user data:",e)}return null},q4=()=>{k.log("--- RENDERING LoginPage ---");const{user:t,initData:e}=Zt(),{login:n,isAuthenticated:r,isLoading:i}=kn(),[s,o]=y.useState(!1),{toast:a}=En(),l=gt(),{IS_MOCK_MODE:c,MOCK_INIT_DATA_STRING:u}=y.useMemo(()=>{const N=Ml();return{IS_MOCK_MODE:N.useMock,MOCK_INIT_DATA_STRING:N.mockInitData||""}},[]),h=y.useMemo(()=>{const N=t;return N&&typeof N.id=="number"?{userId:N.id,firstName:N.first_name||null,lastName:N.last_name||null,username:N.username||null,photoUrl:N.photo_url||null,isBot:N.is_bot||!1}:c&&u?W4(u):null},[t,c,u]),f=y.useMemo(()=>(c?u:e)||null,[e,c,u]);if(i)return d.jsx("div",{className:"flex items-center justify-center min-h-screen",children:d.jsx(Ce,{size:"lg"})});if(r)return k.log("[LoginPage] Already authenticated, redirecting..."),d.jsx(gi,{to:"/",replace:!0});const p=async()=>{var N;if(k.log("[LoginPage] Login button clicked."),!f){a({title:"Ошибка",description:"Необходимые данные для входа недоступны.",variant:"destructive"}),k.error("[LoginPage] Login button clicked but loginDataString is null or empty.",{isMock:c});return}o(!0),k.log("[LoginPage] Calling loginByTelegramUserInfo...");try{const C=await U4(f);if(k.log("[LoginPage] Manual Login API Response Raw:",C),C.isSuccess&&((N=C.resultObject)!=null&&N.jwt))n(C.resultObject.userId,C.resultObject.jwt),a({title:"Вход выполнен",variant:"success",duration:2e3});else throw new Error(C.errorMessage||"Не удалось войти через API.")}catch(C){k.error("[LoginPage] Manual Login Exception/Error:",C),a({title:"Ошибка входа",description:(C==null?void 0:C.message)||"Неизвестная ошибка.",variant:"destructive"})}finally{o(!1)}},g=()=>{l("/admin/login")},m=!f||s,w=(h==null?void 0:h.firstName)||"Welcome",v=(h==null?void 0:h.lastName)||"",x=h==null?void 0:h.username,b=h==null?void 0:h.photoUrl,S=[w==null?void 0:w[0],v==null?void 0:v[0]].filter(Boolean).map(N=>N.toUpperCase()).join("")||"?";return k.log("[LoginPage - Before Render]",{IS_MOCK_MODE:c,loginDataStringExists:!!f,displayUserExists:!!h,displayUserValue:h,isAuthLoading:i,isAuthenticated:r}),d.jsx("div",{className:"flex items-center justify-center min-h-screen p-4 bg-gradient-to-br from-blue-50 via-white to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-blue-900/30",children:d.jsxs(bt,{className:"w-full max-w-sm shadow-xl rounded-xl",children:[d.jsxs(pr,{className:"items-center text-center pt-8 pb-6",children:[d.jsx(qd,{className:"w-24 h-24 mb-4 border-4 border-background shadow-md",children:b?d.jsx(Kd,{src:b,alt:x||"User",className:"object-cover"}):d.jsx(Yd,{className:"text-4xl font-light text-muted-foreground bg-gradient-to-br from-slate-200 to-slate-300 dark:from-gray-600 dark:to-gray-700",children:S!=="?"?S:""})}),d.jsx(Vr,{className:"text-xl font-semibold",children:w==="Welcome"?"Добро пожаловать!":`${w}${v?` ${v}`:""}`}),x&&d.jsxs(Nd,{children:["@",x]})]}),d.jsxs(Gt,{className:"flex flex-col items-center space-y-5 px-6 pb-8",children:[d.jsxs(ke,{className:"w-full h-12 text-base font-semibold shadow hover:shadow-md transition-shadow",onClick:p,disabled:m,children:[s&&d.jsx(Ce,{size:"sm"}),"Войти с помощью Telegram"]}),d.jsxs("div",{className:"relative w-full max-w-[200px]",children:[d.jsx("div",{className:"absolute inset-0 flex items-center",children:d.jsx("span",{className:"w-full border-t"})}),d.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:d.jsx("span",{className:"bg-card px-2 text-muted-foreground",children:"или"})})]}),d.jsx(ke,{variant:"link",className:"text-muted-foreground hover:text-primary h-9 px-1",onClick:g,children:"Войти по логину и паролю"})]})]})})},WN=Le.memo(({asset:t})=>d.jsx(Ad,{logoUrl:t.logoUrl,ticker:t.ticker,className:"h-10 w-10 rounded-full border"}));WN.displayName="AssetHeader";const K4=async t=>{const e="Buy operation failed.";k.log("[API/Trade] buyAssets payload:",t);try{const n=await Xe.post("/api/BrokerAccountUser/BuyAssets",t);return k.log("[API/Trade] buyAssets response:",n==null?void 0:n.data),ot(n,e)}catch(n){return at(n,e)}},Y4=async t=>{const e="Sell operation failed.";k.log("[API/Trade] sellAssets payload:",t);try{const n=await Xe.post("/api/BrokerAccountUser/SellAssets",t);return k.log("[API/Trade] sellAssets response:",n==null?void 0:n.data),ot(n,e)}catch(n){return at(n,e)}},$n=y.forwardRef(({className:t,type:e,...n},r)=>d.jsx("input",{type:e,className:U("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));$n.displayName="Input";var G4="Separator",x0="horizontal",Z4=["horizontal","vertical"],qN=y.forwardRef((t,e)=>{const{decorative:n,orientation:r=x0,...i}=t,s=X4(r)?r:x0,a=n?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return d.jsx(ae.div,{"data-orientation":s,...a,...i,ref:e})});qN.displayName=G4;function X4(t){return Z4.includes(t)}var KN=qN;const YN=y.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},i)=>d.jsx(KN,{ref:i,decorative:n,orientation:e,className:U("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));YN.displayName=KN.displayName;const Q4=(t,e)=>{if(t===null||typeof t>"u"||isNaN(t))return"---";const n=Math.max(2,Math.min(e,20));return new Intl.NumberFormat("ru-RU",{minimumFractionDigits:2,maximumFractionDigits:n}).format(t)},GN=Le.memo(({asset:t,accounts:e,disabled:n=!1})=>{var fe,W,K,ne;const{toast:r}=En(),{fetchPortfolio:i}=ur(),s=nn(Q=>Q.fetchUnreadCount),[o,a]=y.useState(""),[l,c]=y.useState(1),[u,h]=y.useState(!1),{prices:f,isLoading:p,error:g}=_d(t?[t.ticker]:[]),m=t?f.get(t.ticker):null,w=y.useMemo(()=>(e==null?void 0:e.map(Q=>Q.brokerAccount).filter(Q=>!!Q))??[],[e]),v=y.useMemo(()=>e==null?void 0:e.find(Q=>{var ge;return((ge=Q.brokerAccount)==null?void 0:ge.id.toString())===o}),[e,o]),x=y.useMemo(()=>v==null?void 0:v.portfolioItems.find(Q=>Q.assetId===(t==null?void 0:t.id)),[v,t==null?void 0:t.id]),b=y.useMemo(()=>(x==null?void 0:x.quantity)??0,[x]),S=y.useMemo(()=>{var Q;return((Q=v==null?void 0:v.portfolioItems.find(ge=>{var Te;return((Te=ge.asset)==null?void 0:Te.ticker)==="RUB"}))==null?void 0:Q.quantity)??0},[v]),N=y.useMemo(()=>Math.max(1,(t==null?void 0:t.lotSize)||1),[t]),C=y.useMemo(()=>l*N,[l,N]),_=y.useMemo(()=>m?m.price:null,[m]),P=y.useMemo(()=>(t==null?void 0:t.price)??null,[t]),I=_??P,R=y.useMemo(()=>I!==null?Math.round(I*C*100):0,[I,C]),O=y.useMemo(()=>(m==null?void 0:m.commissionFeePercent)??(t==null?void 0:t.commissionFeePercent)??0,[m,t]),j=y.useMemo(()=>Math.round(R*(O/100)),[R,O]),F=y.useMemo(()=>R+j,[R,j]),M=y.useMemo(()=>R-j,[R,j]),D=y.useMemo(()=>!p&&I!==null,[p,I]),L=b>0;y.useEffect(()=>{!o&&w.length>0&&a(w[0].id.toString())},[w,o]),y.useEffect(()=>{c(1)},[o]);const B=y.useCallback(Q=>{const ge=Q.target.value;if(ge===""){c(0);return}let Te=parseInt(ge,10);Te=Math.max(1,isNaN(Te)||Te<1?1:Te),c(Te)},[]),A=y.useCallback(Q=>{if(n)return"Актив вышел из обращения";if(u)return"Обработка...";if(!t)return"Актив не загружен";if(!D)return"Ожидание цены...";if(!o)return"Выберите счет";if(l<=0)return"Кол-во лотов > 0";if(Q==="buy"&&F>S)return"Недостаточно средств";if(Q==="sell"){if(!L)return"Нет актива для продажи";if(C>b)return"Недостаточно активов"}return null},[n,u,t,D,l,o,F,S,L,C,b]),$=A("buy"),E=$!==null,z=A("sell"),q=!L||z!==null,T=L?z:"Нет актива для продажи",J=y.useCallback(async Q=>{if(n){r({title:"Торговля недоступна",description:"Актив вышел из обращения.",variant:"destructive"});return}const ge=Q==="buy"?$:T;if(!o){r({title:"Счет не выбран",variant:"destructive"});return}if(ge){r({title:Q==="buy"?"Покупка недоступна":"Продажа недоступна",description:ge,variant:"destructive"});return}if(!t||!t.id||I===null||l<=0){r({title:"Ошибка данных",description:"Недостаточно данных для совершения сделки.",variant:"destructive"});return}h(!0);const Te={BrokerAccountId:parseInt(o,10),AssetId:t.id,Quantity:C};try{const dt=await(Q==="buy"?K4:Y4)(Te);if(dt.isSuccess)r({title:"Заявка создана",description:`${Q==="buy"?"Покупка":"Продажа"} ${l} лот(ов) ${t.ticker}`,variant:"success"}),i(!0),s(!0),k.log("[AssetTradeForm] Trade successful, triggered portfolio and unread count fetch."),c(1);else throw new Error(dt.errorMessage||"Операция не удалась.")}catch(nt){r({title:"Ошибка заявки",description:nt.message||"Неизвестная ошибка.",variant:"destructive"})}finally{h(!1)}},[n,t,o,l,N,C,I,$,T,r,i,s]),he=y.useCallback(Q=>Q?d.jsx(ni,{value:Q.id.toString(),children:d.jsxs("div",{className:"flex justify-between w-full items-center",children:[d.jsx("span",{children:Q.title.replace(/["«»]/g,"")}),d.jsxs("span",{className:"text-xs text-muted-foreground ml-2",children:[" ",Q.telegramUserId||"N/A"," "]})]})},Q.id):null,[]);if(!t)return d.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Актив не найден."});let ce=2;t&&typeof t.decimals=="number"&&t.decimals>=0?ce=t.decimals:t&&k.warn(`[AssetTradeForm] Asset ${t.ticker} has invalid decimals: ${t.decimals}. Using default (2) for input formatting.`);const re=I!==null&&!isNaN(I)?Q4(I,ce):p?"Загрузка...":"---";return d.jsxs("div",{className:U("space-y-5 relative",n&&"opacity-60 pointer-events-none"),children:[n&&d.jsx("div",{className:"absolute inset-0 bg-background/30 backdrop-blur-sm z-10 flex items-center justify-center rounded-md",children:d.jsxs("div",{className:"flex items-center gap-2 p-3 bg-destructive/10 border border-destructive/30 text-destructive rounded-lg shadow",children:[d.jsx(DO,{size:16}),d.jsx("span",{className:"text-sm font-medium",children:"Торговля недоступна"})]})}),d.jsxs("div",{children:[d.jsx(st,{htmlFor:"trade-account",className:"text-xs text-muted-foreground mb-1 block",children:"На счет"}),d.jsxs(im,{value:o,onValueChange:a,disabled:n||w.length<=0||u,children:[d.jsx(Wu,{id:"trade-account",className:"h-auto py-2.5 px-3 justify-start text-left",children:v&&e?d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("span",{className:"flex items-center justify-center h-7 w-7 bg-muted rounded text-xs font-mono text-muted-foreground flex-shrink-0",children:((W=(fe=v.brokerAccount)==null?void 0:fe.type)==null?void 0:W.substring(0,3).toUpperCase())||"ACC"}),d.jsxs("div",{className:"min-w-0",children:[d.jsxs("p",{className:"text-sm font-medium leading-tight truncate",children:[" ",(K=v.brokerAccount)==null?void 0:K.title.replace(/["«»]/g,"")," "]}),d.jsxs("p",{className:"text-xs leading-tight text-muted-foreground",children:[" ",((ne=v.brokerAccount)==null?void 0:ne.telegramUserId)||"N/A"," "]})]})]}):d.jsx("span",{className:"text-muted-foreground text-sm",children:w.length>0?"Выберите счет...":"Нет доступных счетов"})}),d.jsxs(qu,{children:[w.map(Q=>he(Q)),w.length===0&&d.jsx(ni,{value:"-",disabled:!0,children:"Нет доступных счетов"})]})]}),v&&d.jsxs("div",{className:"text-xs text-muted-foreground mt-1.5 px-1 flex justify-between",children:[d.jsxs("span",{children:["Доступно: ",To(S)]}),b>0&&d.jsxs("span",{children:["В портфеле: ",oi(b,0)," шт."]})]})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-baseline mb-1",children:[d.jsx(st,{htmlFor:"quantityLots",className:"text-sm font-medium",children:"Количество лотов"}),d.jsxs("span",{className:"text-xs text-muted-foreground",children:[oi(N,0)," шт. в лоте"]})]}),d.jsx($n,{id:"quantityLots",type:"number",value:l===0?"":l.toString(),onChange:B,min:1,step:1,className:U("h-11 text-base"),disabled:n||u})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-baseline mb-1",children:[" ",d.jsx(st,{className:"text-sm font-medium",children:"Цена"})," ",d.jsx("span",{className:"text-xs text-muted-foreground",children:"за 1 шт."})," "]}),d.jsxs("div",{className:"relative",children:[d.jsx($n,{type:"text",value:re,readOnly:!0,className:U("h-11 text-base pr-10 cursor-default","bg-muted/60 border-muted/80 text-muted-foreground","focus-visible:ring-0 focus-visible:ring-offset-0 focus-visible:border-muted/80",n&&"opacity-70")}),d.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:"₽"})]}),g&&d.jsxs("p",{className:"text-xs text-destructive mt-1.5 px-1 flex items-center gap-1",children:[d.jsx(BO,{size:14})," Ошибка загрузки цены"]}),!g&&d.jsx("p",{className:"text-xs text-muted-foreground mt-1.5 px-1",children:"Рыночная заявка по лучшей доступной цене."})]}),d.jsxs("div",{className:U("space-y-1.5 text-sm bg-card p-3 rounded-md border",n&&"opacity-60"),children:[d.jsxs("div",{className:"flex justify-between text-muted-foreground",children:[d.jsxs("span",{children:["Стоимость (",oi(C,0)," шт.)"]}),d.jsx("span",{children:I===null?"-":d.jsx(ft,{value:R,includeSymbol:!1,asset:t})})]}),d.jsxs("div",{className:"flex justify-between text-muted-foreground",children:[d.jsxs("span",{children:["Комиссия ≈ ",oi(O,2),"%"]}),d.jsx("span",{children:I===null?"-":d.jsx(ft,{value:j,includeSymbol:!1,asset:t})})]}),d.jsx(YN,{className:"my-2 bg-border/50"}),d.jsxs("div",{className:U("flex justify-between font-medium text-sm pt-1 text-success transition-opacity duration-200"),children:[d.jsx("span",{children:"Итог (покупка)"}),I===null?"-":d.jsx(ft,{value:F,asset:t})]}),L&&d.jsxs("div",{className:U("flex justify-between font-medium text-sm text-destructive transition-opacity duration-200"),children:[d.jsx("span",{children:"Итог (продажа)"}),I===null?"-":d.jsx(ft,{value:M,asset:t})]})]}),t.ticker!=="RUB"&&!n&&d.jsx("div",{className:U("fixed bottom-0 left-0 right-0 z-50 p-3 bg-background/95 backdrop-blur-sm border-t border-border/50","pb-[calc(0.75rem+env(safe-area-inset-bottom,0px))]"),children:d.jsxs("div",{className:"flex gap-3",children:[d.jsx(ke,{variant:"destructive",className:"flex-1 h-12 text-base font-semibold transition-opacity",onClick:()=>J("sell"),disabled:q,title:T||"",children:u&&l>0?d.jsx(Ce,{size:"sm"}):"Продать"}),d.jsx(ke,{variant:"success",className:"flex-1 h-12 text-base font-semibold transition-opacity",onClick:()=>J("buy"),disabled:E,title:$||"",children:u&&l>0?d.jsx(Ce,{size:"sm"}):"Купить"})]})})]})});GN.displayName="AssetTradeForm";function Ve(t){var e=t.width,n=t.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(n<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:n}}function Zi(t,e){return t.width===e.width&&t.height===e.height}var J4=function(){function t(e){var n=this;this._resolutionListener=function(){return n._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=e,this._installResolutionListener()}return t.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(t.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(e){var n=this,r={next:e};return this._observers.push(r),{unsubscribe:function(){n._observers=n._observers.filter(function(i){return i!==r})}}},t.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var e=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(e,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){var e=this;this._observers.forEach(function(n){return n.next(e._window.devicePixelRatio)}),this._reinstallResolutionListener()},t}();function e3(t){return new J4(t)}var t3=function(){function t(e,n,r){var i;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=e,this._canvasElementClientSize=Ve({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=n??function(s){return s},this._allowResizeObserver=(i=r==null?void 0:r.allowResizeObserver)!==null&&i!==void 0?i:!0,this._chooseAndInitObserver()}return t.prototype.dispose=function(){var e,n;if(this._canvasElement===null)throw new Error("Object is disposed");(e=this._canvasElementResizeObserver)===null||e===void 0||e.disconnect(),this._canvasElementResizeObserver=null,(n=this._devicePixelRatioObservable)===null||n===void 0||n.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(t.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bitmapSize",{get:function(){return Ve({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),t.prototype.resizeCanvasElement=function(e){this._canvasElementClientSize=Ve(e),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},t.prototype.subscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(n){return n!==e})},Object.defineProperty(t.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),t.prototype.subscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(n){return n!==e})},t.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var e=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(e),this._emitSuggestedBitmapSizeChanged(e,this._suggestedBitmapSize)}},t.prototype._resizeBitmap=function(e){var n=this.bitmapSize;Zi(n,e)||(this.canvasElement.width=e.width,this.canvasElement.height=e.height,this._emitBitmapSizeChanged(n,e))},t.prototype._emitBitmapSizeChanged=function(e,n){var r=this;this._bitmapSizeChangedListeners.forEach(function(i){return i.call(r,e,n)})},t.prototype._suggestNewBitmapSize=function(e){var n=this._suggestedBitmapSize,r=Ve(this._transformBitmapSize(e,this._canvasElementClientSize)),i=Zi(this.bitmapSize,r)?null:r;n===null&&i===null||n!==null&&i!==null&&Zi(n,i)||(this._suggestedBitmapSize=i,this._emitSuggestedBitmapSizeChanged(n,i))},t.prototype._emitSuggestedBitmapSizeChanged=function(e,n){var r=this;this._suggestedBitmapSizeChangedListeners.forEach(function(i){return i.call(r,e,n)})},t.prototype._chooseAndInitObserver=function(){var e=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}r3().then(function(n){return n?e._initResizeObserver():e._initDevicePixelRatioObservable()})},t.prototype._initDevicePixelRatioObservable=function(){var e=this;if(this._canvasElement!==null){var n=w0(this._canvasElement);if(n===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=e3(n),this._devicePixelRatioObservable.subscribe(function(){return e._invalidateBitmapSize()}),this._invalidateBitmapSize()}},t.prototype._invalidateBitmapSize=function(){var e,n;if(this._canvasElement!==null){var r=w0(this._canvasElement);if(r!==null){var i=(n=(e=this._devicePixelRatioObservable)===null||e===void 0?void 0:e.value)!==null&&n!==void 0?n:r.devicePixelRatio,s=this._canvasElement.getClientRects(),o=s[0]!==void 0?i3(s[0],i):Ve({width:this._canvasElementClientSize.width*i,height:this._canvasElementClientSize.height*i});this._suggestNewBitmapSize(o)}}},t.prototype._initResizeObserver=function(){var e=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(n){var r=n.find(function(o){return o.target===e._canvasElement});if(!(!r||!r.devicePixelContentBoxSize||!r.devicePixelContentBoxSize[0])){var i=r.devicePixelContentBoxSize[0],s=Ve({width:i.inlineSize,height:i.blockSize});e._suggestNewBitmapSize(s)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},t}();function n3(t,e){return new t3(t,e.transform,e.options)}function w0(t){return t.ownerDocument.defaultView}function r3(){return new Promise(function(t){var e=new ResizeObserver(function(n){t(n.every(function(r){return"devicePixelContentBoxSize"in r})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function i3(t,e){return Ve({width:Math.round(t.left*e+t.width*e)-Math.round(t.left*e),height:Math.round(t.top*e+t.height*e)-Math.round(t.top*e)})}var s3=function(){function t(e,n,r){if(n.width===0||n.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=n,r.width===0||r.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=r,this._context=e}return t.prototype.useMediaCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),e({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},t.prototype.useBitmapCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),e({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(t.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),t}();function us(t,e){var n=t.canvasElementClientSize;if(n.width===0||n.height===0)return null;var r=t.bitmapSize;if(r.width===0||r.height===0)return null;var i=t.canvasElement.getContext("2d",e);return i===null?null:new s3(i,n,r)}/*!
 * @license
 * TradingView Lightweight Charts™ v4.2.3
 * Copyright (c) 2025 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const o3={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},a3={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},l3={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},c3={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},u3={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},d3={color:"#26a69a",base:0},ZN={color:"#2196f3"},XN={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var b0,S0;function ds(t,e){const n={0:[],1:[t.lineWidth,t.lineWidth],2:[2*t.lineWidth,2*t.lineWidth],3:[6*t.lineWidth,6*t.lineWidth],4:[t.lineWidth,4*t.lineWidth]}[e];t.setLineDash(n)}function QN(t,e,n,r){t.beginPath();const i=t.lineWidth%2?.5:0;t.moveTo(n,e+i),t.lineTo(r,e+i),t.stroke()}function _i(t,e){if(!t)throw new Error("Assertion failed"+(e?": "+e:""))}function Ot(t){if(t===void 0)throw new Error("Value is undefined");return t}function G(t){if(t===null)throw new Error("Value is null");return t}function Ys(t){return G(Ot(t))}(function(t){t[t.Simple=0]="Simple",t[t.WithSteps=1]="WithSteps",t[t.Curved=2]="Curved"})(b0||(b0={})),function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(S0||(S0={}));const k0={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function mn(t){return t<0?0:t>255?255:Math.round(t)||0}function JN(t){return t<=0||t>1?Math.min(Math.max(t,0),1):Math.round(1e4*t)/1e4}const h3=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,f3=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,p3=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,m3=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d*\.?\d+)\s*\)$/;function bl(t){(t=t.toLowerCase())in k0&&(t=k0[t]);{const e=m3.exec(t)||p3.exec(t);if(e)return[mn(parseInt(e[1],10)),mn(parseInt(e[2],10)),mn(parseInt(e[3],10)),JN(e.length<5?1:parseFloat(e[4]))]}{const e=f3.exec(t);if(e)return[mn(parseInt(e[1],16)),mn(parseInt(e[2],16)),mn(parseInt(e[3],16)),1]}{const e=h3.exec(t);if(e)return[mn(17*parseInt(e[1],16)),mn(17*parseInt(e[2],16)),mn(17*parseInt(e[3],16)),1]}throw new Error(`Cannot parse color: ${t}`)}function e_(t){return .199*t[0]+.687*t[1]+.114*t[2]}function Xd(t){const e=bl(t);return{t:`rgb(${e[0]}, ${e[1]}, ${e[2]})`,i:e_(e)>160?"black":"white"}}class et{constructor(){this.h=[]}l(e,n,r){const i={o:e,_:n,u:r===!0};this.h.push(i)}v(e){const n=this.h.findIndex(r=>e===r.o);n>-1&&this.h.splice(n,1)}p(e){this.h=this.h.filter(n=>n._!==e)}m(e,n,r){const i=[...this.h];this.h=this.h.filter(s=>!s.u),i.forEach(s=>s.o(e,n,r))}M(){return this.h.length>0}S(){this.h=[]}}function Un(t,...e){for(const n of e)for(const r in n)n[r]!==void 0&&Object.prototype.hasOwnProperty.call(n,r)&&!["__proto__","constructor","prototype"].includes(r)&&(typeof n[r]!="object"||t[r]===void 0||Array.isArray(n[r])?t[r]=n[r]:Un(t[r],n[r]));return t}function nr(t){return typeof t=="number"&&isFinite(t)}function Sl(t){return typeof t=="number"&&t%1==0}function Vl(t){return typeof t=="string"}function yc(t){return typeof t=="boolean"}function Ar(t){const e=t;if(!e||typeof e!="object")return e;let n,r,i;for(r in n=Array.isArray(e)?[]:{},e)e.hasOwnProperty(r)&&(i=e[r],n[r]=i&&typeof i=="object"?Ar(i):i);return n}function g3(t){return t!==null}function kl(t){return t===null?void 0:t}const pv="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function jo(t,e,n){return e===void 0&&(e=pv),`${n=n!==void 0?`${n} `:""}${t}px ${e}`}class v3{constructor(e){this.k={C:1,T:5,P:NaN,R:"",D:"",V:"",O:"",B:0,A:0,I:0,L:0,N:0},this.F=e}W(){const e=this.k,n=this.j(),r=this.H();return e.P===n&&e.D===r||(e.P=n,e.D=r,e.R=jo(n,r),e.L=2.5/12*n,e.B=e.L,e.A=n/12*e.T,e.I=n/12*e.T,e.N=0),e.V=this.$(),e.O=this.U(),this.k}$(){return this.F.W().layout.textColor}U(){return this.F.q()}j(){return this.F.W().layout.fontSize}H(){return this.F.W().layout.fontFamily}}class mv{constructor(){this.Y=[]}Z(e){this.Y=e}X(e,n,r){this.Y.forEach(i=>{i.X(e,n,r)})}}class Kn{X(e,n,r){e.useBitmapCoordinateSpace(i=>this.K(i,n,r))}}class y3 extends Kn{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K({context:e,horizontalPixelRatio:n,verticalPixelRatio:r}){if(this.G===null||this.G.tt===null)return;const i=this.G.tt,s=this.G,o=Math.max(1,Math.floor(n))%2/2,a=l=>{e.beginPath();for(let c=i.to-1;c>=i.from;--c){const u=s.it[c],h=Math.round(u.nt*n)+o,f=u.st*r,p=l*r+o;e.moveTo(h,f),e.arc(h,f,p,0,2*Math.PI)}e.fill()};s.et>0&&(e.fillStyle=s.rt,a(s.ht+s.et)),e.fillStyle=s.lt,a(s.ht)}}function x3(){return{it:[{nt:0,st:0,ot:0,_t:0}],lt:"",rt:"",ht:0,et:0,tt:null}}const w3={from:0,to:1};class b3{constructor(e,n){this.ut=new mv,this.ct=[],this.dt=[],this.ft=!0,this.F=e,this.vt=n,this.ut.Z(this.ct)}bt(e){const n=this.F.wt();n.length!==this.ct.length&&(this.dt=n.map(x3),this.ct=this.dt.map(r=>{const i=new y3;return i.J(r),i}),this.ut.Z(this.ct)),this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.ut}Mt(){const e=this.vt.W().mode===2,n=this.F.wt(),r=this.vt.xt(),i=this.F.St();n.forEach((s,o)=>{var a;const l=this.dt[o],c=s.kt(r);if(e||c===null||!s.yt())return void(l.tt=null);const u=G(s.Ct());l.lt=c.Tt,l.ht=c.ht,l.et=c.Pt,l.it[0]._t=c._t,l.it[0].st=s.Dt().Rt(c._t,u.Vt),l.rt=(a=c.Ot)!==null&&a!==void 0?a:this.F.Bt(l.it[0].st/s.Dt().At()),l.it[0].ot=r,l.it[0].nt=i.It(r),l.tt=w3})}}class S3 extends Kn{constructor(e){super(),this.zt=e}K({context:e,bitmapSize:n,horizontalPixelRatio:r,verticalPixelRatio:i}){if(this.zt===null)return;const s=this.zt.Lt.yt,o=this.zt.Et.yt;if(!s&&!o)return;const a=Math.round(this.zt.nt*r),l=Math.round(this.zt.st*i);e.lineCap="butt",s&&a>=0&&(e.lineWidth=Math.floor(this.zt.Lt.et*r),e.strokeStyle=this.zt.Lt.V,e.fillStyle=this.zt.Lt.V,ds(e,this.zt.Lt.Nt),function(c,u,h,f){c.beginPath();const p=c.lineWidth%2?.5:0;c.moveTo(u+p,h),c.lineTo(u+p,f),c.stroke()}(e,a,0,n.height)),o&&l>=0&&(e.lineWidth=Math.floor(this.zt.Et.et*i),e.strokeStyle=this.zt.Et.V,e.fillStyle=this.zt.Et.V,ds(e,this.zt.Et.Nt),QN(e,l,0,n.width))}}class k3{constructor(e){this.ft=!0,this.Ft={Lt:{et:1,Nt:0,V:"",yt:!1},Et:{et:1,Nt:0,V:"",yt:!1},nt:0,st:0},this.Wt=new S3(this.Ft),this.jt=e}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const e=this.jt.yt(),n=G(this.jt.Ht()),r=n.$t().W().crosshair,i=this.Ft;if(r.mode===2)return i.Et.yt=!1,void(i.Lt.yt=!1);i.Et.yt=e&&this.jt.Ut(n),i.Lt.yt=e&&this.jt.qt(),i.Et.et=r.horzLine.width,i.Et.Nt=r.horzLine.style,i.Et.V=r.horzLine.color,i.Lt.et=r.vertLine.width,i.Lt.Nt=r.vertLine.style,i.Lt.V=r.vertLine.color,i.nt=this.jt.Yt(),i.st=this.jt.Zt()}}function C3(t,e,n,r,i,s){t.fillRect(e+s,n,r-2*s,s),t.fillRect(e+s,n+i-s,r-2*s,s),t.fillRect(e,n,s,i),t.fillRect(e+r-s,n,s,i)}function Qd(t,e,n,r,i,s){t.save(),t.globalCompositeOperation="copy",t.fillStyle=s,t.fillRect(e,n,r,i),t.restore()}function C0(t,e,n,r,i,s){t.beginPath(),t.roundRect?t.roundRect(e,n,r,i,s):(t.lineTo(e+r-s[1],n),s[1]!==0&&t.arcTo(e+r,n,e+r,n+s[1],s[1]),t.lineTo(e+r,n+i-s[2]),s[2]!==0&&t.arcTo(e+r,n+i,e+r-s[2],n+i,s[2]),t.lineTo(e+s[3],n+i),s[3]!==0&&t.arcTo(e,n+i,e,n+i-s[3],s[3]),t.lineTo(e,n+s[0]),s[0]!==0&&t.arcTo(e,n,e+s[0],n,s[0]))}function E0(t,e,n,r,i,s,o=0,a=[0,0,0,0],l=""){if(t.save(),!o||!l||l===s)return C0(t,e,n,r,i,a),t.fillStyle=s,t.fill(),void t.restore();const c=o/2;var u;C0(t,e+c,n+c,r-o,i-o,(u=-c,a.map(h=>h===0?h:h+u))),s!=="transparent"&&(t.fillStyle=s,t.fill()),l!=="transparent"&&(t.lineWidth=o,t.strokeStyle=l,t.closePath(),t.stroke()),t.restore()}function t_(t,e,n,r,i,s,o){t.save(),t.globalCompositeOperation="copy";const a=t.createLinearGradient(0,0,0,i);a.addColorStop(0,s),a.addColorStop(1,o),t.fillStyle=a,t.fillRect(e,n,r,i),t.restore()}class N0{constructor(e,n){this.J(e,n)}J(e,n){this.zt=e,this.Xt=n}At(e,n){return this.zt.yt?e.P+e.L+e.B:0}X(e,n,r,i){if(!this.zt.yt||this.zt.Kt.length===0)return;const s=this.zt.V,o=this.Xt.t,a=e.useBitmapCoordinateSpace(l=>{const c=l.context;c.font=n.R;const u=this.Gt(l,n,r,i),h=u.Jt;return u.Qt?E0(c,h.ti,h.ii,h.ni,h.si,o,h.ei,[h.ht,0,0,h.ht],o):E0(c,h.ri,h.ii,h.ni,h.si,o,h.ei,[0,h.ht,h.ht,0],o),this.zt.hi&&(c.fillStyle=s,c.fillRect(h.ri,h.li,h.ai-h.ri,h.oi)),this.zt._i&&(c.fillStyle=n.O,c.fillRect(u.Qt?h.ui-h.ei:0,h.ii,h.ei,h.ci-h.ii)),u});e.useMediaCoordinateSpace(({context:l})=>{const c=a.di;l.font=n.R,l.textAlign=a.Qt?"right":"left",l.textBaseline="middle",l.fillStyle=s,l.fillText(this.zt.Kt,c.fi,(c.ii+c.ci)/2+c.pi)})}Gt(e,n,r,i){var s;const{context:o,bitmapSize:a,mediaSize:l,horizontalPixelRatio:c,verticalPixelRatio:u}=e,h=this.zt.hi||!this.zt.mi?n.T:0,f=this.zt.bi?n.C:0,p=n.L+this.Xt.wi,g=n.B+this.Xt.gi,m=n.A,w=n.I,v=this.zt.Kt,x=n.P,b=r.Mi(o,v),S=Math.ceil(r.xi(o,v)),N=x+p+g,C=n.C+m+w+S+h,_=Math.max(1,Math.floor(u));let P=Math.round(N*u);P%2!=_%2&&(P+=1);const I=f>0?Math.max(1,Math.floor(f*c)):0,R=Math.round(C*c),O=Math.round(h*c),j=(s=this.Xt.Si)!==null&&s!==void 0?s:this.Xt.ki,F=Math.round(j*u)-Math.floor(.5*u),M=Math.floor(F+_/2-P/2),D=M+P,L=i==="right",B=L?l.width-f:f,A=L?a.width-I:I;let $,E,z;return L?($=A-R,E=A-O,z=B-h-m-f):($=A+R,E=A+O,z=B+h+m),{Qt:L,Jt:{ii:M,li:F,ci:D,ni:R,si:P,ht:2*c,ei:I,ti:$,ri:A,ai:E,oi:_,ui:a.width},di:{ii:M/u,ci:D/u,fi:z,pi:b}}}}class Jd{constructor(e){this.yi={ki:0,t:"#000",gi:0,wi:0},this.Ci={Kt:"",yt:!1,hi:!0,mi:!1,Ot:"",V:"#FFF",_i:!1,bi:!1},this.Ti={Kt:"",yt:!1,hi:!1,mi:!0,Ot:"",V:"#FFF",_i:!0,bi:!0},this.ft=!0,this.Pi=new(e||N0)(this.Ci,this.yi),this.Ri=new(e||N0)(this.Ti,this.yi)}Kt(){return this.Di(),this.Ci.Kt}ki(){return this.Di(),this.yi.ki}bt(){this.ft=!0}At(e,n=!1){return Math.max(this.Pi.At(e,n),this.Ri.At(e,n))}Vi(){return this.yi.Si||0}Oi(e){this.yi.Si=e}Bi(){return this.Di(),this.Ci.yt||this.Ti.yt}Ai(){return this.Di(),this.Ci.yt}gt(e){return this.Di(),this.Ci.hi=this.Ci.hi&&e.W().ticksVisible,this.Ti.hi=this.Ti.hi&&e.W().ticksVisible,this.Pi.J(this.Ci,this.yi),this.Ri.J(this.Ti,this.yi),this.Pi}Ii(){return this.Di(),this.Pi.J(this.Ci,this.yi),this.Ri.J(this.Ti,this.yi),this.Ri}Di(){this.ft&&(this.Ci.hi=!0,this.Ti.hi=!1,this.zi(this.Ci,this.Ti,this.yi))}}class E3 extends Jd{constructor(e,n,r){super(),this.jt=e,this.Li=n,this.Ei=r}zi(e,n,r){if(e.yt=!1,this.jt.W().mode===2)return;const i=this.jt.W().horzLine;if(!i.labelVisible)return;const s=this.Li.Ct();if(!this.jt.yt()||this.Li.Ni()||s===null)return;const o=Xd(i.labelBackgroundColor);r.t=o.t,e.V=o.i;const a=2/12*this.Li.P();r.wi=a,r.gi=a;const l=this.Ei(this.Li);r.ki=l.ki,e.Kt=this.Li.Fi(l._t,s),e.yt=!0}}const N3=/[1-9]/g;class n_{constructor(){this.zt=null}J(e){this.zt=e}X(e,n){if(this.zt===null||this.zt.yt===!1||this.zt.Kt.length===0)return;const r=e.useMediaCoordinateSpace(({context:f})=>(f.font=n.R,Math.round(n.Wi.xi(f,G(this.zt).Kt,N3))));if(r<=0)return;const i=n.ji,s=r+2*i,o=s/2,a=this.zt.Hi;let l=this.zt.ki,c=Math.floor(l-o)+.5;c<0?(l+=Math.abs(0-c),c=Math.floor(l-o)+.5):c+s>a&&(l-=Math.abs(a-(c+s)),c=Math.floor(l-o)+.5);const u=c+s,h=Math.ceil(0+n.C+n.T+n.L+n.P+n.B);e.useBitmapCoordinateSpace(({context:f,horizontalPixelRatio:p,verticalPixelRatio:g})=>{const m=G(this.zt);f.fillStyle=m.t;const w=Math.round(c*p),v=Math.round(0*g),x=Math.round(u*p),b=Math.round(h*g),S=Math.round(2*p);if(f.beginPath(),f.moveTo(w,v),f.lineTo(w,b-S),f.arcTo(w,b,w+S,b,S),f.lineTo(x-S,b),f.arcTo(x,b,x,b-S,S),f.lineTo(x,v),f.fill(),m.hi){const N=Math.round(m.ki*p),C=v,_=Math.round((C+n.T)*g);f.fillStyle=m.V;const P=Math.max(1,Math.floor(p)),I=Math.floor(.5*p);f.fillRect(N-I,C,P,_-C)}}),e.useMediaCoordinateSpace(({context:f})=>{const p=G(this.zt),g=0+n.C+n.T+n.L+n.P/2;f.font=n.R,f.textAlign="left",f.textBaseline="middle",f.fillStyle=p.V;const m=n.Wi.Mi(f,"Apr0");f.translate(c+i,g+m),f.fillText(p.Kt,0,0)})}}class _3{constructor(e,n,r){this.ft=!0,this.Wt=new n_,this.Ft={yt:!1,t:"#4c525e",V:"white",Kt:"",Hi:0,ki:NaN,hi:!0},this.vt=e,this.$i=n,this.Ei=r}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt.J(this.Ft),this.Wt}Mt(){const e=this.Ft;if(e.yt=!1,this.vt.W().mode===2)return;const n=this.vt.W().vertLine;if(!n.labelVisible)return;const r=this.$i.St();if(r.Ni())return;e.Hi=r.Hi();const i=this.Ei();if(i===null)return;e.ki=i.ki;const s=r.Ui(this.vt.xt());e.Kt=r.qi(G(s)),e.yt=!0;const o=Xd(n.labelBackgroundColor);e.t=o.t,e.V=o.i,e.hi=r.W().ticksVisible}}class gv{constructor(){this.Yi=null,this.Zi=0}Xi(){return this.Zi}Ki(e){this.Zi=e}Dt(){return this.Yi}Gi(e){this.Yi=e}Ji(e){return[]}Qi(){return[]}yt(){return!0}}var lm;(function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet",t[t.Hidden=2]="Hidden"})(lm||(lm={}));class T3 extends gv{constructor(e,n){super(),this.tn=null,this.nn=NaN,this.sn=0,this.en=!0,this.rn=new Map,this.hn=!1,this.ln=NaN,this.an=NaN,this._n=NaN,this.un=NaN,this.$i=e,this.cn=n,this.dn=new b3(e,this),this.fn=((i,s)=>o=>{const a=s(),l=i();if(o===G(this.tn).vn())return{_t:l,ki:a};{const c=G(o.Ct());return{_t:o.pn(a,c),ki:a}}})(()=>this.nn,()=>this.an);const r=((i,s)=>()=>{const o=this.$i.St().mn(i()),a=s();return o&&Number.isFinite(a)?{ot:o,ki:a}:null})(()=>this.sn,()=>this.Yt());this.bn=new _3(this,e,r),this.wn=new k3(this)}W(){return this.cn}gn(e,n){this._n=e,this.un=n}Mn(){this._n=NaN,this.un=NaN}xn(){return this._n}Sn(){return this.un}kn(e,n,r){this.hn||(this.hn=!0),this.en=!0,this.yn(e,n,r)}xt(){return this.sn}Yt(){return this.ln}Zt(){return this.an}yt(){return this.en}Cn(){this.en=!1,this.Tn(),this.nn=NaN,this.ln=NaN,this.an=NaN,this.tn=null,this.Mn()}Pn(e){return this.tn!==null?[this.wn,this.dn]:[]}Ut(e){return e===this.tn&&this.cn.horzLine.visible}qt(){return this.cn.vertLine.visible}Rn(e,n){this.en&&this.tn===e||this.rn.clear();const r=[];return this.tn===e&&r.push(this.Dn(this.rn,n,this.fn)),r}Qi(){return this.en?[this.bn]:[]}Ht(){return this.tn}Vn(){this.wn.bt(),this.rn.forEach(e=>e.bt()),this.bn.bt(),this.dn.bt()}On(e){return e&&!e.vn().Ni()?e.vn():null}yn(e,n,r){this.Bn(e,n,r)&&this.Vn()}Bn(e,n,r){const i=this.ln,s=this.an,o=this.nn,a=this.sn,l=this.tn,c=this.On(r);this.sn=e,this.ln=isNaN(e)?NaN:this.$i.St().It(e),this.tn=r;const u=c!==null?c.Ct():null;return c!==null&&u!==null?(this.nn=n,this.an=c.Rt(n,u)):(this.nn=NaN,this.an=NaN),i!==this.ln||s!==this.an||a!==this.sn||o!==this.nn||l!==this.tn}Tn(){const e=this.$i.wt().map(r=>r.In().An()).filter(g3),n=e.length===0?null:Math.max(...e);this.sn=n!==null?n:NaN}Dn(e,n,r){let i=e.get(n);return i===void 0&&(i=new E3(this,n,r),e.set(n,i)),i}}function eh(t){return t==="left"||t==="right"}class yt{constructor(e){this.zn=new Map,this.Ln=[],this.En=e}Nn(e,n){const r=function(i,s){return i===void 0?s:{Fn:Math.max(i.Fn,s.Fn),Wn:i.Wn||s.Wn}}(this.zn.get(e),n);this.zn.set(e,r)}jn(){return this.En}Hn(e){const n=this.zn.get(e);return n===void 0?{Fn:this.En}:{Fn:Math.max(this.En,n.Fn),Wn:n.Wn}}$n(){this.Un(),this.Ln=[{qn:0}]}Yn(e){this.Un(),this.Ln=[{qn:1,Vt:e}]}Zn(e){this.Xn(),this.Ln.push({qn:5,Vt:e})}Un(){this.Xn(),this.Ln.push({qn:6})}Kn(){this.Un(),this.Ln=[{qn:4}]}Gn(e){this.Un(),this.Ln.push({qn:2,Vt:e})}Jn(e){this.Un(),this.Ln.push({qn:3,Vt:e})}Qn(){return this.Ln}ts(e){for(const n of e.Ln)this.ns(n);this.En=Math.max(this.En,e.En),e.zn.forEach((n,r)=>{this.Nn(r,n)})}static ss(){return new yt(2)}static es(){return new yt(3)}ns(e){switch(e.qn){case 0:this.$n();break;case 1:this.Yn(e.Vt);break;case 2:this.Gn(e.Vt);break;case 3:this.Jn(e.Vt);break;case 4:this.Kn();break;case 5:this.Zn(e.Vt);break;case 6:this.Xn()}}Xn(){const e=this.Ln.findIndex(n=>n.qn===5);e!==-1&&this.Ln.splice(e,1)}}const _0=".";function Pr(t,e){if(!nr(t))return"n/a";if(!Sl(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return e===0?t.toString():("0000000000000000"+t.toString()).slice(-e)}class th{constructor(e,n){if(n||(n=1),nr(e)&&Sl(e)||(e=100),e<0)throw new TypeError("invalid base");this.Li=e,this.rs=n,this.hs()}format(e){const n=e<0?"−":"";return e=Math.abs(e),n+this.ls(e)}hs(){if(this._s=0,this.Li>0&&this.rs>0){let e=this.Li;for(;e>1;)e/=10,this._s++}}ls(e){const n=this.Li/this.rs;let r=Math.floor(e),i="";const s=this._s!==void 0?this._s:NaN;if(n>1){let o=+(Math.round(e*n)-r*n).toFixed(this._s);o>=n&&(o-=n,r+=1),i=_0+Pr(+o.toFixed(this._s)*this.rs,s)}else r=Math.round(r*n)/n,s>0&&(i=_0+Pr(0,s));return r.toFixed(0)+i}}class r_ extends th{constructor(e=100){super(e)}format(e){return`${super.format(e)}%`}}class A3{constructor(e){this.us=e}format(e){let n="";return e<0&&(n="-",e=-e),e<995?n+this.cs(e):e<999995?n+this.cs(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),n+this.cs(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),n+this.cs(e/1e9)+"B")}cs(e){let n;const r=Math.pow(10,this.us);return n=(e=Math.round(e*r)/r)>=1e-15&&e<1?e.toFixed(this.us).replace(/\.?0+$/,""):String(e),n.replace(/(\.[1-9]*)0+$/,(i,s)=>s)}}function i_(t,e,n,r,i,s,o){if(e.length===0||r.from>=e.length||r.to<=0)return;const{context:a,horizontalPixelRatio:l,verticalPixelRatio:c}=t,u=e[r.from];let h=s(t,u),f=u;if(r.to-r.from<2){const p=i/2;a.beginPath();const g={nt:u.nt-p,st:u.st},m={nt:u.nt+p,st:u.st};a.moveTo(g.nt*l,g.st*c),a.lineTo(m.nt*l,m.st*c),o(t,h,g,m)}else{const p=(m,w)=>{o(t,h,f,w),a.beginPath(),h=m,f=w};let g=f;a.beginPath(),a.moveTo(u.nt*l,u.st*c);for(let m=r.from+1;m<r.to;++m){g=e[m];const w=s(t,g);switch(n){case 0:a.lineTo(g.nt*l,g.st*c);break;case 1:a.lineTo(g.nt*l,e[m-1].st*c),w!==h&&(p(w,g),a.lineTo(g.nt*l,e[m-1].st*c)),a.lineTo(g.nt*l,g.st*c);break;case 2:{const[v,x]=P3(e,m-1,m);a.bezierCurveTo(v.nt*l,v.st*c,x.nt*l,x.st*c,g.nt*l,g.st*c);break}}n!==1&&w!==h&&(p(w,g),a.moveTo(g.nt*l,g.st*c))}(f!==g||f===g&&n===1)&&o(t,h,f,g)}}const T0=6;function sf(t,e){return{nt:t.nt-e.nt,st:t.st-e.st}}function A0(t,e){return{nt:t.nt/e,st:t.st/e}}function P3(t,e,n){const r=Math.max(0,e-1),i=Math.min(t.length-1,n+1);var s,o;return[(s=t[e],o=A0(sf(t[n],t[r]),T0),{nt:s.nt+o.nt,st:s.st+o.st}),sf(t[n],A0(sf(t[i],t[e]),T0))]}function j3(t,e,n,r,i){const{context:s,horizontalPixelRatio:o,verticalPixelRatio:a}=e;s.lineTo(i.nt*o,t*a),s.lineTo(r.nt*o,t*a),s.closePath(),s.fillStyle=n,s.fill()}class s_ extends Kn{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K(e){var n;if(this.G===null)return;const{it:r,tt:i,ds:s,et:o,Nt:a,fs:l}=this.G,c=(n=this.G.vs)!==null&&n!==void 0?n:this.G.ps?0:e.mediaSize.height;if(i===null)return;const u=e.context;u.lineCap="butt",u.lineJoin="round",u.lineWidth=o,ds(u,a),u.lineWidth=1,i_(e,r,l,i,s,this.bs.bind(this),j3.bind(null,c))}}function cm(t,e,n){return Math.min(Math.max(t,e),n)}function xc(t,e,n){return e-t<=n}function o_(t){const e=Math.ceil(t);return e%2==0?e-1:e}class vv{ws(e,n){const r=this.gs,{Ms:i,xs:s,Ss:o,ks:a,ys:l,vs:c}=n;if(this.Cs===void 0||r===void 0||r.Ms!==i||r.xs!==s||r.Ss!==o||r.ks!==a||r.vs!==c||r.ys!==l){const u=e.context.createLinearGradient(0,0,0,l);if(u.addColorStop(0,i),c!=null){const h=cm(c*e.verticalPixelRatio/l,0,1);u.addColorStop(h,s),u.addColorStop(h,o)}u.addColorStop(1,a),this.Cs=u,this.gs=n}return this.Cs}}class R3 extends s_{constructor(){super(...arguments),this.Ts=new vv}bs(e,n){return this.Ts.ws(e,{Ms:n.Ps,xs:"",Ss:"",ks:n.Rs,ys:e.bitmapSize.height})}}function M3(t,e){const n=t.context;n.strokeStyle=e,n.stroke()}class a_ extends Kn{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K(e){if(this.G===null)return;const{it:n,tt:r,ds:i,fs:s,et:o,Nt:a,Ds:l}=this.G;if(r===null)return;const c=e.context;c.lineCap="butt",c.lineWidth=o*e.verticalPixelRatio,ds(c,a),c.lineJoin="round";const u=this.Vs.bind(this);s!==void 0&&i_(e,n,s,r,i,u,M3),l&&function(h,f,p,g,m){const{horizontalPixelRatio:w,verticalPixelRatio:v,context:x}=h;let b=null;const S=Math.max(1,Math.floor(w))%2/2,N=p*v+S;for(let C=g.to-1;C>=g.from;--C){const _=f[C];if(_){const P=m(h,_);P!==b&&(x.beginPath(),b!==null&&x.fill(),x.fillStyle=P,b=P);const I=Math.round(_.nt*w)+S,R=_.st*v;x.moveTo(I,R),x.arc(I,R,N,0,2*Math.PI)}}x.fill()}(e,n,l,r,u)}}class l_ extends a_{Vs(e,n){return n.lt}}function c_(t,e,n,r,i=0,s=e.length){let o=s-i;for(;0<o;){const a=o>>1,l=i+a;r(e[l],n)===t?(i=l+1,o-=a+1):o=a}return i}const Ul=c_.bind(null,!0),u_=c_.bind(null,!1);function I3(t,e){return t.ot<e}function O3(t,e){return e<t.ot}function d_(t,e,n){const r=e.Os(),i=e.ui(),s=Ul(t,r,I3),o=u_(t,i,O3);if(!n)return{from:s,to:o};let a=s,l=o;return s>0&&s<t.length&&t[s].ot>=r&&(a=s-1),o>0&&o<t.length&&t[o-1].ot<=i&&(l=o+1),{from:a,to:l}}class yv{constructor(e,n,r){this.Bs=!0,this.As=!0,this.Is=!0,this.zs=[],this.Ls=null,this.Es=e,this.Ns=n,this.Fs=r}bt(e){this.Bs=!0,e==="data"&&(this.As=!0),e==="options"&&(this.Is=!0)}gt(){return this.Es.yt()?(this.Ws(),this.Ls===null?null:this.js):null}Hs(){this.zs=this.zs.map(e=>Object.assign(Object.assign({},e),this.Es.Us().$s(e.ot)))}qs(){this.Ls=null}Ws(){this.As&&(this.Ys(),this.As=!1),this.Is&&(this.Hs(),this.Is=!1),this.Bs&&(this.Zs(),this.Bs=!1)}Zs(){const e=this.Es.Dt(),n=this.Ns.St();if(this.qs(),n.Ni()||e.Ni())return;const r=n.Xs();if(r===null||this.Es.In().Ks()===0)return;const i=this.Es.Ct();i!==null&&(this.Ls=d_(this.zs,r,this.Fs),this.Gs(e,n,i.Vt),this.Js())}}class nh extends yv{constructor(e,n){super(e,n,!0)}Gs(e,n,r){n.Qs(this.zs,kl(this.Ls)),e.te(this.zs,r,kl(this.Ls))}ie(e,n){return{ot:e,_t:n,nt:NaN,st:NaN}}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(n=>{const r=n.Vt[3];return this.se(n.ee,r,e)})}}class L3 extends nh{constructor(e,n){super(e,n),this.js=new mv,this.re=new R3,this.he=new l_,this.js.Z([this.re,this.he])}se(e,n,r){return Object.assign(Object.assign({},this.ie(e,n)),r.$s(e))}Js(){const e=this.Es.W();this.re.J({fs:e.lineType,it:this.zs,Nt:e.lineStyle,et:e.lineWidth,vs:null,ps:e.invertFilledArea,tt:this.Ls,ds:this.Ns.St().le()}),this.he.J({fs:e.lineVisible?e.lineType:void 0,it:this.zs,Nt:e.lineStyle,et:e.lineWidth,tt:this.Ls,ds:this.Ns.St().le(),Ds:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0})}}class $3 extends Kn{constructor(){super(...arguments),this.zt=null,this.ae=0,this.oe=0}J(e){this.zt=e}K({context:e,horizontalPixelRatio:n,verticalPixelRatio:r}){if(this.zt===null||this.zt.In.length===0||this.zt.tt===null)return;this.ae=this._e(n),this.ae>=2&&Math.max(1,Math.floor(n))%2!=this.ae%2&&this.ae--,this.oe=this.zt.ue?Math.min(this.ae,Math.floor(n)):this.ae;let i=null;const s=this.oe<=this.ae&&this.zt.le>=Math.floor(1.5*n);for(let o=this.zt.tt.from;o<this.zt.tt.to;++o){const a=this.zt.In[o];i!==a.ce&&(e.fillStyle=a.ce,i=a.ce);const l=Math.floor(.5*this.oe),c=Math.round(a.nt*n),u=c-l,h=this.oe,f=u+h-1,p=Math.min(a.de,a.fe),g=Math.max(a.de,a.fe),m=Math.round(p*r)-l,w=Math.round(g*r)+l,v=Math.max(w-m,this.oe);e.fillRect(u,m,h,v);const x=Math.ceil(1.5*this.ae);if(s){if(this.zt.ve){const C=c-x;let _=Math.max(m,Math.round(a.pe*r)-l),P=_+h-1;P>m+v-1&&(P=m+v-1,_=P-h+1),e.fillRect(C,_,u-C,P-_+1)}const b=c+x;let S=Math.max(m,Math.round(a.me*r)-l),N=S+h-1;N>m+v-1&&(N=m+v-1,S=N-h+1),e.fillRect(f+1,S,b-f,N-S+1)}}}_e(e){const n=Math.floor(e);return Math.max(n,Math.floor(function(r,i){return Math.floor(.3*r*i)}(G(this.zt).le,e)))}}class h_ extends yv{constructor(e,n){super(e,n,!1)}Gs(e,n,r){n.Qs(this.zs,kl(this.Ls)),e.be(this.zs,r,kl(this.Ls))}we(e,n,r){return{ot:e,ge:n.Vt[0],Me:n.Vt[1],xe:n.Vt[2],Se:n.Vt[3],nt:NaN,pe:NaN,de:NaN,fe:NaN,me:NaN}}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(n=>this.se(n.ee,n,e))}}class D3 extends h_{constructor(){super(...arguments),this.js=new $3}se(e,n,r){return Object.assign(Object.assign({},this.we(e,n,r)),r.$s(e))}Js(){const e=this.Es.W();this.js.J({In:this.zs,le:this.Ns.St().le(),ve:e.openVisible,ue:e.thinBars,tt:this.Ls})}}class z3 extends s_{constructor(){super(...arguments),this.Ts=new vv}bs(e,n){const r=this.G;return this.Ts.ws(e,{Ms:n.ke,xs:n.ye,Ss:n.Ce,ks:n.Te,ys:e.bitmapSize.height,vs:r.vs})}}class F3 extends a_{constructor(){super(...arguments),this.Pe=new vv}Vs(e,n){const r=this.G;return this.Pe.ws(e,{Ms:n.Re,xs:n.Re,Ss:n.De,ks:n.De,ys:e.bitmapSize.height,vs:r.vs})}}class B3 extends nh{constructor(e,n){super(e,n),this.js=new mv,this.Ve=new z3,this.Oe=new F3,this.js.Z([this.Ve,this.Oe])}se(e,n,r){return Object.assign(Object.assign({},this.ie(e,n)),r.$s(e))}Js(){const e=this.Es.Ct();if(e===null)return;const n=this.Es.W(),r=this.Es.Dt().Rt(n.baseValue.price,e.Vt),i=this.Ns.St().le();this.Ve.J({it:this.zs,et:n.lineWidth,Nt:n.lineStyle,fs:n.lineType,vs:r,ps:!1,tt:this.Ls,ds:i}),this.Oe.J({it:this.zs,et:n.lineWidth,Nt:n.lineStyle,fs:n.lineVisible?n.lineType:void 0,Ds:n.pointMarkersVisible?n.pointMarkersRadius||n.lineWidth/2+2:void 0,vs:r,tt:this.Ls,ds:i})}}class V3 extends Kn{constructor(){super(...arguments),this.zt=null,this.ae=0}J(e){this.zt=e}K(e){if(this.zt===null||this.zt.In.length===0||this.zt.tt===null)return;const{horizontalPixelRatio:n}=e;this.ae=function(s,o){if(s>=2.5&&s<=4)return Math.floor(3*o);const a=1-.2*Math.atan(Math.max(4,s)-4)/(.5*Math.PI),l=Math.floor(s*a*o),c=Math.floor(s*o),u=Math.min(l,c);return Math.max(Math.floor(o),u)}(this.zt.le,n),this.ae>=2&&Math.floor(n)%2!=this.ae%2&&this.ae--;const r=this.zt.In;this.zt.Be&&this.Ae(e,r,this.zt.tt),this.zt._i&&this.Ie(e,r,this.zt.tt);const i=this.ze(n);(!this.zt._i||this.ae>2*i)&&this.Le(e,r,this.zt.tt)}Ae(e,n,r){if(this.zt===null)return;const{context:i,horizontalPixelRatio:s,verticalPixelRatio:o}=e;let a="",l=Math.min(Math.floor(s),Math.floor(this.zt.le*s));l=Math.max(Math.floor(s),Math.min(l,this.ae));const c=Math.floor(.5*l);let u=null;for(let h=r.from;h<r.to;h++){const f=n[h];f.Ee!==a&&(i.fillStyle=f.Ee,a=f.Ee);const p=Math.round(Math.min(f.pe,f.me)*o),g=Math.round(Math.max(f.pe,f.me)*o),m=Math.round(f.de*o),w=Math.round(f.fe*o);let v=Math.round(s*f.nt)-c;const x=v+l-1;u!==null&&(v=Math.max(u+1,v),v=Math.min(v,x));const b=x-v+1;i.fillRect(v,m,b,p-m),i.fillRect(v,g+1,b,w-g),u=x}}ze(e){let n=Math.floor(1*e);this.ae<=2*n&&(n=Math.floor(.5*(this.ae-1)));const r=Math.max(Math.floor(e),n);return this.ae<=2*r?Math.max(Math.floor(e),Math.floor(1*e)):r}Ie(e,n,r){if(this.zt===null)return;const{context:i,horizontalPixelRatio:s,verticalPixelRatio:o}=e;let a="";const l=this.ze(s);let c=null;for(let u=r.from;u<r.to;u++){const h=n[u];h.Ne!==a&&(i.fillStyle=h.Ne,a=h.Ne);let f=Math.round(h.nt*s)-Math.floor(.5*this.ae);const p=f+this.ae-1,g=Math.round(Math.min(h.pe,h.me)*o),m=Math.round(Math.max(h.pe,h.me)*o);if(c!==null&&(f=Math.max(c+1,f),f=Math.min(f,p)),this.zt.le*s>2*l)C3(i,f,g,p-f+1,m-g+1,l);else{const w=p-f+1;i.fillRect(f,g,w,m-g+1)}c=p}}Le(e,n,r){if(this.zt===null)return;const{context:i,horizontalPixelRatio:s,verticalPixelRatio:o}=e;let a="";const l=this.ze(s);for(let c=r.from;c<r.to;c++){const u=n[c];let h=Math.round(Math.min(u.pe,u.me)*o),f=Math.round(Math.max(u.pe,u.me)*o),p=Math.round(u.nt*s)-Math.floor(.5*this.ae),g=p+this.ae-1;if(u.ce!==a){const m=u.ce;i.fillStyle=m,a=m}this.zt._i&&(p+=l,h+=l,g-=l,f-=l),h>f||i.fillRect(p,h,g-p+1,f-h+1)}}}class U3 extends h_{constructor(){super(...arguments),this.js=new V3}se(e,n,r){return Object.assign(Object.assign({},this.we(e,n,r)),r.$s(e))}Js(){const e=this.Es.W();this.js.J({In:this.zs,le:this.Ns.St().le(),Be:e.wickVisible,_i:e.borderVisible,tt:this.Ls})}}class H3{constructor(e,n){this.Fe=e,this.Li=n}X(e,n,r){this.Fe.draw(e,this.Li,n,r)}}class of extends yv{constructor(e,n,r){super(e,n,!1),this.wn=r,this.js=new H3(this.wn.renderer(),i=>{const s=e.Ct();return s===null?null:e.Dt().Rt(i,s.Vt)})}We(e){return this.wn.priceValueBuilder(e)}je(e){return this.wn.isWhitespace(e)}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(n=>Object.assign(Object.assign({ot:n.ee,nt:NaN},e.$s(n.ee)),{He:n.$e}))}Gs(e,n){n.Qs(this.zs,kl(this.Ls))}Js(){this.wn.update({bars:this.zs.map(W3),barSpacing:this.Ns.St().le(),visibleRange:this.Ls},this.Es.W())}}function W3(t){return{x:t.nt,time:t.ot,originalData:t.He,barColor:t.ce}}class q3 extends Kn{constructor(){super(...arguments),this.zt=null,this.Ue=[]}J(e){this.zt=e,this.Ue=[]}K({context:e,horizontalPixelRatio:n,verticalPixelRatio:r}){if(this.zt===null||this.zt.it.length===0||this.zt.tt===null)return;this.Ue.length||this.qe(n);const i=Math.max(1,Math.floor(r)),s=Math.round(this.zt.Ye*r)-Math.floor(i/2),o=s+i;for(let a=this.zt.tt.from;a<this.zt.tt.to;a++){const l=this.zt.it[a],c=this.Ue[a-this.zt.tt.from],u=Math.round(l.st*r);let h,f;e.fillStyle=l.ce,u<=s?(h=u,f=o):(h=s,f=u-Math.floor(i/2)+i),e.fillRect(c.Os,h,c.ui-c.Os+1,f-h)}}qe(e){if(this.zt===null||this.zt.it.length===0||this.zt.tt===null)return void(this.Ue=[]);const n=Math.ceil(this.zt.le*e)<=1?0:Math.max(1,Math.floor(e)),r=Math.round(this.zt.le*e)-n;this.Ue=new Array(this.zt.tt.to-this.zt.tt.from);for(let s=this.zt.tt.from;s<this.zt.tt.to;s++){const o=this.zt.it[s],a=Math.round(o.nt*e);let l,c;if(r%2){const u=(r-1)/2;l=a-u,c=a+u}else{const u=r/2;l=a-u,c=a+u-1}this.Ue[s-this.zt.tt.from]={Os:l,ui:c,Ze:a,Xe:o.nt*e,ot:o.ot}}for(let s=this.zt.tt.from+1;s<this.zt.tt.to;s++){const o=this.Ue[s-this.zt.tt.from],a=this.Ue[s-this.zt.tt.from-1];o.ot===a.ot+1&&o.Os-a.ui!==n+1&&(a.Ze>a.Xe?a.ui=o.Os-n-1:o.Os=a.ui+n+1)}let i=Math.ceil(this.zt.le*e);for(let s=this.zt.tt.from;s<this.zt.tt.to;s++){const o=this.Ue[s-this.zt.tt.from];o.ui<o.Os&&(o.ui=o.Os);const a=o.ui-o.Os+1;i=Math.min(a,i)}if(n>0&&i<4)for(let s=this.zt.tt.from;s<this.zt.tt.to;s++){const o=this.Ue[s-this.zt.tt.from];o.ui-o.Os+1>i&&(o.Ze>o.Xe?o.ui-=1:o.Os+=1)}}}class K3 extends nh{constructor(){super(...arguments),this.js=new q3}se(e,n,r){return Object.assign(Object.assign({},this.ie(e,n)),r.$s(e))}Js(){const e={it:this.zs,le:this.Ns.St().le(),tt:this.Ls,Ye:this.Es.Dt().Rt(this.Es.W().base,G(this.Es.Ct()).Vt)};this.js.J(e)}}class Y3 extends nh{constructor(){super(...arguments),this.js=new l_}se(e,n,r){return Object.assign(Object.assign({},this.ie(e,n)),r.$s(e))}Js(){const e=this.Es.W(),n={it:this.zs,Nt:e.lineStyle,fs:e.lineVisible?e.lineType:void 0,et:e.lineWidth,Ds:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0,tt:this.Ls,ds:this.Ns.St().le()};this.js.J(n)}}const G3=/[2-9]/g;class Cl{constructor(e=50){this.Ke=0,this.Ge=1,this.Je=1,this.Qe={},this.tr=new Map,this.ir=e}nr(){this.Ke=0,this.tr.clear(),this.Ge=1,this.Je=1,this.Qe={}}xi(e,n,r){return this.sr(e,n,r).width}Mi(e,n,r){const i=this.sr(e,n,r);return((i.actualBoundingBoxAscent||0)-(i.actualBoundingBoxDescent||0))/2}sr(e,n,r){const i=r||G3,s=String(n).replace(i,"0");if(this.tr.has(s))return Ot(this.tr.get(s)).er;if(this.Ke===this.ir){const a=this.Qe[this.Je];delete this.Qe[this.Je],this.tr.delete(a),this.Je++,this.Ke--}e.save(),e.textBaseline="middle";const o=e.measureText(s);return e.restore(),o.width===0&&n.length||(this.tr.set(s,{er:o,rr:this.Ge}),this.Qe[this.Ge]=s,this.Ke++,this.Ge++),o}}class Z3{constructor(e){this.hr=null,this.k=null,this.lr="right",this.ar=e}_r(e,n,r){this.hr=e,this.k=n,this.lr=r}X(e){this.k!==null&&this.hr!==null&&this.hr.X(e,this.k,this.ar,this.lr)}}class f_{constructor(e,n,r){this.ur=e,this.ar=new Cl(50),this.cr=n,this.F=r,this.j=-1,this.Wt=new Z3(this.ar)}gt(){const e=this.F.dr(this.cr);if(e===null)return null;const n=e.vr(this.cr)?e.pr():this.cr.Dt();if(n===null)return null;const r=e.mr(n);if(r==="overlay")return null;const i=this.F.br();return i.P!==this.j&&(this.j=i.P,this.ar.nr()),this.Wt._r(this.ur.Ii(),i,r),this.Wt}}class X3 extends Kn{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}wr(e,n){var r;if(!(!((r=this.zt)===null||r===void 0)&&r.yt))return null;const{st:i,et:s,gr:o}=this.zt;return n>=i-s-7&&n<=i+s+7?{Mr:this.zt,gr:o}:null}K({context:e,bitmapSize:n,horizontalPixelRatio:r,verticalPixelRatio:i}){if(this.zt===null||this.zt.yt===!1)return;const s=Math.round(this.zt.st*i);s<0||s>n.height||(e.lineCap="butt",e.strokeStyle=this.zt.V,e.lineWidth=Math.floor(this.zt.et*r),ds(e,this.zt.Nt),QN(e,s,0,n.width))}}class xv{constructor(e){this.Sr={st:0,V:"rgba(0, 0, 0, 0)",et:1,Nt:0,yt:!1},this.kr=new X3,this.ft=!0,this.Es=e,this.Ns=e.$t(),this.kr.J(this.Sr)}bt(){this.ft=!0}gt(){return this.Es.yt()?(this.ft&&(this.yr(),this.ft=!1),this.kr):null}}class Q3 extends xv{constructor(e){super(e)}yr(){this.Sr.yt=!1;const e=this.Es.Dt(),n=e.Cr().Cr;if(n!==2&&n!==3)return;const r=this.Es.W();if(!r.baseLineVisible||!this.Es.yt())return;const i=this.Es.Ct();i!==null&&(this.Sr.yt=!0,this.Sr.st=e.Rt(i.Vt,i.Vt),this.Sr.V=r.baseLineColor,this.Sr.et=r.baseLineWidth,this.Sr.Nt=r.baseLineStyle)}}class J3 extends Kn{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}$e(){return this.zt}K({context:e,horizontalPixelRatio:n,verticalPixelRatio:r}){const i=this.zt;if(i===null)return;const s=Math.max(1,Math.floor(n)),o=s%2/2,a=Math.round(i.Xe.x*n)+o,l=i.Xe.y*r;e.fillStyle=i.Tr,e.beginPath();const c=Math.max(2,1.5*i.Pr)*n;e.arc(a,l,c,0,2*Math.PI,!1),e.fill(),e.fillStyle=i.Rr,e.beginPath(),e.arc(a,l,i.ht*n,0,2*Math.PI,!1),e.fill(),e.lineWidth=s,e.strokeStyle=i.Dr,e.beginPath(),e.arc(a,l,i.ht*n+s/2,0,2*Math.PI,!1),e.stroke()}}const eB=[{Vr:0,Or:.25,Br:4,Ar:10,Ir:.25,zr:0,Lr:.4,Er:.8},{Vr:.25,Or:.525,Br:10,Ar:14,Ir:0,zr:0,Lr:.8,Er:0},{Vr:.525,Or:1,Br:14,Ar:14,Ir:0,zr:0,Lr:0,Er:0}];function P0(t,e,n,r){return function(i,s){if(i==="transparent")return i;const o=bl(i),a=o[3];return`rgba(${o[0]}, ${o[1]}, ${o[2]}, ${s*a})`}(t,n+(r-n)*e)}function j0(t,e){const n=t%2600/2600;let r;for(const l of eB)if(n>=l.Vr&&n<=l.Or){r=l;break}_i(r!==void 0,"Last price animation internal logic error");const i=(n-r.Vr)/(r.Or-r.Vr);return{Rr:P0(e,i,r.Ir,r.zr),Dr:P0(e,i,r.Lr,r.Er),ht:(s=i,o=r.Br,a=r.Ar,o+(a-o)*s)};var s,o,a}class tB{constructor(e){this.Wt=new J3,this.ft=!0,this.Nr=!0,this.Fr=performance.now(),this.Wr=this.Fr-1,this.jr=e}Hr(){this.Wr=this.Fr-1,this.bt()}$r(){if(this.bt(),this.jr.W().lastPriceAnimation===2){const e=performance.now(),n=this.Wr-e;if(n>0)return void(n<650&&(this.Wr+=2600));this.Fr=e,this.Wr=e+2600}}bt(){this.ft=!0}Ur(){this.Nr=!0}yt(){return this.jr.W().lastPriceAnimation!==0}qr(){switch(this.jr.W().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Wr}}gt(){return this.ft?(this.Mt(),this.ft=!1,this.Nr=!1):this.Nr&&(this.Yr(),this.Nr=!1),this.Wt}Mt(){this.Wt.J(null);const e=this.jr.$t().St(),n=e.Xs(),r=this.jr.Ct();if(n===null||r===null)return;const i=this.jr.Zr(!0);if(i.Xr||!n.Kr(i.ee))return;const s={x:e.It(i.ee),y:this.jr.Dt().Rt(i._t,r.Vt)},o=i.V,a=this.jr.W().lineWidth,l=j0(this.Gr(),o);this.Wt.J({Tr:o,Pr:a,Rr:l.Rr,Dr:l.Dr,ht:l.ht,Xe:s})}Yr(){const e=this.Wt.$e();if(e!==null){const n=j0(this.Gr(),e.Tr);e.Rr=n.Rr,e.Dr=n.Dr,e.ht=n.ht}}Gr(){return this.qr()?performance.now()-this.Fr:2599}}function Ra(t,e){return o_(Math.min(Math.max(t,12),30)*e)}function El(t,e){switch(t){case"arrowDown":case"arrowUp":return Ra(e,1);case"circle":return Ra(e,.8);case"square":return Ra(e,.7)}}function p_(t){return function(e){const n=Math.ceil(e);return n%2!=0?n-1:n}(Ra(t,1))}function R0(t){return Math.max(Ra(t,.1),3)}function M0(t,e,n){return e?t:n?Math.ceil(t/2):0}function m_(t,e,n,r,i){const s=El("square",n),o=(s-1)/2,a=t-o,l=e-o;return r>=a&&r<=a+s&&i>=l&&i<=l+s}function I0(t,e,n,r){const i=(El("arrowUp",r)-1)/2*n.Jr,s=(o_(r/2)-1)/2*n.Jr;e.beginPath(),t?(e.moveTo(n.nt-i,n.st),e.lineTo(n.nt,n.st-i),e.lineTo(n.nt+i,n.st),e.lineTo(n.nt+s,n.st),e.lineTo(n.nt+s,n.st+i),e.lineTo(n.nt-s,n.st+i),e.lineTo(n.nt-s,n.st)):(e.moveTo(n.nt-i,n.st),e.lineTo(n.nt,n.st+i),e.lineTo(n.nt+i,n.st),e.lineTo(n.nt+s,n.st),e.lineTo(n.nt+s,n.st-i),e.lineTo(n.nt-s,n.st-i),e.lineTo(n.nt-s,n.st)),e.fill()}function nB(t,e,n,r,i,s){return m_(e,n,r,i,s)}class rB extends Kn{constructor(){super(...arguments),this.zt=null,this.ar=new Cl,this.j=-1,this.H="",this.Qr=""}J(e){this.zt=e}_r(e,n){this.j===e&&this.H===n||(this.j=e,this.H=n,this.Qr=jo(e,n),this.ar.nr())}wr(e,n){if(this.zt===null||this.zt.tt===null)return null;for(let r=this.zt.tt.from;r<this.zt.tt.to;r++){const i=this.zt.it[r];if(sB(i,e,n))return{Mr:i.th,gr:i.gr}}return null}K({context:e,horizontalPixelRatio:n,verticalPixelRatio:r},i,s){if(this.zt!==null&&this.zt.tt!==null){e.textBaseline="middle",e.font=this.Qr;for(let o=this.zt.tt.from;o<this.zt.tt.to;o++){const a=this.zt.it[o];a.Kt!==void 0&&(a.Kt.Hi=this.ar.xi(e,a.Kt.ih),a.Kt.At=this.j,a.Kt.nt=a.nt-a.Kt.Hi/2),iB(a,e,n,r)}}}}function iB(t,e,n,r){e.fillStyle=t.V,t.Kt!==void 0&&function(i,s,o,a,l,c){i.save(),i.scale(l,c),i.fillText(s,o,a),i.restore()}(e,t.Kt.ih,t.Kt.nt,t.Kt.st,n,r),function(i,s,o){if(i.Ks!==0){switch(i.nh){case"arrowDown":return void I0(!1,s,o,i.Ks);case"arrowUp":return void I0(!0,s,o,i.Ks);case"circle":return void function(a,l,c){const u=(El("circle",c)-1)/2;a.beginPath(),a.arc(l.nt,l.st,u*l.Jr,0,2*Math.PI,!1),a.fill()}(s,o,i.Ks);case"square":return void function(a,l,c){const u=El("square",c),h=(u-1)*l.Jr/2,f=l.nt-h,p=l.st-h;a.fillRect(f,p,u*l.Jr,u*l.Jr)}(s,o,i.Ks)}i.nh}}(t,e,function(i,s,o){const a=Math.max(1,Math.floor(s))%2/2;return{nt:Math.round(i.nt*s)+a,st:i.st*o,Jr:s}}(t,n,r))}function sB(t,e,n){return!(t.Kt===void 0||!function(r,i,s,o,a,l){const c=o/2;return a>=r&&a<=r+s&&l>=i-c&&l<=i+c}(t.Kt.nt,t.Kt.st,t.Kt.Hi,t.Kt.At,e,n))||function(r,i,s){if(r.Ks===0)return!1;switch(r.nh){case"arrowDown":case"arrowUp":return nB(0,r.nt,r.st,r.Ks,i,s);case"circle":return function(o,a,l,c,u){const h=2+El("circle",l)/2,f=o-c,p=a-u;return Math.sqrt(f*f+p*p)<=h}(r.nt,r.st,r.Ks,i,s);case"square":return m_(r.nt,r.st,r.Ks,i,s)}}(t,e,n)}function oB(t,e,n,r,i,s,o,a,l){const c=nr(n)?n:n.Se,u=nr(n)?n:n.Me,h=nr(n)?n:n.xe,f=nr(e.size)?Math.max(e.size,0):1,p=p_(a.le())*f,g=p/2;switch(t.Ks=p,e.position){case"inBar":return t.st=o.Rt(c,l),void(t.Kt!==void 0&&(t.Kt.st=t.st+g+s+.6*i));case"aboveBar":return t.st=o.Rt(u,l)-g-r.sh,t.Kt!==void 0&&(t.Kt.st=t.st-g-.6*i,r.sh+=1.2*i),void(r.sh+=p+s);case"belowBar":return t.st=o.Rt(h,l)+g+r.eh,t.Kt!==void 0&&(t.Kt.st=t.st+g+s+.6*i,r.eh+=1.2*i),void(r.eh+=p+s)}e.position}class aB{constructor(e,n){this.ft=!0,this.rh=!0,this.hh=!0,this.ah=null,this.oh=null,this.Wt=new rB,this.jr=e,this.$i=n,this.zt={it:[],tt:null}}bt(e){this.ft=!0,this.hh=!0,e==="data"&&(this.rh=!0,this.oh=null)}gt(e){if(!this.jr.yt())return null;this.ft&&this._h();const n=this.$i.W().layout;return this.Wt._r(n.fontSize,n.fontFamily),this.Wt.J(this.zt),this.Wt}uh(){if(this.hh){if(this.jr.dh().length>0){const e=this.$i.St().le(),n=R0(e),r=1.5*p_(e)+2*n,i=this.fh();this.ah={above:M0(r,i.aboveBar,i.inBar),below:M0(r,i.belowBar,i.inBar)}}else this.ah=null;this.hh=!1}return this.ah}fh(){return this.oh===null&&(this.oh=this.jr.dh().reduce((e,n)=>(e[n.position]||(e[n.position]=!0),e),{inBar:!1,aboveBar:!1,belowBar:!1})),this.oh}_h(){const e=this.jr.Dt(),n=this.$i.St(),r=this.jr.dh();this.rh&&(this.zt.it=r.map(u=>({ot:u.time,nt:0,st:0,Ks:0,nh:u.shape,V:u.color,th:u.th,gr:u.id,Kt:void 0})),this.rh=!1);const i=this.$i.W().layout;this.zt.tt=null;const s=n.Xs();if(s===null)return;const o=this.jr.Ct();if(o===null||this.zt.it.length===0)return;let a=NaN;const l=R0(n.le()),c={sh:l,eh:l};this.zt.tt=d_(this.zt.it,s,!0);for(let u=this.zt.tt.from;u<this.zt.tt.to;u++){const h=r[u];h.time!==a&&(c.sh=l,c.eh=l,a=h.time);const f=this.zt.it[u];f.nt=n.It(h.time),h.text!==void 0&&h.text.length>0&&(f.Kt={ih:h.text,nt:0,st:0,Hi:0,At:0});const p=this.jr.ph(h.time);p!==null&&oB(f,h,p,c,i.fontSize,l,e,n,o.Vt)}this.ft=!1}}class lB extends xv{constructor(e){super(e)}yr(){const e=this.Sr;e.yt=!1;const n=this.Es.W();if(!n.priceLineVisible||!this.Es.yt())return;const r=this.Es.Zr(n.priceLineSource===0);r.Xr||(e.yt=!0,e.st=r.ki,e.V=this.Es.mh(r.V),e.et=n.priceLineWidth,e.Nt=n.priceLineStyle)}}class cB extends Jd{constructor(e){super(),this.jt=e}zi(e,n,r){e.yt=!1,n.yt=!1;const i=this.jt;if(!i.yt())return;const s=i.W(),o=s.lastValueVisible,a=i.bh()!=="",l=s.seriesLastValueMode===0,c=i.Zr(!1);if(c.Xr)return;o&&(e.Kt=this.wh(c,o,l),e.yt=e.Kt.length!==0),(a||l)&&(n.Kt=this.gh(c,o,a,l),n.yt=n.Kt.length>0);const u=i.mh(c.V),h=Xd(u);r.t=h.t,r.ki=c.ki,n.Ot=i.$t().Bt(c.ki/i.Dt().At()),e.Ot=u,e.V=h.i,n.V=h.i}gh(e,n,r,i){let s="";const o=this.jt.bh();return r&&o.length!==0&&(s+=`${o} `),n&&i&&(s+=this.jt.Dt().Mh()?e.xh:e.Sh),s.trim()}wh(e,n,r){return n?r?this.jt.Dt().Mh()?e.Sh:e.xh:e.Kt:""}}function O0(t,e,n,r){const i=Number.isFinite(e),s=Number.isFinite(n);return i&&s?t(e,n):i||s?i?e:n:r}class Kt{constructor(e,n){this.kh=e,this.yh=n}Ch(e){return e!==null&&this.kh===e.kh&&this.yh===e.yh}Th(){return new Kt(this.kh,this.yh)}Ph(){return this.kh}Rh(){return this.yh}Dh(){return this.yh-this.kh}Ni(){return this.yh===this.kh||Number.isNaN(this.yh)||Number.isNaN(this.kh)}ts(e){return e===null?this:new Kt(O0(Math.min,this.Ph(),e.Ph(),-1/0),O0(Math.max,this.Rh(),e.Rh(),1/0))}Vh(e){if(!nr(e)||this.yh-this.kh===0)return;const n=.5*(this.yh+this.kh);let r=this.yh-n,i=this.kh-n;r*=e,i*=e,this.yh=n+r,this.kh=n+i}Oh(e){nr(e)&&(this.yh+=e,this.kh+=e)}Bh(){return{minValue:this.kh,maxValue:this.yh}}static Ah(e){return e===null?null:new Kt(e.minValue,e.maxValue)}}class Yu{constructor(e,n){this.Ih=e,this.zh=n||null}Lh(){return this.Ih}Eh(){return this.zh}Bh(){return this.Ih===null?null:{priceRange:this.Ih.Bh(),margins:this.zh||void 0}}static Ah(e){return e===null?null:new Yu(Kt.Ah(e.priceRange),e.margins)}}class uB extends xv{constructor(e,n){super(e),this.Nh=n}yr(){const e=this.Sr;e.yt=!1;const n=this.Nh.W();if(!this.Es.yt()||!n.lineVisible)return;const r=this.Nh.Fh();r!==null&&(e.yt=!0,e.st=r,e.V=n.color,e.et=n.lineWidth,e.Nt=n.lineStyle,e.gr=this.Nh.W().id)}}class dB extends Jd{constructor(e,n){super(),this.jr=e,this.Nh=n}zi(e,n,r){e.yt=!1,n.yt=!1;const i=this.Nh.W(),s=i.axisLabelVisible,o=i.title!=="",a=this.jr;if(!s||!a.yt())return;const l=this.Nh.Fh();if(l===null)return;o&&(n.Kt=i.title,n.yt=!0),n.Ot=a.$t().Bt(l/a.Dt().At()),e.Kt=this.Wh(i.price),e.yt=!0;const c=Xd(i.axisLabelColor||i.color);r.t=c.t;const u=i.axisLabelTextColor||c.i;e.V=u,n.V=u,r.ki=l}Wh(e){const n=this.jr.Ct();return n===null?"":this.jr.Dt().Fi(e,n.Vt)}}class hB{constructor(e,n){this.jr=e,this.cn=n,this.jh=new uB(e,this),this.ur=new dB(e,this),this.Hh=new f_(this.ur,e,e.$t())}$h(e){Un(this.cn,e),this.bt(),this.jr.$t().Uh()}W(){return this.cn}qh(){return this.jh}Yh(){return this.Hh}Zh(){return this.ur}bt(){this.jh.bt(),this.ur.bt()}Fh(){const e=this.jr,n=e.Dt();if(e.$t().St().Ni()||n.Ni())return null;const r=e.Ct();return r===null?null:n.Rt(this.cn.price,r.Vt)}}class fB extends gv{constructor(e){super(),this.$i=e}$t(){return this.$i}}const pB={Bar:(t,e,n,r)=>{var i;const s=e.upColor,o=e.downColor,a=G(t(n,r)),l=Ys(a.Vt[0])<=Ys(a.Vt[3]);return{ce:(i=a.V)!==null&&i!==void 0?i:l?s:o}},Candlestick:(t,e,n,r)=>{var i,s,o;const a=e.upColor,l=e.downColor,c=e.borderUpColor,u=e.borderDownColor,h=e.wickUpColor,f=e.wickDownColor,p=G(t(n,r)),g=Ys(p.Vt[0])<=Ys(p.Vt[3]);return{ce:(i=p.V)!==null&&i!==void 0?i:g?a:l,Ne:(s=p.Ot)!==null&&s!==void 0?s:g?c:u,Ee:(o=p.Xh)!==null&&o!==void 0?o:g?h:f}},Custom:(t,e,n,r)=>{var i;return{ce:(i=G(t(n,r)).V)!==null&&i!==void 0?i:e.color}},Area:(t,e,n,r)=>{var i,s,o,a;const l=G(t(n,r));return{ce:(i=l.lt)!==null&&i!==void 0?i:e.lineColor,lt:(s=l.lt)!==null&&s!==void 0?s:e.lineColor,Ps:(o=l.Ps)!==null&&o!==void 0?o:e.topColor,Rs:(a=l.Rs)!==null&&a!==void 0?a:e.bottomColor}},Baseline:(t,e,n,r)=>{var i,s,o,a,l,c;const u=G(t(n,r));return{ce:u.Vt[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,Re:(i=u.Re)!==null&&i!==void 0?i:e.topLineColor,De:(s=u.De)!==null&&s!==void 0?s:e.bottomLineColor,ke:(o=u.ke)!==null&&o!==void 0?o:e.topFillColor1,ye:(a=u.ye)!==null&&a!==void 0?a:e.topFillColor2,Ce:(l=u.Ce)!==null&&l!==void 0?l:e.bottomFillColor1,Te:(c=u.Te)!==null&&c!==void 0?c:e.bottomFillColor2}},Line:(t,e,n,r)=>{var i,s;const o=G(t(n,r));return{ce:(i=o.V)!==null&&i!==void 0?i:e.color,lt:(s=o.V)!==null&&s!==void 0?s:e.color}},Histogram:(t,e,n,r)=>{var i;return{ce:(i=G(t(n,r)).V)!==null&&i!==void 0?i:e.color}}};class mB{constructor(e){this.Kh=(n,r)=>r!==void 0?r.Vt:this.jr.In().Gh(n),this.jr=e,this.Jh=pB[e.Qh()]}$s(e,n){return this.Jh(this.Kh,this.jr.W(),e,n)}}var L0;(function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.None=0]="None",t[t.NearestRight=1]="NearestRight"})(L0||(L0={}));const Gr=30;class gB{constructor(){this.tl=[],this.il=new Map,this.nl=new Map}sl(){return this.Ks()>0?this.tl[this.tl.length-1]:null}el(){return this.Ks()>0?this.rl(0):null}An(){return this.Ks()>0?this.rl(this.tl.length-1):null}Ks(){return this.tl.length}Ni(){return this.Ks()===0}Kr(e){return this.hl(e,0)!==null}Gh(e){return this.ll(e)}ll(e,n=0){const r=this.hl(e,n);return r===null?null:Object.assign(Object.assign({},this.al(r)),{ee:this.rl(r)})}ne(){return this.tl}ol(e,n,r){if(this.Ni())return null;let i=null;for(const s of r)i=wc(i,this._l(e,n,s));return i}J(e){this.nl.clear(),this.il.clear(),this.tl=e}rl(e){return this.tl[e].ee}al(e){return this.tl[e]}hl(e,n){const r=this.ul(e);if(r===null&&n!==0)switch(n){case-1:return this.cl(e);case 1:return this.dl(e);default:throw new TypeError("Unknown search mode")}return r}cl(e){let n=this.fl(e);return n>0&&(n-=1),n!==this.tl.length&&this.rl(n)<e?n:null}dl(e){const n=this.vl(e);return n!==this.tl.length&&e<this.rl(n)?n:null}ul(e){const n=this.fl(e);return n===this.tl.length||e<this.tl[n].ee?null:n}fl(e){return Ul(this.tl,e,(n,r)=>n.ee<r)}vl(e){return u_(this.tl,e,(n,r)=>n.ee>r)}pl(e,n,r){let i=null;for(let s=e;s<n;s++){const o=this.tl[s].Vt[r];Number.isNaN(o)||(i===null?i={ml:o,bl:o}:(o<i.ml&&(i.ml=o),o>i.bl&&(i.bl=o)))}return i}_l(e,n,r){if(this.Ni())return null;let i=null;const s=G(this.el()),o=G(this.An()),a=Math.max(e,s),l=Math.min(n,o),c=Math.ceil(a/Gr)*Gr,u=Math.max(c,Math.floor(l/Gr)*Gr);{const f=this.fl(a),p=this.vl(Math.min(l,c,n));i=wc(i,this.pl(f,p,r))}let h=this.il.get(r);h===void 0&&(h=new Map,this.il.set(r,h));for(let f=Math.max(c+1,a);f<u;f+=Gr){const p=Math.floor(f/Gr);let g=h.get(p);if(g===void 0){const m=this.fl(p*Gr),w=this.vl((p+1)*Gr-1);g=this.pl(m,w,r),h.set(p,g)}i=wc(i,g)}{const f=this.fl(u),p=this.vl(l);i=wc(i,this.pl(f,p,r))}return i}}function wc(t,e){return t===null?e:e===null?t:{ml:Math.min(t.ml,e.ml),bl:Math.max(t.bl,e.bl)}}class vB{constructor(e){this.wl=e}X(e,n,r){this.wl.draw(e)}gl(e,n,r){var i,s;(s=(i=this.wl).drawBackground)===null||s===void 0||s.call(i,e)}}class af{constructor(e){this.tr=null,this.wn=e}gt(){var e;const n=this.wn.renderer();if(n===null)return null;if(((e=this.tr)===null||e===void 0?void 0:e.Ml)===n)return this.tr.xl;const r=new vB(n);return this.tr={Ml:n,xl:r},r}Sl(){var e,n,r;return(r=(n=(e=this.wn).zOrder)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:"normal"}}function g_(t){var e,n,r,i,s;return{Kt:t.text(),ki:t.coordinate(),Si:(e=t.fixedCoordinate)===null||e===void 0?void 0:e.call(t),V:t.textColor(),t:t.backColor(),yt:(r=(n=t.visible)===null||n===void 0?void 0:n.call(t))===null||r===void 0||r,hi:(s=(i=t.tickVisible)===null||i===void 0?void 0:i.call(t))===null||s===void 0||s}}class yB{constructor(e,n){this.Wt=new n_,this.kl=e,this.yl=n}gt(){return this.Wt.J(Object.assign({Hi:this.yl.Hi()},g_(this.kl))),this.Wt}}class xB extends Jd{constructor(e,n){super(),this.kl=e,this.Li=n}zi(e,n,r){const i=g_(this.kl);r.t=i.t,e.V=i.V;const s=2/12*this.Li.P();r.wi=s,r.gi=s,r.ki=i.ki,r.Si=i.Si,e.Kt=i.Kt,e.yt=i.yt,e.hi=i.hi}}class wB{constructor(e,n){this.Cl=null,this.Tl=null,this.Pl=null,this.Rl=null,this.Dl=null,this.Vl=e,this.jr=n}Ol(){return this.Vl}Vn(){var e,n;(n=(e=this.Vl).updateAllViews)===null||n===void 0||n.call(e)}Pn(){var e,n,r,i;const s=(r=(n=(e=this.Vl).paneViews)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:[];if(((i=this.Cl)===null||i===void 0?void 0:i.Ml)===s)return this.Cl.xl;const o=s.map(a=>new af(a));return this.Cl={Ml:s,xl:o},o}Qi(){var e,n,r,i;const s=(r=(n=(e=this.Vl).timeAxisViews)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:[];if(((i=this.Tl)===null||i===void 0?void 0:i.Ml)===s)return this.Tl.xl;const o=this.jr.$t().St(),a=s.map(l=>new yB(l,o));return this.Tl={Ml:s,xl:a},a}Rn(){var e,n,r,i;const s=(r=(n=(e=this.Vl).priceAxisViews)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:[];if(((i=this.Pl)===null||i===void 0?void 0:i.Ml)===s)return this.Pl.xl;const o=this.jr.Dt(),a=s.map(l=>new xB(l,o));return this.Pl={Ml:s,xl:a},a}Bl(){var e,n,r,i;const s=(r=(n=(e=this.Vl).priceAxisPaneViews)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:[];if(((i=this.Rl)===null||i===void 0?void 0:i.Ml)===s)return this.Rl.xl;const o=s.map(a=>new af(a));return this.Rl={Ml:s,xl:o},o}Al(){var e,n,r,i;const s=(r=(n=(e=this.Vl).timeAxisPaneViews)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:[];if(((i=this.Dl)===null||i===void 0?void 0:i.Ml)===s)return this.Dl.xl;const o=s.map(a=>new af(a));return this.Dl={Ml:s,xl:o},o}Il(e,n){var r,i,s;return(s=(i=(r=this.Vl).autoscaleInfo)===null||i===void 0?void 0:i.call(r,e,n))!==null&&s!==void 0?s:null}wr(e,n){var r,i,s;return(s=(i=(r=this.Vl).hitTest)===null||i===void 0?void 0:i.call(r,e,n))!==null&&s!==void 0?s:null}}function lf(t,e,n,r){t.forEach(i=>{e(i).forEach(s=>{s.Sl()===n&&r.push(s)})})}function cf(t){return t.Pn()}function bB(t){return t.Bl()}function SB(t){return t.Al()}class wv extends fB{constructor(e,n,r,i,s){super(e),this.zt=new gB,this.jh=new lB(this),this.zl=[],this.Ll=new Q3(this),this.El=null,this.Nl=null,this.Fl=[],this.Wl=[],this.jl=null,this.Hl=[],this.cn=n,this.$l=r;const o=new cB(this);this.rn=[o],this.Hh=new f_(o,this,e),r!=="Area"&&r!=="Line"&&r!=="Baseline"||(this.El=new tB(this)),this.Ul(),this.ql(s)}S(){this.jl!==null&&clearTimeout(this.jl)}mh(e){return this.cn.priceLineColor||e}Zr(e){const n={Xr:!0},r=this.Dt();if(this.$t().St().Ni()||r.Ni()||this.zt.Ni())return n;const i=this.$t().St().Xs(),s=this.Ct();if(i===null||s===null)return n;let o,a;if(e){const h=this.zt.sl();if(h===null)return n;o=h,a=h.ee}else{const h=this.zt.ll(i.ui(),-1);if(h===null||(o=this.zt.Gh(h.ee),o===null))return n;a=h.ee}const l=o.Vt[3],c=this.Us().$s(a,{Vt:o}),u=r.Rt(l,s.Vt);return{Xr:!1,_t:l,Kt:r.Fi(l,s.Vt),xh:r.Yl(l),Sh:r.Zl(l,s.Vt),V:c.ce,ki:u,ee:a}}Us(){return this.Nl!==null||(this.Nl=new mB(this)),this.Nl}W(){return this.cn}$h(e){const n=e.priceScaleId;n!==void 0&&n!==this.cn.priceScaleId&&this.$t().Xl(this,n),Un(this.cn,e),e.priceFormat!==void 0&&(this.Ul(),this.$t().Kl()),this.$t().Gl(this),this.$t().Jl(),this.wn.bt("options")}J(e,n){this.zt.J(e),this.Ql(),this.wn.bt("data"),this.dn.bt("data"),this.El!==null&&(n&&n.ta?this.El.$r():e.length===0&&this.El.Hr());const r=this.$t().dr(this);this.$t().ia(r),this.$t().Gl(this),this.$t().Jl(),this.$t().Uh()}na(e){this.Fl=e,this.Ql();const n=this.$t().dr(this);this.dn.bt("data"),this.$t().ia(n),this.$t().Gl(this),this.$t().Jl(),this.$t().Uh()}sa(){return this.Fl}dh(){return this.Wl}ea(e){const n=new hB(this,e);return this.zl.push(n),this.$t().Gl(this),n}ra(e){const n=this.zl.indexOf(e);n!==-1&&this.zl.splice(n,1),this.$t().Gl(this)}Qh(){return this.$l}Ct(){const e=this.ha();return e===null?null:{Vt:e.Vt[3],la:e.ot}}ha(){const e=this.$t().St().Xs();if(e===null)return null;const n=e.Os();return this.zt.ll(n,1)}In(){return this.zt}ph(e){const n=this.zt.Gh(e);return n===null?null:this.$l==="Bar"||this.$l==="Candlestick"||this.$l==="Custom"?{ge:n.Vt[0],Me:n.Vt[1],xe:n.Vt[2],Se:n.Vt[3]}:n.Vt[3]}aa(e){const n=[];lf(this.Hl,cf,"top",n);const r=this.El;return r!==null&&r.yt()&&(this.jl===null&&r.qr()&&(this.jl=setTimeout(()=>{this.jl=null,this.$t().oa()},0)),r.Ur(),n.unshift(r)),n}Pn(){const e=[];this._a()||e.push(this.Ll),e.push(this.wn,this.jh,this.dn);const n=this.zl.map(r=>r.qh());return e.push(...n),lf(this.Hl,cf,"normal",e),e}ua(){return this.ca(cf,"bottom")}da(e){return this.ca(bB,e)}fa(e){return this.ca(SB,e)}va(e,n){return this.Hl.map(r=>r.wr(e,n)).filter(r=>r!==null)}Ji(e){return[this.Hh,...this.zl.map(n=>n.Yh())]}Rn(e,n){if(n!==this.Yi&&!this._a())return[];const r=[...this.rn];for(const i of this.zl)r.push(i.Zh());return this.Hl.forEach(i=>{r.push(...i.Rn())}),r}Qi(){const e=[];return this.Hl.forEach(n=>{e.push(...n.Qi())}),e}Il(e,n){if(this.cn.autoscaleInfoProvider!==void 0){const r=this.cn.autoscaleInfoProvider(()=>{const i=this.pa(e,n);return i===null?null:i.Bh()});return Yu.Ah(r)}return this.pa(e,n)}ma(){return this.cn.priceFormat.minMove}ba(){return this.wa}Vn(){var e;this.wn.bt(),this.dn.bt();for(const n of this.rn)n.bt();for(const n of this.zl)n.bt();this.jh.bt(),this.Ll.bt(),(e=this.El)===null||e===void 0||e.bt(),this.Hl.forEach(n=>n.Vn())}Dt(){return G(super.Dt())}kt(e){if(!((this.$l==="Line"||this.$l==="Area"||this.$l==="Baseline")&&this.cn.crosshairMarkerVisible))return null;const n=this.zt.Gh(e);return n===null?null:{_t:n.Vt[3],ht:this.ga(),Ot:this.Ma(),Pt:this.xa(),Tt:this.Sa(e)}}bh(){return this.cn.title}yt(){return this.cn.visible}ka(e){this.Hl.push(new wB(e,this))}ya(e){this.Hl=this.Hl.filter(n=>n.Ol()!==e)}Ca(){if(this.wn instanceof of)return e=>this.wn.We(e)}Ta(){if(this.wn instanceof of)return e=>this.wn.je(e)}_a(){return!eh(this.Dt().Pa())}pa(e,n){if(!Sl(e)||!Sl(n)||this.zt.Ni())return null;const r=this.$l==="Line"||this.$l==="Area"||this.$l==="Baseline"||this.$l==="Histogram"?[3]:[2,1],i=this.zt.ol(e,n,r);let s=i!==null?new Kt(i.ml,i.bl):null;if(this.Qh()==="Histogram"){const a=this.cn.base,l=new Kt(a,a);s=s!==null?s.ts(l):l}let o=this.dn.uh();return this.Hl.forEach(a=>{const l=a.Il(e,n);if(l!=null&&l.priceRange){const p=new Kt(l.priceRange.minValue,l.priceRange.maxValue);s=s!==null?s.ts(p):p}var c,u,h,f;l!=null&&l.margins&&(c=o,u=l.margins,o={above:Math.max((h=c==null?void 0:c.above)!==null&&h!==void 0?h:0,u.above),below:Math.max((f=c==null?void 0:c.below)!==null&&f!==void 0?f:0,u.below)})}),new Yu(s,o)}ga(){switch(this.$l){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerRadius}return 0}Ma(){switch(this.$l){case"Line":case"Area":case"Baseline":{const e=this.cn.crosshairMarkerBorderColor;if(e.length!==0)return e}}return null}xa(){switch(this.$l){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerBorderWidth}return 0}Sa(e){switch(this.$l){case"Line":case"Area":case"Baseline":{const n=this.cn.crosshairMarkerBackgroundColor;if(n.length!==0)return n}}return this.Us().$s(e).ce}Ul(){switch(this.cn.priceFormat.type){case"custom":this.wa={format:this.cn.priceFormat.formatter};break;case"volume":this.wa=new A3(this.cn.priceFormat.precision);break;case"percent":this.wa=new r_(this.cn.priceFormat.precision);break;default:{const e=Math.pow(10,this.cn.priceFormat.precision);this.wa=new th(e,this.cn.priceFormat.minMove*e)}}this.Yi!==null&&this.Yi.Ra()}Ql(){const e=this.$t().St();if(!e.Da()||this.zt.Ni())return void(this.Wl=[]);const n=G(this.zt.el());this.Wl=this.Fl.map((r,i)=>{const s=G(e.Va(r.time,!0)),o=s<n?1:-1;return{time:G(this.zt.ll(s,o)).ee,position:r.position,shape:r.shape,color:r.color,id:r.id,th:i,text:r.text,size:r.size,originalTime:r.originalTime}})}ql(e){switch(this.dn=new aB(this,this.$t()),this.$l){case"Bar":this.wn=new D3(this,this.$t());break;case"Candlestick":this.wn=new U3(this,this.$t());break;case"Line":this.wn=new Y3(this,this.$t());break;case"Custom":this.wn=new of(this,this.$t(),Ot(e));break;case"Area":this.wn=new L3(this,this.$t());break;case"Baseline":this.wn=new B3(this,this.$t());break;case"Histogram":this.wn=new K3(this,this.$t());break;default:throw Error("Unknown chart style assigned: "+this.$l)}}ca(e,n){const r=[];return lf(this.Hl,e,n,r),r}}class kB{constructor(e){this.cn=e}Oa(e,n,r){let i=e;if(this.cn.mode===0)return i;const s=r.vn(),o=s.Ct();if(o===null)return i;const a=s.Rt(e,o),l=r.Ba().filter(u=>u instanceof wv).reduce((u,h)=>{if(r.vr(h)||!h.yt())return u;const f=h.Dt(),p=h.In();if(f.Ni()||!p.Kr(n))return u;const g=p.Gh(n);if(g===null)return u;const m=Ys(h.Ct());return u.concat([f.Rt(g.Vt[3],m.Vt)])},[]);if(l.length===0)return i;l.sort((u,h)=>Math.abs(u-a)-Math.abs(h-a));const c=l[0];return i=s.pn(c,o),i}}class CB extends Kn{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}K({context:e,bitmapSize:n,horizontalPixelRatio:r,verticalPixelRatio:i}){if(this.zt===null)return;const s=Math.max(1,Math.floor(r));e.lineWidth=s,function(o,a){o.save(),o.lineWidth%2&&o.translate(.5,.5),a(),o.restore()}(e,()=>{const o=G(this.zt);if(o.Aa){e.strokeStyle=o.Ia,ds(e,o.za),e.beginPath();for(const a of o.La){const l=Math.round(a.Ea*r);e.moveTo(l,-s),e.lineTo(l,n.height+s)}e.stroke()}if(o.Na){e.strokeStyle=o.Fa,ds(e,o.Wa),e.beginPath();for(const a of o.ja){const l=Math.round(a.Ea*i);e.moveTo(-s,l),e.lineTo(n.width+s,l)}e.stroke()}})}}class EB{constructor(e){this.Wt=new CB,this.ft=!0,this.tn=e}bt(){this.ft=!0}gt(){if(this.ft){const e=this.tn.$t().W().grid,n={Na:e.horzLines.visible,Aa:e.vertLines.visible,Fa:e.horzLines.color,Ia:e.vertLines.color,Wa:e.horzLines.style,za:e.vertLines.style,ja:this.tn.vn().Ha(),La:(this.tn.$t().St().Ha()||[]).map(r=>({Ea:r.coord}))};this.Wt.J(n),this.ft=!1}return this.Wt}}class NB{constructor(e){this.wn=new EB(e)}qh(){return this.wn}}const uf={$a:4,Ua:1e-4};function Gs(t,e){const n=100*(t-e)/e;return e<0?-n:n}function _B(t,e){const n=Gs(t.Ph(),e),r=Gs(t.Rh(),e);return new Kt(n,r)}function Ma(t,e){const n=100*(t-e)/e+100;return e<0?-n:n}function TB(t,e){const n=Ma(t.Ph(),e),r=Ma(t.Rh(),e);return new Kt(n,r)}function Gu(t,e){const n=Math.abs(t);if(n<1e-15)return 0;const r=Math.log10(n+e.Ua)+e.$a;return t<0?-r:r}function Ia(t,e){const n=Math.abs(t);if(n<1e-15)return 0;const r=Math.pow(10,n-e.$a)-e.Ua;return t<0?-r:r}function aa(t,e){if(t===null)return null;const n=Gu(t.Ph(),e),r=Gu(t.Rh(),e);return new Kt(n,r)}function bc(t,e){if(t===null)return null;const n=Ia(t.Ph(),e),r=Ia(t.Rh(),e);return new Kt(n,r)}function df(t){if(t===null)return uf;const e=Math.abs(t.Rh()-t.Ph());if(e>=1||e<1e-15)return uf;const n=Math.ceil(Math.abs(Math.log10(e))),r=uf.$a+n;return{$a:r,Ua:1/Math.pow(10,r)}}class hf{constructor(e,n){if(this.qa=e,this.Ya=n,function(r){if(r<0)return!1;for(let i=r;i>1;i/=10)if(i%10!=0)return!1;return!0}(this.qa))this.Za=[2,2.5,2];else{this.Za=[];for(let r=this.qa;r!==1;){if(r%2==0)this.Za.push(2),r/=2;else{if(r%5!=0)throw new Error("unexpected base");this.Za.push(2,2.5),r/=5}if(this.Za.length>100)throw new Error("something wrong with base")}}}Xa(e,n,r){const i=this.qa===0?0:1/this.qa;let s=Math.pow(10,Math.max(0,Math.ceil(Math.log10(e-n)))),o=0,a=this.Ya[0];for(;;){const h=xc(s,i,1e-14)&&s>i+1e-14,f=xc(s,r*a,1e-14),p=xc(s,1,1e-14);if(!(h&&f&&p))break;s/=a,a=this.Ya[++o%this.Ya.length]}if(s<=i+1e-14&&(s=i),s=Math.max(1,s),this.Za.length>0&&(l=s,c=1,u=1e-14,Math.abs(l-c)<u))for(o=0,a=this.Za[0];xc(s,r*a,1e-14)&&s>i+1e-14;)s/=a,a=this.Za[++o%this.Za.length];var l,c,u;return s}}class $0{constructor(e,n,r,i){this.Ka=[],this.Li=e,this.qa=n,this.Ga=r,this.Ja=i}Xa(e,n){if(e<n)throw new Error("high < low");const r=this.Li.At(),i=(e-n)*this.Qa()/r,s=new hf(this.qa,[2,2.5,2]),o=new hf(this.qa,[2,2,2.5]),a=new hf(this.qa,[2.5,2,2]),l=[];return l.push(s.Xa(e,n,i),o.Xa(e,n,i),a.Xa(e,n,i)),function(c){if(c.length<1)throw Error("array is empty");let u=c[0];for(let h=1;h<c.length;++h)c[h]<u&&(u=c[h]);return u}(l)}io(){const e=this.Li,n=e.Ct();if(n===null)return void(this.Ka=[]);const r=e.At(),i=this.Ga(r-1,n),s=this.Ga(0,n),o=this.Li.W().entireTextOnly?this.no()/2:0,a=o,l=r-1-o,c=Math.max(i,s),u=Math.min(i,s);if(c===u)return void(this.Ka=[]);let h=this.Xa(c,u),f=c%h;f+=f<0?h:0;const p=c>=u?1:-1;let g=null,m=0;for(let w=c-f;w>u;w-=h){const v=this.Ja(w,n,!0);g!==null&&Math.abs(v-g)<this.Qa()||v<a||v>l||(m<this.Ka.length?(this.Ka[m].Ea=v,this.Ka[m].so=e.eo(w)):this.Ka.push({Ea:v,so:e.eo(w)}),m++,g=v,e.ro()&&(h=this.Xa(w*p,u)))}this.Ka.length=m}Ha(){return this.Ka}no(){return this.Li.P()}Qa(){return Math.ceil(2.5*this.no())}}function v_(t){return t.slice().sort((e,n)=>G(e.Xi())-G(n.Xi()))}var D0;(function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"})(D0||(D0={}));const z0=new r_,F0=new th(100,1);class AB{constructor(e,n,r,i){this.ho=0,this.lo=null,this.Ih=null,this.ao=null,this.oo={_o:!1,uo:null},this.co=0,this.do=0,this.fo=new et,this.vo=new et,this.po=[],this.mo=null,this.bo=null,this.wo=null,this.Mo=null,this.wa=F0,this.xo=df(null),this.So=e,this.cn=n,this.ko=r,this.yo=i,this.Co=new $0(this,100,this.To.bind(this),this.Po.bind(this))}Pa(){return this.So}W(){return this.cn}$h(e){if(Un(this.cn,e),this.Ra(),e.mode!==void 0&&this.Ro({Cr:e.mode}),e.scaleMargins!==void 0){const n=Ot(e.scaleMargins.top),r=Ot(e.scaleMargins.bottom);if(n<0||n>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${n}`);if(r<0||r>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${r}`);if(n+r>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${n+r}`);this.Do(),this.bo=null}}Vo(){return this.cn.autoScale}ro(){return this.cn.mode===1}Mh(){return this.cn.mode===2}Oo(){return this.cn.mode===3}Cr(){return{Wn:this.cn.autoScale,Bo:this.cn.invertScale,Cr:this.cn.mode}}Ro(e){const n=this.Cr();let r=null;e.Wn!==void 0&&(this.cn.autoScale=e.Wn),e.Cr!==void 0&&(this.cn.mode=e.Cr,e.Cr!==2&&e.Cr!==3||(this.cn.autoScale=!0),this.oo._o=!1),n.Cr===1&&e.Cr!==n.Cr&&(function(s,o){if(s===null)return!1;const a=Ia(s.Ph(),o),l=Ia(s.Rh(),o);return isFinite(a)&&isFinite(l)}(this.Ih,this.xo)?(r=bc(this.Ih,this.xo),r!==null&&this.Ao(r)):this.cn.autoScale=!0),e.Cr===1&&e.Cr!==n.Cr&&(r=aa(this.Ih,this.xo),r!==null&&this.Ao(r));const i=n.Cr!==this.cn.mode;i&&(n.Cr===2||this.Mh())&&this.Ra(),i&&(n.Cr===3||this.Oo())&&this.Ra(),e.Bo!==void 0&&n.Bo!==e.Bo&&(this.cn.invertScale=e.Bo,this.Io()),this.vo.m(n,this.Cr())}zo(){return this.vo}P(){return this.ko.fontSize}At(){return this.ho}Lo(e){this.ho!==e&&(this.ho=e,this.Do(),this.bo=null)}Eo(){if(this.lo)return this.lo;const e=this.At()-this.No()-this.Fo();return this.lo=e,e}Lh(){return this.Wo(),this.Ih}Ao(e,n){const r=this.Ih;(n||r===null&&e!==null||r!==null&&!r.Ch(e))&&(this.bo=null,this.Ih=e)}Ni(){return this.Wo(),this.ho===0||!this.Ih||this.Ih.Ni()}jo(e){return this.Bo()?e:this.At()-1-e}Rt(e,n){return this.Mh()?e=Gs(e,n):this.Oo()&&(e=Ma(e,n)),this.Po(e,n)}te(e,n,r){this.Wo();const i=this.Fo(),s=G(this.Lh()),o=s.Ph(),a=s.Rh(),l=this.Eo()-1,c=this.Bo(),u=l/(a-o),h=r===void 0?0:r.from,f=r===void 0?e.length:r.to,p=this.Ho();for(let g=h;g<f;g++){const m=e[g],w=m._t;if(isNaN(w))continue;let v=w;p!==null&&(v=p(m._t,n));const x=i+u*(v-o),b=c?x:this.ho-1-x;m.st=b}}be(e,n,r){this.Wo();const i=this.Fo(),s=G(this.Lh()),o=s.Ph(),a=s.Rh(),l=this.Eo()-1,c=this.Bo(),u=l/(a-o),h=r===void 0?0:r.from,f=r===void 0?e.length:r.to,p=this.Ho();for(let g=h;g<f;g++){const m=e[g];let w=m.ge,v=m.Me,x=m.xe,b=m.Se;p!==null&&(w=p(m.ge,n),v=p(m.Me,n),x=p(m.xe,n),b=p(m.Se,n));let S=i+u*(w-o),N=c?S:this.ho-1-S;m.pe=N,S=i+u*(v-o),N=c?S:this.ho-1-S,m.de=N,S=i+u*(x-o),N=c?S:this.ho-1-S,m.fe=N,S=i+u*(b-o),N=c?S:this.ho-1-S,m.me=N}}pn(e,n){const r=this.To(e,n);return this.$o(r,n)}$o(e,n){let r=e;return this.Mh()?r=function(i,s){return s<0&&(i=-i),i/100*s+s}(r,n):this.Oo()&&(r=function(i,s){return i-=100,s<0&&(i=-i),i/100*s+s}(r,n)),r}Ba(){return this.po}Uo(){if(this.mo)return this.mo;let e=[];for(let n=0;n<this.po.length;n++){const r=this.po[n];r.Xi()===null&&r.Ki(n+1),e.push(r)}return e=v_(e),this.mo=e,this.mo}qo(e){this.po.indexOf(e)===-1&&(this.po.push(e),this.Ra(),this.Yo())}Zo(e){const n=this.po.indexOf(e);if(n===-1)throw new Error("source is not attached to scale");this.po.splice(n,1),this.po.length===0&&(this.Ro({Wn:!0}),this.Ao(null)),this.Ra(),this.Yo()}Ct(){let e=null;for(const n of this.po){const r=n.Ct();r!==null&&(e===null||r.la<e.la)&&(e=r)}return e===null?null:e.Vt}Bo(){return this.cn.invertScale}Ha(){const e=this.Ct()===null;if(this.bo!==null&&(e||this.bo.Xo===e))return this.bo.Ha;this.Co.io();const n=this.Co.Ha();return this.bo={Ha:n,Xo:e},this.fo.m(),n}Ko(){return this.fo}Go(e){this.Mh()||this.Oo()||this.wo===null&&this.ao===null&&(this.Ni()||(this.wo=this.ho-e,this.ao=G(this.Lh()).Th()))}Jo(e){if(this.Mh()||this.Oo()||this.wo===null)return;this.Ro({Wn:!1}),(e=this.ho-e)<0&&(e=0);let n=(this.wo+.2*(this.ho-1))/(e+.2*(this.ho-1));const r=G(this.ao).Th();n=Math.max(n,.1),r.Vh(n),this.Ao(r)}Qo(){this.Mh()||this.Oo()||(this.wo=null,this.ao=null)}t_(e){this.Vo()||this.Mo===null&&this.ao===null&&(this.Ni()||(this.Mo=e,this.ao=G(this.Lh()).Th()))}i_(e){if(this.Vo()||this.Mo===null)return;const n=G(this.Lh()).Dh()/(this.Eo()-1);let r=e-this.Mo;this.Bo()&&(r*=-1);const i=r*n,s=G(this.ao).Th();s.Oh(i),this.Ao(s,!0),this.bo=null}n_(){this.Vo()||this.Mo!==null&&(this.Mo=null,this.ao=null)}ba(){return this.wa||this.Ra(),this.wa}Fi(e,n){switch(this.cn.mode){case 2:return this.s_(Gs(e,n));case 3:return this.ba().format(Ma(e,n));default:return this.Wh(e)}}eo(e){switch(this.cn.mode){case 2:return this.s_(e);case 3:return this.ba().format(e);default:return this.Wh(e)}}Yl(e){return this.Wh(e,G(this.e_()).ba())}Zl(e,n){return e=Gs(e,n),this.s_(e,z0)}r_(){return this.po}h_(e){this.oo={uo:e,_o:!1}}Vn(){this.po.forEach(e=>e.Vn())}Ra(){this.bo=null;const e=this.e_();let n=100;e!==null&&(n=Math.round(1/e.ma())),this.wa=F0,this.Mh()?(this.wa=z0,n=100):this.Oo()?(this.wa=new th(100,1),n=100):e!==null&&(this.wa=e.ba()),this.Co=new $0(this,n,this.To.bind(this),this.Po.bind(this)),this.Co.io()}Yo(){this.mo=null}e_(){return this.po[0]||null}No(){return this.Bo()?this.cn.scaleMargins.bottom*this.At()+this.do:this.cn.scaleMargins.top*this.At()+this.co}Fo(){return this.Bo()?this.cn.scaleMargins.top*this.At()+this.co:this.cn.scaleMargins.bottom*this.At()+this.do}Wo(){this.oo._o||(this.oo._o=!0,this.l_())}Do(){this.lo=null}Po(e,n){if(this.Wo(),this.Ni())return 0;e=this.ro()&&e?Gu(e,this.xo):e;const r=G(this.Lh()),i=this.Fo()+(this.Eo()-1)*(e-r.Ph())/r.Dh();return this.jo(i)}To(e,n){if(this.Wo(),this.Ni())return 0;const r=this.jo(e),i=G(this.Lh()),s=i.Ph()+i.Dh()*((r-this.Fo())/(this.Eo()-1));return this.ro()?Ia(s,this.xo):s}Io(){this.bo=null,this.Co.io()}l_(){const e=this.oo.uo;if(e===null)return;let n=null;const r=this.r_();let i=0,s=0;for(const l of r){if(!l.yt())continue;const c=l.Ct();if(c===null)continue;const u=l.Il(e.Os(),e.ui());let h=u&&u.Lh();if(h!==null){switch(this.cn.mode){case 1:h=aa(h,this.xo);break;case 2:h=_B(h,c.Vt);break;case 3:h=TB(h,c.Vt)}if(n=n===null?h:n.ts(G(h)),u!==null){const f=u.Eh();f!==null&&(i=Math.max(i,f.above),s=Math.max(s,f.below))}}}if(i===this.co&&s===this.do||(this.co=i,this.do=s,this.bo=null,this.Do()),n!==null){if(n.Ph()===n.Rh()){const l=this.e_(),c=5*(l===null||this.Mh()||this.Oo()?1:l.ma());this.ro()&&(n=bc(n,this.xo)),n=new Kt(n.Ph()-c,n.Rh()+c),this.ro()&&(n=aa(n,this.xo))}if(this.ro()){const l=bc(n,this.xo),c=df(l);if(o=c,a=this.xo,o.$a!==a.$a||o.Ua!==a.Ua){const u=this.ao!==null?bc(this.ao,this.xo):null;this.xo=c,n=aa(l,c),u!==null&&(this.ao=aa(u,c))}}this.Ao(n)}else this.Ih===null&&(this.Ao(new Kt(-.5,.5)),this.xo=df(null));var o,a;this.oo._o=!0}Ho(){return this.Mh()?Gs:this.Oo()?Ma:this.ro()?e=>Gu(e,this.xo):null}a_(e,n,r){return n===void 0?(r===void 0&&(r=this.ba()),r.format(e)):n(e)}Wh(e,n){return this.a_(e,this.yo.priceFormatter,n)}s_(e,n){return this.a_(e,this.yo.percentageFormatter,n)}}class PB{constructor(e,n){this.po=[],this.o_=new Map,this.ho=0,this.__=0,this.u_=1e3,this.mo=null,this.c_=new et,this.yl=e,this.$i=n,this.d_=new NB(this);const r=n.W();this.f_=this.v_("left",r.leftPriceScale),this.p_=this.v_("right",r.rightPriceScale),this.f_.zo().l(this.m_.bind(this,this.f_),this),this.p_.zo().l(this.m_.bind(this,this.p_),this),this.b_(r)}b_(e){if(e.leftPriceScale&&this.f_.$h(e.leftPriceScale),e.rightPriceScale&&this.p_.$h(e.rightPriceScale),e.localization&&(this.f_.Ra(),this.p_.Ra()),e.overlayPriceScales){const n=Array.from(this.o_.values());for(const r of n){const i=G(r[0].Dt());i.$h(e.overlayPriceScales),e.localization&&i.Ra()}}}w_(e){switch(e){case"left":return this.f_;case"right":return this.p_}return this.o_.has(e)?Ot(this.o_.get(e))[0].Dt():null}S(){this.$t().g_().p(this),this.f_.zo().p(this),this.p_.zo().p(this),this.po.forEach(e=>{e.S&&e.S()}),this.c_.m()}M_(){return this.u_}x_(e){this.u_=e}$t(){return this.$i}Hi(){return this.__}At(){return this.ho}S_(e){this.__=e,this.k_()}Lo(e){this.ho=e,this.f_.Lo(e),this.p_.Lo(e),this.po.forEach(n=>{if(this.vr(n)){const r=n.Dt();r!==null&&r.Lo(e)}}),this.k_()}Ba(){return this.po}vr(e){const n=e.Dt();return n===null||this.f_!==n&&this.p_!==n}qo(e,n,r){const i=r!==void 0?r:this.C_().y_+1;this.T_(e,n,i)}Zo(e){const n=this.po.indexOf(e);_i(n!==-1,"removeDataSource: invalid data source"),this.po.splice(n,1);const r=G(e.Dt()).Pa();if(this.o_.has(r)){const s=Ot(this.o_.get(r)),o=s.indexOf(e);o!==-1&&(s.splice(o,1),s.length===0&&this.o_.delete(r))}const i=e.Dt();i&&i.Ba().indexOf(e)>=0&&i.Zo(e),i!==null&&(i.Yo(),this.P_(i)),this.mo=null}mr(e){return e===this.f_?"left":e===this.p_?"right":"overlay"}R_(){return this.f_}D_(){return this.p_}V_(e,n){e.Go(n)}O_(e,n){e.Jo(n),this.k_()}B_(e){e.Qo()}A_(e,n){e.t_(n)}I_(e,n){e.i_(n),this.k_()}z_(e){e.n_()}k_(){this.po.forEach(e=>{e.Vn()})}vn(){let e=null;return this.$i.W().rightPriceScale.visible&&this.p_.Ba().length!==0?e=this.p_:this.$i.W().leftPriceScale.visible&&this.f_.Ba().length!==0?e=this.f_:this.po.length!==0&&(e=this.po[0].Dt()),e===null&&(e=this.p_),e}pr(){let e=null;return this.$i.W().rightPriceScale.visible?e=this.p_:this.$i.W().leftPriceScale.visible&&(e=this.f_),e}P_(e){e!==null&&e.Vo()&&this.L_(e)}E_(e){const n=this.yl.Xs();e.Ro({Wn:!0}),n!==null&&e.h_(n),this.k_()}N_(){this.L_(this.f_),this.L_(this.p_)}F_(){this.P_(this.f_),this.P_(this.p_),this.po.forEach(e=>{this.vr(e)&&this.P_(e.Dt())}),this.k_(),this.$i.Uh()}Uo(){return this.mo===null&&(this.mo=v_(this.po)),this.mo}W_(){return this.c_}j_(){return this.d_}L_(e){const n=e.r_();if(n&&n.length>0&&!this.yl.Ni()){const r=this.yl.Xs();r!==null&&e.h_(r)}e.Vn()}C_(){const e=this.Uo();if(e.length===0)return{H_:0,y_:0};let n=0,r=0;for(let i=0;i<e.length;i++){const s=e[i].Xi();s!==null&&(s<n&&(n=s),s>r&&(r=s))}return{H_:n,y_:r}}T_(e,n,r){let i=this.w_(n);if(i===null&&(i=this.v_(n,this.$i.W().overlayPriceScales)),this.po.push(e),!eh(n)){const s=this.o_.get(n)||[];s.push(e),this.o_.set(n,s)}i.qo(e),e.Gi(i),e.Ki(r),this.P_(i),this.mo=null}m_(e,n,r){n.Cr!==r.Cr&&this.L_(e)}v_(e,n){const r=Object.assign({visible:!0,autoScale:!0},Ar(n)),i=new AB(e,r,this.$i.W().layout,this.$i.W().localization);return i.Lo(this.At()),i}}class jB{constructor(e,n,r=50){this.Ke=0,this.Ge=1,this.Je=1,this.tr=new Map,this.Qe=new Map,this.U_=e,this.q_=n,this.ir=r}Y_(e){const n=e.time,r=this.q_.cacheKey(n),i=this.tr.get(r);if(i!==void 0)return i.Z_;if(this.Ke===this.ir){const o=this.Qe.get(this.Je);this.Qe.delete(this.Je),this.tr.delete(Ot(o)),this.Je++,this.Ke--}const s=this.U_(e);return this.tr.set(r,{Z_:s,rr:this.Ge}),this.Qe.set(this.Ge,r),this.Ke++,this.Ge++,s}}class Oa{constructor(e,n){_i(e<=n,"right should be >= left"),this.X_=e,this.K_=n}Os(){return this.X_}ui(){return this.K_}G_(){return this.K_-this.X_+1}Kr(e){return this.X_<=e&&e<=this.K_}Ch(e){return this.X_===e.Os()&&this.K_===e.ui()}}function B0(t,e){return t===null||e===null?t===e:t.Ch(e)}class RB{constructor(){this.J_=new Map,this.tr=null,this.Q_=!1}tu(e){this.Q_=e,this.tr=null}iu(e,n){this.nu(n),this.tr=null;for(let r=n;r<e.length;++r){const i=e[r];let s=this.J_.get(i.timeWeight);s===void 0&&(s=[],this.J_.set(i.timeWeight,s)),s.push({index:r,time:i.time,weight:i.timeWeight,originalTime:i.originalTime})}}su(e,n){const r=Math.ceil(n/e);return this.tr!==null&&this.tr.eu===r||(this.tr={Ha:this.ru(r),eu:r}),this.tr.Ha}nu(e){if(e===0)return void this.J_.clear();const n=[];this.J_.forEach((r,i)=>{e<=r[0].index?n.push(i):r.splice(Ul(r,e,s=>s.index<e),1/0)});for(const r of n)this.J_.delete(r)}ru(e){let n=[];for(const r of Array.from(this.J_.keys()).sort((i,s)=>s-i)){if(!this.J_.get(r))continue;const i=n;n=[];const s=i.length;let o=0;const a=Ot(this.J_.get(r)),l=a.length;let c=1/0,u=-1/0;for(let h=0;h<l;h++){const f=a[h],p=f.index;for(;o<s;){const g=i[o],m=g.index;if(!(m<p)){c=m;break}o++,n.push(g),u=m,c=1/0}if(c-p>=e&&p-u>=e)n.push(f),u=p;else if(this.Q_)return i}for(;o<s;o++)n.push(i[o])}return n}}class ho{constructor(e){this.hu=e}lu(){return this.hu===null?null:new Oa(Math.floor(this.hu.Os()),Math.ceil(this.hu.ui()))}au(){return this.hu}static ou(){return new ho(null)}}function MB(t,e){return t.weight>e.weight?t:e}class IB{constructor(e,n,r,i){this.__=0,this._u=null,this.uu=[],this.Mo=null,this.wo=null,this.cu=new RB,this.du=new Map,this.fu=ho.ou(),this.vu=!0,this.pu=new et,this.mu=new et,this.bu=new et,this.wu=null,this.gu=null,this.Mu=[],this.cn=n,this.yo=r,this.xu=n.rightOffset,this.Su=n.barSpacing,this.$i=e,this.q_=i,this.ku(),this.cu.tu(n.uniformDistribution)}W(){return this.cn}yu(e){Un(this.yo,e),this.Cu(),this.ku()}$h(e,n){var r;Un(this.cn,e),this.cn.fixLeftEdge&&this.Tu(),this.cn.fixRightEdge&&this.Pu(),e.barSpacing!==void 0&&this.$i.Gn(e.barSpacing),e.rightOffset!==void 0&&this.$i.Jn(e.rightOffset),e.minBarSpacing!==void 0&&this.$i.Gn((r=e.barSpacing)!==null&&r!==void 0?r:this.Su),this.Cu(),this.ku(),this.bu.m()}mn(e){var n,r;return(r=(n=this.uu[e])===null||n===void 0?void 0:n.time)!==null&&r!==void 0?r:null}Ui(e){var n;return(n=this.uu[e])!==null&&n!==void 0?n:null}Va(e,n){if(this.uu.length<1)return null;if(this.q_.key(e)>this.q_.key(this.uu[this.uu.length-1].time))return n?this.uu.length-1:null;const r=Ul(this.uu,this.q_.key(e),(i,s)=>this.q_.key(i.time)<s);return this.q_.key(e)<this.q_.key(this.uu[r].time)?n?r:null:r}Ni(){return this.__===0||this.uu.length===0||this._u===null}Da(){return this.uu.length>0}Xs(){return this.Ru(),this.fu.lu()}Du(){return this.Ru(),this.fu.au()}Vu(){const e=this.Xs();if(e===null)return null;const n={from:e.Os(),to:e.ui()};return this.Ou(n)}Ou(e){const n=Math.round(e.from),r=Math.round(e.to),i=G(this.Bu()),s=G(this.Au());return{from:G(this.Ui(Math.max(i,n))),to:G(this.Ui(Math.min(s,r)))}}Iu(e){return{from:G(this.Va(e.from,!0)),to:G(this.Va(e.to,!0))}}Hi(){return this.__}S_(e){if(!isFinite(e)||e<=0||this.__===e)return;const n=this.Du(),r=this.__;if(this.__=e,this.vu=!0,this.cn.lockVisibleTimeRangeOnResize&&r!==0){const i=this.Su*e/r;this.Su=i}if(this.cn.fixLeftEdge&&n!==null&&n.Os()<=0){const i=r-e;this.xu-=Math.round(i/this.Su)+1,this.vu=!0}this.zu(),this.Lu()}It(e){if(this.Ni()||!Sl(e))return 0;const n=this.Eu()+this.xu-e;return this.__-(n+.5)*this.Su-1}Qs(e,n){const r=this.Eu(),i=n===void 0?0:n.from,s=n===void 0?e.length:n.to;for(let o=i;o<s;o++){const a=e[o].ot,l=r+this.xu-a,c=this.__-(l+.5)*this.Su-1;e[o].nt=c}}Nu(e){return Math.ceil(this.Fu(e))}Jn(e){this.vu=!0,this.xu=e,this.Lu(),this.$i.Wu(),this.$i.Uh()}le(){return this.Su}Gn(e){this.ju(e),this.Lu(),this.$i.Wu(),this.$i.Uh()}Hu(){return this.xu}Ha(){if(this.Ni())return null;if(this.gu!==null)return this.gu;const e=this.Su,n=5*(this.$i.W().layout.fontSize+4)/8*(this.cn.tickMarkMaxCharacterLength||8),r=Math.round(n/e),i=G(this.Xs()),s=Math.max(i.Os(),i.Os()-r),o=Math.max(i.ui(),i.ui()-r),a=this.cu.su(e,n),l=this.Bu()+r,c=this.Au()-r,u=this.$u(),h=this.cn.fixLeftEdge||u,f=this.cn.fixRightEdge||u;let p=0;for(const g of a){if(!(s<=g.index&&g.index<=o))continue;let m;p<this.Mu.length?(m=this.Mu[p],m.coord=this.It(g.index),m.label=this.Uu(g),m.weight=g.weight):(m={needAlignCoordinate:!1,coord:this.It(g.index),label:this.Uu(g),weight:g.weight},this.Mu.push(m)),this.Su>n/2&&!u?m.needAlignCoordinate=!1:m.needAlignCoordinate=h&&g.index<=l||f&&g.index>=c,p++}return this.Mu.length=p,this.gu=this.Mu,this.Mu}qu(){this.vu=!0,this.Gn(this.cn.barSpacing),this.Jn(this.cn.rightOffset)}Yu(e){this.vu=!0,this._u=e,this.Lu(),this.Tu()}Zu(e,n){const r=this.Fu(e),i=this.le(),s=i+n*(i/10);this.Gn(s),this.cn.rightBarStaysOnScroll||this.Jn(this.Hu()+(r-this.Fu(e)))}Go(e){this.Mo&&this.n_(),this.wo===null&&this.wu===null&&(this.Ni()||(this.wo=e,this.Xu()))}Jo(e){if(this.wu===null)return;const n=cm(this.__-e,0,this.__),r=cm(this.__-G(this.wo),0,this.__);n!==0&&r!==0&&this.Gn(this.wu.le*n/r)}Qo(){this.wo!==null&&(this.wo=null,this.Ku())}t_(e){this.Mo===null&&this.wu===null&&(this.Ni()||(this.Mo=e,this.Xu()))}i_(e){if(this.Mo===null)return;const n=(this.Mo-e)/this.le();this.xu=G(this.wu).Hu+n,this.vu=!0,this.Lu()}n_(){this.Mo!==null&&(this.Mo=null,this.Ku())}Gu(){this.Ju(this.cn.rightOffset)}Ju(e,n=400){if(!isFinite(e))throw new RangeError("offset is required and must be finite number");if(!isFinite(n)||n<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const r=this.xu,i=performance.now();this.$i.Zn({Qu:s=>(s-i)/n>=1,tc:s=>{const o=(s-i)/n;return o>=1?e:r+(e-r)*o}})}bt(e,n){this.vu=!0,this.uu=e,this.cu.iu(e,n),this.Lu()}nc(){return this.pu}sc(){return this.mu}ec(){return this.bu}Eu(){return this._u||0}rc(e){const n=e.G_();this.ju(this.__/n),this.xu=e.ui()-this.Eu(),this.Lu(),this.vu=!0,this.$i.Wu(),this.$i.Uh()}hc(){const e=this.Bu(),n=this.Au();e!==null&&n!==null&&this.rc(new Oa(e,n+this.cn.rightOffset))}lc(e){const n=new Oa(e.from,e.to);this.rc(n)}qi(e){return this.yo.timeFormatter!==void 0?this.yo.timeFormatter(e.originalTime):this.q_.formatHorzItem(e.time)}$u(){const{handleScroll:e,handleScale:n}=this.$i.W();return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||n.axisDoubleClickReset.time||n.axisPressedMouseMove.time||n.mouseWheel||n.pinch)}Bu(){return this.uu.length===0?null:0}Au(){return this.uu.length===0?null:this.uu.length-1}ac(e){return(this.__-1-e)/this.Su}Fu(e){const n=this.ac(e),r=this.Eu()+this.xu-n;return Math.round(1e6*r)/1e6}ju(e){const n=this.Su;this.Su=e,this.zu(),n!==this.Su&&(this.vu=!0,this.oc())}Ru(){if(!this.vu)return;if(this.vu=!1,this.Ni())return void this._c(ho.ou());const e=this.Eu(),n=this.__/this.Su,r=this.xu+e,i=new Oa(r-n+1,r);this._c(new ho(i))}zu(){const e=this.uc();if(this.Su<e&&(this.Su=e,this.vu=!0),this.__!==0){const n=.5*this.__;this.Su>n&&(this.Su=n,this.vu=!0)}}uc(){return this.cn.fixLeftEdge&&this.cn.fixRightEdge&&this.uu.length!==0?this.__/this.uu.length:this.cn.minBarSpacing}Lu(){const e=this.cc();e!==null&&this.xu<e&&(this.xu=e,this.vu=!0);const n=this.dc();this.xu>n&&(this.xu=n,this.vu=!0)}cc(){const e=this.Bu(),n=this._u;return e===null||n===null?null:e-n-1+(this.cn.fixLeftEdge?this.__/this.Su:Math.min(2,this.uu.length))}dc(){return this.cn.fixRightEdge?0:this.__/this.Su-Math.min(2,this.uu.length)}Xu(){this.wu={le:this.le(),Hu:this.Hu()}}Ku(){this.wu=null}Uu(e){let n=this.du.get(e.weight);return n===void 0&&(n=new jB(r=>this.fc(r),this.q_),this.du.set(e.weight,n)),n.Y_(e)}fc(e){return this.q_.formatTickmark(e,this.yo)}_c(e){const n=this.fu;this.fu=e,B0(n.lu(),this.fu.lu())||this.pu.m(),B0(n.au(),this.fu.au())||this.mu.m(),this.oc()}oc(){this.gu=null}Cu(){this.oc(),this.du.clear()}ku(){this.q_.updateFormatter(this.yo)}Tu(){if(!this.cn.fixLeftEdge)return;const e=this.Bu();if(e===null)return;const n=this.Xs();if(n===null)return;const r=n.Os()-e;if(r<0){const i=this.xu-r-1;this.Jn(i)}this.zu()}Pu(){this.Lu(),this.zu()}}class OB{X(e,n,r){e.useMediaCoordinateSpace(i=>this.K(i,n,r))}gl(e,n,r){e.useMediaCoordinateSpace(i=>this.vc(i,n,r))}vc(e,n,r){}}class LB extends OB{constructor(e){super(),this.mc=new Map,this.zt=e}K(e){}vc(e){if(!this.zt.yt)return;const{context:n,mediaSize:r}=e;let i=0;for(const o of this.zt.bc){if(o.Kt.length===0)continue;n.font=o.R;const a=this.wc(n,o.Kt);a>r.width?o.Zu=r.width/a:o.Zu=1,i+=o.gc*o.Zu}let s=0;switch(this.zt.Mc){case"top":s=0;break;case"center":s=Math.max((r.height-i)/2,0);break;case"bottom":s=Math.max(r.height-i,0)}n.fillStyle=this.zt.V;for(const o of this.zt.bc){n.save();let a=0;switch(this.zt.xc){case"left":n.textAlign="left",a=o.gc/2;break;case"center":n.textAlign="center",a=r.width/2;break;case"right":n.textAlign="right",a=r.width-1-o.gc/2}n.translate(a,s),n.textBaseline="top",n.font=o.R,n.scale(o.Zu,o.Zu),n.fillText(o.Kt,0,o.Sc),n.restore(),s+=o.gc*o.Zu}}wc(e,n){const r=this.kc(e.font);let i=r.get(n);return i===void 0&&(i=e.measureText(n).width,r.set(n,i)),i}kc(e){let n=this.mc.get(e);return n===void 0&&(n=new Map,this.mc.set(e,n)),n}}class $B{constructor(e){this.ft=!0,this.Ft={yt:!1,V:"",bc:[],Mc:"center",xc:"center"},this.Wt=new LB(this.Ft),this.jt=e}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const e=this.jt.W(),n=this.Ft;n.yt=e.visible,n.yt&&(n.V=e.color,n.xc=e.horzAlign,n.Mc=e.vertAlign,n.bc=[{Kt:e.text,R:jo(e.fontSize,e.fontFamily,e.fontStyle),gc:1.2*e.fontSize,Sc:0,Zu:0}])}}class DB extends gv{constructor(e,n){super(),this.cn=n,this.wn=new $B(this)}Rn(){return[]}Pn(){return[this.wn]}W(){return this.cn}Vn(){this.wn.bt()}}var V0,U0,H0,um,zi;(function(t){t[t.OnTouchEnd=0]="OnTouchEnd",t[t.OnNextTap=1]="OnNextTap"})(V0||(V0={}));class zB{constructor(e,n,r){this.yc=[],this.Cc=[],this.__=0,this.Tc=null,this.Pc=new et,this.Rc=new et,this.Dc=null,this.Vc=e,this.cn=n,this.q_=r,this.Oc=new v3(this),this.yl=new IB(this,n.timeScale,this.cn.localization,r),this.vt=new T3(this,n.crosshair),this.Bc=new kB(n.crosshair),this.Ac=new DB(this,n.watermark),this.Ic(),this.yc[0].x_(2e3),this.zc=this.Lc(0),this.Ec=this.Lc(1)}Kl(){this.Nc(yt.es())}Uh(){this.Nc(yt.ss())}oa(){this.Nc(new yt(1))}Gl(e){const n=this.Fc(e);this.Nc(n)}Wc(){return this.Tc}jc(e){const n=this.Tc;this.Tc=e,n!==null&&this.Gl(n.Hc),e!==null&&this.Gl(e.Hc)}W(){return this.cn}$h(e){Un(this.cn,e),this.yc.forEach(n=>n.b_(e)),e.timeScale!==void 0&&this.yl.$h(e.timeScale),e.localization!==void 0&&this.yl.yu(e.localization),(e.leftPriceScale||e.rightPriceScale)&&this.Pc.m(),this.zc=this.Lc(0),this.Ec=this.Lc(1),this.Kl()}$c(e,n){if(e==="left")return void this.$h({leftPriceScale:n});if(e==="right")return void this.$h({rightPriceScale:n});const r=this.Uc(e);r!==null&&(r.Dt.$h(n),this.Pc.m())}Uc(e){for(const n of this.yc){const r=n.w_(e);if(r!==null)return{Ht:n,Dt:r}}return null}St(){return this.yl}qc(){return this.yc}Yc(){return this.Ac}Zc(){return this.vt}Xc(){return this.Rc}Kc(e,n){e.Lo(n),this.Wu()}S_(e){this.__=e,this.yl.S_(this.__),this.yc.forEach(n=>n.S_(e)),this.Wu()}Ic(e){const n=new PB(this.yl,this);e!==void 0?this.yc.splice(e,0,n):this.yc.push(n);const r=e===void 0?this.yc.length-1:e,i=yt.es();return i.Nn(r,{Fn:0,Wn:!0}),this.Nc(i),n}V_(e,n,r){e.V_(n,r)}O_(e,n,r){e.O_(n,r),this.Jl(),this.Nc(this.Gc(e,2))}B_(e,n){e.B_(n),this.Nc(this.Gc(e,2))}A_(e,n,r){n.Vo()||e.A_(n,r)}I_(e,n,r){n.Vo()||(e.I_(n,r),this.Jl(),this.Nc(this.Gc(e,2)))}z_(e,n){n.Vo()||(e.z_(n),this.Nc(this.Gc(e,2)))}E_(e,n){e.E_(n),this.Nc(this.Gc(e,2))}Jc(e){this.yl.Go(e)}Qc(e,n){const r=this.St();if(r.Ni()||n===0)return;const i=r.Hi();e=Math.max(1,Math.min(e,i)),r.Zu(e,n),this.Wu()}td(e){this.nd(0),this.sd(e),this.ed()}rd(e){this.yl.Jo(e),this.Wu()}hd(){this.yl.Qo(),this.Uh()}nd(e){this.yl.t_(e)}sd(e){this.yl.i_(e),this.Wu()}ed(){this.yl.n_(),this.Uh()}wt(){return this.Cc}ld(e,n,r,i,s){this.vt.gn(e,n);let o=NaN,a=this.yl.Nu(e);const l=this.yl.Xs();l!==null&&(a=Math.min(Math.max(l.Os(),a),l.ui()));const c=i.vn(),u=c.Ct();u!==null&&(o=c.pn(n,u)),o=this.Bc.Oa(o,a,i),this.vt.kn(a,o,i),this.oa(),s||this.Rc.m(this.vt.xt(),{x:e,y:n},r)}ad(e,n,r){const i=r.vn(),s=i.Ct(),o=i.Rt(e,G(s)),a=this.yl.Va(n,!0),l=this.yl.It(G(a));this.ld(l,o,null,r,!0)}od(e){this.Zc().Cn(),this.oa(),e||this.Rc.m(null,null,null)}Jl(){const e=this.vt.Ht();if(e!==null){const n=this.vt.xn(),r=this.vt.Sn();this.ld(n,r,null,e)}this.vt.Vn()}_d(e,n,r){const i=this.yl.mn(0);n!==void 0&&r!==void 0&&this.yl.bt(n,r);const s=this.yl.mn(0),o=this.yl.Eu(),a=this.yl.Xs();if(a!==null&&i!==null&&s!==null){const l=a.Kr(o),c=this.q_.key(i)>this.q_.key(s),u=e!==null&&e>o&&!c,h=this.yl.W().allowShiftVisibleRangeOnWhitespaceReplacement,f=l&&(r!==void 0||h)&&this.yl.W().shiftVisibleRangeOnNewBar;if(u&&!f){const p=e-o;this.yl.Jn(this.yl.Hu()-p)}}this.yl.Yu(e)}ia(e){e!==null&&e.F_()}dr(e){const n=this.yc.find(r=>r.Uo().includes(e));return n===void 0?null:n}Wu(){this.Ac.Vn(),this.yc.forEach(e=>e.F_()),this.Jl()}S(){this.yc.forEach(e=>e.S()),this.yc.length=0,this.cn.localization.priceFormatter=void 0,this.cn.localization.percentageFormatter=void 0,this.cn.localization.timeFormatter=void 0}ud(){return this.Oc}br(){return this.Oc.W()}g_(){return this.Pc}dd(e,n,r){const i=this.yc[0],s=this.fd(n,e,i,r);return this.Cc.push(s),this.Cc.length===1?this.Kl():this.Uh(),s}vd(e){const n=this.dr(e),r=this.Cc.indexOf(e);_i(r!==-1,"Series not found"),this.Cc.splice(r,1),G(n).Zo(e),e.S&&e.S()}Xl(e,n){const r=G(this.dr(e));r.Zo(e);const i=this.Uc(n);if(i===null){const s=e.Xi();r.qo(e,n,s)}else{const s=i.Ht===r?e.Xi():void 0;i.Ht.qo(e,n,s)}}hc(){const e=yt.ss();e.$n(),this.Nc(e)}pd(e){const n=yt.ss();n.Yn(e),this.Nc(n)}Kn(){const e=yt.ss();e.Kn(),this.Nc(e)}Gn(e){const n=yt.ss();n.Gn(e),this.Nc(n)}Jn(e){const n=yt.ss();n.Jn(e),this.Nc(n)}Zn(e){const n=yt.ss();n.Zn(e),this.Nc(n)}Un(){const e=yt.ss();e.Un(),this.Nc(e)}md(){return this.cn.rightPriceScale.visible?"right":"left"}bd(){return this.Ec}q(){return this.zc}Bt(e){const n=this.Ec,r=this.zc;if(n===r)return n;if(e=Math.max(0,Math.min(100,Math.round(100*e))),this.Dc===null||this.Dc.Ps!==r||this.Dc.Rs!==n)this.Dc={Ps:r,Rs:n,wd:new Map};else{const s=this.Dc.wd.get(e);if(s!==void 0)return s}const i=function(s,o,a){const[l,c,u,h]=bl(s),[f,p,g,m]=bl(o),w=[mn(l+a*(f-l)),mn(c+a*(p-c)),mn(u+a*(g-u)),JN(h+a*(m-h))];return`rgba(${w[0]}, ${w[1]}, ${w[2]}, ${w[3]})`}(r,n,e/100);return this.Dc.wd.set(e,i),i}Gc(e,n){const r=new yt(n);if(e!==null){const i=this.yc.indexOf(e);r.Nn(i,{Fn:n})}return r}Fc(e,n){return n===void 0&&(n=2),this.Gc(this.dr(e),n)}Nc(e){this.Vc&&this.Vc(e),this.yc.forEach(n=>n.j_().qh().bt())}fd(e,n,r,i){const s=new wv(this,e,n,r,i),o=e.priceScaleId!==void 0?e.priceScaleId:this.md();return r.qo(s,o),eh(o)||s.$h(e),s}Lc(e){const n=this.cn.layout;return n.background.type==="gradient"?e===0?n.background.topColor:n.background.bottomColor:n.background.color}}function dm(t){return!nr(t)&&!Vl(t)}function y_(t){return nr(t)}(function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"})(U0||(U0={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(H0||(H0={})),function(t){t.Solid="solid",t.VerticalGradient="gradient"}(um||(um={})),function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(zi||(zi={}));const W0=t=>t.getUTCFullYear();function FB(t,e,n){return e.replace(/yyyy/g,(r=>Pr(W0(r),4))(t)).replace(/yy/g,(r=>Pr(W0(r)%100,2))(t)).replace(/MMMM/g,((r,i)=>new Date(r.getUTCFullYear(),r.getUTCMonth(),1).toLocaleString(i,{month:"long"}))(t,n)).replace(/MMM/g,((r,i)=>new Date(r.getUTCFullYear(),r.getUTCMonth(),1).toLocaleString(i,{month:"short"}))(t,n)).replace(/MM/g,(r=>Pr((i=>i.getUTCMonth()+1)(r),2))(t)).replace(/dd/g,(r=>Pr((i=>i.getUTCDate())(r),2))(t))}class x_{constructor(e="yyyy-MM-dd",n="default"){this.gd=e,this.Md=n}Y_(e){return FB(e,this.gd,this.Md)}}class BB{constructor(e){this.xd=e||"%h:%m:%s"}Y_(e){return this.xd.replace("%h",Pr(e.getUTCHours(),2)).replace("%m",Pr(e.getUTCMinutes(),2)).replace("%s",Pr(e.getUTCSeconds(),2))}}const VB={Sd:"yyyy-MM-dd",kd:"%h:%m:%s",yd:" ",Cd:"default"};class UB{constructor(e={}){const n=Object.assign(Object.assign({},VB),e);this.Td=new x_(n.Sd,n.Cd),this.Pd=new BB(n.kd),this.Rd=n.yd}Y_(e){return`${this.Td.Y_(e)}${this.Rd}${this.Pd.Y_(e)}`}}function Sc(t){return 60*t*60*1e3}function ff(t){return 60*t*1e3}const kc=[{Dd:(q0=1,1e3*q0),Vd:10},{Dd:ff(1),Vd:20},{Dd:ff(5),Vd:21},{Dd:ff(30),Vd:22},{Dd:Sc(1),Vd:30},{Dd:Sc(3),Vd:31},{Dd:Sc(6),Vd:32},{Dd:Sc(12),Vd:33}];var q0;function K0(t,e){if(t.getUTCFullYear()!==e.getUTCFullYear())return 70;if(t.getUTCMonth()!==e.getUTCMonth())return 60;if(t.getUTCDate()!==e.getUTCDate())return 50;for(let n=kc.length-1;n>=0;--n)if(Math.floor(e.getTime()/kc[n].Dd)!==Math.floor(t.getTime()/kc[n].Dd))return kc[n].Vd;return 0}function pf(t){let e=t;if(Vl(t)&&(e=bv(t)),!dm(e))throw new Error("time must be of type BusinessDay");const n=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{Od:Math.round(n.getTime()/1e3),Bd:e}}function Y0(t){if(!y_(t))throw new Error("time must be of type isUTCTimestamp");return{Od:t}}function bv(t){const e=new Date(t);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${t}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function G0(t){Vl(t.time)&&(t.time=bv(t.time))}class Z0{options(){return this.cn}setOptions(e){this.cn=e,this.updateFormatter(e.localization)}preprocessData(e){Array.isArray(e)?function(n){n.forEach(G0)}(e):G0(e)}createConverterToInternalObj(e){return G(function(n){return n.length===0?null:dm(n[0].time)||Vl(n[0].time)?pf:Y0}(e))}key(e){return typeof e=="object"&&"Od"in e?e.Od:this.key(this.convertHorzItemToInternal(e))}cacheKey(e){const n=e;return n.Bd===void 0?new Date(1e3*n.Od).getTime():new Date(Date.UTC(n.Bd.year,n.Bd.month-1,n.Bd.day)).getTime()}convertHorzItemToInternal(e){return y_(n=e)?Y0(n):dm(n)?pf(n):pf(bv(n));var n}updateFormatter(e){if(!this.cn)return;const n=e.dateFormat;this.cn.timeScale.timeVisible?this.Ad=new UB({Sd:n,kd:this.cn.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",yd:"   ",Cd:e.locale}):this.Ad=new x_(n,e.locale)}formatHorzItem(e){const n=e;return this.Ad.Y_(new Date(1e3*n.Od))}formatTickmark(e,n){const r=function(s,o,a){switch(s){case 0:case 10:return o?a?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return o?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(e.weight,this.cn.timeScale.timeVisible,this.cn.timeScale.secondsVisible),i=this.cn.timeScale;if(i.tickMarkFormatter!==void 0){const s=i.tickMarkFormatter(e.originalTime,r,n.locale);if(s!==null)return s}return function(s,o,a){const l={};switch(o){case 0:l.year="numeric";break;case 1:l.month="short";break;case 2:l.day="numeric";break;case 3:l.hour12=!1,l.hour="2-digit",l.minute="2-digit";break;case 4:l.hour12=!1,l.hour="2-digit",l.minute="2-digit",l.second="2-digit"}const c=s.Bd===void 0?new Date(1e3*s.Od):new Date(Date.UTC(s.Bd.year,s.Bd.month-1,s.Bd.day));return new Date(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate(),c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()).toLocaleString(a,l)}(e.time,r,n.locale)}maxTickMarkWeight(e){let n=e.reduce(MB,e[0]).weight;return n>30&&n<50&&(n=30),n}fillWeightsForPoints(e,n){(function(r,i=0){if(r.length===0)return;let s=i===0?null:r[i-1].time.Od,o=s!==null?new Date(1e3*s):null,a=0;for(let l=i;l<r.length;++l){const c=r[l],u=new Date(1e3*c.time.Od);o!==null&&(c.timeWeight=K0(u,o)),a+=c.time.Od-(s||c.time.Od),s=c.time.Od,o=u}if(i===0&&r.length>1){const l=Math.ceil(a/(r.length-1)),c=new Date(1e3*(r[0].time.Od-l));r[0].timeWeight=K0(new Date(1e3*r[0].time.Od),c)}})(e,n)}static Id(e){return Un({localization:{dateFormat:"dd MMM 'yy"}},e??{})}}const Ro=typeof window<"u";function X0(){return!!Ro&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function mf(){return!!Ro&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function hm(t){return t+t%2}function gf(t,e){return t.zd-e.zd}function vf(t,e,n){const r=(t.zd-e.zd)/(t.ot-e.ot);return Math.sign(r)*Math.min(Math.abs(r),n)}class HB{constructor(e,n,r,i){this.Ld=null,this.Ed=null,this.Nd=null,this.Fd=null,this.Wd=null,this.jd=0,this.Hd=0,this.$d=e,this.Ud=n,this.qd=r,this.rs=i}Yd(e,n){if(this.Ld!==null){if(this.Ld.ot===n)return void(this.Ld.zd=e);if(Math.abs(this.Ld.zd-e)<this.rs)return}this.Fd=this.Nd,this.Nd=this.Ed,this.Ed=this.Ld,this.Ld={ot:n,zd:e}}Vr(e,n){if(this.Ld===null||this.Ed===null||n-this.Ld.ot>50)return;let r=0;const i=vf(this.Ld,this.Ed,this.Ud),s=gf(this.Ld,this.Ed),o=[i],a=[s];if(r+=s,this.Nd!==null){const c=vf(this.Ed,this.Nd,this.Ud);if(Math.sign(c)===Math.sign(i)){const u=gf(this.Ed,this.Nd);if(o.push(c),a.push(u),r+=u,this.Fd!==null){const h=vf(this.Nd,this.Fd,this.Ud);if(Math.sign(h)===Math.sign(i)){const f=gf(this.Nd,this.Fd);o.push(h),a.push(f),r+=f}}}}let l=0;for(let c=0;c<o.length;++c)l+=a[c]/r*o[c];Math.abs(l)<this.$d||(this.Wd={zd:e,ot:n},this.Hd=l,this.jd=function(c,u){const h=Math.log(u);return Math.log(1*h/-c)/h}(Math.abs(l),this.qd))}tc(e){const n=G(this.Wd),r=e-n.ot;return n.zd+this.Hd*(Math.pow(this.qd,r)-1)/Math.log(this.qd)}Qu(e){return this.Wd===null||this.Zd(e)===this.jd}Zd(e){const n=e-G(this.Wd).ot;return Math.min(n,this.jd)}}class WB{constructor(e,n){this.Xd=void 0,this.Kd=void 0,this.Gd=void 0,this.en=!1,this.Jd=e,this.Qd=n,this.tf()}bt(){this.tf()}if(){this.Xd&&this.Jd.removeChild(this.Xd),this.Kd&&this.Jd.removeChild(this.Kd),this.Xd=void 0,this.Kd=void 0}nf(){return this.en!==this.sf()||this.Gd!==this.ef()}ef(){return e_(bl(this.Qd.W().layout.textColor))>160?"dark":"light"}sf(){return this.Qd.W().layout.attributionLogo}rf(){const e=new URL(location.href);return e.hostname?"&utm_source="+e.hostname+e.pathname:""}tf(){this.nf()&&(this.if(),this.en=this.sf(),this.en&&(this.Gd=this.ef(),this.Kd=document.createElement("style"),this.Kd.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.Xd=document.createElement("a"),this.Xd.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.rf()}`,this.Xd.title="Charting by TradingView",this.Xd.id="tv-attr-logo",this.Xd.target="_blank",this.Xd.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 35 19" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.Xd.toggleAttribute("data-dark",this.Gd==="dark"),this.Jd.appendChild(this.Kd),this.Jd.appendChild(this.Xd)))}}function hs(t,e){const n=G(t.ownerDocument).createElement("canvas");t.appendChild(n);const r=n3(n,{options:{allowResizeObserver:!1},transform:(i,s)=>({width:Math.max(i.width,s.width),height:Math.max(i.height,s.height)})});return r.resizeCanvasElement(e),r}function fs(t){var e;t.width=1,t.height=1,(e=t.getContext("2d"))===null||e===void 0||e.clearRect(0,0,1,1)}function fm(t,e,n,r){t.gl&&t.gl(e,n,r)}function Xc(t,e,n,r){t.X(e,n,r)}function pm(t,e,n,r){const i=t(n,r);for(const s of i){const o=s.gt();o!==null&&e(o)}}function qB(t){Ro&&window.chrome!==void 0&&t.addEventListener("mousedown",e=>{if(e.button===1)return e.preventDefault(),!1})}class Sv{constructor(e,n,r){this.hf=0,this.lf=null,this.af={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this._f=0,this.uf=null,this.cf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this.df=null,this.ff=!1,this.vf=null,this.pf=null,this.mf=!1,this.bf=!1,this.wf=!1,this.gf=null,this.Mf=null,this.xf=null,this.Sf=null,this.kf=null,this.yf=null,this.Cf=null,this.Tf=0,this.Pf=!1,this.Rf=!1,this.Df=!1,this.Vf=0,this.Of=null,this.Bf=!mf(),this.Af=i=>{this.If(i)},this.zf=i=>{if(this.Lf(i)){const s=this.Ef(i);if(++this._f,this.uf&&this._f>1){const{Nf:o}=this.Ff(Zn(i),this.cf);o<30&&!this.wf&&this.Wf(s,this.Hf.jf),this.$f()}}else{const s=this.Ef(i);if(++this.hf,this.lf&&this.hf>1){const{Nf:o}=this.Ff(Zn(i),this.af);o<5&&!this.bf&&this.Uf(s,this.Hf.qf),this.Yf()}}},this.Zf=e,this.Hf=n,this.cn=r,this.Xf()}S(){this.gf!==null&&(this.gf(),this.gf=null),this.Mf!==null&&(this.Mf(),this.Mf=null),this.Sf!==null&&(this.Sf(),this.Sf=null),this.kf!==null&&(this.kf(),this.kf=null),this.yf!==null&&(this.yf(),this.yf=null),this.xf!==null&&(this.xf(),this.xf=null),this.Kf(),this.Yf()}Gf(e){this.Sf&&this.Sf();const n=this.Jf.bind(this);if(this.Sf=()=>{this.Zf.removeEventListener("mousemove",n)},this.Zf.addEventListener("mousemove",n),this.Lf(e))return;const r=this.Ef(e);this.Uf(r,this.Hf.Qf),this.Bf=!0}Yf(){this.lf!==null&&clearTimeout(this.lf),this.hf=0,this.lf=null,this.af={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}$f(){this.uf!==null&&clearTimeout(this.uf),this._f=0,this.uf=null,this.cf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}Jf(e){if(this.Df||this.pf!==null||this.Lf(e))return;const n=this.Ef(e);this.Uf(n,this.Hf.tv),this.Bf=!0}iv(e){const n=yf(e.changedTouches,G(this.Of));if(n===null||(this.Vf=Cc(e),this.Cf!==null)||this.Rf)return;this.Pf=!0;const r=this.Ff(Zn(n),G(this.pf)),{nv:i,sv:s,Nf:o}=r;if(this.mf||!(o<5)){if(!this.mf){const a=.5*i,l=s>=a&&!this.cn.ev(),c=a>s&&!this.cn.rv();l||c||(this.Rf=!0),this.mf=!0,this.wf=!0,this.Kf(),this.$f()}if(!this.Rf){const a=this.Ef(e,n);this.Wf(a,this.Hf.hv),Ts(e)}}}lv(e){if(e.button!==0)return;const n=this.Ff(Zn(e),G(this.vf)),{Nf:r}=n;if(r>=5&&(this.bf=!0,this.Yf()),this.bf){const i=this.Ef(e);this.Uf(i,this.Hf.av)}}Ff(e,n){const r=Math.abs(n.nt-e.nt),i=Math.abs(n.st-e.st);return{nv:r,sv:i,Nf:r+i}}ov(e){let n=yf(e.changedTouches,G(this.Of));if(n===null&&e.touches.length===0&&(n=e.changedTouches[0]),n===null)return;this.Of=null,this.Vf=Cc(e),this.Kf(),this.pf=null,this.yf&&(this.yf(),this.yf=null);const r=this.Ef(e,n);if(this.Wf(r,this.Hf._v),++this._f,this.uf&&this._f>1){const{Nf:i}=this.Ff(Zn(n),this.cf);i<30&&!this.wf&&this.Wf(r,this.Hf.jf),this.$f()}else this.wf||(this.Wf(r,this.Hf.uv),this.Hf.uv&&Ts(e));this._f===0&&Ts(e),e.touches.length===0&&this.ff&&(this.ff=!1,Ts(e))}If(e){if(e.button!==0)return;const n=this.Ef(e);if(this.vf=null,this.Df=!1,this.kf&&(this.kf(),this.kf=null),X0()&&this.Zf.ownerDocument.documentElement.removeEventListener("mouseleave",this.Af),!this.Lf(e))if(this.Uf(n,this.Hf.cv),++this.hf,this.lf&&this.hf>1){const{Nf:r}=this.Ff(Zn(e),this.af);r<5&&!this.bf&&this.Uf(n,this.Hf.qf),this.Yf()}else this.bf||this.Uf(n,this.Hf.dv)}Kf(){this.df!==null&&(clearTimeout(this.df),this.df=null)}fv(e){if(this.Of!==null)return;const n=e.changedTouches[0];this.Of=n.identifier,this.Vf=Cc(e);const r=this.Zf.ownerDocument.documentElement;this.wf=!1,this.mf=!1,this.Rf=!1,this.pf=Zn(n),this.yf&&(this.yf(),this.yf=null);{const s=this.iv.bind(this),o=this.ov.bind(this);this.yf=()=>{r.removeEventListener("touchmove",s),r.removeEventListener("touchend",o)},r.addEventListener("touchmove",s,{passive:!1}),r.addEventListener("touchend",o,{passive:!1}),this.Kf(),this.df=setTimeout(this.vv.bind(this,e),240)}const i=this.Ef(e,n);this.Wf(i,this.Hf.pv),this.uf||(this._f=0,this.uf=setTimeout(this.$f.bind(this),500),this.cf=Zn(n))}mv(e){if(e.button!==0)return;const n=this.Zf.ownerDocument.documentElement;X0()&&n.addEventListener("mouseleave",this.Af),this.bf=!1,this.vf=Zn(e),this.kf&&(this.kf(),this.kf=null);{const i=this.lv.bind(this),s=this.If.bind(this);this.kf=()=>{n.removeEventListener("mousemove",i),n.removeEventListener("mouseup",s)},n.addEventListener("mousemove",i),n.addEventListener("mouseup",s)}if(this.Df=!0,this.Lf(e))return;const r=this.Ef(e);this.Uf(r,this.Hf.bv),this.lf||(this.hf=0,this.lf=setTimeout(this.Yf.bind(this),500),this.af=Zn(e))}Xf(){this.Zf.addEventListener("mouseenter",this.Gf.bind(this)),this.Zf.addEventListener("touchcancel",this.Kf.bind(this));{const e=this.Zf.ownerDocument,n=r=>{this.Hf.wv&&(r.composed&&this.Zf.contains(r.composedPath()[0])||r.target&&this.Zf.contains(r.target)||this.Hf.wv())};this.Mf=()=>{e.removeEventListener("touchstart",n)},this.gf=()=>{e.removeEventListener("mousedown",n)},e.addEventListener("mousedown",n),e.addEventListener("touchstart",n,{passive:!0})}mf()&&(this.xf=()=>{this.Zf.removeEventListener("dblclick",this.zf)},this.Zf.addEventListener("dblclick",this.zf)),this.Zf.addEventListener("mouseleave",this.gv.bind(this)),this.Zf.addEventListener("touchstart",this.fv.bind(this),{passive:!0}),qB(this.Zf),this.Zf.addEventListener("mousedown",this.mv.bind(this)),this.Mv(),this.Zf.addEventListener("touchmove",()=>{},{passive:!1})}Mv(){this.Hf.xv===void 0&&this.Hf.Sv===void 0&&this.Hf.kv===void 0||(this.Zf.addEventListener("touchstart",e=>this.yv(e.touches),{passive:!0}),this.Zf.addEventListener("touchmove",e=>{if(e.touches.length===2&&this.Cf!==null&&this.Hf.Sv!==void 0){const n=Q0(e.touches[0],e.touches[1])/this.Tf;this.Hf.Sv(this.Cf,n),Ts(e)}},{passive:!1}),this.Zf.addEventListener("touchend",e=>{this.yv(e.touches)}))}yv(e){e.length===1&&(this.Pf=!1),e.length!==2||this.Pf||this.ff?this.Cv():this.Tv(e)}Tv(e){const n=this.Zf.getBoundingClientRect()||{left:0,top:0};this.Cf={nt:(e[0].clientX-n.left+(e[1].clientX-n.left))/2,st:(e[0].clientY-n.top+(e[1].clientY-n.top))/2},this.Tf=Q0(e[0],e[1]),this.Hf.xv!==void 0&&this.Hf.xv(),this.Kf()}Cv(){this.Cf!==null&&(this.Cf=null,this.Hf.kv!==void 0&&this.Hf.kv())}gv(e){if(this.Sf&&this.Sf(),this.Lf(e)||!this.Bf)return;const n=this.Ef(e);this.Uf(n,this.Hf.Pv),this.Bf=!mf()}vv(e){const n=yf(e.touches,G(this.Of));if(n===null)return;const r=this.Ef(e,n);this.Wf(r,this.Hf.Rv),this.wf=!0,this.ff=!0}Lf(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents!==void 0?e.sourceCapabilities.firesTouchEvents:Cc(e)<this.Vf+500}Wf(e,n){n&&n.call(this.Hf,e)}Uf(e,n){n&&n.call(this.Hf,e)}Ef(e,n){const r=n||e,i=this.Zf.getBoundingClientRect()||{left:0,top:0};return{clientX:r.clientX,clientY:r.clientY,pageX:r.pageX,pageY:r.pageY,screenX:r.screenX,screenY:r.screenY,localX:r.clientX-i.left,localY:r.clientY-i.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,Dv:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click",Vv:e.type,Ov:r.target,Bv:e.view,Av:()=>{e.type!=="touchstart"&&Ts(e)}}}}function Q0(t,e){const n=t.clientX-e.clientX,r=t.clientY-e.clientY;return Math.sqrt(n*n+r*r)}function Ts(t){t.cancelable&&t.preventDefault()}function Zn(t){return{nt:t.pageX,st:t.pageY}}function Cc(t){return t.timeStamp||performance.now()}function yf(t,e){for(let n=0;n<t.length;++n)if(t[n].identifier===e)return t[n];return null}function Ec(t){return{Hc:t.Hc,Iv:{gr:t.zv.externalId},Lv:t.zv.cursorStyle}}function KB(t,e,n){for(const r of t){const i=r.gt();if(i!==null&&i.wr){const s=i.wr(e,n);if(s!==null)return{Bv:r,Iv:s}}}return null}function xf(t,e){return n=>{var r,i,s,o;return((i=(r=n.Dt())===null||r===void 0?void 0:r.Pa())!==null&&i!==void 0?i:"")!==e?[]:(o=(s=n.da)===null||s===void 0?void 0:s.call(n,t))!==null&&o!==void 0?o:[]}}function J0(t,e,n,r){if(!t.length)return;let i=0;const s=n/2,o=t[0].At(r,!0);let a=e===1?s-(t[0].Vi()-o/2):t[0].Vi()-o/2-s;a=Math.max(0,a);for(let l=1;l<t.length;l++){const c=t[l],u=t[l-1],h=u.At(r,!1),f=c.Vi(),p=u.Vi();if(e===1?f>p-h:f<p+h){const g=p-h*e;c.Oi(g);const m=g-e*h/2;if((e===1?m<0:m>n)&&a>0){const w=e===1?-1-m:m-n,v=Math.min(w,a);for(let x=i;x<t.length;x++)t[x].Oi(t[x].Vi()+e*v);a-=v}}else i=l,a=e===1?p-h-f:f-(p+h)}}class ew{constructor(e,n,r,i){this.Li=null,this.Ev=null,this.Nv=!1,this.Fv=new Cl(200),this.Qr=null,this.Wv=0,this.jv=!1,this.Hv=()=>{this.jv||this.tn.$v().$t().Uh()},this.Uv=()=>{this.jv||this.tn.$v().$t().Uh()},this.tn=e,this.cn=n,this.ko=n.layout,this.Oc=r,this.qv=i==="left",this.Yv=xf("normal",i),this.Zv=xf("top",i),this.Xv=xf("bottom",i),this.Kv=document.createElement("div"),this.Kv.style.height="100%",this.Kv.style.overflow="hidden",this.Kv.style.width="25px",this.Kv.style.left="0",this.Kv.style.position="relative",this.Gv=hs(this.Kv,Ve({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const s=this.Gv.canvasElement;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.Jv=hs(this.Kv,Ve({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const o=this.Jv.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0";const a={bv:this.Qv.bind(this),pv:this.Qv.bind(this),av:this.tp.bind(this),hv:this.tp.bind(this),wv:this.ip.bind(this),cv:this.np.bind(this),_v:this.np.bind(this),qf:this.sp.bind(this),jf:this.sp.bind(this),Qf:this.ep.bind(this),Pv:this.rp.bind(this)};this.hp=new Sv(this.Jv.canvasElement,a,{ev:()=>!this.cn.handleScroll.vertTouchDrag,rv:()=>!0})}S(){this.hp.S(),this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),fs(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),fs(this.Gv.canvasElement),this.Gv.dispose(),this.Li!==null&&this.Li.Ko().p(this),this.Li=null}lp(){return this.Kv}P(){return this.ko.fontSize}ap(){const e=this.Oc.W();return this.Qr!==e.R&&(this.Fv.nr(),this.Qr=e.R),e}op(){if(this.Li===null)return 0;let e=0;const n=this.ap(),r=G(this.Gv.canvasElement.getContext("2d"));r.save();const i=this.Li.Ha();r.font=this._p(),i.length>0&&(e=Math.max(this.Fv.xi(r,i[0].so),this.Fv.xi(r,i[i.length-1].so)));const s=this.up();for(let c=s.length;c--;){const u=this.Fv.xi(r,s[c].Kt());u>e&&(e=u)}const o=this.Li.Ct();if(o!==null&&this.Ev!==null&&(a=this.cn.crosshair).mode!==2&&a.horzLine.visible&&a.horzLine.labelVisible){const c=this.Li.pn(1,o),u=this.Li.pn(this.Ev.height-2,o);e=Math.max(e,this.Fv.xi(r,this.Li.Fi(Math.floor(Math.min(c,u))+.11111111111111,o)),this.Fv.xi(r,this.Li.Fi(Math.ceil(Math.max(c,u))-.11111111111111,o)))}var a;r.restore();const l=e||34;return hm(Math.ceil(n.C+n.T+n.A+n.I+5+l))}cp(e){this.Ev!==null&&Zi(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`)}dp(){return G(this.Ev).width}Gi(e){this.Li!==e&&(this.Li!==null&&this.Li.Ko().p(this),this.Li=e,e.Ko().l(this.fo.bind(this),this))}Dt(){return this.Li}nr(){const e=this.tn.fp();this.tn.$v().$t().E_(e,G(this.Dt()))}vp(e){if(this.Ev===null)return;if(e!==1){this.pp(),this.Gv.applySuggestedBitmapSize();const r=us(this.Gv);r!==null&&(r.useBitmapCoordinateSpace(i=>{this.mp(i),this.Ie(i)}),this.tn.bp(r,this.Xv),this.wp(r),this.tn.bp(r,this.Yv),this.gp(r))}this.Jv.applySuggestedBitmapSize();const n=us(this.Jv);n!==null&&(n.useBitmapCoordinateSpace(({context:r,bitmapSize:i})=>{r.clearRect(0,0,i.width,i.height)}),this.Mp(n),this.tn.bp(n,this.Zv))}xp(){return this.Gv.bitmapSize}Sp(e,n,r){const i=this.xp();i.width>0&&i.height>0&&e.drawImage(this.Gv.canvasElement,n,r)}bt(){var e;(e=this.Li)===null||e===void 0||e.Ha()}Qv(e){if(this.Li===null||this.Li.Ni()||!this.cn.handleScale.axisPressedMouseMove.price)return;const n=this.tn.$v().$t(),r=this.tn.fp();this.Nv=!0,n.V_(r,this.Li,e.localY)}tp(e){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const n=this.tn.$v().$t(),r=this.tn.fp(),i=this.Li;n.O_(r,i,e.localY)}ip(){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const e=this.tn.$v().$t(),n=this.tn.fp(),r=this.Li;this.Nv&&(this.Nv=!1,e.B_(n,r))}np(e){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const n=this.tn.$v().$t(),r=this.tn.fp();this.Nv=!1,n.B_(r,this.Li)}sp(e){this.cn.handleScale.axisDoubleClickReset.price&&this.nr()}ep(e){this.Li!==null&&(!this.tn.$v().$t().W().handleScale.axisPressedMouseMove.price||this.Li.Mh()||this.Li.Oo()||this.kp(1))}rp(e){this.kp(0)}up(){const e=[],n=this.Li===null?void 0:this.Li;return(r=>{for(let i=0;i<r.length;++i){const s=r[i].Rn(this.tn.fp(),n);for(let o=0;o<s.length;o++)e.push(s[o])}})(this.tn.fp().Uo()),e}mp({context:e,bitmapSize:n}){const{width:r,height:i}=n,s=this.tn.fp().$t(),o=s.q(),a=s.bd();o===a?Qd(e,0,0,r,i,o):t_(e,0,0,r,i,o,a)}Ie({context:e,bitmapSize:n,horizontalPixelRatio:r}){if(this.Ev===null||this.Li===null||!this.Li.W().borderVisible)return;e.fillStyle=this.Li.W().borderColor;const i=Math.max(1,Math.floor(this.ap().C*r));let s;s=this.qv?n.width-i:0,e.fillRect(s,0,i,n.height)}wp(e){if(this.Ev===null||this.Li===null)return;const n=this.Li.Ha(),r=this.Li.W(),i=this.ap(),s=this.qv?this.Ev.width-i.T:0;r.borderVisible&&r.ticksVisible&&e.useBitmapCoordinateSpace(({context:o,horizontalPixelRatio:a,verticalPixelRatio:l})=>{o.fillStyle=r.borderColor;const c=Math.max(1,Math.floor(l)),u=Math.floor(.5*l),h=Math.round(i.T*a);o.beginPath();for(const f of n)o.rect(Math.floor(s*a),Math.round(f.Ea*l)-u,h,c);o.fill()}),e.useMediaCoordinateSpace(({context:o})=>{var a;o.font=this._p(),o.fillStyle=(a=r.textColor)!==null&&a!==void 0?a:this.ko.textColor,o.textAlign=this.qv?"right":"left",o.textBaseline="middle";const l=this.qv?Math.round(s-i.A):Math.round(s+i.T+i.A),c=n.map(u=>this.Fv.Mi(o,u.so));for(let u=n.length;u--;){const h=n[u];o.fillText(h.so,l,h.Ea+c[u])}})}pp(){if(this.Ev===null||this.Li===null)return;const e=[],n=this.Li.Uo().slice(),r=this.tn.fp(),i=this.ap();this.Li===r.pr()&&this.tn.fp().Uo().forEach(o=>{r.vr(o)&&n.push(o)});const s=this.Li;n.forEach(o=>{o.Rn(r,s).forEach(a=>{a.Oi(null),a.Bi()&&e.push(a)})}),e.forEach(o=>o.Oi(o.ki())),this.Li.W().alignLabels&&this.yp(e,i)}yp(e,n){if(this.Ev===null)return;const r=this.Ev.height/2,i=e.filter(o=>o.ki()<=r),s=e.filter(o=>o.ki()>r);i.sort((o,a)=>a.ki()-o.ki()),s.sort((o,a)=>o.ki()-a.ki());for(const o of e){const a=Math.floor(o.At(n)/2),l=o.ki();l>-a&&l<a&&o.Oi(a),l>this.Ev.height-a&&l<this.Ev.height+a&&o.Oi(this.Ev.height-a)}J0(i,1,this.Ev.height,n),J0(s,-1,this.Ev.height,n)}gp(e){if(this.Ev===null)return;const n=this.up(),r=this.ap(),i=this.qv?"right":"left";n.forEach(s=>{s.Ai()&&s.gt(G(this.Li)).X(e,r,this.Fv,i)})}Mp(e){if(this.Ev===null||this.Li===null)return;const n=this.tn.$v().$t(),r=[],i=this.tn.fp(),s=n.Zc().Rn(i,this.Li);s.length&&r.push(s);const o=this.ap(),a=this.qv?"right":"left";r.forEach(l=>{l.forEach(c=>{c.gt(G(this.Li)).X(e,o,this.Fv,a)})})}kp(e){this.Kv.style.cursor=e===1?"ns-resize":"default"}fo(){const e=this.op();this.Wv<e&&this.tn.$v().$t().Kl(),this.Wv=e}_p(){return jo(this.ko.fontSize,this.ko.fontFamily)}}function YB(t,e){var n,r;return(r=(n=t.ua)===null||n===void 0?void 0:n.call(t,e))!==null&&r!==void 0?r:[]}function Nc(t,e){var n,r;return(r=(n=t.Pn)===null||n===void 0?void 0:n.call(t,e))!==null&&r!==void 0?r:[]}function GB(t,e){var n,r;return(r=(n=t.Ji)===null||n===void 0?void 0:n.call(t,e))!==null&&r!==void 0?r:[]}function ZB(t,e){var n,r;return(r=(n=t.aa)===null||n===void 0?void 0:n.call(t,e))!==null&&r!==void 0?r:[]}class kv{constructor(e,n){this.Ev=Ve({width:0,height:0}),this.Cp=null,this.Tp=null,this.Pp=null,this.Rp=null,this.Dp=!1,this.Vp=new et,this.Op=new et,this.Bp=0,this.Ap=!1,this.Ip=null,this.zp=!1,this.Lp=null,this.Ep=null,this.jv=!1,this.Hv=()=>{this.jv||this.Np===null||this.$i().Uh()},this.Uv=()=>{this.jv||this.Np===null||this.$i().Uh()},this.Qd=e,this.Np=n,this.Np.W_().l(this.Fp.bind(this),this,!0),this.Wp=document.createElement("td"),this.Wp.style.padding="0",this.Wp.style.position="relative";const r=document.createElement("div");r.style.width="100%",r.style.height="100%",r.style.position="relative",r.style.overflow="hidden",this.jp=document.createElement("td"),this.jp.style.padding="0",this.Hp=document.createElement("td"),this.Hp.style.padding="0",this.Wp.appendChild(r),this.Gv=hs(r,Ve({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const i=this.Gv.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Jv=hs(r,Ve({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const s=this.Jv.canvasElement;s.style.position="absolute",s.style.zIndex="2",s.style.left="0",s.style.top="0",this.$p=document.createElement("tr"),this.$p.appendChild(this.jp),this.$p.appendChild(this.Wp),this.$p.appendChild(this.Hp),this.Up(),this.hp=new Sv(this.Jv.canvasElement,this,{ev:()=>this.Ip===null&&!this.Qd.W().handleScroll.vertTouchDrag,rv:()=>this.Ip===null&&!this.Qd.W().handleScroll.horzTouchDrag})}S(){this.Cp!==null&&this.Cp.S(),this.Tp!==null&&this.Tp.S(),this.Pp=null,this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),fs(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),fs(this.Gv.canvasElement),this.Gv.dispose(),this.Np!==null&&this.Np.W_().p(this),this.hp.S()}fp(){return G(this.Np)}qp(e){var n,r;this.Np!==null&&this.Np.W_().p(this),this.Np=e,this.Np!==null&&this.Np.W_().l(kv.prototype.Fp.bind(this),this,!0),this.Up(),this.Qd.Yp().indexOf(this)===this.Qd.Yp().length-1?(this.Pp=(n=this.Pp)!==null&&n!==void 0?n:new WB(this.Wp,this.Qd),this.Pp.bt()):((r=this.Pp)===null||r===void 0||r.if(),this.Pp=null)}$v(){return this.Qd}lp(){return this.$p}Up(){if(this.Np!==null&&(this.Zp(),this.$i().wt().length!==0)){if(this.Cp!==null){const e=this.Np.R_();this.Cp.Gi(G(e))}if(this.Tp!==null){const e=this.Np.D_();this.Tp.Gi(G(e))}}}Xp(){this.Cp!==null&&this.Cp.bt(),this.Tp!==null&&this.Tp.bt()}M_(){return this.Np!==null?this.Np.M_():0}x_(e){this.Np&&this.Np.x_(e)}Qf(e){if(!this.Np)return;this.Kp();const n=e.localX,r=e.localY;this.Gp(n,r,e)}bv(e){this.Kp(),this.Jp(),this.Gp(e.localX,e.localY,e)}tv(e){var n;if(!this.Np)return;this.Kp();const r=e.localX,i=e.localY;this.Gp(r,i,e);const s=this.wr(r,i);this.Qd.Qp((n=s==null?void 0:s.Lv)!==null&&n!==void 0?n:null),this.$i().jc(s&&{Hc:s.Hc,Iv:s.Iv})}dv(e){this.Np!==null&&(this.Kp(),this.tm(e))}qf(e){this.Np!==null&&this.im(this.Op,e)}jf(e){this.qf(e)}av(e){this.Kp(),this.nm(e),this.Gp(e.localX,e.localY,e)}cv(e){this.Np!==null&&(this.Kp(),this.Ap=!1,this.sm(e))}uv(e){this.Np!==null&&this.tm(e)}Rv(e){if(this.Ap=!0,this.Ip===null){const n={x:e.localX,y:e.localY};this.rm(n,n,e)}}Pv(e){this.Np!==null&&(this.Kp(),this.Np.$t().jc(null),this.hm())}lm(){return this.Vp}am(){return this.Op}xv(){this.Bp=1,this.$i().Un()}Sv(e,n){if(!this.Qd.W().handleScale.pinch)return;const r=5*(n-this.Bp);this.Bp=n,this.$i().Qc(e.nt,r)}pv(e){this.Ap=!1,this.zp=this.Ip!==null,this.Jp();const n=this.$i().Zc();this.Ip!==null&&n.yt()&&(this.Lp={x:n.Yt(),y:n.Zt()},this.Ip={x:e.localX,y:e.localY})}hv(e){if(this.Np===null)return;const n=e.localX,r=e.localY;if(this.Ip===null)this.nm(e);else{this.zp=!1;const i=G(this.Lp),s=i.x+(n-this.Ip.x),o=i.y+(r-this.Ip.y);this.Gp(s,o,e)}}_v(e){this.$v().W().trackingMode.exitMode===0&&(this.zp=!0),this.om(),this.sm(e)}wr(e,n){const r=this.Np;return r===null?null:function(i,s,o){const a=i.Uo(),l=function(c,u,h){var f,p;let g,m;for(const x of c){const b=(p=(f=x.va)===null||f===void 0?void 0:f.call(x,u,h))!==null&&p!==void 0?p:[];for(const S of b)w=S.zOrder,(!(v=g==null?void 0:g.zOrder)||w==="top"&&v!=="top"||w==="normal"&&v==="bottom")&&(g=S,m=x)}var w,v;return g&&m?{zv:g,Hc:m}:null}(a,s,o);if((l==null?void 0:l.zv.zOrder)==="top")return Ec(l);for(const c of a){if(l&&l.Hc===c&&l.zv.zOrder!=="bottom"&&!l.zv.isBackground)return Ec(l);const u=KB(c.Pn(i),s,o);if(u!==null)return{Hc:c,Bv:u.Bv,Iv:u.Iv};if(l&&l.Hc===c&&l.zv.zOrder!=="bottom"&&l.zv.isBackground)return Ec(l)}return l!=null&&l.zv?Ec(l):null}(r,e,n)}_m(e,n){G(n==="left"?this.Cp:this.Tp).cp(Ve({width:e,height:this.Ev.height}))}um(){return this.Ev}cp(e){Zi(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Wp.style.width=e.width+"px",this.Wp.style.height=e.height+"px")}dm(){const e=G(this.Np);e.P_(e.R_()),e.P_(e.D_());for(const n of e.Ba())if(e.vr(n)){const r=n.Dt();r!==null&&e.P_(r),n.Vn()}}xp(){return this.Gv.bitmapSize}Sp(e,n,r){const i=this.xp();i.width>0&&i.height>0&&e.drawImage(this.Gv.canvasElement,n,r)}vp(e){if(e===0||this.Np===null)return;if(e>1&&this.dm(),this.Cp!==null&&this.Cp.vp(e),this.Tp!==null&&this.Tp.vp(e),e!==1){this.Gv.applySuggestedBitmapSize();const r=us(this.Gv);r!==null&&(r.useBitmapCoordinateSpace(i=>{this.mp(i)}),this.Np&&(this.fm(r,YB),this.vm(r),this.pm(r),this.fm(r,Nc),this.fm(r,GB)))}this.Jv.applySuggestedBitmapSize();const n=us(this.Jv);n!==null&&(n.useBitmapCoordinateSpace(({context:r,bitmapSize:i})=>{r.clearRect(0,0,i.width,i.height)}),this.bm(n),this.fm(n,ZB))}wm(){return this.Cp}gm(){return this.Tp}bp(e,n){this.fm(e,n)}Fp(){this.Np!==null&&this.Np.W_().p(this),this.Np=null}tm(e){this.im(this.Vp,e)}im(e,n){const r=n.localX,i=n.localY;e.M()&&e.m(this.$i().St().Nu(r),{x:r,y:i},n)}mp({context:e,bitmapSize:n}){const{width:r,height:i}=n,s=this.$i(),o=s.q(),a=s.bd();o===a?Qd(e,0,0,r,i,a):t_(e,0,0,r,i,o,a)}vm(e){const n=G(this.Np).j_().qh().gt();n!==null&&n.X(e,!1)}pm(e){const n=this.$i().Yc();this.Mm(e,Nc,fm,n),this.Mm(e,Nc,Xc,n)}bm(e){this.Mm(e,Nc,Xc,this.$i().Zc())}fm(e,n){const r=G(this.Np).Uo();for(const i of r)this.Mm(e,n,fm,i);for(const i of r)this.Mm(e,n,Xc,i)}Mm(e,n,r,i){const s=G(this.Np),o=s.$t().Wc(),a=o!==null&&o.Hc===i,l=o!==null&&a&&o.Iv!==void 0?o.Iv.Mr:void 0;pm(n,c=>r(c,e,a,l),i,s)}Zp(){if(this.Np===null)return;const e=this.Qd,n=this.Np.R_().W().visible,r=this.Np.D_().W().visible;n||this.Cp===null||(this.jp.removeChild(this.Cp.lp()),this.Cp.S(),this.Cp=null),r||this.Tp===null||(this.Hp.removeChild(this.Tp.lp()),this.Tp.S(),this.Tp=null);const i=e.$t().ud();n&&this.Cp===null&&(this.Cp=new ew(this,e.W(),i,"left"),this.jp.appendChild(this.Cp.lp())),r&&this.Tp===null&&(this.Tp=new ew(this,e.W(),i,"right"),this.Hp.appendChild(this.Tp.lp()))}xm(e){return e.Dv&&this.Ap||this.Ip!==null}Sm(e){return Math.max(0,Math.min(e,this.Ev.width-1))}km(e){return Math.max(0,Math.min(e,this.Ev.height-1))}Gp(e,n,r){this.$i().ld(this.Sm(e),this.km(n),r,G(this.Np))}hm(){this.$i().od()}om(){this.zp&&(this.Ip=null,this.hm())}rm(e,n,r){this.Ip=e,this.zp=!1,this.Gp(n.x,n.y,r);const i=this.$i().Zc();this.Lp={x:i.Yt(),y:i.Zt()}}$i(){return this.Qd.$t()}sm(e){if(!this.Dp)return;const n=this.$i(),r=this.fp();if(n.z_(r,r.vn()),this.Rp=null,this.Dp=!1,n.ed(),this.Ep!==null){const i=performance.now(),s=n.St();this.Ep.Vr(s.Hu(),i),this.Ep.Qu(i)||n.Zn(this.Ep)}}Kp(){this.Ip=null}Jp(){if(this.Np){if(this.$i().Un(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)G(document.activeElement).blur();else{const e=document.getSelection();e!==null&&e.removeAllRanges()}!this.Np.vn().Ni()&&this.$i().St().Ni()}}nm(e){if(this.Np===null)return;const n=this.$i(),r=n.St();if(r.Ni())return;const i=this.Qd.W(),s=i.handleScroll,o=i.kineticScroll;if((!s.pressedMouseMove||e.Dv)&&(!s.horzTouchDrag&&!s.vertTouchDrag||!e.Dv))return;const a=this.Np.vn(),l=performance.now();if(this.Rp!==null||this.xm(e)||(this.Rp={x:e.clientX,y:e.clientY,Od:l,ym:e.localX,Cm:e.localY}),this.Rp!==null&&!this.Dp&&(this.Rp.x!==e.clientX||this.Rp.y!==e.clientY)){if(e.Dv&&o.touch||!e.Dv&&o.mouse){const c=r.le();this.Ep=new HB(.2/c,7/c,.997,15/c),this.Ep.Yd(r.Hu(),this.Rp.Od)}else this.Ep=null;a.Ni()||n.A_(this.Np,a,e.localY),n.nd(e.localX),this.Dp=!0}this.Dp&&(a.Ni()||n.I_(this.Np,a,e.localY),n.sd(e.localX),this.Ep!==null&&this.Ep.Yd(r.Hu(),l))}}class tw{constructor(e,n,r,i,s){this.ft=!0,this.Ev=Ve({width:0,height:0}),this.Hv=()=>this.vp(3),this.qv=e==="left",this.Oc=r.ud,this.cn=n,this.Tm=i,this.Pm=s,this.Kv=document.createElement("div"),this.Kv.style.width="25px",this.Kv.style.height="100%",this.Kv.style.overflow="hidden",this.Gv=hs(this.Kv,Ve({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv)}S(){this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),fs(this.Gv.canvasElement),this.Gv.dispose()}lp(){return this.Kv}um(){return this.Ev}cp(e){Zi(this.Ev,e)||(this.Ev=e,this.Gv.resizeCanvasElement(e),this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`,this.ft=!0)}vp(e){if(e<3&&!this.ft||this.Ev.width===0||this.Ev.height===0)return;this.ft=!1,this.Gv.applySuggestedBitmapSize();const n=us(this.Gv);n!==null&&n.useBitmapCoordinateSpace(r=>{this.mp(r),this.Ie(r)})}xp(){return this.Gv.bitmapSize}Sp(e,n,r){const i=this.xp();i.width>0&&i.height>0&&e.drawImage(this.Gv.canvasElement,n,r)}Ie({context:e,bitmapSize:n,horizontalPixelRatio:r,verticalPixelRatio:i}){if(!this.Tm())return;e.fillStyle=this.cn.timeScale.borderColor;const s=Math.floor(this.Oc.W().C*r),o=Math.floor(this.Oc.W().C*i),a=this.qv?n.width-s:0;e.fillRect(a,0,s,o)}mp({context:e,bitmapSize:n}){Qd(e,0,0,n.width,n.height,this.Pm())}}function Cv(t){return e=>{var n,r;return(r=(n=e.fa)===null||n===void 0?void 0:n.call(e,t))!==null&&r!==void 0?r:[]}}const XB=Cv("normal"),QB=Cv("top"),JB=Cv("bottom");class e5{constructor(e,n){this.Rm=null,this.Dm=null,this.k=null,this.Vm=!1,this.Ev=Ve({width:0,height:0}),this.Om=new et,this.Fv=new Cl(5),this.jv=!1,this.Hv=()=>{this.jv||this.Qd.$t().Uh()},this.Uv=()=>{this.jv||this.Qd.$t().Uh()},this.Qd=e,this.q_=n,this.cn=e.W().layout,this.Xd=document.createElement("tr"),this.Bm=document.createElement("td"),this.Bm.style.padding="0",this.Am=document.createElement("td"),this.Am.style.padding="0",this.Kv=document.createElement("td"),this.Kv.style.height="25px",this.Kv.style.padding="0",this.Im=document.createElement("div"),this.Im.style.width="100%",this.Im.style.height="100%",this.Im.style.position="relative",this.Im.style.overflow="hidden",this.Kv.appendChild(this.Im),this.Gv=hs(this.Im,Ve({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const r=this.Gv.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.Jv=hs(this.Im,Ve({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const i=this.Jv.canvasElement;i.style.position="absolute",i.style.zIndex="2",i.style.left="0",i.style.top="0",this.Xd.appendChild(this.Bm),this.Xd.appendChild(this.Kv),this.Xd.appendChild(this.Am),this.zm(),this.Qd.$t().g_().l(this.zm.bind(this),this),this.hp=new Sv(this.Jv.canvasElement,this,{ev:()=>!0,rv:()=>!this.Qd.W().handleScroll.horzTouchDrag})}S(){this.hp.S(),this.Rm!==null&&this.Rm.S(),this.Dm!==null&&this.Dm.S(),this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),fs(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),fs(this.Gv.canvasElement),this.Gv.dispose()}lp(){return this.Xd}Lm(){return this.Rm}Em(){return this.Dm}bv(e){if(this.Vm)return;this.Vm=!0;const n=this.Qd.$t();!n.St().Ni()&&this.Qd.W().handleScale.axisPressedMouseMove.time&&n.Jc(e.localX)}pv(e){this.bv(e)}wv(){const e=this.Qd.$t();!e.St().Ni()&&this.Vm&&(this.Vm=!1,this.Qd.W().handleScale.axisPressedMouseMove.time&&e.hd())}av(e){const n=this.Qd.$t();!n.St().Ni()&&this.Qd.W().handleScale.axisPressedMouseMove.time&&n.rd(e.localX)}hv(e){this.av(e)}cv(){this.Vm=!1;const e=this.Qd.$t();e.St().Ni()&&!this.Qd.W().handleScale.axisPressedMouseMove.time||e.hd()}_v(){this.cv()}qf(){this.Qd.W().handleScale.axisDoubleClickReset.time&&this.Qd.$t().Kn()}jf(){this.qf()}Qf(){this.Qd.$t().W().handleScale.axisPressedMouseMove.time&&this.kp(1)}Pv(){this.kp(0)}um(){return this.Ev}Nm(){return this.Om}Fm(e,n,r){Zi(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`,this.Om.m(e)),this.Rm!==null&&this.Rm.cp(Ve({width:n,height:e.height})),this.Dm!==null&&this.Dm.cp(Ve({width:r,height:e.height}))}Wm(){const e=this.jm();return Math.ceil(e.C+e.T+e.P+e.L+e.B+e.Hm)}bt(){this.Qd.$t().St().Ha()}xp(){return this.Gv.bitmapSize}Sp(e,n,r){const i=this.xp();i.width>0&&i.height>0&&e.drawImage(this.Gv.canvasElement,n,r)}vp(e){if(e===0)return;if(e!==1){this.Gv.applySuggestedBitmapSize();const r=us(this.Gv);r!==null&&(r.useBitmapCoordinateSpace(i=>{this.mp(i),this.Ie(i),this.$m(r,JB)}),this.wp(r),this.$m(r,XB)),this.Rm!==null&&this.Rm.vp(e),this.Dm!==null&&this.Dm.vp(e)}this.Jv.applySuggestedBitmapSize();const n=us(this.Jv);n!==null&&(n.useBitmapCoordinateSpace(({context:r,bitmapSize:i})=>{r.clearRect(0,0,i.width,i.height)}),this.Um([...this.Qd.$t().wt(),this.Qd.$t().Zc()],n),this.$m(n,QB))}$m(e,n){const r=this.Qd.$t().wt();for(const i of r)pm(n,s=>fm(s,e,!1,void 0),i,void 0);for(const i of r)pm(n,s=>Xc(s,e,!1,void 0),i,void 0)}mp({context:e,bitmapSize:n}){Qd(e,0,0,n.width,n.height,this.Qd.$t().bd())}Ie({context:e,bitmapSize:n,verticalPixelRatio:r}){if(this.Qd.W().timeScale.borderVisible){e.fillStyle=this.qm();const i=Math.max(1,Math.floor(this.jm().C*r));e.fillRect(0,0,n.width,i)}}wp(e){const n=this.Qd.$t().St(),r=n.Ha();if(!r||r.length===0)return;const i=this.q_.maxTickMarkWeight(r),s=this.jm(),o=n.W();o.borderVisible&&o.ticksVisible&&e.useBitmapCoordinateSpace(({context:a,horizontalPixelRatio:l,verticalPixelRatio:c})=>{a.strokeStyle=this.qm(),a.fillStyle=this.qm();const u=Math.max(1,Math.floor(l)),h=Math.floor(.5*l);a.beginPath();const f=Math.round(s.T*c);for(let p=r.length;p--;){const g=Math.round(r[p].coord*l);a.rect(g-h,0,u,f)}a.fill()}),e.useMediaCoordinateSpace(({context:a})=>{const l=s.C+s.T+s.L+s.P/2;a.textAlign="center",a.textBaseline="middle",a.fillStyle=this.$(),a.font=this._p();for(const c of r)if(c.weight<i){const u=c.needAlignCoordinate?this.Ym(a,c.coord,c.label):c.coord;a.fillText(c.label,u,l)}this.Qd.W().timeScale.allowBoldLabels&&(a.font=this.Zm());for(const c of r)if(c.weight>=i){const u=c.needAlignCoordinate?this.Ym(a,c.coord,c.label):c.coord;a.fillText(c.label,u,l)}})}Ym(e,n,r){const i=this.Fv.xi(e,r),s=i/2,o=Math.floor(n-s)+.5;return o<0?n+=Math.abs(0-o):o+i>this.Ev.width&&(n-=Math.abs(this.Ev.width-(o+i))),n}Um(e,n){const r=this.jm();for(const i of e)for(const s of i.Qi())s.gt().X(n,r)}qm(){return this.Qd.W().timeScale.borderColor}$(){return this.cn.textColor}j(){return this.cn.fontSize}_p(){return jo(this.j(),this.cn.fontFamily)}Zm(){return jo(this.j(),this.cn.fontFamily,"bold")}jm(){this.k===null&&(this.k={C:1,N:NaN,L:NaN,B:NaN,ji:NaN,T:5,P:NaN,R:"",Wi:new Cl,Hm:0});const e=this.k,n=this._p();if(e.R!==n){const r=this.j();e.P=r,e.R=n,e.L=3*r/12,e.B=3*r/12,e.ji=9*r/12,e.N=0,e.Hm=4*r/12,e.Wi.nr()}return this.k}kp(e){this.Kv.style.cursor=e===1?"ew-resize":"default"}zm(){const e=this.Qd.$t(),n=e.W();n.leftPriceScale.visible||this.Rm===null||(this.Bm.removeChild(this.Rm.lp()),this.Rm.S(),this.Rm=null),n.rightPriceScale.visible||this.Dm===null||(this.Am.removeChild(this.Dm.lp()),this.Dm.S(),this.Dm=null);const r={ud:this.Qd.$t().ud()},i=()=>n.leftPriceScale.borderVisible&&e.St().W().borderVisible,s=()=>e.bd();n.leftPriceScale.visible&&this.Rm===null&&(this.Rm=new tw("left",n,r,i,s),this.Bm.appendChild(this.Rm.lp())),n.rightPriceScale.visible&&this.Dm===null&&(this.Dm=new tw("right",n,r,i,s),this.Am.appendChild(this.Dm.lp()))}}const t5=!!Ro&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(t=>t.brand.includes("Chromium"))&&!!Ro&&(!((wf=navigator==null?void 0:navigator.userAgentData)===null||wf===void 0)&&wf.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);var wf;class n5{constructor(e,n,r){var i;this.Xm=[],this.Km=0,this.ho=0,this.__=0,this.Gm=0,this.Jm=0,this.Qm=null,this.tb=!1,this.Vp=new et,this.Op=new et,this.Rc=new et,this.ib=null,this.nb=null,this.Jd=e,this.cn=n,this.q_=r,this.Xd=document.createElement("div"),this.Xd.classList.add("tv-lightweight-charts"),this.Xd.style.overflow="hidden",this.Xd.style.direction="ltr",this.Xd.style.width="100%",this.Xd.style.height="100%",(i=this.Xd).style.userSelect="none",i.style.webkitUserSelect="none",i.style.msUserSelect="none",i.style.MozUserSelect="none",i.style.webkitTapHighlightColor="transparent",this.sb=document.createElement("table"),this.sb.setAttribute("cellspacing","0"),this.Xd.appendChild(this.sb),this.eb=this.rb.bind(this),bf(this.cn)&&this.hb(!0),this.$i=new zB(this.Vc.bind(this),this.cn,r),this.$t().Xc().l(this.lb.bind(this),this),this.ab=new e5(this,this.q_),this.sb.appendChild(this.ab.lp());const s=n.autoSize&&this.ob();let o=this.cn.width,a=this.cn.height;if(s||o===0||a===0){const l=e.getBoundingClientRect();o=o||l.width,a=a||l.height}this._b(o,a),this.ub(),e.appendChild(this.Xd),this.cb(),this.$i.St().ec().l(this.$i.Kl.bind(this.$i),this),this.$i.g_().l(this.$i.Kl.bind(this.$i),this)}$t(){return this.$i}W(){return this.cn}Yp(){return this.Xm}fb(){return this.ab}S(){this.hb(!1),this.Km!==0&&window.cancelAnimationFrame(this.Km),this.$i.Xc().p(this),this.$i.St().ec().p(this),this.$i.g_().p(this),this.$i.S();for(const e of this.Xm)this.sb.removeChild(e.lp()),e.lm().p(this),e.am().p(this),e.S();this.Xm=[],G(this.ab).S(),this.Xd.parentElement!==null&&this.Xd.parentElement.removeChild(this.Xd),this.Rc.S(),this.Vp.S(),this.Op.S(),this.pb()}_b(e,n,r=!1){if(this.ho===n&&this.__===e)return;const i=function(a){const l=Math.floor(a.width),c=Math.floor(a.height);return Ve({width:l-l%2,height:c-c%2})}(Ve({width:e,height:n}));this.ho=i.height,this.__=i.width;const s=this.ho+"px",o=this.__+"px";G(this.Xd).style.height=s,G(this.Xd).style.width=o,this.sb.style.height=s,this.sb.style.width=o,r?this.mb(yt.es(),performance.now()):this.$i.Kl()}vp(e){e===void 0&&(e=yt.es());for(let n=0;n<this.Xm.length;n++)this.Xm[n].vp(e.Hn(n).Fn);this.cn.timeScale.visible&&this.ab.vp(e.jn())}$h(e){const n=bf(this.cn);this.$i.$h(e);const r=bf(this.cn);r!==n&&this.hb(r),this.cb(),this.bb(e)}lm(){return this.Vp}am(){return this.Op}Xc(){return this.Rc}wb(){this.Qm!==null&&(this.mb(this.Qm,performance.now()),this.Qm=null);const e=this.gb(null),n=document.createElement("canvas");n.width=e.width,n.height=e.height;const r=G(n.getContext("2d"));return this.gb(r),n}Mb(e){return e==="left"&&!this.xb()||e==="right"&&!this.Sb()||this.Xm.length===0?0:G(e==="left"?this.Xm[0].wm():this.Xm[0].gm()).dp()}kb(){return this.cn.autoSize&&this.ib!==null}yb(){return this.Xd}Qp(e){this.nb=e,this.nb?this.yb().style.setProperty("cursor",e):this.yb().style.removeProperty("cursor")}Cb(){return this.nb}Tb(){return Ot(this.Xm[0]).um()}bb(e){(e.autoSize!==void 0||!this.ib||e.width===void 0&&e.height===void 0)&&(e.autoSize&&!this.ib&&this.ob(),e.autoSize===!1&&this.ib!==null&&this.pb(),e.autoSize||e.width===void 0&&e.height===void 0||this._b(e.width||this.__,e.height||this.ho))}gb(e){let n=0,r=0;const i=this.Xm[0],s=(a,l)=>{let c=0;for(let u=0;u<this.Xm.length;u++){const h=this.Xm[u],f=G(a==="left"?h.wm():h.gm()),p=f.xp();e!==null&&f.Sp(e,l,c),c+=p.height}};this.xb()&&(s("left",0),n+=G(i.wm()).xp().width);for(let a=0;a<this.Xm.length;a++){const l=this.Xm[a],c=l.xp();e!==null&&l.Sp(e,n,r),r+=c.height}n+=i.xp().width,this.Sb()&&(s("right",n),n+=G(i.gm()).xp().width);const o=(a,l,c)=>{G(a==="left"?this.ab.Lm():this.ab.Em()).Sp(G(e),l,c)};if(this.cn.timeScale.visible){const a=this.ab.xp();if(e!==null){let l=0;this.xb()&&(o("left",l,r),l=G(i.wm()).xp().width),this.ab.Sp(e,l,r),l+=a.width,this.Sb()&&o("right",l,r)}r+=a.height}return Ve({width:n,height:r})}Pb(){let e=0,n=0,r=0;for(const g of this.Xm)this.xb()&&(n=Math.max(n,G(g.wm()).op(),this.cn.leftPriceScale.minimumWidth)),this.Sb()&&(r=Math.max(r,G(g.gm()).op(),this.cn.rightPriceScale.minimumWidth)),e+=g.M_();n=hm(n),r=hm(r);const i=this.__,s=this.ho,o=Math.max(i-n-r,0),a=this.cn.timeScale.visible;let l=a?Math.max(this.ab.Wm(),this.cn.timeScale.minimumHeight):0;var c;l=(c=l)+c%2;const u=0+l,h=s<u?0:s-u,f=h/e;let p=0;for(let g=0;g<this.Xm.length;++g){const m=this.Xm[g];m.qp(this.$i.qc()[g]);let w=0,v=0;v=g===this.Xm.length-1?h-p:Math.round(m.M_()*f),w=Math.max(v,2),p+=w,m.cp(Ve({width:o,height:w})),this.xb()&&m._m(n,"left"),this.Sb()&&m._m(r,"right"),m.fp()&&this.$i.Kc(m.fp(),w)}this.ab.Fm(Ve({width:a?o:0,height:l}),a?n:0,a?r:0),this.$i.S_(o),this.Gm!==n&&(this.Gm=n),this.Jm!==r&&(this.Jm=r)}hb(e){e?this.Xd.addEventListener("wheel",this.eb,{passive:!1}):this.Xd.removeEventListener("wheel",this.eb)}Rb(e){switch(e.deltaMode){case e.DOM_DELTA_PAGE:return 120;case e.DOM_DELTA_LINE:return 32}return t5?1/window.devicePixelRatio:1}rb(e){if(!(e.deltaX!==0&&this.cn.handleScroll.mouseWheel||e.deltaY!==0&&this.cn.handleScale.mouseWheel))return;const n=this.Rb(e),r=n*e.deltaX/100,i=-n*e.deltaY/100;if(e.cancelable&&e.preventDefault(),i!==0&&this.cn.handleScale.mouseWheel){const s=Math.sign(i)*Math.min(1,Math.abs(i)),o=e.clientX-this.Xd.getBoundingClientRect().left;this.$t().Qc(o,s)}r!==0&&this.cn.handleScroll.mouseWheel&&this.$t().td(-80*r)}mb(e,n){var r;const i=e.jn();i===3&&this.Db(),i!==3&&i!==2||(this.Vb(e),this.Ob(e,n),this.ab.bt(),this.Xm.forEach(s=>{s.Xp()}),((r=this.Qm)===null||r===void 0?void 0:r.jn())===3&&(this.Qm.ts(e),this.Db(),this.Vb(this.Qm),this.Ob(this.Qm,n),e=this.Qm,this.Qm=null)),this.vp(e)}Ob(e,n){for(const r of e.Qn())this.ns(r,n)}Vb(e){const n=this.$i.qc();for(let r=0;r<n.length;r++)e.Hn(r).Wn&&n[r].N_()}ns(e,n){const r=this.$i.St();switch(e.qn){case 0:r.hc();break;case 1:r.lc(e.Vt);break;case 2:r.Gn(e.Vt);break;case 3:r.Jn(e.Vt);break;case 4:r.qu();break;case 5:e.Vt.Qu(n)||r.Jn(e.Vt.tc(n))}}Vc(e){this.Qm!==null?this.Qm.ts(e):this.Qm=e,this.tb||(this.tb=!0,this.Km=window.requestAnimationFrame(n=>{if(this.tb=!1,this.Km=0,this.Qm!==null){const r=this.Qm;this.Qm=null,this.mb(r,n);for(const i of r.Qn())if(i.qn===5&&!i.Vt.Qu(n)){this.$t().Zn(i.Vt);break}}}))}Db(){this.ub()}ub(){const e=this.$i.qc(),n=e.length,r=this.Xm.length;for(let i=n;i<r;i++){const s=Ot(this.Xm.pop());this.sb.removeChild(s.lp()),s.lm().p(this),s.am().p(this),s.S()}for(let i=r;i<n;i++){const s=new kv(this,e[i]);s.lm().l(this.Bb.bind(this),this),s.am().l(this.Ab.bind(this),this),this.Xm.push(s),this.sb.insertBefore(s.lp(),this.ab.lp())}for(let i=0;i<n;i++){const s=e[i],o=this.Xm[i];o.fp()!==s?o.qp(s):o.Up()}this.cb(),this.Pb()}Ib(e,n,r){var i;const s=new Map;e!==null&&this.$i.wt().forEach(u=>{const h=u.In().ll(e);h!==null&&s.set(u,h)});let o;if(e!==null){const u=(i=this.$i.St().Ui(e))===null||i===void 0?void 0:i.originalTime;u!==void 0&&(o=u)}const a=this.$t().Wc(),l=a!==null&&a.Hc instanceof wv?a.Hc:void 0,c=a!==null&&a.Iv!==void 0?a.Iv.gr:void 0;return{zb:o,ee:e??void 0,Lb:n??void 0,Eb:l,Nb:s,Fb:c,Wb:r??void 0}}Bb(e,n,r){this.Vp.m(()=>this.Ib(e,n,r))}Ab(e,n,r){this.Op.m(()=>this.Ib(e,n,r))}lb(e,n,r){this.Rc.m(()=>this.Ib(e,n,r))}cb(){const e=this.cn.timeScale.visible?"":"none";this.ab.lp().style.display=e}xb(){return this.Xm[0].fp().R_().W().visible}Sb(){return this.Xm[0].fp().D_().W().visible}ob(){return"ResizeObserver"in window&&(this.ib=new ResizeObserver(e=>{const n=e.find(r=>r.target===this.Jd);n&&this._b(n.contentRect.width,n.contentRect.height)}),this.ib.observe(this.Jd,{box:"border-box"}),!0)}pb(){this.ib!==null&&this.ib.disconnect(),this.ib=null}}function bf(t){return!!(t.handleScroll.mouseWheel||t.handleScale.mouseWheel)}function r5(t){return function(e){return e.open!==void 0}(t)||function(e){return e.value!==void 0}(t)}function w_(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function nw(t,e,n,r){const i=n.value,s={ee:e,ot:t,Vt:[i,i,i,i],zb:r};return n.color!==void 0&&(s.V=n.color),s}function i5(t,e,n,r){const i=n.value,s={ee:e,ot:t,Vt:[i,i,i,i],zb:r};return n.lineColor!==void 0&&(s.lt=n.lineColor),n.topColor!==void 0&&(s.Ps=n.topColor),n.bottomColor!==void 0&&(s.Rs=n.bottomColor),s}function s5(t,e,n,r){const i=n.value,s={ee:e,ot:t,Vt:[i,i,i,i],zb:r};return n.topLineColor!==void 0&&(s.Re=n.topLineColor),n.bottomLineColor!==void 0&&(s.De=n.bottomLineColor),n.topFillColor1!==void 0&&(s.ke=n.topFillColor1),n.topFillColor2!==void 0&&(s.ye=n.topFillColor2),n.bottomFillColor1!==void 0&&(s.Ce=n.bottomFillColor1),n.bottomFillColor2!==void 0&&(s.Te=n.bottomFillColor2),s}function o5(t,e,n,r){const i={ee:e,ot:t,Vt:[n.open,n.high,n.low,n.close],zb:r};return n.color!==void 0&&(i.V=n.color),i}function a5(t,e,n,r){const i={ee:e,ot:t,Vt:[n.open,n.high,n.low,n.close],zb:r};return n.color!==void 0&&(i.V=n.color),n.borderColor!==void 0&&(i.Ot=n.borderColor),n.wickColor!==void 0&&(i.Xh=n.wickColor),i}function l5(t,e,n,r,i){const s=Ot(i)(n),o=Math.max(...s),a=Math.min(...s),l=s[s.length-1],c=[l,o,a,l],u=n,{time:h,color:f}=u;return{ee:e,ot:t,Vt:c,zb:r,$e:w_(u,["time","color"]),V:f}}function _c(t){return t.Vt!==void 0}function rw(t,e){return e.customValues!==void 0&&(t.jb=e.customValues),t}function Li(t){return(e,n,r,i,s,o)=>function(a,l){return l?l(a):(c=a).open===void 0&&c.value===void 0;var c}(r,o)?rw({ot:e,ee:n,zb:i},r):rw(t(e,n,r,i,s),r)}function iw(t){return{Candlestick:Li(a5),Bar:Li(o5),Area:Li(i5),Baseline:Li(s5),Histogram:Li(nw),Line:Li(nw),Custom:Li(l5)}[t]}function sw(t){return{ee:0,Hb:new Map,la:t}}function ow(t,e){if(t!==void 0&&t.length!==0)return{$b:e.key(t[0].ot),Ub:e.key(t[t.length-1].ot)}}function aw(t){let e;return t.forEach(n=>{e===void 0&&(e=n.zb)}),Ot(e)}class c5{constructor(e){this.qb=new Map,this.Yb=new Map,this.Zb=new Map,this.Xb=[],this.q_=e}S(){this.qb.clear(),this.Yb.clear(),this.Zb.clear(),this.Xb=[]}Kb(e,n){let r=this.qb.size!==0,i=!1;const s=this.Yb.get(e);if(s!==void 0)if(this.Yb.size===1)r=!1,i=!0,this.qb.clear();else for(const l of this.Xb)l.pointData.Hb.delete(e)&&(i=!0);let o=[];if(n.length!==0){const l=n.map(p=>p.time),c=this.q_.createConverterToInternalObj(n),u=iw(e.Qh()),h=e.Ca(),f=e.Ta();o=n.map((p,g)=>{const m=c(p.time),w=this.q_.key(m);let v=this.qb.get(w);v===void 0&&(v=sw(m),this.qb.set(w,v),i=!0);const x=u(m,v.ee,p,l[g],h,f);return v.Hb.set(e,x),x})}r&&this.Gb(),this.Jb(e,o);let a=-1;if(i){const l=[];this.qb.forEach(c=>{l.push({timeWeight:0,time:c.la,pointData:c,originalTime:aw(c.Hb)})}),l.sort((c,u)=>this.q_.key(c.time)-this.q_.key(u.time)),a=this.Qb(l)}return this.tw(e,a,function(l,c,u){const h=ow(l,u),f=ow(c,u);if(h!==void 0&&f!==void 0)return{ta:h.Ub>=f.Ub&&h.$b>=f.$b}}(this.Yb.get(e),s,this.q_))}vd(e){return this.Kb(e,[])}iw(e,n){const r=n;(function(m){m.zb===void 0&&(m.zb=m.time)})(r),this.q_.preprocessData(n);const i=this.q_.createConverterToInternalObj([n])(n.time),s=this.Zb.get(e);if(s!==void 0&&this.q_.key(i)<this.q_.key(s))throw new Error(`Cannot update oldest data, last time=${s}, new time=${i}`);let o=this.qb.get(this.q_.key(i));const a=o===void 0;o===void 0&&(o=sw(i),this.qb.set(this.q_.key(i),o));const l=iw(e.Qh()),c=e.Ca(),u=e.Ta(),h=l(i,o.ee,n,r.zb,c,u);o.Hb.set(e,h),this.nw(e,h);const f={ta:_c(h)};if(!a)return this.tw(e,-1,f);const p={timeWeight:0,time:o.la,pointData:o,originalTime:aw(o.Hb)},g=Ul(this.Xb,this.q_.key(p.time),(m,w)=>this.q_.key(m.time)<w);this.Xb.splice(g,0,p);for(let m=g;m<this.Xb.length;++m)Sf(this.Xb[m].pointData,m);return this.q_.fillWeightsForPoints(this.Xb,g),this.tw(e,g,f)}nw(e,n){let r=this.Yb.get(e);r===void 0&&(r=[],this.Yb.set(e,r));const i=r.length!==0?r[r.length-1]:null;i===null||this.q_.key(n.ot)>this.q_.key(i.ot)?_c(n)&&r.push(n):_c(n)?r[r.length-1]=n:r.splice(-1,1),this.Zb.set(e,n.ot)}Jb(e,n){n.length!==0?(this.Yb.set(e,n.filter(_c)),this.Zb.set(e,n[n.length-1].ot)):(this.Yb.delete(e),this.Zb.delete(e))}Gb(){for(const e of this.Xb)e.pointData.Hb.size===0&&this.qb.delete(this.q_.key(e.time))}Qb(e){let n=-1;for(let r=0;r<this.Xb.length&&r<e.length;++r){const i=this.Xb[r],s=e[r];if(this.q_.key(i.time)!==this.q_.key(s.time)){n=r;break}s.timeWeight=i.timeWeight,Sf(s.pointData,r)}if(n===-1&&this.Xb.length!==e.length&&(n=Math.min(this.Xb.length,e.length)),n===-1)return-1;for(let r=n;r<e.length;++r)Sf(e[r].pointData,r);return this.q_.fillWeightsForPoints(e,n),this.Xb=e,n}sw(){if(this.Yb.size===0)return null;let e=0;return this.Yb.forEach(n=>{n.length!==0&&(e=Math.max(e,n[n.length-1].ee))}),e}tw(e,n,r){const i={ew:new Map,St:{Eu:this.sw()}};if(n!==-1)this.Yb.forEach((s,o)=>{i.ew.set(o,{$e:s,rw:o===e?r:void 0})}),this.Yb.has(e)||i.ew.set(e,{$e:[],rw:r}),i.St.hw=this.Xb,i.St.lw=n;else{const s=this.Yb.get(e);i.ew.set(e,{$e:s||[],rw:r})}return i}}function Sf(t,e){t.ee=e,t.Hb.forEach(n=>{n.ee=e})}function Ev(t){const e={value:t.Vt[3],time:t.zb};return t.jb!==void 0&&(e.customValues=t.jb),e}function lw(t){const e=Ev(t);return t.V!==void 0&&(e.color=t.V),e}function u5(t){const e=Ev(t);return t.lt!==void 0&&(e.lineColor=t.lt),t.Ps!==void 0&&(e.topColor=t.Ps),t.Rs!==void 0&&(e.bottomColor=t.Rs),e}function d5(t){const e=Ev(t);return t.Re!==void 0&&(e.topLineColor=t.Re),t.De!==void 0&&(e.bottomLineColor=t.De),t.ke!==void 0&&(e.topFillColor1=t.ke),t.ye!==void 0&&(e.topFillColor2=t.ye),t.Ce!==void 0&&(e.bottomFillColor1=t.Ce),t.Te!==void 0&&(e.bottomFillColor2=t.Te),e}function b_(t){const e={open:t.Vt[0],high:t.Vt[1],low:t.Vt[2],close:t.Vt[3],time:t.zb};return t.jb!==void 0&&(e.customValues=t.jb),e}function h5(t){const e=b_(t);return t.V!==void 0&&(e.color=t.V),e}function f5(t){const e=b_(t),{V:n,Ot:r,Xh:i}=t;return n!==void 0&&(e.color=n),r!==void 0&&(e.borderColor=r),i!==void 0&&(e.wickColor=i),e}function mm(t){return{Area:u5,Line:lw,Baseline:d5,Histogram:lw,Bar:h5,Candlestick:f5,Custom:p5}[t]}function p5(t){const e=t.zb;return Object.assign(Object.assign({},t.$e),{time:e})}const m5={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},g5={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},v5={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:pv,attributionLogo:!0},kf={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0},y5={rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0},x5={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:pv,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"};function cw(){return{width:0,height:0,autoSize:!1,layout:v5,crosshair:m5,grid:g5,overlayPriceScales:Object.assign({},kf),leftPriceScale:Object.assign(Object.assign({},kf),{visible:!1}),rightPriceScale:Object.assign(Object.assign({},kf),{visible:!0}),timeScale:y5,watermark:x5,localization:{locale:Ro?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class w5{constructor(e,n){this.aw=e,this.ow=n}applyOptions(e){this.aw.$t().$c(this.ow,e)}options(){return this.Li().W()}width(){return eh(this.ow)?this.aw.Mb(this.ow):0}Li(){return G(this.aw.$t().Uc(this.ow)).Dt}}function uw(t,e,n){const r=w_(t,["time","originalTime"]),i=Object.assign({time:e},r);return n!==void 0&&(i.originalTime=n),i}const b5={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class S5{constructor(e){this.Nh=e}applyOptions(e){this.Nh.$h(e)}options(){return this.Nh.W()}_w(){return this.Nh}}class k5{constructor(e,n,r,i,s){this.uw=new et,this.Es=e,this.cw=n,this.dw=r,this.q_=s,this.fw=i}S(){this.uw.S()}priceFormatter(){return this.Es.ba()}priceToCoordinate(e){const n=this.Es.Ct();return n===null?null:this.Es.Dt().Rt(e,n.Vt)}coordinateToPrice(e){const n=this.Es.Ct();return n===null?null:this.Es.Dt().pn(e,n.Vt)}barsInLogicalRange(e){if(e===null)return null;const n=new ho(new Oa(e.from,e.to)).lu(),r=this.Es.In();if(r.Ni())return null;const i=r.ll(n.Os(),1),s=r.ll(n.ui(),-1),o=G(r.el()),a=G(r.An());if(i!==null&&s!==null&&i.ee>s.ee)return{barsBefore:e.from-o,barsAfter:a-e.to};const l={barsBefore:i===null||i.ee===o?e.from-o:i.ee-o,barsAfter:s===null||s.ee===a?a-e.to:a-s.ee};return i!==null&&s!==null&&(l.from=i.zb,l.to=s.zb),l}setData(e){this.q_,this.Es.Qh(),this.cw.pw(this.Es,e),this.mw("full")}update(e){this.Es.Qh(),this.cw.bw(this.Es,e),this.mw("update")}dataByIndex(e,n){const r=this.Es.In().ll(e,n);return r===null?null:mm(this.seriesType())(r)}data(){const e=mm(this.seriesType());return this.Es.In().ne().map(n=>e(n))}subscribeDataChanged(e){this.uw.l(e)}unsubscribeDataChanged(e){this.uw.v(e)}setMarkers(e){this.q_;const n=e.map(r=>uw(r,this.q_.convertHorzItemToInternal(r.time),r.time));this.Es.na(n)}markers(){return this.Es.sa().map(e=>uw(e,e.originalTime,void 0))}applyOptions(e){this.Es.$h(e)}options(){return Ar(this.Es.W())}priceScale(){return this.dw.priceScale(this.Es.Dt().Pa())}createPriceLine(e){const n=Un(Ar(b5),e),r=this.Es.ea(n);return new S5(r)}removePriceLine(e){this.Es.ra(e._w())}seriesType(){return this.Es.Qh()}attachPrimitive(e){this.Es.ka(e),e.attached&&e.attached({chart:this.fw,series:this,requestUpdate:()=>this.Es.$t().Kl()})}detachPrimitive(e){this.Es.ya(e),e.detached&&e.detached()}mw(e){this.uw.M()&&this.uw.m(e)}}class C5{constructor(e,n,r){this.ww=new et,this.mu=new et,this.Om=new et,this.$i=e,this.yl=e.St(),this.ab=n,this.yl.nc().l(this.gw.bind(this)),this.yl.sc().l(this.Mw.bind(this)),this.ab.Nm().l(this.xw.bind(this)),this.q_=r}S(){this.yl.nc().p(this),this.yl.sc().p(this),this.ab.Nm().p(this),this.ww.S(),this.mu.S(),this.Om.S()}scrollPosition(){return this.yl.Hu()}scrollToPosition(e,n){n?this.yl.Ju(e,1e3):this.$i.Jn(e)}scrollToRealTime(){this.yl.Gu()}getVisibleRange(){const e=this.yl.Vu();return e===null?null:{from:e.from.originalTime,to:e.to.originalTime}}setVisibleRange(e){const n={from:this.q_.convertHorzItemToInternal(e.from),to:this.q_.convertHorzItemToInternal(e.to)},r=this.yl.Iu(n);this.$i.pd(r)}getVisibleLogicalRange(){const e=this.yl.Du();return e===null?null:{from:e.Os(),to:e.ui()}}setVisibleLogicalRange(e){_i(e.from<=e.to,"The from index cannot be after the to index."),this.$i.pd(e)}resetTimeScale(){this.$i.Kn()}fitContent(){this.$i.hc()}logicalToCoordinate(e){const n=this.$i.St();return n.Ni()?null:n.It(e)}coordinateToLogical(e){return this.yl.Ni()?null:this.yl.Nu(e)}timeToCoordinate(e){const n=this.q_.convertHorzItemToInternal(e),r=this.yl.Va(n,!1);return r===null?null:this.yl.It(r)}coordinateToTime(e){const n=this.$i.St(),r=n.Nu(e),i=n.Ui(r);return i===null?null:i.originalTime}width(){return this.ab.um().width}height(){return this.ab.um().height}subscribeVisibleTimeRangeChange(e){this.ww.l(e)}unsubscribeVisibleTimeRangeChange(e){this.ww.v(e)}subscribeVisibleLogicalRangeChange(e){this.mu.l(e)}unsubscribeVisibleLogicalRangeChange(e){this.mu.v(e)}subscribeSizeChange(e){this.Om.l(e)}unsubscribeSizeChange(e){this.Om.v(e)}applyOptions(e){this.yl.$h(e)}options(){return Object.assign(Object.assign({},Ar(this.yl.W())),{barSpacing:this.yl.le()})}gw(){this.ww.M()&&this.ww.m(this.getVisibleRange())}Mw(){this.mu.M()&&this.mu.m(this.getVisibleLogicalRange())}xw(e){this.Om.m(e.width,e.height)}}function E5(t){if(t===void 0||t.type==="custom")return;const e=t;e.minMove!==void 0&&e.precision===void 0&&(e.precision=function(n){if(n>=1)return 0;let r=0;for(;r<8;r++){const i=Math.round(n);if(Math.abs(i-n)<1e-8)return r;n*=10}return r}(e.minMove))}function dw(t){return function(e){if(yc(e.handleScale)){const r=e.handleScale;e.handleScale={axisDoubleClickReset:{time:r,price:r},axisPressedMouseMove:{time:r,price:r},mouseWheel:r,pinch:r}}else if(e.handleScale!==void 0){const{axisPressedMouseMove:r,axisDoubleClickReset:i}=e.handleScale;yc(r)&&(e.handleScale.axisPressedMouseMove={time:r,price:r}),yc(i)&&(e.handleScale.axisDoubleClickReset={time:i,price:i})}const n=e.handleScroll;yc(n)&&(e.handleScroll={horzTouchDrag:n,vertTouchDrag:n,mouseWheel:n,pressedMouseMove:n})}(t),t}class N5{constructor(e,n,r){this.Sw=new Map,this.kw=new Map,this.yw=new et,this.Cw=new et,this.Tw=new et,this.Pw=new c5(n);const i=r===void 0?Ar(cw()):Un(Ar(cw()),dw(r));this.q_=n,this.aw=new n5(e,i,n),this.aw.lm().l(o=>{this.yw.M()&&this.yw.m(this.Rw(o()))},this),this.aw.am().l(o=>{this.Cw.M()&&this.Cw.m(this.Rw(o()))},this),this.aw.Xc().l(o=>{this.Tw.M()&&this.Tw.m(this.Rw(o()))},this);const s=this.aw.$t();this.Dw=new C5(s,this.aw.fb(),this.q_)}remove(){this.aw.lm().p(this),this.aw.am().p(this),this.aw.Xc().p(this),this.Dw.S(),this.aw.S(),this.Sw.clear(),this.kw.clear(),this.yw.S(),this.Cw.S(),this.Tw.S(),this.Pw.S()}resize(e,n,r){this.autoSizeActive()||this.aw._b(e,n,r)}addCustomSeries(e,n){const r=Ys(e),i=Object.assign(Object.assign({},ZN),r.defaultOptions());return this.Vw("Custom",i,n,r)}addAreaSeries(e){return this.Vw("Area",c3,e)}addBaselineSeries(e){return this.Vw("Baseline",u3,e)}addBarSeries(e){return this.Vw("Bar",a3,e)}addCandlestickSeries(e={}){return function(n){n.borderColor!==void 0&&(n.borderUpColor=n.borderColor,n.borderDownColor=n.borderColor),n.wickColor!==void 0&&(n.wickUpColor=n.wickColor,n.wickDownColor=n.wickColor)}(e),this.Vw("Candlestick",o3,e)}addHistogramSeries(e){return this.Vw("Histogram",d3,e)}addLineSeries(e){return this.Vw("Line",l3,e)}removeSeries(e){const n=Ot(this.Sw.get(e)),r=this.Pw.vd(n);this.aw.$t().vd(n),this.Ow(r),this.Sw.delete(e),this.kw.delete(n)}pw(e,n){this.Ow(this.Pw.Kb(e,n))}bw(e,n){this.Ow(this.Pw.iw(e,n))}subscribeClick(e){this.yw.l(e)}unsubscribeClick(e){this.yw.v(e)}subscribeCrosshairMove(e){this.Tw.l(e)}unsubscribeCrosshairMove(e){this.Tw.v(e)}subscribeDblClick(e){this.Cw.l(e)}unsubscribeDblClick(e){this.Cw.v(e)}priceScale(e){return new w5(this.aw,e)}timeScale(){return this.Dw}applyOptions(e){this.aw.$h(dw(e))}options(){return this.aw.W()}takeScreenshot(){return this.aw.wb()}autoSizeActive(){return this.aw.kb()}chartElement(){return this.aw.yb()}paneSize(){const e=this.aw.Tb();return{height:e.height,width:e.width}}setCrosshairPosition(e,n,r){const i=this.Sw.get(r);if(i===void 0)return;const s=this.aw.$t().dr(i);s!==null&&this.aw.$t().ad(e,n,s)}clearCrosshairPosition(){this.aw.$t().od(!0)}Vw(e,n,r={},i){E5(r.priceFormat);const s=Un(Ar(XN),Ar(n),r),o=this.aw.$t().dd(e,s,i),a=new k5(o,this,this,this,this.q_);return this.Sw.set(a,o),this.kw.set(o,a),a}Ow(e){const n=this.aw.$t();n._d(e.St.Eu,e.St.hw,e.St.lw),e.ew.forEach((r,i)=>i.J(r.$e,r.rw)),n.Wu()}Bw(e){return Ot(this.kw.get(e))}Rw(e){const n=new Map;e.Nb.forEach((i,s)=>{const o=s.Qh(),a=mm(o)(i);if(o!=="Custom")_i(r5(a));else{const l=s.Ta();_i(!l||l(a)===!1)}n.set(this.Bw(s),a)});const r=e.Eb!==void 0&&this.kw.has(e.Eb)?this.Bw(e.Eb):void 0;return{time:e.zb,logical:e.ee,point:e.Lb,hoveredSeries:r,hoveredObjectId:e.Fb,seriesData:n,sourceEvent:e.Wb}}}function _5(t,e,n){let r;if(Vl(t)){const s=document.getElementById(t);_i(s!==null,`Cannot find element in DOM with id=${t}`),r=s}else r=t;const i=new N5(r,e,n);return e.setOptions(i.options()),i}function T5(t,e){return _5(t,new Z0,Z0.Id(e))}Object.assign(Object.assign({},XN),ZN);const As={dark:{background:"#01091A",text:"#F9FAFC",grid:"#1C2330",border:"#1C2330",success:"#1F734C",destructive:"#A53232"},light:{background:"#FFFFFF",text:"#01091A",grid:"#E4E7EB",border:"#E4E7EB",success:"#299966",destructive:"#EB4444"}},A5=50,P5=30,S_=t=>{const e=new Date(t*1e3);try{return e.toLocaleTimeString("ru-RU",{timeZone:"Europe/Moscow",hour:"2-digit",minute:"2-digit"})}catch(n){k.error("Error formatting time with timeZone:",n);const r=3*60*60*1e3,i=new Date(e.getTime()+r),s=i.getUTCHours().toString().padStart(2,"0"),o=i.getUTCMinutes().toString().padStart(2,"0");return`${s}:${o}`}},j5=t=>new Date(t*1e3).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"}),hw=t=>({locale:"ru-RU",priceFormatter:e=>To(e*100,"₽",!1),timeFormatter:e=>t==="1D"?S_(e):j5(e)}),k_=({data:t,chartType:e,period:n,className:r="h-full w-full",chartOptions:i,seriesOptions:s})=>{const o=y.useRef(null),a=y.useRef(null),l=y.useRef(null),c=Gi(p=>p.preference),u=y.useRef(n),h=p=>{const g=As[p];return{layout:{background:{type:um.Solid,color:g.background},textColor:g.text,attributionLogo:!1,fontSize:11},grid:{vertLines:{color:g.grid},horzLines:{color:g.grid}},timeScale:{borderColor:g.border},rightPriceScale:{borderColor:g.border},crosshair:{mode:lm.Normal,vertLine:{width:1,color:p==="dark"?"rgba(220, 220, 220, 0.4)":"rgba(50, 50, 50, 0.4)",labelVisible:!0,labelBackgroundColor:p==="dark"?"#3B4150":"#E0E3EB"},horzLine:{width:1,color:p==="dark"?"rgba(220, 220, 220, 0.4)":"rgba(50, 50, 50, 0.4)",labelVisible:!0,labelBackgroundColor:p==="dark"?"#3B4150":"#E0E3EB"}}}},f=p=>{const g=As[p],m={lastValueVisible:!1,priceLineVisible:!1,priceFormat:{type:"price",precision:2,minMove:.01},priceLineSource:0,...e==="line"&&{crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:p==="dark"?g.background:g.border}};if(e==="candle")return{...m,upColor:g.success,downColor:g.destructive,borderVisible:!1,wickVisible:!0,wickUpColor:g.success,wickDownColor:g.destructive};{const w=g.destructive;return{...m,color:w,lineWidth:2,crosshairMarkerBackgroundColor:w}}};return y.useEffect(()=>{if(!o.current||a.current)return;k.log("[LightweightChart] Creating chart instance.");const p=()=>{a.current&&o.current&&a.current.resize(o.current.clientWidth,o.current.clientHeight)},g=6;let m;const w=Gi.getState().preference;w==="system"?m=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":m=w;const v=h(m),x=hw(u.current),b={width:o.current.clientWidth,height:o.current.clientHeight,localization:x,rightPriceScale:{scaleMargins:{top:.1,bottom:.1},borderColor:As[m].border,visible:!0,autoScale:!0,invertScale:!1},timeScale:{rightOffset:0,barSpacing:g,fixLeftEdge:!0,fixRightEdge:!0,borderColor:As[m].border,timeVisible:!0,secondsVisible:!1,tickMarkFormatter:(N,C)=>{const _=new Date(N*1e3),P="ru-RU";switch(C){case zi.Year:return _.toLocaleDateString(P,{year:"numeric"});case zi.Month:return _.toLocaleDateString(P,{month:"short",year:"numeric"});case zi.DayOfMonth:return _.toLocaleDateString(P,{day:"2-digit",month:"2-digit"});case zi.Time:case zi.TimeWithSeconds:return S_(N);default:return _.toLocaleDateString(P)}}},handleScroll:{vertTouchDrag:!1,mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0},handleScale:{mouseWheel:!0,pinch:!0,axisPressedMouseMove:!0,axisDoubleClickReset:!0},watermark:{visible:!1},crosshair:v.crosshair},S={...b,...v,...i||{},localization:{...b.localization||{},...v.localization||{},...(i==null?void 0:i.localization)||{}},timeScale:{...b.timeScale||{},...v.timeScale||{},...(i==null?void 0:i.timeScale)||{}},rightPriceScale:{...b.rightPriceScale||{},...v.rightPriceScale||{},...(i==null?void 0:i.rightPriceScale)||{}},crosshair:{...b.crosshair||{},...v.crosshair||{},...(i==null?void 0:i.crosshair)||{}}};return a.current=T5(o.current,S),window.addEventListener("resize",p),()=>{k.log("[LightweightChart] Removing chart instance."),window.removeEventListener("resize",p),a.current&&(a.current.remove(),a.current=null,l.current=null)}},[i]),y.useEffect(()=>{if(u.current=n,!a.current)return;k.log(`[LightweightChart] Applying localization options for period: ${n}`);const p=hw(n);a.current.applyOptions({localization:p})},[n]),y.useLayoutEffect(()=>{if(!a.current)return;let p;c==="system"?p=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":p=c;const g=h(p);if(g.timeScale={...g.timeScale||{},borderColor:As[p].border},g.rightPriceScale={...g.rightPriceScale||{},borderColor:As[p].border},a.current.applyOptions(g),l.current){const m=f(p);l.current.applyOptions(m)}},[c,e]),y.useEffect(()=>{if(!a.current||!t){k.log("[LightweightChart] Skipping series update: chart or data not ready.");return}if(k.log(`[LightweightChart] Updating series. Type: ${e}, Points: ${t.length}`),l.current){k.log("[LightweightChart] Removing existing series.");try{a.current.removeSeries(l.current)}catch(b){k.error("[LightweightChart] Error removing series:",b)}l.current=null}let p;const g=Gi.getState().preference;g==="system"?p=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":p=g;const v={...f(p),...s||{}};let x=null;try{if(e==="candle"){x=a.current.addCandlestickSeries(v);const b=t.map(S=>({time:S.time,open:S.open,high:S.high,low:S.low,close:S.close}));x.setData(b)}else{x=a.current.addLineSeries(v);const b=t.map(S=>({time:S.time,value:S.close}));x.setData(b)}if(l.current=x,k.log("[LightweightChart] New series added and data set."),t.length>0){const b=e==="line"?A5:P5,S=Math.max(0,t.length-b),N=t.length-1;a.current.timeScale().setVisibleLogicalRange({from:S,to:N}),k.log(`[LightweightChart] Set initial visible range: ${S} to ${N}`),a.current.timeScale().applyOptions({fixLeftEdge:!0,fixRightEdge:!0})}else a.current.timeScale().applyOptions({fixLeftEdge:!1,fixRightEdge:!1})}catch(b){k.error("[LightweightChart] Error adding series or setting data:",b),b instanceof Error&&b.message.includes("disposed")&&k.warn("[LightweightChart] Attempted to operate on a disposed chart object.")}},[t,e,c,s]),d.jsx("div",{ref:o,className:r})};var Nv="Tabs",[R5,j8]=Dt(Nv,[Zd]),C_=Zd(),[M5,_v]=R5(Nv),E_=y.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=t,u=zl(a),[h,f]=Cn({prop:r,onChange:i,defaultProp:s});return d.jsx(M5,{scope:n,baseId:or(),value:h,onValueChange:f,orientation:o,dir:u,activationMode:l,children:d.jsx(ae.div,{dir:u,"data-orientation":o,...c,ref:e})})});E_.displayName=Nv;var N_="TabsList",__=y.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,s=_v(N_,n),o=C_(n);return d.jsx(kN,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:r,children:d.jsx(ae.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:e})})});__.displayName=N_;var T_="TabsTrigger",A_=y.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...s}=t,o=_v(T_,n),a=C_(n),l=R_(o.baseId,r),c=M_(o.baseId,r),u=r===o.value;return d.jsx(CN,{asChild:!0,...a,focusable:!i,active:u,children:d.jsx(ae.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...s,ref:e,onMouseDown:le(t.onMouseDown,h=>{!i&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:le(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:le(t.onFocus,()=>{const h=o.activationMode!=="manual";!u&&!i&&h&&o.onValueChange(r)})})})});A_.displayName=T_;var P_="TabsContent",j_=y.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:s,...o}=t,a=_v(P_,n),l=R_(a.baseId,r),c=M_(a.baseId,r),u=r===a.value,h=y.useRef(u);return y.useEffect(()=>{const f=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(f)},[]),d.jsx(Ur,{present:i||u,children:({present:f})=>d.jsx(ae.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:c,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:h.current?"0s":void 0},children:f&&s})})});j_.displayName=P_;function R_(t,e){return`${t}-trigger-${e}`}function M_(t,e){return`${t}-content-${e}`}var I5=E_,I_=__,O_=A_,L_=j_;const rh=I5,Hl=y.forwardRef(({className:t,...e},n)=>d.jsx(I_,{ref:n,className:U("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));Hl.displayName=I_.displayName;const Nt=y.forwardRef(({className:t,...e},n)=>d.jsx(O_,{ref:n,className:U("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));Nt.displayName=O_.displayName;const O5=y.forwardRef(({className:t,...e},n)=>d.jsx(L_,{ref:n,className:U("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));O5.displayName=L_.displayName;Ie.locale("ru");Ie.extend(cv);Ie.extend(Ll);Ie.extend($l);const L5=({date:t,className:e})=>{const n=t?Ie.utc(t).tz("Europe/Moscow").format("D MMMM YYYY"):null;return d.jsxs("div",{className:U("flex items-center justify-center gap-2 p-3 rounded-md border border-amber-500/50 bg-amber-500/10 text-amber-700 dark:text-amber-300",e),children:[d.jsx(_k,{className:"h-5 w-5 flex-shrink-0"}),d.jsxs("span",{className:"text-sm font-medium",children:["Актив вышел из обращения",n&&` ${n}`]})]})},$5=()=>{var E;const{id:t}=ys(),e=Number(t),n=gt(),r=pn(),{accounts:i,isLoading:s,error:o}=ur(),[a,l]=y.useState(null),[c,u]=y.useState(!0),[h,f]=y.useState(null),{tg:p}=Zt(),[g,m]=y.useState("1M"),[w,v]=y.useState("line"),[x,b]=y.useState([]),[S,N]=y.useState(!0),[C,_]=y.useState(null),P=y.useMemo(()=>(i==null?void 0:i.filter(z=>!!(z!=null&&z.brokerAccount)&&!z.brokerAccount.isDeleted))??[],[i]),I=y.useMemo(()=>{if(!a||!P||P.length===0)return null;let z=0,q=0;P.forEach(J=>{var ce;const he=(ce=J.portfolioItems)==null?void 0:ce.find(re=>re.assetId===a.id);he&&he.averagePriceCopecks!==null&&he.quantity>0&&he.averagePriceCopecks>0&&(z+=he.averagePriceCopecks*he.quantity,q+=he.quantity)});const T=q>0?z/q:null;return k.log(`[AssetPage useMemo avgPrice] Calculated avg price for ${a.ticker}: ${T}`),T},[a,P]),R=y.useMemo(()=>g==="1D"?"line":w,[g,w]),O=y.useMemo(()=>a?[a.ticker]:[],[a]),{prices:j,isLoading:F,error:M}=_d(O),D=y.useMemo(()=>a?j.get(a.ticker):null,[a,j]),L=y.useMemo(()=>D?Math.round(D.price*100):null,[D]);if(y.useEffect(()=>{const z=new AbortController,q=z.signal;return(async()=>{if(!e||isNaN(e)){u(!1),f("Неверный ID актива.");return}u(!0),f(null),l(null);try{const J=await kk(e,{signal:q});if(!q.aborted){if(!J||typeof J.isSuccess!="boolean")throw new Error("Некорректный ответ от getAssetById.");if(J.isSuccess&&J.resultObject)l(J.resultObject),f(null);else{const he=J.errorMessage||`Актив ${e} не найден.`;f(he),l(null)}}}catch(J){J.name==="AbortError"?k.log(`[AssetPage fetchAssetDetails] Request aborted for ID ${e}.`):q.aborted||(f(J.message||"Ошибка загрузки"),l(null))}finally{q.aborted||u(!1)}})(),()=>{k.log(`[AssetPage fetchAssetDetails] Cleanup: Aborting fetch for ID ${e}.`),z.abort()}},[e]),y.useEffect(()=>{const z=new AbortController,q=z.signal;return(async()=>{if(!(a!=null&&a.id)){b([]),N(!1),_(null);return}N(!0),_(null),k.log(`[AssetPage] Fetching chart history for asset ${a.id}, period ${g}`);try{const J=await Ek(a.id,g,{signal:q});q.aborted||(J.isSuccess&&Array.isArray(J.resultObject)?(b(J.resultObject),_(null)):(_(J.errorMessage||`Не удалось загрузить историю для ${g}.`),b([])))}catch(J){J.name==="AbortError"?k.log(`[AssetPage fetchChartHistory] Fetch aborted for period ${g}`):q.aborted||(_(J.message||"Ошибка загрузки истории цен."),b([]))}finally{q.aborted||N(!1)}})(),()=>{k.log(`[AssetPage fetchChartHistory] Cleanup: Aborting fetch for period ${g}`),z.abort()}},[a==null?void 0:a.id,g]),y.useEffect(()=>{var T;const z=((T=r.state)==null?void 0:T.from)||"/market",q=()=>n(z,{replace:!0});return p&&(p.BackButton.show(),p.onEvent("backButtonClicked",q),k.log("[AssetPage] Telegram BackButton shown and handler attached.")),()=>{p&&(p.BackButton.hide(),p.offEvent("backButtonClicked",q),k.log("[AssetPage] Telegram BackButton hidden and handler removed."))}},[p,n,(E=r.state)==null?void 0:E.from]),c||s)return d.jsx("div",{className:"flex items-center justify-center min-h-[calc(100vh-8rem)]",children:d.jsx(Ce,{size:"lg"})});if(o)return d.jsxs("div",{className:"p-4 text-center",children:[" ",d.jsx(mt,{message:`Ошибка загрузки данных портфеля: ${o}`})," "]});if(h){const z=h||`Актив с ID ${e} не найден или произошла ошибка.`;return d.jsxs("div",{className:"p-4 text-center",children:[" ",d.jsx(mt,{message:z})," "]})}if(!a)return d.jsxs("div",{className:"p-4 text-center",children:[" ",d.jsx(mt,{message:`Не удалось загрузить данные актива (ID: ${e}).`})," "]});const B=z=>{v(z)},A=a.outOfCirculationAt,$=A&&new Date(A)<new Date;return k.log(`[AssetPage] Rendering main content. Ticker: ${a.ticker}, outOfCirculationAt: ${A}, isInactive: ${$}`),d.jsxs("div",{className:U("p-4 space-y-6",$?"pb-6":"pb-32"),children:[d.jsxs("div",{className:"relative flex items-center justify-between h-12",children:[d.jsx("div",{className:"absolute left-0 h-9 w-9"})," ",d.jsxs("div",{className:"flex flex-col items-center text-center flex-grow mx-2 min-w-0",children:[d.jsxs("h1",{className:"text-lg font-semibold truncate leading-tight",title:a.title||a.shortName||a.ticker,children:[" ",Ao(a)," "]}),d.jsx("span",{className:"text-sm text-muted-foreground uppercase mt-0.5",children:a.ticker}),d.jsxs("div",{className:"text-xs mt-1",children:[" ",F&&L===null?d.jsx(Ce,{size:"sm"}):L!==null?d.jsx(ft,{value:L,className:"text-foreground",asset:a}):M?d.jsx("span",{className:"text-destructive",title:M,children:"Ошибка цены"}):d.jsx("span",{className:"text-muted-foreground",children:"—"})," "]})]}),d.jsxs("div",{className:"flex-shrink-0",children:[" ",d.jsx(WN,{asset:a,priceInfo:D||null,isLoadingPrice:F,priceError:M})," "]})]}),d.jsxs("div",{className:"mt-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2 px-1 gap-2",children:[d.jsx(rh,{defaultValue:g,onValueChange:z=>m(z),className:"flex-grow",children:d.jsxs(Hl,{className:"grid grid-cols-6 h-9 w-full",children:[" ",d.jsx(Nt,{value:"1D",className:"text-xs h-full",children:"1D"})," ",d.jsx(Nt,{value:"1W",className:"text-xs h-full",children:"1W"})," ",d.jsx(Nt,{value:"1M",className:"text-xs h-full",children:"1M"})," ",d.jsx(Nt,{value:"1Y",className:"text-xs h-full",children:"1Y"})," ",d.jsx(Nt,{value:"5Y",className:"text-xs h-full",children:"5Y"})," ",d.jsx(Nt,{value:"ALL",className:"text-xs h-full",children:"All"})," "]})}),d.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[d.jsxs(ke,{variant:R==="line"?"secondary":"ghost",size:"icon",className:"h-9 w-9",onClick:()=>B("line"),title:"Линейный график",children:[" ",d.jsx(Mk,{className:"h-4 w-4"})," "]}),d.jsxs(ke,{variant:R==="candle"?"secondary":"ghost",size:"icon",className:"h-9 w-9",onClick:()=>B("candle"),title:"Свечной график",disabled:g==="1D",children:[" ",d.jsx(Tk,{className:"h-4 w-4"})," "]})]})]}),d.jsxs("div",{className:"relative h-[250px] w-full bg-card rounded-md border shadow-sm overflow-hidden",children:[d.jsxs("div",{className:"absolute bottom-0 right-2 z-10",children:[" ",d.jsxs(ke,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>n(`/asset/${a.id}/chart`),title:"На весь экран",children:[" ",d.jsx(QO,{className:"h-3.5 w-3.5"})," "]})," "]}),d.jsx("div",{className:U("absolute inset-0 transition-opacity duration-200",S?"opacity-50 pointer-events-none":"opacity-100"),children:x.length>0?d.jsx(k_,{data:x,chartType:R,period:g}):!S&&!C?d.jsx("div",{className:U("flex items-center justify-center text-muted-foreground h-full"),children:" Нет данных о цене за этот период. "}):null}),S&&d.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-background/30 z-10",children:d.jsx(Ce,{})}),C&&!S&&d.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 z-10",children:d.jsxs("div",{className:"text-center p-4 border border-destructive/50 rounded-md bg-destructive/10 text-destructive",children:[" ",d.jsx("span",{className:"text-2xl mr-2",children:"⚠️"})," ",C," "]})})]})]}),$?d.jsx(L5,{date:a.outOfCirculationAt}):d.jsxs(d.Fragment,{children:[I!==null&&d.jsx("div",{className:"mt-4 p-3 bg-card border rounded-md shadow-sm",children:d.jsxs("div",{className:"flex justify-between items-center text-sm",children:[d.jsx("span",{className:"text-muted-foreground",children:"Средняя цена покупки в портфеле:"}),d.jsx(ft,{value:I,className:"font-medium",asset:a,forceDecimalPlaces:2})]})}),d.jsx(GN,{asset:a,accounts:P})]})]})},D5=Td("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",success:"border-transparent bg-success text-success-foreground hover:bg-success/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function z5({className:t,variant:e,...n}){return d.jsx("div",{className:U(D5({variant:e}),t),...n})}const F5=(t,e)=>{let n=null;const r=(...i)=>{n&&clearTimeout(n),n=setTimeout(()=>{t(...i),n=null},e)};return r.cancel=()=>{n&&(clearTimeout(n),n=null)},r},B5=20,V5=()=>{const{searchTerm:t,activeTabValue:e,searchResults:n,totalResults:r,isLoading:i,error:s,didPerformSearch:o,marketTabs:a,isTypesLoading:l,typesError:c}=Sr(j=>({searchTerm:j.searchTerm,activeTabValue:j.activeTabValue,searchResults:j.searchResults,totalResults:j.totalResults,isLoading:j.isLoading,error:j.error,didPerformSearch:j.didPerformSearch,marketTabs:j.marketTabs,isTypesLoading:j.isTypesLoading,typesError:j.typesError}),io),u=Sr(j=>j.setSearchTerm),h=Sr(j=>j.setActiveTab),f=Sr(j=>j.fetchMarketAssets),p=Sr(j=>j.fetchMarketTabs),g=gt(),m=pn(),w=y.useRef(null);y.useEffect(()=>{Sr.getState().marketTabs.length<=1&&!l&&p()},[p,l]);const v=y.useRef(F5(j=>{u(j)},400)).current,x=j=>{v(j.target.value)};y.useEffect(()=>{const j=Sr.getState();!j.didPerformSearch&&!j.isTypesLoading&&!j.isLoading&&j.marketTabs.length>0&&f(!1)},[l]);const b=y.useCallback(j=>{const M=Sr.getState().marketTabs.find(D=>D.value===j);M&&h(j,M.apiTitles)},[h]),S=y.useMemo(()=>n.map(j=>j==null?void 0:j.ticker).filter(j=>!!j&&j!=="RUB"),[n]),{prices:N,isLoading:C,error:_}=_d(S),P=j=>{!j||!j.id||g(`/asset/${j.id}`,{state:{from:m.pathname}})},I=y.useCallback(()=>{!i&&n.length<r&&f(!0)},[i,n.length,r,f]),R=!i&&n.length>0&&n.length<r;y.useEffect(()=>{const j=w.current;if(!j)return;const F=new IntersectionObserver(([M])=>{M.isIntersecting&&R&&!i&&I()},{threshold:.1});return F.observe(j),()=>{j&&F.unobserve(j)}},[R,I,i]);const O=j=>d.jsxs("div",{className:"flex items-center justify-between p-3 space-x-3 animate-pulse",children:[d.jsxs("div",{className:"flex items-center space-x-2 overflow-hidden flex-grow",children:[d.jsx("div",{className:"h-8 w-8 rounded-full bg-muted flex-shrink-0"}),d.jsxs("div",{className:"space-y-1.5 flex-grow",children:[d.jsx("div",{className:"h-3 rounded bg-muted w-3/4"}),d.jsx("div",{className:"h-2.5 rounded bg-muted w-1/2"})]})]}),d.jsx("div",{className:"h-4 w-16 rounded bg-muted flex-shrink-0 ml-2"})]},`skel-${j}`);return d.jsxs("div",{className:"p-4 space-y-4 flex flex-col",children:[d.jsxs(bt,{className:"flex-shrink-0 shadow-sm border border-border rounded-lg overflow-hidden bg-card",children:[d.jsxs(pr,{className:"pb-3 pt-4 px-4",children:[d.jsx(Vr,{className:"text-lg mb-2",children:"Биржа"}),d.jsxs("div",{className:"relative",children:[d.jsx(nL,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),d.jsx($n,{type:"search",placeholder:"Название или тикер...",defaultValue:t,onChange:x,className:"pl-9 h-10 rounded-md text-sm","aria-label":"Поиск активов"})]})]}),d.jsx(Gt,{className:"pt-1 pb-3 px-4",children:d.jsx("div",{className:"min-h-[40px]",children:l?d.jsx("div",{className:"flex justify-center p-2",children:d.jsx(Ce,{size:"sm"})}):c?d.jsx("div",{className:"text-destructive text-xs p-2 text-center",children:c}):a.length>0?d.jsx(rh,{value:e,onValueChange:b,children:d.jsx(Hl,{className:"flex flex-wrap h-auto justify-start -m-1 p-0 bg-transparent",children:a.map(j=>d.jsxs(Nt,{value:j.value,className:U("text-xs h-8 px-3 py-1 m-1 rounded-full transition-all border shadow-sm","focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring","data-[state=active]:bg-primary data-[state=active]:text-primary-foreground data-[state=active]:border-primary data-[state=active]:shadow","data-[state=inactive]:bg-card data-[state=inactive]:border-border data-[state=inactive]:text-muted-foreground hover:data-[state=inactive]:bg-muted/60"),disabled:i||l,children:[" ",j.label," "]},j.value))})}):null})})]}),d.jsxs("div",{className:"relative flex-grow overflow-y-auto no-scrollbar border border-border rounded-lg shadow-sm bg-card",children:[i&&n.length===0&&!s&&d.jsxs("div",{className:"divide-y divide-border",children:[" ",Array.from({length:8}).map((j,F)=>O(F))," "]}),s&&n.length===0&&!i&&d.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-6 text-center",children:[" ",d.jsx(mt,{message:s})," "]}),o&&n.length===0&&!i&&!s&&d.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground p-4 text-center",children:"Ничего не найдено."}),n.length>0&&d.jsxs("div",{className:"divide-y divide-border",children:[n.map(j=>{if(!j)return null;const F=N.get(j.ticker),M=F?Math.round(F.price*100):null,D=j.outOfCirculationAt,L=D&&new Date(D)<new Date;return j.ticker==="SU26207RMFS9"&&k.warn(`[MarketPage Render Check - TARGET] Ticker: ${j.ticker}, outOfCirculationAt: ${D}, IsInactive: ${L}`),d.jsxs("div",{className:U("flex items-center justify-between p-3 space-x-3 transition-colors",L?"opacity-60 bg-muted/30":"hover:bg-muted/50","cursor-pointer"),onClick:()=>P(j),"aria-disabled":L||void 0,title:L?"Актив вышел из обращения (нажмите для просмотра)":`Перейти к ${j.ticker}`,children:[d.jsx(Ig,{asset:j,showLotSize:!0,className:"flex-grow min-w-0",iconClassName:"h-8 w-8 rounded-full flex-shrink-0",nameClassName:U("text-sm font-medium",L?"text-muted-foreground":""),tickerClassName:U("text-xs",L?"text-muted-foreground/80":"")}),d.jsx("div",{className:"text-right flex-shrink-0 ml-2",children:L?d.jsxs(z5,{variant:"secondary",className:"text-xs font-normal px-1.5 py-0.5",children:[d.jsx(_k,{size:12,className:"mr-1"})," Архив"]}):C&&M===null&&!_?d.jsx(Ce,{size:"sm"}):M!==null?d.jsx(ft,{value:M,className:"text-sm",asset:j}):_?d.jsx("span",{className:"text-xs text-destructive",title:_,children:d.jsx(Rg,{size:12,className:"inline -mt-0.5"})}):d.jsx("span",{className:"text-xs text-muted-foreground",children:"—"})})]},j.id)}),d.jsx("div",{ref:w,style:{height:"1px"},"aria-hidden":"true"}),i&&n.length>0&&d.jsx("div",{className:"flex justify-center p-4",children:d.jsx(Ce,{size:"sm"})}),!i&&!R&&n.length>0&&r>B5&&d.jsx("p",{className:"p-4 text-center text-sm text-muted-foreground",children:"Конец списка"})]}),_&&n.length>0&&!C&&d.jsx("div",{className:"sticky bottom-0 p-1 text-center text-xs bg-destructive/10 text-destructive border-t border-destructive/30 z-10 rounded-b-lg",role:"alert",children:" Ошибка обновления цен. "})]})]})},U5=({investor:t,index:e})=>{const[n,r]=y.useState(!1);if(!(t!=null&&t.telegramUser))return null;const i=t.telegramUser,s=i.userId;Le.useEffect(()=>{r(!1)},[s]);const o=(p,g)=>{var v,x;const m=(v=p==null?void 0:p[0])==null?void 0:v.toUpperCase(),w=(x=g==null?void 0:g[0])==null?void 0:x.toUpperCase();return m&&w?`${m}${w}`:m||"?"},a=i.firstName?`${i.firstName}${i.lastName?` ${i.lastName}`:""}`:i.username?`@${i.username}`:`User ID: ${s}`,l=o(i.firstName,i.lastName),c=i.photo_url||i.photoUrl||null,u=()=>{n||r(!0)},h=e===0?"text-yellow-500":e===1?"text-gray-500 dark:text-gray-400":e===2?"text-orange-500 dark:text-orange-400":"text-foreground/80",f=e+1;return d.jsxs("li",{className:"flex items-center justify-between px-4 py-4 space-x-4 hover:bg-muted/50 transition-colors duration-100",children:[d.jsxs("div",{className:"flex items-center space-x-4 flex-grow min-w-0",children:[d.jsx("div",{className:U("flex-shrink-0 w-8 h-10 flex items-center justify-center font-semibold text-sm tabular-nums"),children:f===1?d.jsx(HO,{size:18,className:U("inline -mt-0.5",h),fill:"currentColor"}):d.jsx("span",{className:h,children:`${f}.`})}),d.jsxs(qd,{className:"w-10 h-10 flex-shrink-0 border",children:[!n&&c&&d.jsx(Kd,{src:c,alt:a,onError:u},c),d.jsx(Yd,{className:"text-sm",children:l})]}),d.jsxs("div",{className:"overflow-hidden",children:[d.jsx("p",{className:"text-base font-semibold truncate leading-tight",title:a,children:a}),i.username&&d.jsxs("p",{className:"text-sm text-muted-foreground truncate leading-tight",children:["@",i.username]})]})]}),d.jsx("div",{className:"flex-shrink-0 ml-2 text-right",children:d.jsx(ft,{value:t.totalAmountCopecks,className:"text-base font-semibold"})})]})},H5=async t=>{var n;const e="Failed to get top investors.";k.log("[API/Investors] getTop10Investors called");try{const r=await Xe.get("/api/BrokerAccountUser/GetTop10MostRichInvestors",{signal:t==null?void 0:t.signal});k.log("[API/Investors] getTop10Investors response received:",(n=r==null?void 0:r.data)==null?void 0:n.isSuccess);const i=ot(r,e);return i.isSuccess&&i.resultObject===null&&(k.warn("[API/Investors] getTop10Investors success but resultObject is null. Returning empty array."),i.resultObject=[]),i}catch(r){return r.name==="AbortError"?(k.log("[API/Investors getTop10Investors] Request aborted."),{isSuccess:!1,errorMessage:"Request aborted",resultObject:null}):at(r,e)}},W5=60*1e3,q5=()=>{const[t,e]=y.useState([]),[n,r]=y.useState(!0),[i,s]=y.useState(!1),[o,a]=y.useState(null),l=y.useRef(null),c=y.useCallback(async(h=!1,f=!1)=>{l.current&&(!f||!i)&&(l.current.abort(),k.log("[useTopInvestorsData fetch] Aborted previous fetch request.")),l.current=new AbortController;const p=l.current.signal;k.log(`[useTopInvestorsData fetch] Fetching... (isBackgroundRefresh: ${h}, isManualTrigger: ${f})`),h?s(!0):r(!0),(!h||o||f)&&a(null);try{const g=await H5({signal:p});if(p.aborted){k.log("[useTopInvestorsData fetch] Fetch aborted before state update.");return}if(g!=null&&g.isSuccess&&g.resultObject){const m=g.resultObject.sort((w,v)=>v.totalAmountCopecks-w.totalAmountCopecks);e(m),a(null)}else{const m=(g==null?void 0:g.errorMessage)||"Failed to load top investors";h||e([]),a(m)}}catch(g){g.name==="AbortError"?k.log("[useTopInvestorsData fetch] Fetch caught AbortError."):p.aborted||(a(g.message||"Error fetching data"),h||e([]))}finally{p.aborted||(r(!1),s(!1),l.current=null)}},[o]);y.useEffect(()=>{c(!1);const h=setInterval(()=>c(!0),W5);return()=>{clearInterval(h),l.current&&(l.current.abort(),l.current=null)}},[c]);const u=y.useCallback(()=>{k.log("[useTopInvestorsData] Manual refresh triggered."),c(!1,!0)},[c]);return{investors:t,isLoading:n,isRefreshing:i,error:o,refreshNow:u}},K5=()=>{const{investors:t,isLoading:e,isRefreshing:n,error:r,refreshNow:i}=q5();return k.log("[TopInvestorsPage Render]",{isLoading:e,isRefreshing:n,error:r,investorCount:t.length}),d.jsx("div",{className:"p-4 space-y-4 pb-4 flex flex-col h-full",children:d.jsxs(bt,{className:"flex flex-col flex-grow overflow-hidden shadow-md rounded-xl border",children:[d.jsxs(pr,{className:"flex-shrink-0 border-b pb-3 pt-4 text-center relative",children:[d.jsx(Vr,{className:"text-lg font-semibold",children:"Топ 10 Инвесторов"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"(По общей стоимости портфеля)"}),n&&!e&&d.jsx("div",{className:"absolute top-2 right-2 animate-pulse",children:d.jsx(Ce,{size:"sm"})})]}),d.jsxs(Gt,{className:"flex-grow overflow-y-auto no-scrollbar p-0",children:[e&&d.jsx("div",{className:"flex justify-center items-center h-48",children:d.jsx(Ce,{})}),r&&!e&&d.jsxs("div",{className:"p-4",children:[d.jsx(mt,{message:r}),d.jsx(ke,{variant:"outline",size:"sm",onClick:i,className:"mt-4 mx-auto block",disabled:e||n,children:"Попробовать снова"})]}),!e&&!r&&d.jsxs(d.Fragment,{children:[" ",t.length>0?d.jsx("ol",{className:"divide-y divide-border/60",children:t.map((s,o)=>{var a;return d.jsx(U5,{investor:s,index:o},((a=s.telegramUser)==null?void 0:a.userId)??o)})}):!r&&d.jsx("p",{className:"text-center text-muted-foreground py-16",children:"Список инвесторов пуст."})]})]})]})})},Y5=`
## Что такое акции и как на них заработать?

Акция — это ценная бумага, которая подтверждает, что вы владеете долей в компании. Покупая акцию, вы становитесь **акционером** и совладельцем бизнеса.

### Зачем компании выпускают акции?

*   **Привлечение капитала:** Компании продают акции, чтобы получить деньги на развитие: запуск новых продуктов, строительство заводов, выход на новые рынки.
*   **Публичность:** Выход на биржу повышает узнаваемость компании.

### Зачем инвесторы покупают акции?

1.  **Рост стоимости:** Цена акции может вырасти со временем, если дела у компании идут хорошо. Инвестор может продать акцию дороже, чем купил, получив **прибыль**.
2.  **Дивиденды:** Некоторые компании делятся частью своей прибыли с акционерами, выплачивая **дивиденды**. Это регулярный доход для инвестора.

### Виды акций

*   **Обыкновенные:** Дают право голоса на собрании акционеров и право на получение дивидендов (если компания их выплачивает).
*   **Привилегированные ("префы"):** Обычно не дают права голоса, но гарантируют получение фиксированных дивидендов (если компания получила прибыль). При банкротстве владельцы "префов" получают выплаты раньше владельцев обыкновенных акций.

### Риски

*   **Рыночный риск:** Цена акции может не только расти, но и падать из-за общих экономических условий или проблем у конкретной компании.
*   **Риск банкротства:** Если компания обанкротится, акционеры могут потерять все вложенные деньги.

**Важно:** Инвестиции в акции связаны с риском. Перед покупкой изучите компанию и оцените свои финансовые возможности.
`,G5=`
## Как найти потерянные акции?

Если вы или ваши родственники когда-то покупали акции (например, в 1990-е годы во время приватизации), но документы утеряны, есть способы попытаться их найти.

### Шаг 1: Соберите информацию

Вспомните или найдите любые данные:
*   Название компании, акции которой покупались.
*   Примерное время покупки.
*   Имя человека, на которого оформлялись акции.
*   Любые старые документы: выписки со счета, сертификаты акций (хотя сейчас они обычно бездокументарные).

### Шаг 2: Обратитесь к регистратору

Акции учитываются в специальных организациях — **регистраторах**.
*   **Узнайте регистратора компании:** Найдите на сайте компании (в разделе "Акционерам" или "Инвесторам") или на сайтах раскрытия информации (например, e-disclosure.ru) название регистратора, который ведет реестр ее акционеров.
*   **Отправьте запрос регистратору:** Свяжитесь с регистратором (по телефону, почте или через сайт) и объясните ситуацию. Укажите всю собранную информацию о предполагаемом владельце акций. Возможно, потребуется предоставить документы, подтверждающие личность или родство (если ищете акции родственника). Регистратор проверит свои записи.

### Шаг 3: Обратитесь к брокеру или депозитарию (если акции покупались через них)

Если акции покупались через брокера или учитывались в депозитарии, можно попробовать обратиться к ним.
*   Вспомните название брокера/депозитария.
*   Свяжитесь с ними и запросите информацию о наличии счета и акций на имя предполагаемого владельца.

### Шаг 4: Проверьте наследство

Если вы ищете акции умершего родственника, они могли войти в **наследственную массу**.
*   Обратитесь к нотариусу, который вел наследственное дело. Он мог делать запросы регистраторам и депозитариям.
*   Если наследственное дело не открывалось или акции не были включены, возможно, придется обращаться в суд для включения акций в наследство.

### Что делать, если акции нашлись?

*   **У регистратора:** Вам нужно будет открыть счет у брокера или в депозитарии, а затем дать поручение регистратору перевести акции на этот счет. Для этого потребуется личный визит к регистратору или нотариально заверенные документы.
*   **У брокера/депозитария:** Если счет еще активен, вы сможете управлять акциями через этого брокера. Если счет закрыт или неактивен, уточните у брокера/депозитария процедуру восстановления доступа или перевода акций.

**Важно:** Процесс поиска может быть долгим и потребовать настойчивости. Некоторые регистраторы и брокеры могут взимать плату за поиск информации или восстановление документов.
`,Z5=`
## Зачем нужны депозитарные расписки?

Депозитарная расписка (ДР) — это ценная бумага, которая **удостоверяет право собственности на акции иностранной компании**. Сами акции при этом хранятся в банке-кастодиане в стране происхождения компании, а банк-депозитарий (обычно крупный международный банк) выпускает на них расписки, которые торгуются на других биржах.

### Виды депозитарных расписок:

*   **АДР (ADR, American Depositary Receipt):** Торгуются на американских биржах (NYSE, NASDAQ).
*   **ГДР (GDR, Global Depositary Receipt):** Торгуются на европейских и азиатских биржах (Лондон, Франкфурт, Сингапур и др.).
*   **РДР (Российские депозитарные расписки):** Позволяли иностранным компаниям размещать свои бумаги на российских биржах (сейчас менее актуальны).

### Зачем они нужны?

*   **Инвесторам:**
    *   **Доступ к иностранным акциям:** Позволяют покупать акции иностранных компаний на своей локальной бирже без необходимости открывать счет у иностранного брокера.
    *   **Удобство:** Торгуются в привычной валюте и по правилам местной биржи.
    *   **Дивиденды:** Владельцы ДР обычно получают дивиденды так же, как и владельцы базовых акций (за вычетом комиссий банка-депозитария и налогов).
*   **Компаниям (эмитентам):**
    *   **Привлечение иностранных инвесторов:** Выпуск ДР позволяет компании расширить круг инвесторов и привлечь капитал на международных рынках.
    *   **Повышение ликвидности:** Торги на нескольких площадках увеличивают ликвидность бумаг.
    *   **Престиж:** Листинг на крупных мировых биржах повышает статус компании.

### Соотношение ДР и акций

Одна депозитарная расписка может соответствовать одной акции, нескольким акциям или даже доле акции. Это соотношение (ratio) устанавливается при выпуске ДР.

### Риски

*   **Рыночный риск:** Цена ДР зависит от цены базовой акции и подвержена тем же колебаниям.
*   **Валютный риск:** Если ДР торгуется в валюте, отличной от валюты базовой акции, ее цена будет зависеть и от обменного курса.
*   **Риск делистинга:** ДР могут быть сняты с торгов на бирже.
*   **Геополитические риски:** Санкции или законодательные изменения могут ограничить торговлю ДР или конвертацию их в акции (как это произошло с российскими компаниями, чьи ДР торговались за рубежом).

**В итоге:** Депозитарные расписки — удобный инструмент для диверсификации портфеля за счет иностранных акций, но важно помнить о связанных с ними рисках.
`,X5=`
## Что такое маржинальная торговля и в чем ее риски?

**Маржинальная торговля** — это совершение сделок на бирже с использованием заемных средств (денег или ценных бумаг), предоставляемых брокером под залог активов на вашем счете. Это позволяет покупать больше активов, чем у вас есть денег, или продавать активы, которых у вас нет (игра на понижение, "шорт").

### Как это работает?

1.  **Маржинальный счет:** Для маржинальной торговли нужен специальный брокерский счет с возможностью использования "кредитного плеча".
2.  **Обеспечение (маржа):** Часть ваших собственных средств и активов на счете выступает залогом (начальная маржа).
3.  **Кредитное плечо:** Брокер предоставляет вам заемные средства, превышающие ваше обеспечение в несколько раз (например, плечо 1:3 означает, что на 1 ваш рубль брокер дает еще 2 рубля в долг).
4.  **Сделки:** Вы совершаете сделки на сумму, превышающую ваши собственные средства.
5.  **Плата за плечо:** За использование заемных средств брокер взимает комиссию (обычно ежедневную).
6.  **Поддерживающая маржа:** Стоимость ваших активов (включая заемные) не должна опускаться ниже определенного уровня (поддерживающая маржа), установленного брокером.

### Виды маржинальных сделок:

*   **Лонг (Long):** Покупка активов на заемные деньги в расчете на рост их цены. Вы занимаете деньги.
*   **Шорт (Short, короткая продажа):** Продажа активов, взятых в долг у брокера, в расчете на падение их цены. Вы занимаете ценные бумаги. Чтобы закрыть позицию, вам нужно будет откупить эти бумаги на рынке (желательно дешевле) и вернуть брокеру.

### Преимущества:

*   **Потенциально высокая прибыль:** Кредитное плечо позволяет увеличить объем сделок и, соответственно, потенциальную прибыль от движения цены.
*   **Возможность заработка на падении:** Сделки "шорт" позволяют зарабатывать на снижении котировок.
*   **Гибкость:** Можно использовать для краткосрочных спекуляций или хеджирования рисков.

### Риски (Очень высокие!):

*   **Потенциально высокие убытки:** Кредитное плечо работает в обе стороны. Если цена идет против вас, убытки также умножаются на размер плеча и могут превысить ваши собственные вложения.
*   **Маржин-колл (Margin Call):** Если стоимость активов на вашем счете падает ниже уровня поддерживающей маржи, брокер потребует внести дополнительные средства или закрыть часть позиций для восстановления уровня маржи.
*   **Принудительное закрытие позиций:** Если вы не выполните требования маржин-колла, брокер имеет право принудительно закрыть ваши убыточные позиции по текущим рыночным ценам, чтобы покрыть долг перед ним. Это может зафиксировать значительные убытки.
*   **Плата за перенос позиций:** Комиссия за использование плеча может "съедать" прибыль, особенно при долгом удержании маржинальных позиций.
*   **Риск "шорт-сквиза" (Short Squeeze):** При игре на понижение резкий рост цены актива может заставить "шортистов" массово закрывать позиции (откупать бумаги), что еще больше толкает цену вверх, приводя к огромным убыткам.

**Вывод:** Маржинальная торговля — инструмент для **опытных** инвесторов и трейдеров, которые полностью понимают и принимают высокие риски. **Новичкам категорически не рекомендуется** использовать кредитное плечо досконально не разобравшись в механизмах и рисках.
`,Q5=`
## Облигации: что это такое и как на них заработать?

**Облигация** — это долговая ценная бумага. Покупая облигацию, вы даете деньги в долг эмитенту (тому, кто выпустил облигацию), а он обязуется вернуть вам эту сумму в определенный срок и выплачивать процентный доход (купоны) в течение срока обращения облигации.

### Кто выпускает облигации (эмитенты)?

*   **Государство:** Министерство финансов (ОФЗ — Облигации Федерального Займа), регионы РФ (субфедеральные), города (муниципальные). Считаются самыми надежными.
*   **Компании (корпорации):** Крупные и средние предприятия для привлечения финансирования. Риск зависит от надежности компании.

### Основные параметры облигации:

*   **Номинал:** Сумма, которую эмитент вернет вам при погашении облигации. Обычно 1000 рублей.
*   **Рыночная цена:** Цена, по которой облигация торгуется на бирже. Может быть выше, ниже или равна номиналу. Выражается в процентах от номинала (например, 98,5% или 102%).
*   **Дата погашения:** Срок, когда эмитент вернет номинал облигации.
*   **Купон:** Процентный доход, который эмитент выплачивает владельцу облигации. Может быть:
    *   **Фиксированным:** Ставка купона известна заранее и не меняется (например, 8% годовых).
    *   **Переменным:** Ставка купона привязана к какому-либо индикатору (например, ставке ЦБ РФ RUONIA + 1%).
    *   **Нулевым (дисконтные облигации):** Купоны не выплачиваются, но облигация продается со скидкой (дисконтом) к номиналу. Доход инвестора — разница между ценой покупки и номиналом при погашении.
*   **Периодичность выплаты купонов:** Как часто выплачивается купон (например, раз в полгода, раз в квартал).
*   **Накопленный купонный доход (НКД):** Часть купона, которая "накопилась" с момента последней выплаты. При покупке облигации между датами выплаты купонов покупатель платит продавцу НКД, а при следующей выплате получает полный купон.

### Как заработать на облигациях?

1.  **Получение купонов:** Регулярные выплаты процентного дохода.
2.  **Погашение по номиналу:** Получение номинальной стоимости в конце срока. Если вы купили облигацию дешевле номинала (с дисконтом), то разница — ваш дополнительный доход.
3.  **Продажа дороже цены покупки:** Если рыночная цена облигации вырастет (например, из-за снижения процентных ставок в экономике), вы можете продать ее до погашения и получить прибыль.

### Доходность облигаций:

*   **Купонная доходность:** Годовой купон / Номинал.
*   **Текущая доходность:** Годовой купон / Текущая рыночная цена.
*   **Доходность к погашению (YTM, Yield to Maturity):** Самый важный показатель. Учитывает все будущие купонные выплаты и разницу между текущей ценой и номиналом до даты погашения. Показывает реальную годовую доходность, которую вы получите, если продержите облигацию до конца срока.

### Риски:

*   **Кредитный риск (риск дефолта):** Эмитент может оказаться не в состоянии выплатить купоны или вернуть номинал. Чем ниже надежность эмитента, тем выше риск и, как правило, выше доходность.
*   **Процентный риск:** Если процентные ставки в экономике растут, цены уже выпущенных облигаций (особенно с фиксированным купоном) падают, так как новые облигации выпускаются с более высокой доходностью.
*   **Инфляционный риск:** Инфляция может "съесть" доходность облигации, если реальная доходность (доходность минус инфляция) окажется низкой или отрицательной.
*   **Риск ликвидности:** Некоторые облигации (особенно небольших компаний) может быть сложно быстро продать по справедливой рыночной цене.

**Вывод:** Облигации считаются более консервативным и предсказуемым инструментом, чем акции. Они подходят для инвесторов, ищущих регулярный доход и меньший риск (особенно государственные облигации). Однако важно оценивать кредитное качество эмитента и понимать процентные риски.
`,J5=`
## Брокер: как его выбрать и как с ним работать?

**Брокер** — это профессиональный участник рынка ценных бумаг, посредник между инвестором и биржей. Без брокера частное лицо не может напрямую покупать или продавать акции, облигации и другие биржевые инструменты.

### Зачем нужен брокер?

*   **Доступ к бирже:** Открывает вам брокерский счет и предоставляет доступ к торговым системам биржи.
*   **Исполнение сделок:** Выполняет ваши поручения (заявки) на покупку или продажу ценных бумаг.
*   **Учет активов:** Ведет учет ваших денег и ценных бумаг на брокерском счете и в депозитарии.
*   **Налоговый агент:** Рассчитывает, удерживает и перечисляет налог на доходы (НДФЛ) с вашей прибыли от сделок и дивидендов (по российским бумагам).
*   **Предоставление информации:** Дает доступ к котировкам, новостям, аналитике (объем и качество зависят от брокера).
*   **Дополнительные услуги:** Может предлагать маржинальное кредитование, структурные продукты, доверительное управление, ИИС и т.д.

### Как выбрать брокера?

1.  **Наличие лицензии:** **Самое главное!** Убедитесь, что у брокера есть лицензия Банка России на осуществление брокерской деятельности. Проверить можно на сайте ЦБ РФ в разделе "Справочник участников финансового рынка". Работа без лицензии незаконна.
2.  **Надежность:** Оцените историю компании, ее репутацию, финансовое состояние (если доступно). Крупные брокеры, связанные с банками, часто воспринимаются как более надежные.
3.  **Тарифы и комиссии:** Внимательно изучите все комиссии:
    *   За сделки (покупку/продажу) — % от суммы или фикс. сумма.
    *   Депозитарная комиссия — за хранение ценных бумаг.
    *   За ведение счета (может быть при отсутствии сделок или низкой сумме активов).
    *   За вывод денег.
    *   За использование торгового терминала (если он платный).
    *   За маржинальное кредитование (если планируете использовать).
    Выберите тариф, подходящий под ваш стиль инвестирования (частота сделок, суммы).
4.  **Доступные инструменты и биржи:** Убедитесь, что брокер дает доступ к тем биржам (Московская, СПБ Биржа) и инструментам (акции РФ, иностранные акции, облигации, фонды, фьючерсы), которые вам интересны.
5.  **Торговые платформы:** Оцените удобство и функциональность:
    *   **Мобильное приложение:** Основной инструмент для многих начинающих инвесторов. Должно быть понятным и стабильным.
    *   **Веб-терминал:** Торговля через браузер.
    *   **Десктопный терминал (QUIK, MetaTrader и др.):** Для активных трейдеров, предлагает больше возможностей для анализа и выставления заявок.
6.  **Минимальная сумма:** Узнайте, есть ли требования к минимальной сумме для открытия счета или для доступа к определенным тарифам/услугам.
7.  **Качество поддержки:** Как быстро и компетентно отвечает поддержка на вопросы? Можно почитать отзывы или задать пару вопросов перед открытием счета.
8.  **Дополнительные сервисы:** Наличие ИИС, аналитика, обучение, персональные рекомендации (если это важно для вас).

### Как работать с брокером?

1.  **Заключение договора:** Обычно происходит онлайн через сайт или приложение брокера с подтверждением через Госуслуги или встречу с представителем.
2.  **Открытие счета:** Брокер открывает вам брокерский счет и счет в депозитарии.
3.  **Пополнение счета:** Перевод денег на брокерский счет (обычно с банковского счета или карты).
4.  **Подача поручений (заявок):** Через торговую платформу вы выставляете заявки на покупку или продажу:
    *   **Рыночная заявка:** Исполняется немедленно по лучшей доступной цене на рынке.
    *   **Лимитная заявка:** Исполняется только по указанной вами цене или лучше.
5.  **Контроль счета:** Следите за состоянием портфеля, открытыми позициями, доступными средствами.
6.  **Вывод средств:** Подача поручения на вывод денег с брокерского счета на банковский.

**Помните:** Брокер — это посредник. Он исполняет ваши приказы, но не несет ответственности за ваши инвестиционные решения и возможные убытки.
`,eV=`
## Что такое доверительное управление и зачем оно начинающему инвестору?

**Доверительное управление (ДУ)** — это услуга, при которой вы передаете свои деньги или ценные бумаги профессиональному управляющему (управляющей компании, УК), а он инвестирует их от вашего имени с целью получения дохода. Вы остаетесь собственником активов, но право принимать инвестиционные решения переходит к управляющему.

### Как это работает?

1.  **Договор ДУ:** Вы заключаете договор с управляющей компанией, где прописываются:
    *   **Инвестиционная стратегия:** Цели, уровень риска, разрешенные инструменты (например, только акции РФ, смешанная стратегия, только облигации).
    *   **Срок договора.**
    *   **Вознаграждение управляющего:** Обычно это процент от среднегодовой стоимости активов под управлением (management fee) и/или процент от полученной прибыли сверх определенного уровня (success fee).
    *   **Порядок отчетности:** Как часто УК будет отчитываться перед вами о результатах.
2.  **Передача активов:** Вы переводите деньги на специальный счет, открытый на ваше имя в рамках ДУ.
3.  **Управление:** Управляющий формирует портфель в соответствии с выбранной стратегией и активно им управляет (покупает/продает активы).
4.  **Отчетность:** УК регулярно предоставляет вам отчеты о составе портфеля и результатах управления.
5.  **Получение дохода / возврат активов:** По окончании срока договора или при досрочном расторжении (если это предусмотрено) вы получаете назад свои активы (деньги и/или ценные бумаги) и полученный инвестиционный доход (за вычетом вознаграждения УК и налогов).

### Плюсы ДУ для начинающего инвестора:

*   **Профессиональное управление:** Вашими деньгами управляют опытные специалисты с доступом к аналитике и ресурсам, которых может не быть у новичка.
*   **Экономия времени:** Вам не нужно самостоятельно анализировать рынок, выбирать бумаги и совершать сделки.
*   **Доступ к сложным стратегиям:** УК могут предлагать стратегии, которые сложно реализовать самостоятельно.
*   **Диверсификация:** Готовые стратегии часто предполагают вложения в разные классы активов.

### Минусы и риски ДУ:

*   **Нет гарантии доходности:** Управляющий не гарантирует прибыль. Результаты зависят от рыночной ситуации и мастерства управляющего. Возможны убытки.
*   **Высокий порог входа:** Часто для открытия договора ДУ требуется значительная сумма (сотни тысяч или миллионы рублей), хотя появляются и более доступные варианты.
*   **Комиссии:** Вознаграждение управляющего может существенно снизить вашу итоговую доходность, особенно если она невелика.
*   **Отсутствие контроля:** Вы не можете влиять на конкретные сделки управляющего в рамках выбранной стратегии.
*   **Риск выбора УК:** Важно выбрать надежную управляющую компанию с хорошей репутацией и прозрачными условиями.
*   **Налоги:** Доход от ДУ облагается НДФЛ. Обычно УК выступает налоговым агентом.

### ДУ vs Самостоятельное инвестирование vs ПИФы:

*   **ДУ vs Сам:** ДУ подходит тем, кто не хочет или не может тратить время на инвестиции, готов платить за управление и доверяет профессионалам. Самостоятельное инвестирование требует знаний, времени, но дает полный контроль и экономию на комиссиях за управление.
*   **ДУ vs ПИФы:** ПИФы (Паевые Инвестиционные Фонды) — это коллективные инвестиции, где много инвесторов вкладывают деньги в общий портфель под управлением УК. ПИФы обычно имеют более низкий порог входа, чем ДУ, и стандартизированные стратегии. ДУ часто предлагает более индивидуальный подход (хотя есть и стандартные стратегии ДУ).

**Вывод:** Доверительное управление может быть вариантом для начинающих инвесторов с **крупным капиталом**, которые хотят передать управление профессионалам и готовы платить за это комиссии, осознавая при этом все риски и отсутствие гарантий. Для инвесторов с небольшими суммами или желающих больше контроля, более подходящими могут быть самостоятельные инвестиции или ПИФы/БПИФы.
`,tV=`
## Зачем нужен инвестиционный советник и как его выбрать?

**Инвестиционный советник** — это профессионал или компания, которые дают **индивидуальные инвестиционные рекомендации (ИИР)** клиентам на основе их финансовых целей, опыта, отношения к риску и других параметров.

### Отличие от брокера и управляющего:

*   **Брокер:** Исполняет ваши сделки, предоставляет доступ к бирже. Не дает индивидуальных рекомендаций (может предоставлять общую аналитику).
*   **Управляющий (ДУ):** Самостоятельно управляет вашими активами в рамках согласованной стратегии. Вы не принимаете решения по конкретным сделкам.
*   **Инвестсоветник:** **Рекомендует**, что купить или продать, но **решение принимаете вы сами**. Он помогает сформировать стратегию и подобрать инструменты, но не управляет вашими деньгами напрямую.

### Зачем нужен инвестсоветник?

*   **Персональный план:** Помогает определить финансовые цели (накопить на пенсию, купить квартиру, образование детей) и разработать долгосрочную инвестиционную стратегию для их достижения.
*   **Оценка риск-профиля:** Определяет вашу готовность к риску и подбирает соответствующие инструменты.
*   **Подбор активов:** Дает конкретные рекомендации по покупке/продаже акций, облигаций, фондов и других инструментов, подходящих под вашу стратегию и риск-профиль.
*   **Формирование и ребалансировка портфеля:** Помогает собрать диверсифицированный портфель и корректировать его со временем.
*   **Обучение и информация:** Объясняет принципы инвестирования, риски, особенности инструментов.
*   **Психологическая поддержка:** Помогает избежать эмоциональных решений во время рыночных колебаний.

### Кому может быть полезен инвестсоветник?

*   **Начинающим инвесторам:** Которые не знают, с чего начать, боятся ошибок и хотят получить персональный план.
*   **Занятым людям:** У которых нет времени самостоятельно изучать рынок и управлять портфелем.
*   **Инвесторам с крупным капиталом:** Которые ищут индивидуальные решения и комплексное управление финансами.
*   **Тем, кто хочет получить "второе мнение"** по своей стратегии.

### Как выбрать инвестсоветника?

1.  **Реестр Банка России:** **Обязательно!** Проверьте, состоит ли советник (человек или компания) в **Едином реестре инвестиционных советников** на сайте ЦБ РФ. Только члены реестра имеют право давать ИИР.
2.  **Опыт и квалификация:** Изучите опыт работы советника, наличие квалификационных аттестатов (ФСФР/ЦБ), образование.
3.  **Специализация:** Некоторые советники специализируются на определенных рынках или инструментах. Убедитесь, что их экспертиза соответствует вашим потребностям.
4.  **Модель оплаты:** Как советник получает вознаграждение?
    *   **Фиксированная плата:** За консультацию, разработку плана или годовое сопровождение.
    *   **Процент от активов:** Годовой процент от суммы активов, по которым даются рекомендации.
    *   **Процент от дохода:** Вознаграждение зависит от прибыли клиента (менее распространено и может создавать конфликт интересов).
    *   **Комиссии от продуктов:** Советник может получать комиссии от продажи определенных инвестпродуктов (самый высокий риск конфликта интересов!). **Избегайте таких советников.**
    Предпочтительны модели с фиксированной платой или % от активов, так как они минимизируют конфликт интересов.
5.  **Прозрачность и договор:** Внимательно изучите договор. В нем должны быть четко прописаны услуги, ответственность сторон, порядок предоставления рекомендаций, стоимость услуг, порядок расторжения.
6.  **Отзывы и репутация:** Поищите отзывы других клиентов, но относитесь к ним критически.
7.  **Личное общение:** Проведите встречу (или онлайн-звонок), чтобы понять, комфортно ли вам общаться с этим человеком/представителем компании, совпадают ли ваши взгляды на инвестиции.

**Важно:** Инвестиционный советник дает рекомендации, но **ответственность за принятие решения и его последствия лежит на вас**. Советник не гарантирует доходность и не несет ответственности за рыночные убытки, если его рекомендации соответствовали вашему профилю и договору.
`,nV=`
## Паевые фонды (ПИФы): как они работают и как на них заработать?

**Паевой инвестиционный фонд (ПИФ)** — это форма коллективных инвестиций. Множество инвесторов (пайщиков) объединяют свои деньги в один большой портфель, которым управляет профессиональная **управляющая компания (УК)** в соответствии с заранее определенной стратегией.

### Как это работает?

1.  **Формирование фонда:** УК создает фонд с определенной инвестиционной стратегией (например, ПИФ акций российских компаний, ПИФ облигаций, смешанный ПИФ).
2.  **Покупка паев:** Инвесторы покупают **паи** — доли в этом фонде. Цена пая зависит от общей стоимости активов фонда (Стоимость Чистых Активов, СЧА), деленной на количество паев в обращении.
3.  **Управление активами:** УК на деньги пайщиков покупает ценные бумаги и другие активы согласно стратегии фонда. Цель УК — увеличить стоимость активов фонда.
4.  **Рост/падение стоимости пая:** Если активы в фонде дорожают, растет СЧА и, соответственно, цена пая. Если активы дешевеют — пай тоже дешевеет.
5.  **Продажа (погашение) паев:** Инвестор может продать свои паи обратно управляющей компании (если это открытый ПИФ) или другому инвестору на бирже (если это биржевой ПИФ).

### Виды ПИФов по доступности паев:

*   **Открытые (ОПИФ):** Паи можно купить и продать (погасить) в любой рабочий день напрямую у управляющей компании или ее агентов. Самый распространенный тип.
*   **Интервальные (ИПИФ):** Купить и продать паи можно только в определенные периоды (интервалы), установленные правилами фонда (например, раз в квартал или полгода).
*   **Закрытые (ЗПИФ):** Паи покупаются при формировании фонда, а погасить их можно только при его закрытии (часто через несколько лет). Иногда паи ЗПИФов могут торговаться на бирже или внебиржевом рынке. Обычно инвестируют в менее ликвидные активы (недвижимость, венчурные проекты).

### Виды ПИФов по составу активов:

*   **Фонды акций:** Инвестируют в акции компаний.
*   **Фонды облигаций:** Инвестируют в государственные или корпоративные облигации.
*   **Смешанные фонды:** Инвестируют и в акции, и в облигации в разных пропорциях.
*   **Фонды денежного рынка:** Вкладывают в краткосрочные долговые инструменты и депозиты.
*   **Индексные фонды:** Стараются повторить структуру и доходность определенного биржевого индекса (например, индекса МосБиржи).
*   **Фонды недвижимости (ЗПИФы):** Инвестируют в объекты недвижимости.
*   **И другие** (товарные, венчурные и т.д.)

### Как заработать на ПИФах?

Основной способ — **рост стоимости пая**. Вы покупаете пай дешевле, а продаете дороже. Дивиденды и купоны, полученные фондом от активов внутри, обычно **реинвестируются**, то есть направляются на покупку новых активов, что увеличивает стоимость пая. Некоторые фонды могут предусматривать выплату промежуточного дохода пайщикам, но это встречается реже.

### Плюсы ПИФов:

*   **Профессиональное управление:** Не нужно самому выбирать бумаги.
*   **Диверсификация:** Даже небольшая сумма инвестируется сразу в корзину активов, что снижает риск.
*   **Доступность:** Начать инвестировать можно с небольших сумм (часто от 1000 рублей).
*   **Регулирование:** Деятельность УК и ПИФов контролируется Банком России.

### Минусы и риски ПИФов:

*   **Нет гарантии доходности:** Стоимость пая может не только расти, но и падать. Возможны убытки.
*   **Комиссии:** УК берет плату за управление (процент от СЧА), также могут быть надбавки при покупке и скидки при продаже паев. Комиссии снижают итоговую доходность.
*   **Зависимость от УК:** Результат зависит от профессионализма управляющей компании.
*   **Ограничения интервальных и закрытых ПИФов:** Сложно быстро продать паи.

**Вывод:** ПИФы — хороший инструмент для начинающих инвесторов, позволяющий диверсифицировать вложения и доверить управление профессионалам при относительно низком пороге входа. Важно выбрать фонд с подходящей стратегией, низкими комиссиями и надежной УК.
`,rV=`
## Биржевые фонды (БПИФы, ETF): что это и стоит ли вкладывать?

**Биржевой паевой инвестиционный фонд (БПИФ)** и **Exchange Traded Fund (ETF)** — это инвестиционные фонды, паи (или акции) которых торгуются на бирже так же свободно, как и обычные акции.

### Сходства и различия:

*   **Общее:** И БПИФы, и ETF представляют собой готовый портфель активов (акций, облигаций, золота и т.д.), собранный по определенному принципу (часто по индексу). Покупая один пай/акцию фонда, вы инвестируете сразу во все активы внутри него.
*   **БПИФ:** Создается по **российскому** законодательству. Управляется российской управляющей компанией (УК). Активы могут быть как российскими, так и иностранными (но с учетом текущих ограничений). Торгуются на Московской бирже за рубли.
*   **ETF:** Создается по **иностранному** законодательству (например, Ирландия, Люксембург). Управляется иностранным провайдером (FinEx, BlackRock, Vanguard и др.). Активы обычно иностранные. Ранее торговались на МосБирже и СПБ Бирже, но из-за санкций и ограничений ЦБ РФ **торги большинством иностранных ETF для неквалифицированных инвесторов в России сейчас недоступны или приостановлены**.

**По сути, для российского инвестора сегодня БПИФ — это основной доступный аналог ETF.**

### Как работают БПИФы?

1.  **Следование индексу (чаще всего):** Большинство БПИФов являются **индексными**. Они стремятся максимально точно повторить состав и структуру выбранного биржевого индекса (например, Индекс МосБиржи IMOEX, Индекс гособлигаций RGBI, индекс акций IT-сектора и т.д.).
2.  **Формирование портфеля:** УК покупает активы в тех же пропорциях, что и в индексе.
3.  **Торги на бирже:** Паи фонда выпускаются и торгуются на бирже в течение всего торгового дня. Цена пая колеблется в зависимости от спроса/предложения и стоимости базовых активов.
4.  **Маркет-мейкеры:** Специальные участники торгов (авторизованные УК) следят за тем, чтобы цена пая на бирже не сильно отклонялась от реальной стоимости активов внутри фонда (СЧА на пай). Они выставляют заявки на покупку/продажу паев около справедливой цены.
5.  **Реинвестирование доходов:** Дивиденды и купоны, полученные фондом, обычно реинвестируются, увеличивая стоимость пая.

### Плюсы БПИФов (и ETF):

*   **Мгновенная диверсификация:** Покупка одного пая дает долю во множестве активов.
*   **Низкий порог входа:** Цена одного пая обычно невелика, можно начать с малых сумм.
*   **Прозрачность:** Состав индексных фондов обычно известен и соответствует индексу. СЧА публикуется регулярно.
*   **Ликвидность:** Паи можно купить/продать на бирже в любой момент в течение торговой сессии (в отличие от ОПИФов, где расчеты занимают несколько дней).
*   **Низкие издержки (часто):** Комиссии за управление у индексных БПИФов обычно ниже, чем у активно управляемых ОПИФов.

### Минусы и риски БПИФов (и ETF):

*   **Рыночный риск:** Стоимость пая зависит от динамики базовых активов. Если рынок падает, пай тоже дешевеет.
*   **Ошибка слежения (Tracking Error):** Цена пая может незначительно отклоняться от динамики индекса из-за комиссий, налогов, особенностей репликации индекса.
*   **Комиссии фонда:** УК берет комиссию за управление, также есть другие расходы фонда (депозитарные, аудиторские), которые включены в стоимость пая.
*   **Биржевые комиссии:** При покупке/продаже пая на бирже вы платите стандартную брокерскую комиссию.
*   **Риск контрагента (для ETF):** Хотя и маловероятный, но существует риск банкротства иностранного провайдера или кастодиана.
*   **Санкционные риски (особенно для ETF и БПИФов на иностранные активы):** Возможность блокировки активов, приостановки торгов, проблемы с получением выплат.

### Стоит ли вкладывать?

БПИФы (особенно индексные) — **отличный инструмент для начинающих и долгосрочных инвесторов** благодаря простоте, диверсификации и низкому порогу входа. Они позволяют легко инвестировать в широкий рынок акций или облигаций.

**При выборе БПИФа обращайте внимание на:**

*   **Базовый актив/индекс:** Во что инвестирует фонд? Соответствует ли это вашей стратегии?
*   **Комиссии:** Суммарная комиссия фонда (TER/СГР). Чем ниже, тем лучше.
*   **Ошибка слежения:** Насколько точно фонд следует за индексом (если применимо).
*   **Ликвидность:** Объемы торгов паями на бирже.
*   **Управляющая компания:** Ее надежность и опыт.

С иностранными ETF в текущих условиях нужно быть **очень осторожным** из-за высоких рисков блокировок и ограничений для российских инвесторов.
`,iV=`
## Закрытые паевые фонды (ЗПИФы): в чем их особенности и подходят ли они начинающим инвесторам?

**Закрытый паевой инвестиционный фонд (ЗПИФ)** — это вид ПИФа, паи которого можно купить только во время его формирования (первичного размещения), а погасить (продать обратно управляющей компании) — только при завершении работы фонда, дата которого определена заранее (например, через 5, 10 или 15 лет).

### Ключевые особенности ЗПИФов:

1.  **Ограниченный вход и выход:** В отличие от открытых ПИФов (ОПИФов), где паи можно купить/продать в любой рабочий день, в ЗПИФе инвестор "замораживает" свои деньги на весь срок существования фонда.
2.  **Инвестиции в неликвидные активы:** Закрытая структура позволяет управляющей компании инвестировать в активы, которые сложно быстро купить или продать по справедливой цене. Чаще всего это:
    *   **Недвижимость:** Строящиеся или готовые объекты (жилая, коммерческая, складская).
    *   **Прямые инвестиции (Private Equity):** Доли в непубличных компаниях.
    *   **Венчурные инвестиции:** Вложения в стартапы на ранних стадиях.
    *   **Предметы искусства, антиквариат.**
    *   Иногда — биржевые инструменты, но с долгосрочной стратегией.
3.  **Высокий порог входа:** Как правило, минимальная сумма для покупки пая ЗПИФа значительно выше, чем у ОПИФов или БПИФов (может составлять сотни тысяч или миллионы рублей).
4.  **Доступность для "квалов":** Большинство ЗПИФов предназначены **только для квалифицированных инвесторов**. Неквалифицированным инвесторам доступны лишь некоторые ЗПИФы (обычно на недвижимость), паи которых торгуются на бирже.
5.  **Вторичный рынок:** Иногда паи ЗПИФов могут обращаться на бирже или внебиржевом рынке. Это дает возможность выйти из фонда до его закрытия, продав пай другому инвестору. Однако ликвидность таких торгов часто низкая, и цена пая на вторичном рынке может сильно отличаться от его расчетной стоимости (СЧА).
6.  **Выплата дохода:** Некоторые ЗПИФы (особенно рентные фонды недвижимости) могут предусматривать периодическую выплату дохода пайщикам (например, от сдачи недвижимости в аренду). В других случаях весь доход реинвестируется и выплачивается только при закрытии фонда.

### Плюсы ЗПИФов:

*   **Доступ к уникальным активам:** Позволяют инвестировать в недвижимость, частные компании и другие активы, недоступные напрямую широкому кругу инвесторов.
*   **Потенциально высокая доходность:** Инвестиции в непубличные активы могут принести более высокую прибыль, чем традиционные биржевые инструменты (но и риски выше).
*   **Защита от эмоциональных решений:** Невозможность быстро продать пай удерживает инвестора от панических продаж во время рыночных спадов.

### Минусы и риски ЗПИФов:

*   **Низкая ликвидность:** Основной минус. Сложно или невозможно быстро вернуть вложенные деньги до закрытия фонда.
*   **Высокий порог входа.**
*   **Ограниченный доступ для "неквалов".**
*   **Высокие риски базовых активов:** Инвестиции в недвижимость, стартапы, непубличные компании inherently более рискованны.
*   **Сложность оценки:** Трудно оценить справедливую стоимость пая, особенно если он не торгуется на бирже.
*   **Комиссии УК:** Могут быть выше, чем у ОПИФов/БПИФов.
*   **Риск управляющей компании:** Результат сильно зависит от профессионализма УК.

### Подходят ли ЗПИФы начинающим инвесторам?

**Как правило, нет.** Из-за высокого порога входа, низкой ликвидности, сложности активов и частого требования статуса квалифицированного инвестора, ЗПИФы — это инструмент для **опытных и состоятельных инвесторов**, которые готовы "заморозить" значительную часть капитала на долгий срок и принять высокие риски ради потенциально высокой доходности от альтернативных инвестиций.

Начинающим инвесторам лучше сосредоточиться на более простых, ликвидных и доступных инструментах, таких как ОФЗ, корпоративные облигации, ОПИФы и БПИФы на акции и облигации.
`,sV=`
## Как устроена фондовая биржа?

**Фондовая биржа** — это организованный рынок, где встречаются продавцы и покупатели ценных бумаг (акций, облигаций, паев фондов и др.) и заключают сделки по установленным правилам.

### Основные функции биржи:

1.  **Организация торгов:** Предоставляет инфраструктуру (торговую систему) и устанавливает правила для проведения сделок.
2.  **Сведение заявок:** Автоматически находит встречные заявки на покупку и продажу по совпадающим ценам и заключает сделки.
3.  **Определение рыночной цены:** В результате множества сделок формируется справедливая рыночная цена на активы.
4.  **Гарантия исполнения сделок:** Через центрального контрагента (см. ниже) биржа гарантирует, что покупатель получит бумаги, а продавец — деньги.
5.  **Листинг:** Допускает ценные бумаги компаний к торгам после проверки их соответствия определенным требованиям (финансовое состояние, прозрачность и т.д.).
6.  **Раскрытие информации:** Обеспечивает доступ участников торгов к информации о котировках, объемах торгов и новостях эмитентов.
7.  **Клиринг и расчеты:** Учитывает взаимные обязательства участников по итогам сделок и организует их исполнение.

### Участники биржевых торгов:

*   **Эмитенты:** Компании или государство, выпускающие ценные бумаги для привлечения капитала.
*   **Инвесторы:** Частные лица и организации (фонды, банки, страховые компании), которые покупают и продают ценные бумаги с целью получения дохода. **Частные инвесторы торгуют не напрямую, а через посредников.**
*   **Брокеры:** Профессиональные посредники, которые исполняют заявки инвесторов на бирже. Имеют лицензию ЦБ.
*   **Депозитарии:** Организации, которые хранят ценные бумаги (в электронном виде) и учитывают права собственности на них.
*   **Регистраторы:** Ведут реестр владельцев ценных бумаг конкретного эмитента.
*   **Управляющие компании:** Управляют активами паевых фондов (ПИФов) или активами клиентов в рамках доверительного управления.
*   **Маркет-мейкеры:** Участники торгов, которые обязуются поддерживать ликвидность по определенным бумагам, постоянно выставляя заявки на покупку и продажу.
*   **Биржа:** Организатор торгов.
*   **Центральный контрагент (ЦК):** Специальная организация (в России — НКЦ, Национальный Клиринговый Центр), которая выступает посредником во всех сделках. Покупатель покупает у ЦК, а продавец продает ЦК. Это снижает риск неисполнения сделки, если одна из сторон окажется недобросовестной.
*   **Клиринговая организация:** Проводит взаимозачет требований и обязательств участников по итогам торгового дня.
*   **Регулятор:** Центральный банк (в России — Банк России), который контролирует и регулирует деятельность всех участников рынка.

### Как происходит сделка?

1.  Инвестор через торговую платформу брокера выставляет **заявку** (приказ) на покупку или продажу определенного количества бумаг по определенной цене (лимитная заявка) или по текущей рыночной цене (рыночная заявка).
2.  Заявка попадает в **"стакан"** — биржевой список всех активных заявок на покупку (бид, bid) и продажу (аск, ask) по данному активу, отсортированных по цене.
3.  **Торговая система биржи** ищет встречные заявки:
    *   Если вы выставили заявку на покупку, система ищет самую дешевую заявку на продажу.
    *   Если вы выставили заявку на продажу, система ищет самую дорогую заявку на покупку.
4.  Если находится встречная заявка с подходящей ценой, **сделка заключается** автоматически.
5.  Информация о сделке передается в **клиринговый центр** и **центральному контрагенту**.
6.  Происходит **клиринг** (взаимозачет) и **расчеты** (обычно на второй рабочий день после сделки, режим Т+2): деньги списываются со счета покупателя и зачисляются продавцу, а ценные бумаги переводятся из депозитария продавца в депозитарий покупателя.

Биржа — это сложный механизм, обеспечивающий прозрачность, надежность и ликвидность для торговли ценными бумагами.
`,oV=`
## Какие налоги платит инвестор?

Инвестируя на бирже, вы можете получать два основных вида дохода, которые облагаются налогом на доходы физических лиц (НДФЛ) в России:

1.  **Доход от продажи ценных бумаг:** Разница между ценой продажи и ценой покупки (а также сопутствующими расходами, например, комиссиями брокера).
2.  **Дивиденды и купоны:** Выплаты от компаний (дивиденды по акциям) или эмитентов облигаций (купоны).

### Ставка НДФЛ

*   **Основная ставка:** **13%** для налоговых резидентов РФ, если совокупный доход за год не превышает 5 млн рублей.
*   **Повышенная ставка:** **15%** с суммы дохода, превышающей 5 млн рублей за год.
*   **Нерезиденты РФ:** Платят **30%** с доходов от продажи бумаг и **15%** с дивидендов (если иное не предусмотрено соглашением об избежании двойного налогообложения).

### Кто платит налог?

*   **Брокер как налоговый агент:** По операциям с **российскими ценными бумагами** на счетах, открытых у **российского брокера**, брокер сам рассчитывает, удерживает и перечисляет НДФЛ в бюджет. Он делает это:
    *   При выводе денег с брокерского счета.
    *   По окончании налогового периода (календарного года).
    *   При расторжении договора с брокером.
    Брокер также удерживает налог с **дивидендов по российским акциям** в момент их зачисления на счет.
    С **купонов по большинству российских облигаций** (ОФЗ, муниципальные, корпоративные, выпущенные с 2017 года) налог удерживать не нужно (они освобождены). Исключение — купоны по облигациям, выпущенным до 2017 года, или если ставка купона превышает определенный порог (ставка ЦБ + 5%).
*   **Инвестор самостоятельно:** Вам нужно будет самостоятельно подать декларацию 3-НДФЛ и уплатить налог в следующих случаях:
    *   **Доход от продажи иностранных ценных бумаг** (даже если они куплены через российского брокера).
    *   **Дивиденды по иностранным акциям.** Брокер удержит налог по ставке страны эмитента (например, 10% в США при подписанной форме W-8BEN), а вам нужно будет доплатить разницу до 13% (или 15%) в России, подав декларацию. Если налог у источника был 15% или выше, доплачивать не нужно, но отчитаться о доходе все равно надо.
    *   **Доход получен через иностранного брокера.**
    *   В некоторых других специфических случаях.

### Налоговые вычеты и льготы для инвесторов:

*   **Индивидуальный инвестиционный счет (ИИС):** Позволяет получать налоговые вычеты:
    *   **Тип А:** Вычет на взносы (до 52 000 руб. в год). Подходит тем, у кого есть официальный доход, облагаемый НДФЛ 13%.
    *   **Тип Б:** Освобождение от налога на прибыль от сделок по истечении срока ИИС (минимум 3 года).
    *   **ИИС-3 (новый тип с 2024 г.):** Совмещает вычеты на взносы и освобождение от налога на прибыль при длительном сроке (от 5 до 10 лет, в зависимости от года открытия).
*   **Льгота на долгосрочное владение (ЛДВ):** Если вы владели ценными бумагами (допущенными к торгам на российских биржах) **более 3 лет**, то при их продаже вы освобождаетесь от НДФЛ с прибыли. Максимальная сумма необлагаемого дохода — 3 млн рублей за каждый год владения.
*   **Перенос убытков:** Убытки, полученные от операций с ценными бумагами в прошлые годы, можно перенести на будущие периоды (до 10 лет) и уменьшить на их сумму налогооблагаемую прибыль.

**Важно:** Налоговое законодательство может меняться. Всегда уточняйте актуальную информацию и при необходимости консультируйтесь с налоговыми специалистами или вашим брокером.
`,aV=`
## Во что инвестировать новичку на бирже? Что дает статус «квала» и в каких случаях придется проходить тестирование?

Начиная инвестировать, важно выбирать инструменты, соответствующие вашему уровню знаний, опыту и готовности к риску.

### Инструменты для начинающих (обычно доступны без ограничений):

1.  **Облигации Федерального Займа (ОФЗ):** Долговые бумаги Министерства финансов РФ. Считаются самым надежным инструментом на российском рынке. Риск минимален, доходность обычно немного выше банковских вкладов. Подходят для консервативных инвесторов.
2.  **Надежные корпоративные облигации:** Облигации крупных, стабильных российских компаний с высоким кредитным рейтингом. Риск чуть выше ОФЗ, доходность тоже.
3.  **Паи Биржевых Паевых Инвестиционных Фондов (БПИФ) и ETF (на российские активы):** Покупая пай фонда, вы сразу инвестируете в готовую корзину активов (например, акции крупнейших российских компаний — индекс МосБиржи, или облигации). Это обеспечивает **диверсификацию** (снижение риска за счет распределения вложений) и не требует самостоятельного выбора отдельных бумаг. Обращайте внимание на комиссию фонда.
4.  **Акции "голубых фишек":** Акции самых крупных, известных и ликвидных российских компаний (например, Сбербанк, Газпром, Лукойл). Они менее волатильны, чем акции небольших компаний, но все равно несут рыночный риск.

### Инструменты, требующие тестирования или статуса "квала":

С 1 октября 2021 года Банк России ввел **обязательное тестирование** для неквалифицированных инвесторов перед допуском к некоторым сложным или рискованным инструментам. Цель — убедиться, что инвестор понимает особенности и риски продукта.

**Тестирование обычно требуется для:**

*   **Маржинальная торговля:** Сделки с кредитным плечом (необеспеченные сделки).
*   **Производные финансовые инструменты (ПФИ):** Фьючерсы, опционы.
*   **Структурные облигации.**
*   **Облигации со структурным доходом.**
*   **Акции иностранных компаний, не входящих в ведущие мировые индексы.**
*   **Иностранные ETF.**
*   **Паи Закрытых ПИФов (ЗПИФ).**
*   **Облигации российских компаний с низким кредитным рейтингом (или без него).**
*   **Договоры РЕПО.**

Тестирование проводится **бесплатно** у вашего брокера (обычно онлайн). Количество попыток не ограничено. Вопросы проверяют понимание основных характеристик и рисков инструмента.

### Статус квалифицированного инвестора ("квал")

**Квалифицированный инвестор** — это инвестор, обладающий достаточными знаниями, опытом или финансовыми ресурсами, которому доступны **все** инструменты на рынке без необходимости проходить тестирование.

**Как получить статус "квала" (нужно соответствовать ОДНОМУ из условий):**

1.  **Активы:** Владеть ценными бумагами и/или деньгами на счетах у брокеров/банков на сумму **не менее 6 млн рублей**.
2.  **Опыт работы:** Иметь опыт работы в организации, совершавшей сделки с ценными бумагами (не менее 2 лет, если она сама "квал", или 3 года в ином случае).
3.  **Образование:** Иметь высшее экономическое образование в ВУЗе, который мог аттестовывать в сфере проф. деятельности на рынке ценных бумаг, ИЛИ квалификационный аттестат специалиста финансового рынка (ФСФР/ЦБ), CFA, CIIA, FRM.
4.  **Оборот сделок:** Совершить за последние 4 квартала сделки с ценными бумагами на сумму **не менее 6 млн рублей**, при этом не менее 10 сделок в квартал и не реже 1 сделки в месяц.

Статус присваивается брокером по вашему заявлению и предоставленным подтверждающим документам.

**Нужен ли статус "квала" новичку?**

**Нет.** Большинству начинающих инвесторов доступны все необходимые инструменты (ОФЗ, надежные облигации, БПИФы на индекс МосБиржи, акции "голубых фишек") **без** статуса "квала" и без тестирования (кроме акций). Статус "квала" нужен для доступа к более сложным, рискованным или иностранным инструментам.

**Рекомендация новичку:** Начните с простых и понятных инструментов (ОФЗ, БПИФы на индекс). Постепенно изучайте рынок. Если захотите использовать более сложные инструменты, пройдите тестирование у брокера. Не гонитесь за статусом "квала", если не понимаете, зачем он вам нужен.
`,lV=`
## Что такое ИИС-3?

**ИИС-3 (Индивидуальный инвестиционный счет третьего типа)** — это новый тип ИИС, введенный в России с 1 января 2024 года. Он пришел на смену старым типам ИИС (Тип А и Тип Б), открытие которых стало невозможным с 2024 года (но ранее открытые продолжают действовать на прежних условиях).

### Ключевые особенности ИИС-3:

1.  **Объединение вычетов:** ИИС-3 сочетает в себе преимущества старых типов:
    *   **Налоговый вычет на взносы:** Как у ИИС типа А. Можно вернуть 13% (или 15%) от суммы, внесенной на ИИС за год, но не более чем с 400 000 рублей (т.е. максимальный возврат — 52 000 или 60 000 рублей в год). Вычет можно получать ежегодно. Условие: наличие официального дохода, облагаемого НДФЛ по ставке 13%/15%.
    *   **Освобождение от НДФЛ на доход:** Как у ИИС типа Б. Весь финансовый результат (прибыль от продажи ценных бумаг, купоны) освобождается от налога при закрытии счета по истечении минимального срока.
2.  **Минимальный срок владения:** Это главное отличие. Чтобы получить налоговые льготы, ИИС-3 нужно держать **минимум 10 лет**. Однако предусмотрен **переходный период:**
    *   Для счетов, открытых в 2024-2026 гг. — минимальный срок **5 лет**.
    *   Далее срок будет постепенно увеличиваться на 1 год ежегодно, пока не достигнет 10 лет в 2031 году.
3.  **Количество счетов:** Можно иметь **до трех** счетов ИИС-3 одновременно у разных брокеров/УК. Старые ИИС (А или Б) также учитываются, т.е. если у вас уже есть старый ИИС, вы можете открыть еще два ИИС-3. **Важно:** Налоговый вычет на взносы (52/60 тыс. руб.) предоставляется **суммарно по всем ИИС**, а не на каждый счет отдельно.
4.  **Сумма взносов:** Вносить на ИИС-3 можно **любую сумму** (в отличие от старых ИИС, где был лимит 1 млн руб. в год). Однако вычет на взносы по-прежнему ограничен суммой 400 000 руб. в год.
5.  **Вывод средств:** Вывести деньги с ИИС-3 без потери льгот и закрытия счета можно только в **особых жизненных ситуациях** (например, для оплаты дорогостоящего лечения), перечень которых должно определить Правительство РФ. В остальных случаях досрочный вывод средств ведет к потере права на все налоговые льготы (придется вернуть полученные вычеты и уплатить налог с дохода).
6.  **Трансформация старых ИИС:** Владельцы старых ИИС (А или Б), открытых до 31 декабря 2023 года, могут:
    *   Продолжать пользоваться ими на прежних условиях до истечения 3-летнего срока (или дольше).
    *   Трансформировать свой старый ИИС в ИИС-3. При этом срок владения старым ИИС (но не более 3 лет) зачтется в минимальный срок владения ИИС-3.

### Плюсы ИИС-3:

*   Сочетание двух типов налоговых льгот.
*   Возможность иметь до трех счетов.
*   Отсутствие лимита на годовые взносы (хотя вычет ограничен).

### Минусы ИИС-3:

*   **Длительный минимальный срок владения (5-10 лет):** Основной недостаток. Деньги "замораживаются" на долгий срок для получения льгот.
*   Ограничения на вывод средств без потери льгот.

**Вывод:** ИИС-3 — это инструмент для **долгосрочных** инвесторов, которые готовы вкладывать деньги на 5-10 лет и более, и хотят получить максимальные налоговые льготы. Если вам может потребоваться доступ к деньгам раньше, возможно, стоит рассмотреть обычный брокерский счет (с ЛДВ) или пока не трансформировать старый ИИС (если он есть).
`,cV=`
## Как продать заблокированные активы?

С 2022 года многие российские инвесторы столкнулись с блокировкой части своих **иностранных ценных бумаг** (акций, ETF, депозитарных расписок), купленных через российских брокеров. Это произошло из-за санкций, нарушивших связь между российскими и иностранными депозитариями (НРД, Euroclear, Clearstream).

**Что значит "заблокированные"?** Эти бумаги по-прежнему принадлежат вам, но вы не можете ими торговать (продать на бирже) или получать по ним выплаты (дивиденды, купоны), так как инфраструктура для этого нарушена.

### Способы продажи (или обмена) заблокированных активов:

1.  **Указ Президента № 844 (Обмен активами):**
    *   **Суть:** Позволяет российским инвесторам продать заблокированные иностранные бумаги нерезидентам, которые хотят купить российские активы на свои средства со счетов типа "С".
    *   **Организатор:** Брокер "Инвестиционная палата".
    *   **Лимит:** Каждый инвестор мог подать заявку на продажу активов на сумму **не более 100 000 рублей**.
    *   **Статус:** Сбор заявок от инвесторов завершился 8 мая 2024 года. Сейчас идет этап сбора заявок от нерезидентов (до 5 июля 2024) и определения единой цены выкупа для каждого актива. Расчеты ожидаются до 1 сентября 2024 года. **Новые заявки от россиян уже не принимаются.**
    *   **Что делать:** Если вы подавали заявку, следите за информацией от вашего брокера и организатора торгов.

2.  **Конвертация депозитарных расписок (ГДР/АДР) российских компаний:**
    *   **Суть:** Российские компании, чьи расписки торговались за рубежом, обязаны были провести их конвертацию в обыкновенные акции, торгующиеся на МосБирже.
    *   **Статус:** Основная волна конвертаций прошла в 2022-2023 годах. Большинство брокеров автоматически или по заявлению клиента провели эту процедуру.
    *   **Что делать:** Проверьте свой брокерский отчет. Если у вас были ГДР/АДР российских компаний (Сбер, Газпром, Лукойл и др.), они должны были замениться на соответствующие акции. Если этого не произошло, срочно свяжитесь с брокером.

3.  **Перевод активов к другому брокеру (не под санкциями):**
    *   **Суть:** Если ваш брокер попал под блокирующие санкции (Сбер, ВТБ, Альфа и др.), он обычно предлагал (или предлагает) перевести иностранные активы к другому российскому брокеру, не находящемуся под такими санкциями.
    *   **Статус:** Актуально, если вы еще не перевели активы.
    *   **Что делать:** Свяжитесь с вашим санкционным брокером и уточните процедуру и возможных брокеров-партнеров для перевода. **Важно:** Сам по себе перевод не гарантирует разблокировки, если бумаги учитывались через НРД/Euroclear, но может упростить участие в будущих схемах обмена или получение выплат, если они возобновятся.

4.  **Индивидуальные лицензии (для крупных инвесторов):**
    *   **Суть:** Получение разрешения от европейских регуляторов (например, Минфина Бельгии, где находится Euroclear) на разблокировку и перевод активов.
    *   **Статус:** Сложный, дорогой и долгий процесс, актуальный в основном для инвесторов с очень крупными портфелями заблокированных активов (миллионы долларов/евро). Требует привлечения юристов.

5.  **Ожидание системного решения:**
    *   **Суть:** Надежда на то, что в будущем будет найдено общее решение на уровне регуляторов или через новые механизмы обмена для разблокировки активов всех инвесторов.
    *   **Статус:** Перспективы туманны и зависят от геополитической ситуации.

**Что НЕЛЬЗЯ сделать сейчас (в большинстве случаев):**

*   Продать заблокированные иностранные акции на МосБирже или СПБ Бирже.
*   Перевести их к иностранному брокеру напрямую.
*   Получить по ним дивиденды или купоны (они "зависают" в иностранной инфраструктуре).

**Рекомендация:** Следите за новостями от вашего брокера и Банка России. Если вы участвовали в обмене по Указу № 844, ждите результатов. Если ваши активы у санкционного брокера, рассмотрите возможность перевода к несанкционному.
`,uV=`
## Брокер или доверительный управляющий оказались под санкциями: что делать?

Если ваш российский брокер или управляющая компания (УК), через которую вы инвестировали (например, в ПИФы или ДУ), попали под блокирующие санкции США, ЕС или Великобритании, это может повлиять на ваши инвестиции, особенно в иностранные активы.

### Возможные последствия санкций:

*   **Блокировка иностранных активов:** Наиболее частое последствие. Из-за разрыва связей с иностранными депозитариями (Euroclear/Clearstream) вы теряете возможность торговать иностранными акциями, ETF, еврооблигациями и получать по ним выплаты. Сами активы остаются вашими, но "заморожены".
*   **Ограничения на операции с валютой:** Могут возникнуть сложности с покупкой/продажей/выводом долларов США, евро и других "недружественных" валют.
*   **Проблемы с доступом к торговым платформам:** В редких случаях возможны временные сбои в работе приложений или терминалов.
*   **Принудительный перевод активов:** Брокер/УК может инициировать перевод ваших активов (особенно иностранных) к другому участнику рынка, не находящемуся под санкциями.

### Что делать инвестору?

1.  **Не паниковать:** Санкции против брокера не означают потерю ваших активов. Ваши ценные бумаги хранятся в депозитарии, а деньги на специальных счетах, отдельно от средств брокера.
2.  **Следить за информацией от брокера/УК:** Они обязаны информировать клиентов о последствиях санкций и дальнейших действиях. Проверяйте сообщения в приложении, на сайте, по email.
3.  **Оценить состав портфеля:**
    *   **Российские активы (акции РФ, ОФЗ, рублевые корп. облигации):** Как правило, санкции на них напрямую не влияют. Вы можете продолжать ими торговать на МосБирже через этого же брокера (если он сохраняет доступ к торгам) или перевести их к другому брокеру при желании.
    *   **Иностранные активы:** Если они заблокированы, см. рекомендации по продаже/обмену заблокированных активов. Если они *не* заблокированы (например, учитывались не через НРД), уточните у брокера возможность их продажи или перевода.
    *   **Валюта:** Уточните у брокера лимиты и комиссии на операции с "недружественными" валютами. Возможно, имеет смысл перевести ее на банковский счет или конвертировать в рубли или "дружественные" валюты (юань).
4.  **Перевод активов (если предлагается/необходимо):**
    *   **Иностранные ценные бумаги:** Если брокер предлагает перевод к несанкционному партнеру, **обычно стоит соглашаться**. Это не гарантирует разблокировку, но может упростить дальнейшие действия. Внимательно изучите условия перевода (сроки, комиссии, брокер-получатель).
    *   **Российские ценные бумаги и рубли:** Вы можете перевести их к любому другому российскому брокеру по стандартной процедуре (подача поручений у обоих брокеров), если вас не устраивает работа с санкционным брокером.
5.  **ПИФы под управлением санкционной УК:**
    *   **Открытые ПИФы (ОПИФы):** Если фонд инвестировал в российские активы, санкции на УК обычно не влияют на возможность купить/продать паи. Если фонд инвестировал в иностранные активы, они могут быть заблокированы внутри фонда, что отразится на стоимости пая и возможности его погашения. Следите за информацией от УК.
    *   **Биржевые ПИФы (БПИФы):** Аналогично ОПИФам. Если базовые активы заблокированы, торги паями на бирже могут быть приостановлены или цена пая будет нерелевантной.
    *   **Закрытые ПИФы (ЗПИФы):** Уточняйте информацию у УК.
6.  **Доверительное управление (ДУ) у санкционной УК:** Свяжитесь с управляющей компанией и уточните статус ваших активов и дальнейшие действия в соответствии с вашим договором ДУ.

**Главное:** Взаимодействуйте с вашим брокером/УК, читайте их официальные сообщения и следуйте инструкциям. При необходимости обращайтесь в их службу поддержки.
`,dV=[{id:"stocks",title:"Акции",isActive:!0,articles:[{id:"what-are-stocks",title:"Что такое акции и как на них заработать?",url:"https://fincult.info/article/chto-takoe-aktsii-i-kak-na-nikh-zarabotat/",content:Y5},{id:"find-lost-stocks",title:"Как найти потерянные акции?",url:"https://fincult.info/article/kak-nayti-poteryannye-aktsii/",content:G5},{id:"depository-receipts",title:"Зачем нужны депозитарные расписки?",url:"https://fincult.info/article/zachem-nuzhny-depozitarnye-raspiski/",content:Z5},{id:"margin-trading",title:"Что такое маржинальная торговля и в чем ее риски?",url:"https://fincult.info/article/chto-takoe-marzhinalnaya-torgovlya-i-v-chem-ee-riski/",content:X5}]},{id:"bonds",title:"Облигации",isActive:!0,articles:[{id:"what-are-bonds",title:"Облигации: что это такое и как на них заработать?",url:"https://fincult.info/article/obligatsii-chto-eto-takoe-i-kak-na-nikh-zarabotat/",content:Q5}]},{id:"brokers-and-management",title:"Брокеры и управление",isActive:!0,articles:[{id:"choose-broker",title:"Брокер: как его выбрать и как с ним работать?",url:"https://fincult.info/article/broker-kak-ego-vybrat-i-kak-s-nim-rabotat/",content:J5},{id:"trust-management",title:"Что такое доверительное управление и зачем оно начинающему инвестору?",url:"https://fincult.info/article/chto-takoe-doveritelnoe-upravlenie-i-zachem-ono-nachinayushchemu-investoru/",content:eV},{id:"investment-advisor",title:"Зачем нужен инвестиционный советник и как его выбрать?",url:"https://fincult.info/article/zachem-nuzhen-investitsionnyy-sovetnik-i-kak-ego-vybrat/",content:tV}]},{id:"funds",title:"Фонды (ПИФы, БПИФы, ETF)",isActive:!0,articles:[{id:"mutual-funds",title:"Паевые фонды (ПИФы): как они работают и как на них заработать?",url:"https://fincult.info/article/paevye-fondy-kak-oni-rabotayut-i-kak-na-nikh-zarabotat/",content:nV},{id:"etfs",title:"Биржевые фонды (БПИФы, ETF): что это и стоит ли вкладывать?",url:"https://fincult.info/article/birzhevye-fondy-ili-etf-chto-eto-i-stoit-li-vkladyvat-v-nikh-dengi/",content:rV},{id:"closed-end-funds",title:"Закрытые паевые фонды (ЗПИФы): в чем их особенности?",url:"https://fincult.info/article/zakrytye-paevye-fondy-v-chem-ikh-osobennosti-i-podkhodyat-li-oni-nachinayushchim-investoram/",content:iV}]},{id:"general-investing",title:"Общие вопросы инвестирования",isActive:!0,articles:[{id:"stock-exchange",title:"Как устроена фондовая биржа?",url:"https://fincult.info/article/kak-ustroena-fondovaya-birzha/",content:sV},{id:"investor-taxes",title:"Какие налоги платит инвестор?",url:"https://fincult.info/article/kakie-nalogi-platit-investor/",content:oV},{id:"newbie-investing",title:"Во что инвестировать новичку на бирже? Что дает статус «квала»?",url:"https://fincult.info/article/vo-chto-investirovat-novichku-na-birzhe-chto-daet-status-kvala-i-v-kakikh-sluchayakh-pridetsya-prokh/",content:aV},{id:"iis-3",title:"Что такое ИИС-3?",url:"https://fincult.info/article/chto-takoe-iis-3/",content:lV}]},{id:"sanctions",title:"Санкции и блокировки",isActive:!0,articles:[{id:"sell-blocked-assets",title:"Как продать заблокированные активы?",url:"https://fincult.info/article/kak-prodat-zablokirovannye-aktivy/",content:cV},{id:"broker-sanctions",title:"Брокер или доверительный управляющий оказались под санкциями: что делать?",url:"https://fincult.info/article/broker-ili-doveritelnyy-upravlyayushchiy-okazalis-pod-sanktsiyami-chto-delat/",content:uV}]}],gm=t=>`${t}-${Date.now()}-${Math.random().toString(36).substring(2,7)}`,hV=dV.map(t=>({...t,isActive:t.isActive??!0,articles:t.articles.map(e=>({...e,id:e.id||gm(`art-${t.id}`)}))})),sn=fr()(zo((t,e)=>({categories:hV,setCategories:n=>t({categories:n}),addCategory:n=>{const r=n.trim();if(!r)return null;const i=gm("cat"),s={id:i,title:r,articles:[],isActive:!0};return t(o=>({categories:[...o.categories,s]})),k.log(`[FaqStore] Added category: ${i} - ${r}`),i},deleteCategory:n=>t(r=>({categories:r.categories.filter(i=>i.id!==n)})),updateCategoryTitle:(n,r)=>{const i=r.trim();i&&t(s=>({categories:s.categories.map(o=>o.id===n?{...o,title:i}:o)}))},toggleCategoryActive:n=>t(r=>({categories:r.categories.map(i=>i.id===n?{...i,isActive:!(i.isActive??!0)}:i)})),addArticle:(n,r,i="")=>{const s=r.trim();if(!s)return null;const o=gm(`art-${n}`),a={id:o,title:s,content:i,url:""};let l=!1;return t(c=>({categories:c.categories.map(u=>u.id===n?(l=!0,{...u,articles:[...u.articles,a]}):u)})),l?(k.log(`[FaqStore] Added article ${o} to category ${n}`),o):(k.error(`[FaqStore] Category ${n} not found when trying to add article.`),null)},deleteArticle:(n,r)=>t(i=>({categories:i.categories.map(s=>s.id===n?{...s,articles:s.articles.filter(o=>o.id!==r)}:s)})),updateArticle:(n,r,i)=>{const s={...i};if(delete s.id,delete s.url,Object.keys(s).length===0){k.log(`[FaqStore] No valid updates provided for article ${r}.`);return}t(o=>({categories:o.categories.map(a=>a.id===n?{...a,articles:a.articles.map(l=>l.id===r?{...l,...s}:l)}:a)})),k.log(`[FaqStore] Updated article ${r} in category ${n} with:`,s)},getCategoryById:n=>e().categories.find(r=>r.id===n),getArticleByIds:(n,r)=>{const i=e().getCategoryById(n);return i==null?void 0:i.articles.find(s=>s.id===r)}}),{name:"faq-storage",storage:xs(()=>localStorage),onRehydrateStorage:()=>t=>{k.log("[FaqStore] Hydration finished.")}}));k.log("[FaqStore] Initialized with data:",sn.getState().categories);const fV=()=>{const t=gt(),{tg:e}=Zt(),n=sn(s=>s.categories);y.useEffect(()=>{const s=()=>t("/profile");return e&&(e.BackButton.show(),e.onEvent("backButtonClicked",s),k.log("[FaqPage] Telegram BackButton shown and handler attached.")),()=>{e&&(e.BackButton.hide(),e.offEvent("backButtonClicked",s),k.log("[FaqPage] Telegram BackButton hidden and handler removed."))}},[e,t]);const r=s=>{t(`/faq/${s}`)},i=n.filter(s=>s.isActive??!0);return d.jsxs("div",{className:"p-4 space-y-4 pb-4 flex flex-col h-full",children:[d.jsxs("div",{className:"relative flex items-center justify-center h-12 mb-2 flex-shrink-0",children:[d.jsx("div",{className:"absolute left-0 h-9 w-9"})," ",d.jsx("h1",{className:"text-lg font-semibold text-center",children:"Часто задаваемые вопросы"}),d.jsx("div",{className:"h-9 w-9 absolute right-0"})," "]}),d.jsx(bt,{className:"flex-grow shadow-sm border rounded-lg overflow-hidden flex flex-col",children:d.jsx(Gt,{className:"p-0 flex-grow overflow-y-auto no-scrollbar",children:d.jsx("div",{className:"divide-y divide-border/60",children:i.length>0?i.map(s=>d.jsxs("button",{onClick:()=>r(s.id),className:U("flex items-center w-full text-left p-4 transition-colors","hover:bg-muted/50 active:bg-muted/80 cursor-pointer"),children:[d.jsx("span",{className:"text-base flex-grow",children:s.title}),d.jsx(jk,{className:"h-5 w-5 flex-shrink-0 text-muted-foreground"})]},s.id)):d.jsx("p",{className:"p-6 text-center text-muted-foreground",children:"Нет доступных категорий."})})})})]})},pV=()=>{const{categoryId:t}=ys(),e=gt(),{tg:n}=Zt(),{getCategoryById:r}=sn(),i=sn.persist.hasHydrated(),s=y.useMemo(()=>{if(!(!i||!t))return k.log(`[FaqCategoryPage] Store hydrated, getting category: ${t}`),r(t)},[t,r,i]);y.useEffect(()=>{const a=()=>e("/faq");return n&&(n.BackButton.show(),n.onEvent("backButtonClicked",a),k.log("[FaqCategoryPage] Telegram BackButton shown and handler attached.")),()=>{n&&(n.BackButton.hide(),n.offEvent("backButtonClicked",a),k.log("[FaqCategoryPage] Telegram BackButton hidden and handler removed."))}},[n,e]);const o=a=>{k.log("[FaqCategoryPage handleArticleClick] Clicked article:",a),a.content||a.id?(k.log("[FaqCategoryPage handleArticleClick] Navigating internally..."),e(`/faq/${t}/${a.id}`)):k.error("[FaqCategoryPage handleArticleClick] Article has no content or id!",a)};if(!i)return d.jsx("div",{className:"flex items-center justify-center h-screen",children:d.jsx(Ce,{size:"lg"})});if(!s||!(s.isActive??!0)){const a=s?`Категория "${s.title}" временно недоступна.`:`Категория FAQ "${t}" не найдена.`;return d.jsx("div",{className:"p-4 text-center",children:d.jsx(mt,{message:a})})}return d.jsxs("div",{className:"p-4 space-y-4 pb-4 flex flex-col h-full",children:[d.jsxs("div",{className:"relative flex items-center justify-center h-12 mb-2 flex-shrink-0",children:[d.jsx("div",{className:"absolute left-0 h-9 w-9"})," ",d.jsx("h1",{className:"text-lg font-semibold text-center truncate max-w-[calc(100%-5rem)]",title:s.title,children:s.title}),d.jsx("div",{className:"h-9 w-9 absolute right-0"})]}),d.jsx(bt,{className:"flex-grow shadow-sm border rounded-lg overflow-hidden flex flex-col",children:d.jsx(Gt,{className:"p-0 flex-grow overflow-y-auto no-scrollbar",children:d.jsx("div",{className:"divide-y divide-border/60",children:s.articles.length>0?s.articles.map(a=>d.jsxs("button",{onClick:()=>o(a),className:U("flex items-center w-full text-left p-4 transition-colors","hover:bg-muted/50 active:bg-muted/80 cursor-pointer"),children:[d.jsx("span",{className:"text-base flex-grow mr-2",children:a.title}),d.jsx(zO,{className:"h-4 w-4 flex-shrink-0 text-muted-foreground"})]},a.id)):d.jsx("p",{className:"p-6 text-center text-muted-foreground",children:"В этой категории пока нет статей."})})})})]})};function mV(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const gV=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,vV=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,yV={};function fw(t,e){return(yV.jsx?vV:gV).test(t)}const xV=/[ \t\n\f\r]/g;function wV(t){return typeof t=="object"?t.type==="text"?pw(t.value):!1:pw(t)}function pw(t){return t.replace(xV,"")===""}class Wl{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}Wl.prototype.normal={};Wl.prototype.property={};Wl.prototype.space=void 0;function $_(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new Wl(n,r,e)}function vm(t){return t.toLowerCase()}class Xt{constructor(e,n){this.attribute=n,this.property=e}}Xt.prototype.attribute="";Xt.prototype.booleanish=!1;Xt.prototype.boolean=!1;Xt.prototype.commaOrSpaceSeparated=!1;Xt.prototype.commaSeparated=!1;Xt.prototype.defined=!1;Xt.prototype.mustUseProperty=!1;Xt.prototype.number=!1;Xt.prototype.overloadedBoolean=!1;Xt.prototype.property="";Xt.prototype.spaceSeparated=!1;Xt.prototype.space=void 0;let bV=0;const ye=ws(),rt=ws(),D_=ws(),X=ws(),$e=ws(),fo=ws(),Jt=ws();function ws(){return 2**++bV}const ym=Object.freeze(Object.defineProperty({__proto__:null,boolean:ye,booleanish:rt,commaOrSpaceSeparated:Jt,commaSeparated:fo,number:X,overloadedBoolean:D_,spaceSeparated:$e},Symbol.toStringTag,{value:"Module"})),Cf=Object.keys(ym);class Tv extends Xt{constructor(e,n,r,i){let s=-1;if(super(e,n),mw(this,"space",i),typeof r=="number")for(;++s<Cf.length;){const o=Cf[s];mw(this,Cf[s],(r&ym[o])===ym[o])}}}Tv.prototype.defined=!0;function mw(t,e,n){n&&(t[e]=n)}function Ho(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const s=new Tv(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[vm(r)]=r,n[vm(s.attribute)]=r}return new Wl(e,n,t.space)}const z_=Ho({properties:{ariaActiveDescendant:null,ariaAtomic:rt,ariaAutoComplete:null,ariaBusy:rt,ariaChecked:rt,ariaColCount:X,ariaColIndex:X,ariaColSpan:X,ariaControls:$e,ariaCurrent:null,ariaDescribedBy:$e,ariaDetails:null,ariaDisabled:rt,ariaDropEffect:$e,ariaErrorMessage:null,ariaExpanded:rt,ariaFlowTo:$e,ariaGrabbed:rt,ariaHasPopup:null,ariaHidden:rt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:$e,ariaLevel:X,ariaLive:null,ariaModal:rt,ariaMultiLine:rt,ariaMultiSelectable:rt,ariaOrientation:null,ariaOwns:$e,ariaPlaceholder:null,ariaPosInSet:X,ariaPressed:rt,ariaReadOnly:rt,ariaRelevant:null,ariaRequired:rt,ariaRoleDescription:$e,ariaRowCount:X,ariaRowIndex:X,ariaRowSpan:X,ariaSelected:rt,ariaSetSize:X,ariaSort:null,ariaValueMax:X,ariaValueMin:X,ariaValueNow:X,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function F_(t,e){return e in t?t[e]:e}function B_(t,e){return F_(t,e.toLowerCase())}const SV=Ho({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:fo,acceptCharset:$e,accessKey:$e,action:null,allow:null,allowFullScreen:ye,allowPaymentRequest:ye,allowUserMedia:ye,alt:null,as:null,async:ye,autoCapitalize:null,autoComplete:$e,autoFocus:ye,autoPlay:ye,blocking:$e,capture:null,charSet:null,checked:ye,cite:null,className:$e,cols:X,colSpan:null,content:null,contentEditable:rt,controls:ye,controlsList:$e,coords:X|fo,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ye,defer:ye,dir:null,dirName:null,disabled:ye,download:D_,draggable:rt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ye,formTarget:null,headers:$e,height:X,hidden:ye,high:X,href:null,hrefLang:null,htmlFor:$e,httpEquiv:$e,id:null,imageSizes:null,imageSrcSet:null,inert:ye,inputMode:null,integrity:null,is:null,isMap:ye,itemId:null,itemProp:$e,itemRef:$e,itemScope:ye,itemType:$e,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ye,low:X,manifest:null,max:null,maxLength:X,media:null,method:null,min:null,minLength:X,multiple:ye,muted:ye,name:null,nonce:null,noModule:ye,noValidate:ye,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ye,optimum:X,pattern:null,ping:$e,placeholder:null,playsInline:ye,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ye,referrerPolicy:null,rel:$e,required:ye,reversed:ye,rows:X,rowSpan:X,sandbox:$e,scope:null,scoped:ye,seamless:ye,selected:ye,shadowRootClonable:ye,shadowRootDelegatesFocus:ye,shadowRootMode:null,shape:null,size:X,sizes:null,slot:null,span:X,spellCheck:rt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:X,step:null,style:null,tabIndex:X,target:null,title:null,translate:null,type:null,typeMustMatch:ye,useMap:null,value:rt,width:X,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:$e,axis:null,background:null,bgColor:null,border:X,borderColor:null,bottomMargin:X,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ye,declare:ye,event:null,face:null,frame:null,frameBorder:null,hSpace:X,leftMargin:X,link:null,longDesc:null,lowSrc:null,marginHeight:X,marginWidth:X,noResize:ye,noHref:ye,noShade:ye,noWrap:ye,object:null,profile:null,prompt:null,rev:null,rightMargin:X,rules:null,scheme:null,scrolling:rt,standby:null,summary:null,text:null,topMargin:X,valueType:null,version:null,vAlign:null,vLink:null,vSpace:X,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ye,disableRemotePlayback:ye,prefix:null,property:null,results:X,security:null,unselectable:null},space:"html",transform:B_}),kV=Ho({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Jt,accentHeight:X,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:X,amplitude:X,arabicForm:null,ascent:X,attributeName:null,attributeType:null,azimuth:X,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:X,by:null,calcMode:null,capHeight:X,className:$e,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:X,diffuseConstant:X,direction:null,display:null,dur:null,divisor:X,dominantBaseline:null,download:ye,dx:null,dy:null,edgeMode:null,editable:null,elevation:X,enableBackground:null,end:null,event:null,exponent:X,externalResourcesRequired:null,fill:null,fillOpacity:X,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:fo,g2:fo,glyphName:fo,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:X,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:X,horizOriginX:X,horizOriginY:X,id:null,ideographic:X,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:X,k:X,k1:X,k2:X,k3:X,k4:X,kernelMatrix:Jt,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:X,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:X,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:X,overlineThickness:X,paintOrder:null,panose1:null,path:null,pathLength:X,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:$e,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:X,pointsAtY:X,pointsAtZ:X,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Jt,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Jt,rev:Jt,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Jt,requiredFeatures:Jt,requiredFonts:Jt,requiredFormats:Jt,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:X,specularExponent:X,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:X,strikethroughThickness:X,string:null,stroke:null,strokeDashArray:Jt,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:X,strokeOpacity:X,strokeWidth:null,style:null,surfaceScale:X,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Jt,tabIndex:X,tableValues:null,target:null,targetX:X,targetY:X,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Jt,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:X,underlineThickness:X,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:X,values:null,vAlphabetic:X,vMathematical:X,vectorEffect:null,vHanging:X,vIdeographic:X,version:null,vertAdvY:X,vertOriginX:X,vertOriginY:X,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:X,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:F_}),V_=Ho({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),U_=Ho({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:B_}),H_=Ho({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),CV={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},EV=/[A-Z]/g,gw=/-[a-z]/g,NV=/^data[-\w.:]+$/i;function _V(t,e){const n=vm(e);let r=e,i=Xt;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&NV.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(gw,AV);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!gw.test(s)){let o=s.replace(EV,TV);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=Tv}return new i(r,e)}function TV(t){return"-"+t.toLowerCase()}function AV(t){return t.charAt(1).toUpperCase()}const PV=$_([z_,SV,V_,U_,H_],"html"),Av=$_([z_,kV,V_,U_,H_],"svg");function jV(t){return t.join(" ").trim()}var Pv={},vw=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,RV=/\n/g,MV=/^\s*/,IV=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,OV=/^:\s*/,LV=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,$V=/^[;\s]*/,DV=/^\s+|\s+$/g,zV=`
`,yw="/",xw="*",Fi="",FV="comment",BV="declaration",VV=function(t,e){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var n=1,r=1;function i(g){var m=g.match(RV);m&&(n+=m.length);var w=g.lastIndexOf(zV);r=~w?g.length-w:r+g.length}function s(){var g={line:n,column:r};return function(m){return m.position=new o(g),c(),m}}function o(g){this.start=g,this.end={line:n,column:r},this.source=e.source}o.prototype.content=t;function a(g){var m=new Error(e.source+":"+n+":"+r+": "+g);if(m.reason=g,m.filename=e.source,m.line=n,m.column=r,m.source=t,!e.silent)throw m}function l(g){var m=g.exec(t);if(m){var w=m[0];return i(w),t=t.slice(w.length),m}}function c(){l(MV)}function u(g){var m;for(g=g||[];m=h();)m!==!1&&g.push(m);return g}function h(){var g=s();if(!(yw!=t.charAt(0)||xw!=t.charAt(1))){for(var m=2;Fi!=t.charAt(m)&&(xw!=t.charAt(m)||yw!=t.charAt(m+1));)++m;if(m+=2,Fi===t.charAt(m-1))return a("End of comment missing");var w=t.slice(2,m-2);return r+=2,i(w),t=t.slice(m),r+=2,g({type:FV,comment:w})}}function f(){var g=s(),m=l(IV);if(m){if(h(),!l(OV))return a("property missing ':'");var w=l(LV),v=g({type:BV,property:ww(m[0].replace(vw,Fi)),value:w?ww(w[0].replace(vw,Fi)):Fi});return l($V),v}}function p(){var g=[];u(g);for(var m;m=f();)m!==!1&&(g.push(m),u(g));return g}return c(),p()};function ww(t){return t?t.replace(DV,Fi):Fi}var UV=Dn&&Dn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Pv,"__esModule",{value:!0});Pv.default=WV;var HV=UV(VV);function WV(t,e){var n=null;if(!t||typeof t!="string")return n;var r=(0,HV.default)(t),i=typeof e=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,a=s.value;i?e(o,a,s):a&&(n=n||{},n[o]=a)}}),n}var ih={};Object.defineProperty(ih,"__esModule",{value:!0});ih.camelCase=void 0;var qV=/^--[a-zA-Z0-9_-]+$/,KV=/-([a-z])/g,YV=/^[^-]+$/,GV=/^-(webkit|moz|ms|o|khtml)-/,ZV=/^-(ms)-/,XV=function(t){return!t||YV.test(t)||qV.test(t)},QV=function(t,e){return e.toUpperCase()},bw=function(t,e){return"".concat(e,"-")},JV=function(t,e){return e===void 0&&(e={}),XV(t)?t:(t=t.toLowerCase(),e.reactCompat?t=t.replace(ZV,bw):t=t.replace(GV,bw),t.replace(KV,QV))};ih.camelCase=JV;var eU=Dn&&Dn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},tU=eU(Pv),nU=ih;function xm(t,e){var n={};return!t||typeof t!="string"||(0,tU.default)(t,function(r,i){r&&i&&(n[(0,nU.camelCase)(r,e)]=i)}),n}xm.default=xm;var rU=xm;const iU=Hn(rU),W_=q_("end"),jv=q_("start");function q_(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function sU(t){const e=jv(t),n=W_(t);if(e&&n)return{start:e,end:n}}function La(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?Sw(t.position):"start"in t||"end"in t?Sw(t):"line"in t||"column"in t?wm(t):""}function wm(t){return kw(t&&t.line)+":"+kw(t&&t.column)}function Sw(t){return wm(t&&t.start)+"-"+wm(t&&t.end)}function kw(t){return t&&typeof t=="number"?t:1}class Pt extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?i=e:!s.cause&&e&&(o=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?s.ruleId=r:(s.source=r.slice(0,l),s.ruleId=r.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=La(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}Pt.prototype.file="";Pt.prototype.name="";Pt.prototype.reason="";Pt.prototype.message="";Pt.prototype.stack="";Pt.prototype.column=void 0;Pt.prototype.line=void 0;Pt.prototype.ancestors=void 0;Pt.prototype.cause=void 0;Pt.prototype.fatal=void 0;Pt.prototype.place=void 0;Pt.prototype.ruleId=void 0;Pt.prototype.source=void 0;const Rv={}.hasOwnProperty,oU=new Map,aU=/[A-Z]/g,lU=new Set(["table","tbody","thead","tfoot","tr"]),cU=new Set(["td","th"]),K_="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function uU(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=yU(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=vU(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?Av:PV,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=Y_(i,t,void 0);return s&&typeof s!="string"?s:i.create(t,i.Fragment,{children:s||void 0},void 0)}function Y_(t,e,n){if(e.type==="element")return dU(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return hU(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return pU(t,e,n);if(e.type==="mdxjsEsm")return fU(t,e);if(e.type==="root")return mU(t,e,n);if(e.type==="text")return gU(t,e)}function dU(t,e,n){const r=t.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=Av,t.schema=i),t.ancestors.push(e);const s=Z_(t,e.tagName,!1),o=xU(t,e);let a=Iv(t,e);return lU.has(e.tagName)&&(a=a.filter(function(l){return typeof l=="string"?!wV(l):!0})),G_(t,o,s,e),Mv(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function hU(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}Nl(t,e.position)}function fU(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);Nl(t,e.position)}function pU(t,e,n){const r=t.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=Av,t.schema=i),t.ancestors.push(e);const s=e.name===null?t.Fragment:Z_(t,e.name,!0),o=wU(t,e),a=Iv(t,e);return G_(t,o,s,e),Mv(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function mU(t,e,n){const r={};return Mv(r,Iv(t,e)),t.create(e,t.Fragment,r,n)}function gU(t,e){return e.value}function G_(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function Mv(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function vU(t,e,n){return r;function r(i,s,o,a){const c=Array.isArray(o.children)?n:e;return a?c(s,o,a):c(s,o)}}function yU(t,e){return n;function n(r,i,s,o){const a=Array.isArray(s.children),l=jv(r);return e(i,s,o,a,{columnNumber:l?l.column-1:void 0,fileName:t,lineNumber:l?l.line:void 0},void 0)}}function xU(t,e){const n={};let r,i;for(i in e.properties)if(i!=="children"&&Rv.call(e.properties,i)){const s=bU(t,i,e.properties[i]);if(s){const[o,a]=s;t.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&cU.has(e.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function wU(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,t.evaluater.evaluateExpression(a.argument))}else Nl(t,e.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const a=r.value.data.estree.body[0];a.type,s=t.evaluater.evaluateExpression(a.expression)}else Nl(t,e.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function Iv(t,e){const n=[];let r=-1;const i=t.passKeys?new Map:oU;for(;++r<e.children.length;){const s=e.children[r];let o;if(t.passKeys){const l=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(l){const c=i.get(l)||0;o=l+"-"+c,i.set(l,c+1)}}const a=Y_(t,s,o);a!==void 0&&n.push(a)}return n}function bU(t,e,n){const r=_V(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?mV(n):jV(n)),r.property==="style"){let i=typeof n=="object"?n:SU(t,String(n));return t.stylePropertyNameCase==="css"&&(i=kU(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&r.space?CV[r.property]||r.property:r.attribute,n]}}function SU(t,e){try{return iU(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,i=new Pt("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=K_+"#cannot-parse-style-attribute",i}}function Z_(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let s=-1,o;for(;++s<i.length;){const a=fw(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=fw(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return Rv.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(r);Nl(t)}function Nl(t,e){const n=new Pt("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=K_+"#cannot-handle-mdx-estrees-without-createevaluater",n}function kU(t){const e={};let n;for(n in t)Rv.call(t,n)&&(e[CU(n)]=t[n]);return e}function CU(t){let e=t.replace(aU,EU);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function EU(t){return"-"+t.toLowerCase()}const Ef={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},NU={};function _U(t,e){const n=NU,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return X_(t,r,i)}function X_(t,e,n){if(TU(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return Cw(t.children,e,n)}return Array.isArray(t)?Cw(t,e,n):""}function Cw(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=X_(t[i],e,n);return r.join("")}function TU(t){return!!(t&&typeof t=="object")}const Ew=document.createElement("i");function Ov(t){const e="&"+t+";";Ew.innerHTML=e;const n=Ew.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function hr(t,e,n,r){const i=t.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function yn(t,e){return t.length>0?(hr(t,t.length,0,e),t):e}const Nw={}.hasOwnProperty;function AU(t){const e={};let n=-1;for(;++n<t.length;)PU(e,t[n]);return e}function PU(t,e){let n;for(n in e){const i=(Nw.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){Nw.call(i,o)||(i[o]=[]);const a=s[o];jU(i[o],Array.isArray(a)?a:a?[a]:[])}}}function jU(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);hr(t,0,0,r)}function Q_(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCodePoint(n)}function po(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const tr=Mi(/[A-Za-z]/),on=Mi(/[\dA-Za-z]/),RU=Mi(/[#-'*+\--9=?A-Z^-~]/);function bm(t){return t!==null&&(t<32||t===127)}const Sm=Mi(/\d/),MU=Mi(/[\dA-Fa-f]/),IU=Mi(/[!-/:-@[-`{-~]/);function me(t){return t!==null&&t<-2}function Yt(t){return t!==null&&(t<0||t===32)}function Re(t){return t===-2||t===-1||t===32}const OU=Mi(new RegExp("\\p{P}|\\p{S}","u")),LU=Mi(/\s/);function Mi(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Wo(t){const e=[];let n=-1,r=0,i=0;for(;++n<t.length;){const s=t.charCodeAt(n);let o="";if(s===37&&on(t.charCodeAt(n+1))&&on(t.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=t.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o="�"}else o=String.fromCharCode(s);o&&(e.push(t.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return e.join("")+t.slice(r)}function ze(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return Re(l)?(t.enter(n),a(l)):e(l)}function a(l){return Re(l)&&s++<i?(t.consume(l),a):(t.exit(n),e(l))}}const $U={tokenize:DU};function DU(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),ze(t,e,"linePrefix")}function i(a){return t.enter("paragraph"),s(a)}function s(a){const l=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,o(a)}function o(a){if(a===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(a);return}return me(a)?(t.consume(a),t.exit("chunkText"),s):(t.consume(a),o)}}const zU={tokenize:FU},_w={tokenize:BU};function FU(t){const e=this,n=[];let r=0,i,s,o;return a;function a(b){if(r<n.length){const S=n[r];return e.containerState=S[1],t.attempt(S[0].continuation,l,c)(b)}return c(b)}function l(b){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&x();const S=e.events.length;let N=S,C;for(;N--;)if(e.events[N][0]==="exit"&&e.events[N][1].type==="chunkFlow"){C=e.events[N][1].end;break}v(r);let _=S;for(;_<e.events.length;)e.events[_][1].end={...C},_++;return hr(e.events,N+1,0,e.events.slice(S)),e.events.length=_,c(b)}return a(b)}function c(b){if(r===n.length){if(!i)return f(b);if(i.currentConstruct&&i.currentConstruct.concrete)return g(b);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(_w,u,h)(b)}function u(b){return i&&x(),v(r),f(b)}function h(b){return e.parser.lazy[e.now().line]=r!==n.length,o=e.now().offset,g(b)}function f(b){return e.containerState={},t.attempt(_w,p,g)(b)}function p(b){return r++,n.push([e.currentConstruct,e.containerState]),f(b)}function g(b){if(b===null){i&&x(),v(0),t.consume(b);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),m(b)}function m(b){if(b===null){w(t.exit("chunkFlow"),!0),v(0),t.consume(b);return}return me(b)?(t.consume(b),w(t.exit("chunkFlow")),r=0,e.interrupt=void 0,a):(t.consume(b),m)}function w(b,S){const N=e.sliceStream(b);if(S&&N.push(null),b.previous=s,s&&(s.next=b),s=b,i.defineSkip(b.start),i.write(N),e.parser.lazy[b.start.line]){let C=i.events.length;for(;C--;)if(i.events[C][1].start.offset<o&&(!i.events[C][1].end||i.events[C][1].end.offset>o))return;const _=e.events.length;let P=_,I,R;for(;P--;)if(e.events[P][0]==="exit"&&e.events[P][1].type==="chunkFlow"){if(I){R=e.events[P][1].end;break}I=!0}for(v(r),C=_;C<e.events.length;)e.events[C][1].end={...R},C++;hr(e.events,P+1,0,e.events.slice(_)),e.events.length=C}}function v(b){let S=n.length;for(;S-- >b;){const N=n[S];e.containerState=N[1],N[0].exit.call(e,t)}n.length=b}function x(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function BU(t,e,n){return ze(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Tw(t){if(t===null||Yt(t)||LU(t))return 1;if(OU(t))return 2}function Lv(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!r.includes(s)&&(e=s(e,n),r.push(s))}return e}const km={name:"attention",resolveAll:VU,tokenize:UU};function VU(t,e){let n=-1,r,i,s,o,a,l,c,u;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;l=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const h={...t[r][1].end},f={...t[n][1].start};Aw(h,-l),Aw(f,l),o={type:l>1?"strongSequence":"emphasisSequence",start:h,end:{...t[r][1].end}},a={type:l>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:f},s={type:l>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:l>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},t[r][1].end={...o.start},t[n][1].start={...a.end},c=[],t[r][1].end.offset-t[r][1].start.offset&&(c=yn(c,[["enter",t[r][1],e],["exit",t[r][1],e]])),c=yn(c,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",s,e]]),c=yn(c,Lv(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),c=yn(c,[["exit",s,e],["enter",a,e],["exit",a,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(u=2,c=yn(c,[["enter",t[n][1],e],["exit",t[n][1],e]])):u=0,hr(t,r-1,n-r+3,c),n=r+c.length-u-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function UU(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Tw(r);let s;return o;function o(l){return s=l,t.enter("attentionSequence"),a(l)}function a(l){if(l===s)return t.consume(l),a;const c=t.exit("attentionSequence"),u=Tw(l),h=!u||u===2&&i||n.includes(l),f=!i||i===2&&u||n.includes(r);return c._open=!!(s===42?h:h&&(i||!f)),c._close=!!(s===42?f:f&&(u||!h)),e(l)}}function Aw(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const HU={name:"autolink",tokenize:WU};function WU(t,e,n){let r=0;return i;function i(p){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(p){return tr(p)?(t.consume(p),o):p===64?n(p):c(p)}function o(p){return p===43||p===45||p===46||on(p)?(r=1,a(p)):c(p)}function a(p){return p===58?(t.consume(p),r=0,l):(p===43||p===45||p===46||on(p))&&r++<32?(t.consume(p),a):(r=0,c(p))}function l(p){return p===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.exit("autolink"),e):p===null||p===32||p===60||bm(p)?n(p):(t.consume(p),l)}function c(p){return p===64?(t.consume(p),u):RU(p)?(t.consume(p),c):n(p)}function u(p){return on(p)?h(p):n(p)}function h(p){return p===46?(t.consume(p),r=0,u):p===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.exit("autolink"),e):f(p)}function f(p){if((p===45||on(p))&&r++<63){const g=p===45?f:h;return t.consume(p),g}return n(p)}}const sh={partial:!0,tokenize:qU};function qU(t,e,n){return r;function r(s){return Re(s)?ze(t,i,"linePrefix")(s):i(s)}function i(s){return s===null||me(s)?e(s):n(s)}}const J_={continuation:{tokenize:YU},exit:GU,name:"blockQuote",tokenize:KU};function KU(t,e,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(t.enter("blockQuote",{_container:!0}),a.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return Re(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function YU(t,e,n){const r=this;return i;function i(o){return Re(o)?ze(t,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(J_,e,n)(o)}}function GU(t){t.exit("blockQuote")}const eT={name:"characterEscape",tokenize:ZU};function ZU(t,e,n){return r;function r(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),i}function i(s){return IU(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const tT={name:"characterReference",tokenize:XU};function XU(t,e,n){const r=this;let i=0,s,o;return a;function a(h){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(h),t.exit("characterReferenceMarker"),l}function l(h){return h===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(h),t.exit("characterReferenceMarkerNumeric"),c):(t.enter("characterReferenceValue"),s=31,o=on,u(h))}function c(h){return h===88||h===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(h),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=MU,u):(t.enter("characterReferenceValue"),s=7,o=Sm,u(h))}function u(h){if(h===59&&i){const f=t.exit("characterReferenceValue");return o===on&&!Ov(r.sliceSerialize(f))?n(h):(t.enter("characterReferenceMarker"),t.consume(h),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(h)&&i++<s?(t.consume(h),u):n(h)}}const Pw={partial:!0,tokenize:JU},jw={concrete:!0,name:"codeFenced",tokenize:QU};function QU(t,e,n){const r=this,i={partial:!0,tokenize:N};let s=0,o=0,a;return l;function l(C){return c(C)}function c(C){const _=r.events[r.events.length-1];return s=_&&_[1].type==="linePrefix"?_[2].sliceSerialize(_[1],!0).length:0,a=C,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),u(C)}function u(C){return C===a?(o++,t.consume(C),u):o<3?n(C):(t.exit("codeFencedFenceSequence"),Re(C)?ze(t,h,"whitespace")(C):h(C))}function h(C){return C===null||me(C)?(t.exit("codeFencedFence"),r.interrupt?e(C):t.check(Pw,m,S)(C)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),f(C))}function f(C){return C===null||me(C)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),h(C)):Re(C)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),ze(t,p,"whitespace")(C)):C===96&&C===a?n(C):(t.consume(C),f)}function p(C){return C===null||me(C)?h(C):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),g(C))}function g(C){return C===null||me(C)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),h(C)):C===96&&C===a?n(C):(t.consume(C),g)}function m(C){return t.attempt(i,S,w)(C)}function w(C){return t.enter("lineEnding"),t.consume(C),t.exit("lineEnding"),v}function v(C){return s>0&&Re(C)?ze(t,x,"linePrefix",s+1)(C):x(C)}function x(C){return C===null||me(C)?t.check(Pw,m,S)(C):(t.enter("codeFlowValue"),b(C))}function b(C){return C===null||me(C)?(t.exit("codeFlowValue"),x(C)):(t.consume(C),b)}function S(C){return t.exit("codeFenced"),e(C)}function N(C,_,P){let I=0;return R;function R(D){return C.enter("lineEnding"),C.consume(D),C.exit("lineEnding"),O}function O(D){return C.enter("codeFencedFence"),Re(D)?ze(C,j,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(D):j(D)}function j(D){return D===a?(C.enter("codeFencedFenceSequence"),F(D)):P(D)}function F(D){return D===a?(I++,C.consume(D),F):I>=o?(C.exit("codeFencedFenceSequence"),Re(D)?ze(C,M,"whitespace")(D):M(D)):P(D)}function M(D){return D===null||me(D)?(C.exit("codeFencedFence"),_(D)):P(D)}}}function JU(t,e,n){const r=this;return i;function i(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}const Nf={name:"codeIndented",tokenize:t6},e6={partial:!0,tokenize:n6};function t6(t,e,n){const r=this;return i;function i(c){return t.enter("codeIndented"),ze(t,s,"linePrefix",5)(c)}function s(c){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?o(c):n(c)}function o(c){return c===null?l(c):me(c)?t.attempt(e6,o,l)(c):(t.enter("codeFlowValue"),a(c))}function a(c){return c===null||me(c)?(t.exit("codeFlowValue"),o(c)):(t.consume(c),a)}function l(c){return t.exit("codeIndented"),e(c)}}function n6(t,e,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):me(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):ze(t,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):me(o)?i(o):n(o)}}const r6={name:"codeText",previous:s6,resolve:i6,tokenize:o6};function i6(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function s6(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function o6(t,e,n){let r=0,i,s;return o;function o(h){return t.enter("codeText"),t.enter("codeTextSequence"),a(h)}function a(h){return h===96?(t.consume(h),r++,a):(t.exit("codeTextSequence"),l(h))}function l(h){return h===null?n(h):h===32?(t.enter("space"),t.consume(h),t.exit("space"),l):h===96?(s=t.enter("codeTextSequence"),i=0,u(h)):me(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),l):(t.enter("codeTextData"),c(h))}function c(h){return h===null||h===32||h===96||me(h)?(t.exit("codeTextData"),l(h)):(t.consume(h),c)}function u(h){return h===96?(t.consume(h),i++,u):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(h)):(s.type="codeTextData",c(h))}}class a6{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&la(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),la(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),la(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);la(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);la(this.left,n.reverse())}}}function la(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function nT(t){const e={};let n=-1,r,i,s,o,a,l,c;const u=new a6(t);for(;++n<u.length;){for(;n in e;)n=e[n];if(r=u.get(n),n&&r[1].type==="chunkFlow"&&u.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,l6(u,n)),n=e[n],c=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(o=u.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(u.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...u.get(i)[1].start},a=u.slice(i,n),a.unshift(r),u.splice(i,n-i+1,a))}}return hr(t,0,Number.POSITIVE_INFINITY,u.slice(0)),!c}function l6(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const s=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const a=o.events,l=[],c={};let u,h,f=-1,p=n,g=0,m=0;const w=[m];for(;p;){for(;t.get(++i)[1]!==p;);s.push(i),p._tokenizer||(u=r.sliceStream(p),p.next||u.push(null),h&&o.defineSkip(p.start),p._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(u),p._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),h=p,p=p.next}for(p=n;++f<a.length;)a[f][0]==="exit"&&a[f-1][0]==="enter"&&a[f][1].type===a[f-1][1].type&&a[f][1].start.line!==a[f][1].end.line&&(m=f+1,w.push(m),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(o.events=[],p?(p._tokenizer=void 0,p.previous=void 0):w.pop(),f=w.length;f--;){const v=a.slice(w[f],w[f+1]),x=s.pop();l.push([x,x+v.length-1]),t.splice(x,2,v)}for(l.reverse(),f=-1;++f<l.length;)c[g+l[f][0]]=g+l[f][1],g+=l[f][1]-l[f][0]-1;return c}const c6={resolve:d6,tokenize:h6},u6={partial:!0,tokenize:f6};function d6(t){return nT(t),t}function h6(t,e){let n;return r;function r(a){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):me(a)?t.check(u6,o,s)(a):(t.consume(a),i)}function s(a){return t.exit("chunkContent"),t.exit("content"),e(a)}function o(a){return t.consume(a),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function f6(t,e,n){const r=this;return i;function i(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),ze(t,s,"linePrefix")}function s(o){if(o===null||me(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):t.interrupt(r.parser.constructs.flow,n,e)(o)}}function rT(t,e,n,r,i,s,o,a,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return h;function h(v){return v===60?(t.enter(r),t.enter(i),t.enter(s),t.consume(v),t.exit(s),f):v===null||v===32||v===41||bm(v)?n(v):(t.enter(r),t.enter(o),t.enter(a),t.enter("chunkString",{contentType:"string"}),m(v))}function f(v){return v===62?(t.enter(s),t.consume(v),t.exit(s),t.exit(i),t.exit(r),e):(t.enter(a),t.enter("chunkString",{contentType:"string"}),p(v))}function p(v){return v===62?(t.exit("chunkString"),t.exit(a),f(v)):v===null||v===60||me(v)?n(v):(t.consume(v),v===92?g:p)}function g(v){return v===60||v===62||v===92?(t.consume(v),p):p(v)}function m(v){return!u&&(v===null||v===41||Yt(v))?(t.exit("chunkString"),t.exit(a),t.exit(o),t.exit(r),e(v)):u<c&&v===40?(t.consume(v),u++,m):v===41?(t.consume(v),u--,m):v===null||v===32||v===40||bm(v)?n(v):(t.consume(v),v===92?w:m)}function w(v){return v===40||v===41||v===92?(t.consume(v),m):m(v)}}function iT(t,e,n,r,i,s){const o=this;let a=0,l;return c;function c(p){return t.enter(r),t.enter(i),t.consume(p),t.exit(i),t.enter(s),u}function u(p){return a>999||p===null||p===91||p===93&&!l||p===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(p):p===93?(t.exit(s),t.enter(i),t.consume(p),t.exit(i),t.exit(r),e):me(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),u):(t.enter("chunkString",{contentType:"string"}),h(p))}function h(p){return p===null||p===91||p===93||me(p)||a++>999?(t.exit("chunkString"),u(p)):(t.consume(p),l||(l=!Re(p)),p===92?f:h)}function f(p){return p===91||p===92||p===93?(t.consume(p),a++,h):h(p)}}function sT(t,e,n,r,i,s){let o;return a;function a(f){return f===34||f===39||f===40?(t.enter(r),t.enter(i),t.consume(f),t.exit(i),o=f===40?41:f,l):n(f)}function l(f){return f===o?(t.enter(i),t.consume(f),t.exit(i),t.exit(r),e):(t.enter(s),c(f))}function c(f){return f===o?(t.exit(s),l(o)):f===null?n(f):me(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),ze(t,c,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),u(f))}function u(f){return f===o||f===null||me(f)?(t.exit("chunkString"),c(f)):(t.consume(f),f===92?h:u)}function h(f){return f===o||f===92?(t.consume(f),u):u(f)}}function $a(t,e){let n;return r;function r(i){return me(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):Re(i)?ze(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}const p6={name:"definition",tokenize:g6},m6={partial:!0,tokenize:v6};function g6(t,e,n){const r=this;let i;return s;function s(p){return t.enter("definition"),o(p)}function o(p){return iT.call(r,t,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(p)}function a(p){return i=po(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),p===58?(t.enter("definitionMarker"),t.consume(p),t.exit("definitionMarker"),l):n(p)}function l(p){return Yt(p)?$a(t,c)(p):c(p)}function c(p){return rT(t,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(p)}function u(p){return t.attempt(m6,h,h)(p)}function h(p){return Re(p)?ze(t,f,"whitespace")(p):f(p)}function f(p){return p===null||me(p)?(t.exit("definition"),r.parser.defined.push(i),e(p)):n(p)}}function v6(t,e,n){return r;function r(a){return Yt(a)?$a(t,i)(a):n(a)}function i(a){return sT(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return Re(a)?ze(t,o,"whitespace")(a):o(a)}function o(a){return a===null||me(a)?e(a):n(a)}}const y6={name:"hardBreakEscape",tokenize:x6};function x6(t,e,n){return r;function r(s){return t.enter("hardBreakEscape"),t.consume(s),i}function i(s){return me(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const w6={name:"headingAtx",resolve:b6,tokenize:S6};function b6(t,e){let n=t.length-2,r=3,i,s;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},s={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},hr(t,r,n-r+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),t}function S6(t,e,n){let r=0;return i;function i(u){return t.enter("atxHeading"),s(u)}function s(u){return t.enter("atxHeadingSequence"),o(u)}function o(u){return u===35&&r++<6?(t.consume(u),o):u===null||Yt(u)?(t.exit("atxHeadingSequence"),a(u)):n(u)}function a(u){return u===35?(t.enter("atxHeadingSequence"),l(u)):u===null||me(u)?(t.exit("atxHeading"),e(u)):Re(u)?ze(t,a,"whitespace")(u):(t.enter("atxHeadingText"),c(u))}function l(u){return u===35?(t.consume(u),l):(t.exit("atxHeadingSequence"),a(u))}function c(u){return u===null||u===35||Yt(u)?(t.exit("atxHeadingText"),a(u)):(t.consume(u),c)}}const k6=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Rw=["pre","script","style","textarea"],C6={concrete:!0,name:"htmlFlow",resolveTo:_6,tokenize:T6},E6={partial:!0,tokenize:P6},N6={partial:!0,tokenize:A6};function _6(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function T6(t,e,n){const r=this;let i,s,o,a,l;return c;function c(T){return u(T)}function u(T){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(T),h}function h(T){return T===33?(t.consume(T),f):T===47?(t.consume(T),s=!0,m):T===63?(t.consume(T),i=3,r.interrupt?e:E):tr(T)?(t.consume(T),o=String.fromCharCode(T),w):n(T)}function f(T){return T===45?(t.consume(T),i=2,p):T===91?(t.consume(T),i=5,a=0,g):tr(T)?(t.consume(T),i=4,r.interrupt?e:E):n(T)}function p(T){return T===45?(t.consume(T),r.interrupt?e:E):n(T)}function g(T){const J="CDATA[";return T===J.charCodeAt(a++)?(t.consume(T),a===J.length?r.interrupt?e:j:g):n(T)}function m(T){return tr(T)?(t.consume(T),o=String.fromCharCode(T),w):n(T)}function w(T){if(T===null||T===47||T===62||Yt(T)){const J=T===47,he=o.toLowerCase();return!J&&!s&&Rw.includes(he)?(i=1,r.interrupt?e(T):j(T)):k6.includes(o.toLowerCase())?(i=6,J?(t.consume(T),v):r.interrupt?e(T):j(T)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(T):s?x(T):b(T))}return T===45||on(T)?(t.consume(T),o+=String.fromCharCode(T),w):n(T)}function v(T){return T===62?(t.consume(T),r.interrupt?e:j):n(T)}function x(T){return Re(T)?(t.consume(T),x):R(T)}function b(T){return T===47?(t.consume(T),R):T===58||T===95||tr(T)?(t.consume(T),S):Re(T)?(t.consume(T),b):R(T)}function S(T){return T===45||T===46||T===58||T===95||on(T)?(t.consume(T),S):N(T)}function N(T){return T===61?(t.consume(T),C):Re(T)?(t.consume(T),N):b(T)}function C(T){return T===null||T===60||T===61||T===62||T===96?n(T):T===34||T===39?(t.consume(T),l=T,_):Re(T)?(t.consume(T),C):P(T)}function _(T){return T===l?(t.consume(T),l=null,I):T===null||me(T)?n(T):(t.consume(T),_)}function P(T){return T===null||T===34||T===39||T===47||T===60||T===61||T===62||T===96||Yt(T)?N(T):(t.consume(T),P)}function I(T){return T===47||T===62||Re(T)?b(T):n(T)}function R(T){return T===62?(t.consume(T),O):n(T)}function O(T){return T===null||me(T)?j(T):Re(T)?(t.consume(T),O):n(T)}function j(T){return T===45&&i===2?(t.consume(T),L):T===60&&i===1?(t.consume(T),B):T===62&&i===4?(t.consume(T),z):T===63&&i===3?(t.consume(T),E):T===93&&i===5?(t.consume(T),$):me(T)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(E6,q,F)(T)):T===null||me(T)?(t.exit("htmlFlowData"),F(T)):(t.consume(T),j)}function F(T){return t.check(N6,M,q)(T)}function M(T){return t.enter("lineEnding"),t.consume(T),t.exit("lineEnding"),D}function D(T){return T===null||me(T)?F(T):(t.enter("htmlFlowData"),j(T))}function L(T){return T===45?(t.consume(T),E):j(T)}function B(T){return T===47?(t.consume(T),o="",A):j(T)}function A(T){if(T===62){const J=o.toLowerCase();return Rw.includes(J)?(t.consume(T),z):j(T)}return tr(T)&&o.length<8?(t.consume(T),o+=String.fromCharCode(T),A):j(T)}function $(T){return T===93?(t.consume(T),E):j(T)}function E(T){return T===62?(t.consume(T),z):T===45&&i===2?(t.consume(T),E):j(T)}function z(T){return T===null||me(T)?(t.exit("htmlFlowData"),q(T)):(t.consume(T),z)}function q(T){return t.exit("htmlFlow"),e(T)}}function A6(t,e,n){const r=this;return i;function i(o){return me(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}function P6(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(sh,e,n)}}const j6={name:"htmlText",tokenize:R6};function R6(t,e,n){const r=this;let i,s,o;return a;function a(E){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(E),l}function l(E){return E===33?(t.consume(E),c):E===47?(t.consume(E),N):E===63?(t.consume(E),b):tr(E)?(t.consume(E),P):n(E)}function c(E){return E===45?(t.consume(E),u):E===91?(t.consume(E),s=0,g):tr(E)?(t.consume(E),x):n(E)}function u(E){return E===45?(t.consume(E),p):n(E)}function h(E){return E===null?n(E):E===45?(t.consume(E),f):me(E)?(o=h,B(E)):(t.consume(E),h)}function f(E){return E===45?(t.consume(E),p):h(E)}function p(E){return E===62?L(E):E===45?f(E):h(E)}function g(E){const z="CDATA[";return E===z.charCodeAt(s++)?(t.consume(E),s===z.length?m:g):n(E)}function m(E){return E===null?n(E):E===93?(t.consume(E),w):me(E)?(o=m,B(E)):(t.consume(E),m)}function w(E){return E===93?(t.consume(E),v):m(E)}function v(E){return E===62?L(E):E===93?(t.consume(E),v):m(E)}function x(E){return E===null||E===62?L(E):me(E)?(o=x,B(E)):(t.consume(E),x)}function b(E){return E===null?n(E):E===63?(t.consume(E),S):me(E)?(o=b,B(E)):(t.consume(E),b)}function S(E){return E===62?L(E):b(E)}function N(E){return tr(E)?(t.consume(E),C):n(E)}function C(E){return E===45||on(E)?(t.consume(E),C):_(E)}function _(E){return me(E)?(o=_,B(E)):Re(E)?(t.consume(E),_):L(E)}function P(E){return E===45||on(E)?(t.consume(E),P):E===47||E===62||Yt(E)?I(E):n(E)}function I(E){return E===47?(t.consume(E),L):E===58||E===95||tr(E)?(t.consume(E),R):me(E)?(o=I,B(E)):Re(E)?(t.consume(E),I):L(E)}function R(E){return E===45||E===46||E===58||E===95||on(E)?(t.consume(E),R):O(E)}function O(E){return E===61?(t.consume(E),j):me(E)?(o=O,B(E)):Re(E)?(t.consume(E),O):I(E)}function j(E){return E===null||E===60||E===61||E===62||E===96?n(E):E===34||E===39?(t.consume(E),i=E,F):me(E)?(o=j,B(E)):Re(E)?(t.consume(E),j):(t.consume(E),M)}function F(E){return E===i?(t.consume(E),i=void 0,D):E===null?n(E):me(E)?(o=F,B(E)):(t.consume(E),F)}function M(E){return E===null||E===34||E===39||E===60||E===61||E===96?n(E):E===47||E===62||Yt(E)?I(E):(t.consume(E),M)}function D(E){return E===47||E===62||Yt(E)?I(E):n(E)}function L(E){return E===62?(t.consume(E),t.exit("htmlTextData"),t.exit("htmlText"),e):n(E)}function B(E){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(E),t.exit("lineEnding"),A}function A(E){return Re(E)?ze(t,$,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(E):$(E)}function $(E){return t.enter("htmlTextData"),o(E)}}const $v={name:"labelEnd",resolveAll:L6,resolveTo:$6,tokenize:D6},M6={tokenize:z6},I6={tokenize:F6},O6={tokenize:B6};function L6(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&hr(t,0,t.length,n),t}function $6(t,e){let n=t.length,r=0,i,s,o,a;for(;n--;)if(i=t[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const l={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},c={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},u={type:"labelText",start:{...t[s+r+2][1].end},end:{...t[o-2][1].start}};return a=[["enter",l,e],["enter",c,e]],a=yn(a,t.slice(s+1,s+r+3)),a=yn(a,[["enter",u,e]]),a=yn(a,Lv(e.parser.constructs.insideSpan.null,t.slice(s+r+4,o-3),e)),a=yn(a,[["exit",u,e],t[o-2],t[o-1],["exit",c,e]]),a=yn(a,t.slice(o+1)),a=yn(a,[["exit",l,e]]),hr(t,s,t.length,a),t}function D6(t,e,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(f){return s?s._inactive?h(f):(o=r.parser.defined.includes(po(r.sliceSerialize({start:s.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(f),t.exit("labelMarker"),t.exit("labelEnd"),l):n(f)}function l(f){return f===40?t.attempt(M6,u,o?u:h)(f):f===91?t.attempt(I6,u,o?c:h)(f):o?u(f):h(f)}function c(f){return t.attempt(O6,u,h)(f)}function u(f){return e(f)}function h(f){return s._balanced=!0,n(f)}}function z6(t,e,n){return r;function r(h){return t.enter("resource"),t.enter("resourceMarker"),t.consume(h),t.exit("resourceMarker"),i}function i(h){return Yt(h)?$a(t,s)(h):s(h)}function s(h){return h===41?u(h):rT(t,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function o(h){return Yt(h)?$a(t,l)(h):u(h)}function a(h){return n(h)}function l(h){return h===34||h===39||h===40?sT(t,c,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):u(h)}function c(h){return Yt(h)?$a(t,u)(h):u(h)}function u(h){return h===41?(t.enter("resourceMarker"),t.consume(h),t.exit("resourceMarker"),t.exit("resource"),e):n(h)}}function F6(t,e,n){const r=this;return i;function i(a){return iT.call(r,t,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(po(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(a):n(a)}function o(a){return n(a)}}function B6(t,e,n){return r;function r(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),i}function i(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const V6={name:"labelStartImage",resolveAll:$v.resolveAll,tokenize:U6};function U6(t,e,n){const r=this;return i;function i(a){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(a),t.exit("labelImageMarker"),s}function s(a){return a===91?(t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const H6={name:"labelStartLink",resolveAll:$v.resolveAll,tokenize:W6};function W6(t,e,n){const r=this;return i;function i(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):e(o)}}const _f={name:"lineEnding",tokenize:q6};function q6(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),ze(t,e,"linePrefix")}}const Qc={name:"thematicBreak",tokenize:K6};function K6(t,e,n){let r=0,i;return s;function s(c){return t.enter("thematicBreak"),o(c)}function o(c){return i=c,a(c)}function a(c){return c===i?(t.enter("thematicBreakSequence"),l(c)):r>=3&&(c===null||me(c))?(t.exit("thematicBreak"),e(c)):n(c)}function l(c){return c===i?(t.consume(c),r++,l):(t.exit("thematicBreakSequence"),Re(c)?ze(t,a,"whitespace")(c):a(c))}}const Ft={continuation:{tokenize:X6},exit:J6,name:"list",tokenize:Z6},Y6={partial:!0,tokenize:eH},G6={partial:!0,tokenize:Q6};function Z6(t,e,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(p){const g=r.containerState.type||(p===42||p===43||p===45?"listUnordered":"listOrdered");if(g==="listUnordered"?!r.containerState.marker||p===r.containerState.marker:Sm(p)){if(r.containerState.type||(r.containerState.type=g,t.enter(g,{_container:!0})),g==="listUnordered")return t.enter("listItemPrefix"),p===42||p===45?t.check(Qc,n,c)(p):c(p);if(!r.interrupt||p===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),l(p)}return n(p)}function l(p){return Sm(p)&&++o<10?(t.consume(p),l):(!r.interrupt||o<2)&&(r.containerState.marker?p===r.containerState.marker:p===41||p===46)?(t.exit("listItemValue"),c(p)):n(p)}function c(p){return t.enter("listItemMarker"),t.consume(p),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||p,t.check(sh,r.interrupt?n:u,t.attempt(Y6,f,h))}function u(p){return r.containerState.initialBlankLine=!0,s++,f(p)}function h(p){return Re(p)?(t.enter("listItemPrefixWhitespace"),t.consume(p),t.exit("listItemPrefixWhitespace"),f):n(p)}function f(p){return r.containerState.size=s+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(p)}}function X6(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(sh,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,ze(t,e,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!Re(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(G6,e,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,ze(t,t.attempt(Ft,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function Q6(t,e,n){const r=this;return ze(t,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(s):n(s)}}function J6(t){t.exit(this.containerState.type)}function eH(t,e,n){const r=this;return ze(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!Re(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const Mw={name:"setextUnderline",resolveTo:tH,tokenize:nH};function tH(t,e){let n=t.length,r,i,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",s?(t.splice(i,0,["enter",o,e]),t.splice(s+1,0,["exit",t[r][1],e]),t[r][1].end={...t[s][1].end}):t[r][1]=o,t.push(["exit",o,e]),t}function nH(t,e,n){const r=this;let i;return s;function s(c){let u=r.events.length,h;for(;u--;)if(r.events[u][1].type!=="lineEnding"&&r.events[u][1].type!=="linePrefix"&&r.events[u][1].type!=="content"){h=r.events[u][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||h)?(t.enter("setextHeadingLine"),i=c,o(c)):n(c)}function o(c){return t.enter("setextHeadingLineSequence"),a(c)}function a(c){return c===i?(t.consume(c),a):(t.exit("setextHeadingLineSequence"),Re(c)?ze(t,l,"lineSuffix")(c):l(c))}function l(c){return c===null||me(c)?(t.exit("setextHeadingLine"),e(c)):n(c)}}const rH={tokenize:iH};function iH(t){const e=this,n=t.attempt(sh,r,t.attempt(this.parser.constructs.flowInitial,i,ze(t,t.attempt(this.parser.constructs.flow,i,t.attempt(c6,i)),"linePrefix")));return n;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const sH={resolveAll:aT()},oH=oT("string"),aH=oT("text");function oT(t){return{resolveAll:aT(t==="text"?lH:void 0),tokenize:e};function e(n){const r=this,i=this.parser.constructs[t],s=n.attempt(i,o,a);return o;function o(u){return c(u)?s(u):a(u)}function a(u){if(u===null){n.consume(u);return}return n.enter("data"),n.consume(u),l}function l(u){return c(u)?(n.exit("data"),s(u)):(n.consume(u),l)}function c(u){if(u===null)return!0;const h=i[u];let f=-1;if(h)for(;++f<h.length;){const p=h[f];if(!p.previous||p.previous.call(r,r.previous))return!0}return!1}}}function aT(t){return e;function e(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return t?t(n,r):n}}function lH(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let s=i.length,o=-1,a=0,l;for(;s--;){const c=i[s];if(typeof c=="string"){for(o=c.length;c.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(c===-2)l=!0,a++;else if(c!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(a=0),a){const c={type:n===t.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...c.start},r.start.offset===r.end.offset?Object.assign(r,c):(t.splice(n,0,["enter",c,e],["exit",c,e]),n+=2)}n++}return t}const cH={42:Ft,43:Ft,45:Ft,48:Ft,49:Ft,50:Ft,51:Ft,52:Ft,53:Ft,54:Ft,55:Ft,56:Ft,57:Ft,62:J_},uH={91:p6},dH={[-2]:Nf,[-1]:Nf,32:Nf},hH={35:w6,42:Qc,45:[Mw,Qc],60:C6,61:Mw,95:Qc,96:jw,126:jw},fH={38:tT,92:eT},pH={[-5]:_f,[-4]:_f,[-3]:_f,33:V6,38:tT,42:km,60:[HU,j6],91:H6,92:[y6,eT],93:$v,95:km,96:r6},mH={null:[km,sH]},gH={null:[42,95]},vH={null:[]},yH=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:gH,contentInitial:uH,disable:vH,document:cH,flow:hH,flowInitial:dH,insideSpan:mH,string:fH,text:pH},Symbol.toStringTag,{value:"Module"}));function xH(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let o=[],a=[];const l={attempt:_(N),check:_(C),consume:x,enter:b,exit:S,interrupt:_(C,{interrupt:!0})},c={code:null,containerState:{},defineSkip:m,events:[],now:g,parser:t,previous:null,sliceSerialize:f,sliceStream:p,write:h};let u=e.tokenize.call(c,l);return e.resolveAll&&s.push(e),c;function h(O){return o=yn(o,O),w(),o[o.length-1]!==null?[]:(P(e,0),c.events=Lv(s,c.events,c),c.events)}function f(O,j){return bH(p(O),j)}function p(O){return wH(o,O)}function g(){const{_bufferIndex:O,_index:j,line:F,column:M,offset:D}=r;return{_bufferIndex:O,_index:j,line:F,column:M,offset:D}}function m(O){i[O.line]=O.column,R()}function w(){let O;for(;r._index<o.length;){const j=o[r._index];if(typeof j=="string")for(O=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===O&&r._bufferIndex<j.length;)v(j.charCodeAt(r._bufferIndex));else v(j)}}function v(O){u=u(O)}function x(O){me(O)?(r.line++,r.column=1,r.offset+=O===-3?2:1,R()):O!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=O}function b(O,j){const F=j||{};return F.type=O,F.start=g(),c.events.push(["enter",F,c]),a.push(F),F}function S(O){const j=a.pop();return j.end=g(),c.events.push(["exit",j,c]),j}function N(O,j){P(O,j.from)}function C(O,j){j.restore()}function _(O,j){return F;function F(M,D,L){let B,A,$,E;return Array.isArray(M)?q(M):"tokenize"in M?q([M]):z(M);function z(ce){return re;function re(fe){const W=fe!==null&&ce[fe],K=fe!==null&&ce.null,ne=[...Array.isArray(W)?W:W?[W]:[],...Array.isArray(K)?K:K?[K]:[]];return q(ne)(fe)}}function q(ce){return B=ce,A=0,ce.length===0?L:T(ce[A])}function T(ce){return re;function re(fe){return E=I(),$=ce,ce.partial||(c.currentConstruct=ce),ce.name&&c.parser.constructs.disable.null.includes(ce.name)?he():ce.tokenize.call(j?Object.assign(Object.create(c),j):c,l,J,he)(fe)}}function J(ce){return O($,E),D}function he(ce){return E.restore(),++A<B.length?T(B[A]):L}}}function P(O,j){O.resolveAll&&!s.includes(O)&&s.push(O),O.resolve&&hr(c.events,j,c.events.length-j,O.resolve(c.events.slice(j),c)),O.resolveTo&&(c.events=O.resolveTo(c.events,c))}function I(){const O=g(),j=c.previous,F=c.currentConstruct,M=c.events.length,D=Array.from(a);return{from:M,restore:L};function L(){r=O,c.previous=j,c.currentConstruct=F,c.events.length=M,a=D,R()}}function R(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function wH(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let o;if(n===i)o=[t[n].slice(r,s)];else{if(o=t.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(t[i].slice(0,s))}return o}function bH(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}function SH(t){const r={constructs:AU([yH,...(t||{}).extensions||[]]),content:i($U),defined:[],document:i(zU),flow:i(rH),lazy:{},string:i(oH),text:i(aH)};return r;function i(s){return o;function o(a){return xH(r,s,a)}}}function kH(t){for(;!nT(t););return t}const Iw=/[\0\t\n\r]/g;function CH(){let t=1,e="",n=!0,r;return i;function i(s,o,a){const l=[];let c,u,h,f,p;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),h=0,e="",n&&(s.charCodeAt(0)===65279&&h++,n=void 0);h<s.length;){if(Iw.lastIndex=h,c=Iw.exec(s),f=c&&c.index!==void 0?c.index:s.length,p=s.charCodeAt(f),!c){e=s.slice(h);break}if(p===10&&h===f&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),h<f&&(l.push(s.slice(h,f)),t+=f-h),p){case 0:{l.push(65533),t++;break}case 9:{for(u=Math.ceil(t/4)*4,l.push(-2);t++<u;)l.push(-1);break}case 10:{l.push(-4),t=1;break}default:r=!0,t=1}h=f+1}return a&&(r&&l.push(-5),e&&l.push(e),l.push(null)),l}}const EH=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function NH(t){return t.replace(EH,_H)}function _H(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return Q_(n.slice(s?2:1),s?16:10)}return Ov(n)||t}const lT={}.hasOwnProperty;function TH(t,e,n){return typeof e!="string"&&(n=e,e=void 0),AH(n)(kH(SH(n).document().write(CH()(t,e,!0))))}function AH(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Nn),autolinkProtocol:I,autolinkEmail:I,atxHeading:s(nt),blockQuote:s(K),characterEscape:I,characterReference:I,codeFenced:s(ne),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(ne,o),codeText:s(Q,o),codeTextData:I,data:I,codeFlowValue:I,definition:s(ge),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Te),hardBreakEscape:s(dt),hardBreakTrailing:s(dt),htmlFlow:s(zt,o),htmlFlowData:I,htmlText:s(zt,o),htmlTextData:I,image:s(Ii),label:o,link:s(Nn),listItem:s(yA),listItemValue:f,listOrdered:s(uh,h),listUnordered:s(uh),paragraph:s(xA),reference:T,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(nt),strong:s(wA),thematicBreak:s(SA)},exit:{atxHeading:l(),atxHeadingSequence:N,autolink:l(),autolinkEmail:W,autolinkProtocol:fe,blockQuote:l(),characterEscapeValue:R,characterReferenceMarkerHexadecimal:he,characterReferenceMarkerNumeric:he,characterReferenceValue:ce,characterReference:re,codeFenced:l(w),codeFencedFence:m,codeFencedFenceInfo:p,codeFencedFenceMeta:g,codeFlowValue:R,codeIndented:l(v),codeText:l(D),codeTextData:R,data:R,definition:l(),definitionDestinationString:S,definitionLabelString:x,definitionTitleString:b,emphasis:l(),hardBreakEscape:l(j),hardBreakTrailing:l(j),htmlFlow:l(F),htmlFlowData:R,htmlText:l(M),htmlTextData:R,image:l(B),label:$,labelText:A,lineEnding:O,link:l(L),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:J,resourceDestinationString:E,resourceTitleString:z,resource:q,setextHeading:l(P),setextHeadingLineSequence:_,setextHeadingText:C,strong:l(),thematicBreak:l()}};cT(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(H){let ee={type:"root",children:[]};const ve={stack:[ee],tokenStack:[],config:e,enter:a,exit:c,buffer:o,resume:u,data:n},Ne=[];let Oe=-1;for(;++Oe<H.length;)if(H[Oe][1].type==="listOrdered"||H[Oe][1].type==="listUnordered")if(H[Oe][0]==="enter")Ne.push(Oe);else{const _n=Ne.pop();Oe=i(H,_n,Oe)}for(Oe=-1;++Oe<H.length;){const _n=e[H[Oe][0]];lT.call(_n,H[Oe][1].type)&&_n[H[Oe][1].type].call(Object.assign({sliceSerialize:H[Oe][2].sliceSerialize},ve),H[Oe][1])}if(ve.tokenStack.length>0){const _n=ve.tokenStack[ve.tokenStack.length-1];(_n[1]||Ow).call(ve,void 0,_n[0])}for(ee.position={start:Zr(H.length>0?H[0][1].start:{line:1,column:1,offset:0}),end:Zr(H.length>0?H[H.length-2][1].end:{line:1,column:1,offset:0})},Oe=-1;++Oe<e.transforms.length;)ee=e.transforms[Oe](ee)||ee;return ee}function i(H,ee,ve){let Ne=ee-1,Oe=-1,_n=!1,Oi,gr,qo,Ko;for(;++Ne<=ve;){const Qt=H[Ne];switch(Qt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Qt[0]==="enter"?Oe++:Oe--,Ko=void 0;break}case"lineEndingBlank":{Qt[0]==="enter"&&(Oi&&!Ko&&!Oe&&!qo&&(qo=Ne),Ko=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Ko=void 0}if(!Oe&&Qt[0]==="enter"&&Qt[1].type==="listItemPrefix"||Oe===-1&&Qt[0]==="exit"&&(Qt[1].type==="listUnordered"||Qt[1].type==="listOrdered")){if(Oi){let bs=Ne;for(gr=void 0;bs--;){const vr=H[bs];if(vr[1].type==="lineEnding"||vr[1].type==="lineEndingBlank"){if(vr[0]==="exit")continue;gr&&(H[gr][1].type="lineEndingBlank",_n=!0),vr[1].type="lineEnding",gr=bs}else if(!(vr[1].type==="linePrefix"||vr[1].type==="blockQuotePrefix"||vr[1].type==="blockQuotePrefixWhitespace"||vr[1].type==="blockQuoteMarker"||vr[1].type==="listItemIndent"))break}qo&&(!gr||qo<gr)&&(Oi._spread=!0),Oi.end=Object.assign({},gr?H[gr][1].start:Qt[1].end),H.splice(gr||Ne,0,["exit",Oi,Qt[2]]),Ne++,ve++}if(Qt[1].type==="listItemPrefix"){const bs={type:"listItem",_spread:!1,start:Object.assign({},Qt[1].start),end:void 0};Oi=bs,H.splice(Ne,0,["enter",bs,Qt[2]]),Ne++,ve++,qo=void 0,Ko=!0}}}return H[ee][1]._spread=_n,ve}function s(H,ee){return ve;function ve(Ne){a.call(this,H(Ne),Ne),ee&&ee.call(this,Ne)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(H,ee,ve){this.stack[this.stack.length-1].children.push(H),this.stack.push(H),this.tokenStack.push([ee,ve||void 0]),H.position={start:Zr(ee.start),end:void 0}}function l(H){return ee;function ee(ve){H&&H.call(this,ve),c.call(this,ve)}}function c(H,ee){const ve=this.stack.pop(),Ne=this.tokenStack.pop();if(Ne)Ne[0].type!==H.type&&(ee?ee.call(this,H,Ne[0]):(Ne[1]||Ow).call(this,H,Ne[0]));else throw new Error("Cannot close `"+H.type+"` ("+La({start:H.start,end:H.end})+"): it’s not open");ve.position.end=Zr(H.end)}function u(){return _U(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function f(H){if(this.data.expectingFirstListItemValue){const ee=this.stack[this.stack.length-2];ee.start=Number.parseInt(this.sliceSerialize(H),10),this.data.expectingFirstListItemValue=void 0}}function p(){const H=this.resume(),ee=this.stack[this.stack.length-1];ee.lang=H}function g(){const H=this.resume(),ee=this.stack[this.stack.length-1];ee.meta=H}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function w(){const H=this.resume(),ee=this.stack[this.stack.length-1];ee.value=H.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function v(){const H=this.resume(),ee=this.stack[this.stack.length-1];ee.value=H.replace(/(\r?\n|\r)$/g,"")}function x(H){const ee=this.resume(),ve=this.stack[this.stack.length-1];ve.label=ee,ve.identifier=po(this.sliceSerialize(H)).toLowerCase()}function b(){const H=this.resume(),ee=this.stack[this.stack.length-1];ee.title=H}function S(){const H=this.resume(),ee=this.stack[this.stack.length-1];ee.url=H}function N(H){const ee=this.stack[this.stack.length-1];if(!ee.depth){const ve=this.sliceSerialize(H).length;ee.depth=ve}}function C(){this.data.setextHeadingSlurpLineEnding=!0}function _(H){const ee=this.stack[this.stack.length-1];ee.depth=this.sliceSerialize(H).codePointAt(0)===61?1:2}function P(){this.data.setextHeadingSlurpLineEnding=void 0}function I(H){const ve=this.stack[this.stack.length-1].children;let Ne=ve[ve.length-1];(!Ne||Ne.type!=="text")&&(Ne=bA(),Ne.position={start:Zr(H.start),end:void 0},ve.push(Ne)),this.stack.push(Ne)}function R(H){const ee=this.stack.pop();ee.value+=this.sliceSerialize(H),ee.position.end=Zr(H.end)}function O(H){const ee=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ve=ee.children[ee.children.length-1];ve.position.end=Zr(H.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(ee.type)&&(I.call(this,H),R.call(this,H))}function j(){this.data.atHardBreak=!0}function F(){const H=this.resume(),ee=this.stack[this.stack.length-1];ee.value=H}function M(){const H=this.resume(),ee=this.stack[this.stack.length-1];ee.value=H}function D(){const H=this.resume(),ee=this.stack[this.stack.length-1];ee.value=H}function L(){const H=this.stack[this.stack.length-1];if(this.data.inReference){const ee=this.data.referenceType||"shortcut";H.type+="Reference",H.referenceType=ee,delete H.url,delete H.title}else delete H.identifier,delete H.label;this.data.referenceType=void 0}function B(){const H=this.stack[this.stack.length-1];if(this.data.inReference){const ee=this.data.referenceType||"shortcut";H.type+="Reference",H.referenceType=ee,delete H.url,delete H.title}else delete H.identifier,delete H.label;this.data.referenceType=void 0}function A(H){const ee=this.sliceSerialize(H),ve=this.stack[this.stack.length-2];ve.label=NH(ee),ve.identifier=po(ee).toLowerCase()}function $(){const H=this.stack[this.stack.length-1],ee=this.resume(),ve=this.stack[this.stack.length-1];if(this.data.inReference=!0,ve.type==="link"){const Ne=H.children;ve.children=Ne}else ve.alt=ee}function E(){const H=this.resume(),ee=this.stack[this.stack.length-1];ee.url=H}function z(){const H=this.resume(),ee=this.stack[this.stack.length-1];ee.title=H}function q(){this.data.inReference=void 0}function T(){this.data.referenceType="collapsed"}function J(H){const ee=this.resume(),ve=this.stack[this.stack.length-1];ve.label=ee,ve.identifier=po(this.sliceSerialize(H)).toLowerCase(),this.data.referenceType="full"}function he(H){this.data.characterReferenceType=H.type}function ce(H){const ee=this.sliceSerialize(H),ve=this.data.characterReferenceType;let Ne;ve?(Ne=Q_(ee,ve==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Ne=Ov(ee);const Oe=this.stack[this.stack.length-1];Oe.value+=Ne}function re(H){const ee=this.stack.pop();ee.position.end=Zr(H.end)}function fe(H){R.call(this,H);const ee=this.stack[this.stack.length-1];ee.url=this.sliceSerialize(H)}function W(H){R.call(this,H);const ee=this.stack[this.stack.length-1];ee.url="mailto:"+this.sliceSerialize(H)}function K(){return{type:"blockquote",children:[]}}function ne(){return{type:"code",lang:null,meta:null,value:""}}function Q(){return{type:"inlineCode",value:""}}function ge(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Te(){return{type:"emphasis",children:[]}}function nt(){return{type:"heading",depth:0,children:[]}}function dt(){return{type:"break"}}function zt(){return{type:"html",value:""}}function Ii(){return{type:"image",title:null,url:"",alt:null}}function Nn(){return{type:"link",title:null,url:"",children:[]}}function uh(H){return{type:"list",ordered:H.type==="listOrdered",start:null,spread:H._spread,children:[]}}function yA(H){return{type:"listItem",spread:H._spread,checked:null,children:[]}}function xA(){return{type:"paragraph",children:[]}}function wA(){return{type:"strong",children:[]}}function bA(){return{type:"text",value:""}}function SA(){return{type:"thematicBreak"}}}function Zr(t){return{line:t.line,column:t.column,offset:t.offset}}function cT(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?cT(t,r):PH(t,r)}}function PH(t,e){let n;for(n in e)if(lT.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function Ow(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+La({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+La({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+La({start:e.start,end:e.end})+") is still open")}function jH(t){const e=this;e.parser=n;function n(r){return TH(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function RH(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function MH(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function IH(t,e){const n=e.value?e.value+`
`:"",r={};e.lang&&(r.className=["language-"+e.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(i.data={meta:e.meta}),t.patch(e,i),i=t.applyData(e,i),i={type:"element",tagName:"pre",properties:{},children:[i]},t.patch(e,i),i}function OH(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function LH(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function $H(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=Wo(r.toLowerCase()),s=t.footnoteOrder.indexOf(r);let o,a=t.footnoteCounts.get(r);a===void 0?(a=0,t.footnoteOrder.push(r),o=t.footnoteOrder.length):o=s+1,a+=1,t.footnoteCounts.set(r,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return t.patch(e,c),t.applyData(e,c)}function DH(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function zH(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function uT(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=t.all(e),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function FH(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return uT(t,e);const i={src:Wo(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,s),t.applyData(e,s)}function BH(t,e){const n={src:Wo(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function VH(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function UH(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return uT(t,e);const i={href:Wo(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function HH(t,e){const n={href:Wo(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function WH(t,e,n){const r=t.all(e),i=n?qH(n):dT(e),s={},o=[];if(typeof e.checked=="boolean"){const u=r[0];let h;u&&u.type==="element"&&u.tagName==="p"?h=u:(h={type:"element",tagName:"p",properties:{},children:[]},r.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const u=r[a];(i||a!==0||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!i?o.push(...u.children):o.push(u)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:s,children:o};return t.patch(e,c),t.applyData(e,c)}function qH(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=dT(n[r])}return e}function dT(t){const e=t.spread;return e??t.children.length>1}function KH(t,e){const n={},r=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,s),t.applyData(e,s)}function YH(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function GH(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function ZH(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function XH(t,e){const n=t.all(e),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},a=jv(e.children[1]),l=W_(e.children[e.children.length-1]);a&&l&&(o.position={start:a,end:l}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function QH(t,e,n){const r=n?n.children:void 0,s=(r?r.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:e.children.length;let l=-1;const c=[];for(;++l<a;){const h=e.children[l],f={},p=o?o[l]:void 0;p&&(f.align=p);let g={type:"element",tagName:s,properties:f,children:[]};h&&(g.children=t.all(h),t.patch(h,g),g=t.applyData(h,g)),c.push(g)}const u={type:"element",tagName:"tr",properties:{},children:t.wrap(c,!0)};return t.patch(e,u),t.applyData(e,u)}function JH(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const Lw=9,$w=32;function eW(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),i=0;const s=[];for(;r;)s.push(Dw(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(e);return s.push(Dw(e.slice(i),i>0,!1)),s.join("")}function Dw(t,e,n){let r=0,i=t.length;if(e){let s=t.codePointAt(r);for(;s===Lw||s===$w;)r++,s=t.codePointAt(r)}if(n){let s=t.codePointAt(i-1);for(;s===Lw||s===$w;)i--,s=t.codePointAt(i-1)}return i>r?t.slice(r,i):""}function tW(t,e){const n={type:"text",value:eW(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function nW(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const rW={blockquote:RH,break:MH,code:IH,delete:OH,emphasis:LH,footnoteReference:$H,heading:DH,html:zH,imageReference:FH,image:BH,inlineCode:VH,linkReference:UH,link:HH,listItem:WH,list:KH,paragraph:YH,root:GH,strong:ZH,table:XH,tableCell:JH,tableRow:QH,text:tW,thematicBreak:nW,toml:Tc,yaml:Tc,definition:Tc,footnoteDefinition:Tc};function Tc(){}const hT=-1,oh=0,Da=1,Zu=2,Dv=3,zv=4,Fv=5,Bv=6,fT=7,pT=8,zw=typeof self=="object"?self:globalThis,iW=(t,e)=>{const n=(i,s)=>(t.set(s,i),i),r=i=>{if(t.has(i))return t.get(i);const[s,o]=e[i];switch(s){case oh:case hT:return n(o,i);case Da:{const a=n([],i);for(const l of o)a.push(r(l));return a}case Zu:{const a=n({},i);for(const[l,c]of o)a[r(l)]=r(c);return a}case Dv:return n(new Date(o),i);case zv:{const{source:a,flags:l}=o;return n(new RegExp(a,l),i)}case Fv:{const a=n(new Map,i);for(const[l,c]of o)a.set(r(l),r(c));return a}case Bv:{const a=n(new Set,i);for(const l of o)a.add(r(l));return a}case fT:{const{name:a,message:l}=o;return n(new zw[a](l),i)}case pT:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:a}=new Uint8Array(o);return n(new DataView(a),o)}}return n(new zw[s](o),i)};return r},Fw=t=>iW(new Map,t)(0),Ps="",{toString:sW}={},{keys:oW}=Object,ca=t=>{const e=typeof t;if(e!=="object"||!t)return[oh,e];const n=sW.call(t).slice(8,-1);switch(n){case"Array":return[Da,Ps];case"Object":return[Zu,Ps];case"Date":return[Dv,Ps];case"RegExp":return[zv,Ps];case"Map":return[Fv,Ps];case"Set":return[Bv,Ps];case"DataView":return[Da,n]}return n.includes("Array")?[Da,n]:n.includes("Error")?[fT,n]:[Zu,n]},Ac=([t,e])=>t===oh&&(e==="function"||e==="symbol"),aW=(t,e,n,r)=>{const i=(o,a)=>{const l=r.push(o)-1;return n.set(a,l),l},s=o=>{if(n.has(o))return n.get(o);let[a,l]=ca(o);switch(a){case oh:{let u=o;switch(l){case"bigint":a=pT,u=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+l);u=null;break;case"undefined":return i([hT],o)}return i([a,u],o)}case Da:{if(l){let f=o;return l==="DataView"?f=new Uint8Array(o.buffer):l==="ArrayBuffer"&&(f=new Uint8Array(o)),i([l,[...f]],o)}const u=[],h=i([a,u],o);for(const f of o)u.push(s(f));return h}case Zu:{if(l)switch(l){case"BigInt":return i([l,o.toString()],o);case"Boolean":case"Number":case"String":return i([l,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const u=[],h=i([a,u],o);for(const f of oW(o))(t||!Ac(ca(o[f])))&&u.push([s(f),s(o[f])]);return h}case Dv:return i([a,o.toISOString()],o);case zv:{const{source:u,flags:h}=o;return i([a,{source:u,flags:h}],o)}case Fv:{const u=[],h=i([a,u],o);for(const[f,p]of o)(t||!(Ac(ca(f))||Ac(ca(p))))&&u.push([s(f),s(p)]);return h}case Bv:{const u=[],h=i([a,u],o);for(const f of o)(t||!Ac(ca(f)))&&u.push(s(f));return h}}const{message:c}=o;return i([a,{name:l,message:c}],o)};return s},Bw=(t,{json:e,lossy:n}={})=>{const r=[];return aW(!(e||n),!!e,new Map,r)(t),r},Xu=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?Fw(Bw(t,e)):structuredClone(t):(t,e)=>Fw(Bw(t,e));function lW(t,e){const n=[{type:"text",value:"↩"}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function cW(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function uW(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||lW,r=t.options.footnoteBackLabel||cW,i=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<t.footnoteOrder.length;){const c=t.footnoteById.get(t.footnoteOrder[l]);if(!c)continue;const u=t.all(c),h=String(c.identifier).toUpperCase(),f=Wo(h.toLowerCase());let p=0;const g=[],m=t.footnoteCounts.get(h);for(;m!==void 0&&++p<=m;){g.length>0&&g.push({type:"text",value:" "});let x=typeof n=="string"?n:n(l,p);typeof x=="string"&&(x={type:"text",value:x}),g.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+f+(p>1?"-"+p:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,p),className:["data-footnote-backref"]},children:Array.isArray(x)?x:[x]})}const w=u[u.length-1];if(w&&w.type==="element"&&w.tagName==="p"){const x=w.children[w.children.length-1];x&&x.type==="text"?x.value+=" ":w.children.push({type:"text",value:" "}),w.children.push(...g)}else u.push(...g);const v={type:"element",tagName:"li",properties:{id:e+"fn-"+f},children:t.wrap(u,!0)};t.patch(c,v),a.push(v)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...Xu(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(a,!0)},{type:"text",value:`
`}]}}const mT=function(t){if(t==null)return pW;if(typeof t=="function")return ah(t);if(typeof t=="object")return Array.isArray(t)?dW(t):hW(t);if(typeof t=="string")return fW(t);throw new Error("Expected function, string, or object as test")};function dW(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=mT(t[n]);return ah(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function hW(t){const e=t;return ah(n);function n(r){const i=r;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function fW(t){return ah(e);function e(n){return n&&n.type===t}}function ah(t){return e;function e(n,r,i){return!!(mW(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function pW(){return!0}function mW(t){return t!==null&&typeof t=="object"&&"type"in t}const gT=[],gW=!0,Vw=!1,vW="skip";function yW(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const s=mT(i),o=r?-1:1;a(t,void 0,[])();function a(l,c,u){const h=l&&typeof l=="object"?l:{};if(typeof h.type=="string"){const p=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(l.type+(p?"<"+p+">":""))+")"})}return f;function f(){let p=gT,g,m,w;if((!e||s(l,c,u[u.length-1]||void 0))&&(p=xW(n(l,u)),p[0]===Vw))return p;if("children"in l&&l.children){const v=l;if(v.children&&p[0]!==vW)for(m=(r?v.children.length:-1)+o,w=u.concat(v);m>-1&&m<v.children.length;){const x=v.children[m];if(g=a(x,m,w)(),g[0]===Vw)return g;m=typeof g[1]=="number"?g[1]:m+o}}return p}}}function xW(t){return Array.isArray(t)?t:typeof t=="number"?[gW,t]:t==null?gT:[t]}function vT(t,e,n,r){let i,s,o;typeof e=="function"?(s=void 0,o=e,i=n):(s=e,o=n,i=r),yW(t,s,a,i);function a(l,c){const u=c[c.length-1],h=u?u.children.indexOf(l):void 0;return o(l,h,u)}}const Cm={}.hasOwnProperty,wW={};function bW(t,e){const n=e||wW,r=new Map,i=new Map,s=new Map,o={...rW,...n.handlers},a={all:c,applyData:kW,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:l,options:n,patch:SW,wrap:EW};return vT(t,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const h=u.type==="definition"?r:i,f=String(u.identifier).toUpperCase();h.has(f)||h.set(f,u)}}),a;function l(u,h){const f=u.type,p=a.handlers[f];if(Cm.call(a.handlers,f)&&p)return p(a,u,h);if(a.options.passThrough&&a.options.passThrough.includes(f)){if("children"in u){const{children:m,...w}=u,v=Xu(w);return v.children=a.all(u),v}return Xu(u)}return(a.options.unknownHandler||CW)(a,u,h)}function c(u){const h=[];if("children"in u){const f=u.children;let p=-1;for(;++p<f.length;){const g=a.one(f[p],u);if(g){if(p&&f[p-1].type==="break"&&(!Array.isArray(g)&&g.type==="text"&&(g.value=Uw(g.value)),!Array.isArray(g)&&g.type==="element")){const m=g.children[0];m&&m.type==="text"&&(m.value=Uw(m.value))}Array.isArray(g)?h.push(...g):h.push(g)}}}return h}}function SW(t,e){t.position&&(e.position=sU(t))}function kW(t,e){let n=e;if(t&&t.data){const r=t.data.hName,i=t.data.hChildren,s=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,Xu(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function CW(t,e){const n=e.data||{},r="value"in e&&!(Cm.call(n,"hProperties")||Cm.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function EW(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function Uw(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function Hw(t,e){const n=bW(t,e),r=n.one(t,void 0),i=uW(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function NW(t,e){return t&&"run"in t?async function(n,r){const i=Hw(n,{file:r,...e});await t.run(i,r)}:function(n,r){return Hw(n,{file:r,...t||e})}}function Ww(t){if(t)throw t}var Jc=Object.prototype.hasOwnProperty,yT=Object.prototype.toString,qw=Object.defineProperty,Kw=Object.getOwnPropertyDescriptor,Yw=function(e){return typeof Array.isArray=="function"?Array.isArray(e):yT.call(e)==="[object Array]"},Gw=function(e){if(!e||yT.call(e)!=="[object Object]")return!1;var n=Jc.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&Jc.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;var i;for(i in e);return typeof i>"u"||Jc.call(e,i)},Zw=function(e,n){qw&&n.name==="__proto__"?qw(e,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):e[n.name]=n.newValue},Xw=function(e,n){if(n==="__proto__")if(Jc.call(e,n)){if(Kw)return Kw(e,n).value}else return;return e[n]},_W=function t(){var e,n,r,i,s,o,a=arguments[0],l=1,c=arguments.length,u=!1;for(typeof a=="boolean"&&(u=a,a=arguments[1]||{},l=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});l<c;++l)if(e=arguments[l],e!=null)for(n in e)r=Xw(a,n),i=Xw(e,n),a!==i&&(u&&i&&(Gw(i)||(s=Yw(i)))?(s?(s=!1,o=r&&Yw(r)?r:[]):o=r&&Gw(r)?r:{},Zw(a,{name:n,newValue:t(u,o,i)})):typeof i<"u"&&Zw(a,{name:n,newValue:i}));return a};const Tf=Hn(_W);function Em(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function TW(){const t=[],e={run:n,use:r};return e;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(l,...c){const u=t[++s];let h=-1;if(l){o(l);return}for(;++h<i.length;)(c[h]===null||c[h]===void 0)&&(c[h]=i[h]);i=c,u?AW(u,a)(...c):o(null,...c)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function AW(t,e){let n;return r;function r(...o){const a=t.length>o.length;let l;a&&o.push(i);try{l=t.apply(this,o)}catch(c){const u=c;if(a&&n)throw u;return i(u)}a||(l&&l.then&&typeof l.then=="function"?l.then(s,i):l instanceof Error?i(l):s(l))}function i(o,...a){n||(n=!0,e(o,...a))}function s(o){i(null,o)}}const Qn={basename:PW,dirname:jW,extname:RW,join:MW,sep:"/"};function PW(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');ql(t);let n=0,r=-1,i=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let o=-1,a=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(t.codePointAt(i)===e.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=t.length),t.slice(n,r)}function jW(t){if(ql(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function RW(t){ql(t);let e=t.length,n=-1,r=0,i=-1,s=0,o;for(;e--;){const a=t.codePointAt(e);if(a===47){if(o){r=e+1;break}continue}n<0&&(o=!0,n=e+1),a===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function MW(...t){let e=-1,n;for(;++e<t.length;)ql(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":IW(n)}function IW(t){ql(t);const e=t.codePointAt(0)===47;let n=OW(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function OW(t,e){let n="",r=0,i=-1,s=0,o=-1,a,l;for(;++o<=t.length;){if(o<t.length)a=t.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function ql(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const LW={cwd:$W};function $W(){return"/"}function Nm(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function DW(t){if(typeof t=="string")t=new URL(t);else if(!Nm(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return zW(t)}function zW(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const Af=["history","path","basename","stem","extname","dirname"];class xT{constructor(e){let n;e?Nm(e)?n={path:e}:typeof e=="string"||FW(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":LW.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Af.length;){const s=Af[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)Af.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Qn.basename(this.path):void 0}set basename(e){jf(e,"basename"),Pf(e,"basename"),this.path=Qn.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Qn.dirname(this.path):void 0}set dirname(e){Qw(this.basename,"dirname"),this.path=Qn.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Qn.extname(this.path):void 0}set extname(e){if(Pf(e,"extname"),Qw(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Qn.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Nm(e)&&(e=DW(e)),jf(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Qn.basename(this.path,this.extname):void 0}set stem(e){jf(e,"stem"),Pf(e,"stem"),this.path=Qn.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new Pt(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function Pf(t,e){if(t&&t.includes(Qn.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Qn.sep+"`")}function jf(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function Qw(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function FW(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const BW=function(t){const r=this.constructor.prototype,i=r[t],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},VW={}.hasOwnProperty;class Vv extends BW{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=TW()}copy(){const e=new Vv;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(Tf(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(If("data",this.frozen),this.namespace[e]=n,this):VW.call(this.namespace,e)&&this.namespace[e]||void 0:e?(If("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=Pc(e),r=this.parser||this.Parser;return Rf("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),Rf("process",this.parser||this.Parser),Mf("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=Pc(e),l=r.parse(a);r.run(l,a,function(u,h,f){if(u||!h||!f)return c(u);const p=h,g=r.stringify(p,f);WW(g)?f.value=g:f.result=g,c(u,f)});function c(u,h){u||!h?o(u):s?s(h):n(void 0,h)}}}processSync(e){let n=!1,r;return this.freeze(),Rf("processSync",this.parser||this.Parser),Mf("processSync",this.compiler||this.Compiler),this.process(e,i),eb("processSync","process",n),r;function i(s,o){n=!0,Ww(s),r=o}}run(e,n,r){Jw(e),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const l=Pc(n);i.run(e,l,c);function c(u,h,f){const p=h||e;u?a(u):o?o(p):r(void 0,p,f)}}}runSync(e,n){let r=!1,i;return this.run(e,n,s),eb("runSync","run",r),i;function s(o,a){Ww(o),i=a,r=!0}}stringify(e,n){this.freeze();const r=Pc(n),i=this.compiler||this.Compiler;return Mf("stringify",i),Jw(e),i(e,r)}use(e,...n){const r=this.attachers,i=this.namespace;if(If("use",this.frozen),e!=null)if(typeof e=="function")l(e,n);else if(typeof e=="object")Array.isArray(e)?a(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[u,...h]=c;l(u,h)}else o(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function o(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(c.plugins),c.settings&&(i.settings=Tf(!0,i.settings,c.settings))}function a(c){let u=-1;if(c!=null)if(Array.isArray(c))for(;++u<c.length;){const h=c[u];s(h)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,u){let h=-1,f=-1;for(;++h<r.length;)if(r[h][0]===c){f=h;break}if(f===-1)r.push([c,...u]);else if(u.length>0){let[p,...g]=u;const m=r[f][1];Em(m)&&Em(p)&&(p=Tf(!0,m,p)),r[f]=[c,p,...g]}}}}const UW=new Vv().freeze();function Rf(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function Mf(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function If(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Jw(t){if(!Em(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function eb(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function Pc(t){return HW(t)?t:new xT(t)}function HW(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function WW(t){return typeof t=="string"||qW(t)}function qW(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const KW="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",tb=[],nb={allowDangerousHtml:!0},YW=/^(https?|ircs?|mailto|xmpp)$/i,GW=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function ZW(t){const e=XW(t),n=QW(t);return JW(e.runSync(e.parse(n),n),t)}function XW(t){const e=t.rehypePlugins||tb,n=t.remarkPlugins||tb,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...nb}:nb;return UW().use(jH).use(n).use(NW,r).use(e)}function QW(t){const e=t.children||"",n=new xT;return typeof e=="string"&&(n.value=e),n}function JW(t,e){const n=e.allowedElements,r=e.allowElement,i=e.components,s=e.disallowedElements,o=e.skipHtml,a=e.unwrapDisallowed,l=e.urlTransform||e9;for(const u of GW)Object.hasOwn(e,u.from)&&(""+u.from+(u.to?"use `"+u.to+"` instead":"remove it")+KW+u.id,void 0);return vT(t,c),uU(t,{Fragment:d.Fragment,components:i,ignoreInvalidStyle:!0,jsx:d.jsx,jsxs:d.jsxs,passKeys:!0,passNode:!0});function c(u,h,f){if(u.type==="raw"&&f&&typeof h=="number")return o?f.children.splice(h,1):f.children[h]={type:"text",value:u.value},h;if(u.type==="element"){let p;for(p in Ef)if(Object.hasOwn(Ef,p)&&Object.hasOwn(u.properties,p)){const g=u.properties[p],m=Ef[p];(m===null||m.includes(u.tagName))&&(u.properties[p]=l(String(g||""),p,u))}}if(u.type==="element"){let p=n?!n.includes(u.tagName):s?s.includes(u.tagName):!1;if(!p&&r&&typeof h=="number"&&(p=!r(u,h,f)),p&&f&&typeof h=="number")return a&&u.children?f.children.splice(h,1,...u.children):f.children.splice(h,1),h}}}function e9(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),i=t.indexOf("/");return e===-1||i!==-1&&e>i||n!==-1&&e>n||r!==-1&&e>r||YW.test(t.slice(0,e))?t:""}const t9=()=>{const{categoryId:t,articleId:e}=ys(),n=gt(),{tg:r}=Zt(),i=sn(l=>l.getArticleByIds),s=sn(l=>l.getCategoryById),o=y.useMemo(()=>i(t||"",e||""),[t,e,i]),a=y.useMemo(()=>s(t||""),[t,s]);if(y.useEffect(()=>{const l=()=>n(`/faq/${t}`);return r&&(r.BackButton.show(),r.onEvent("backButtonClicked",l),k.log("[FaqArticlePage] Telegram BackButton shown and handler attached.")),()=>{r&&(r.BackButton.hide(),r.offEvent("backButtonClicked",l),k.log("[FaqArticlePage] Telegram BackButton hidden and handler removed."))}},[r,n,t]),!a||!(a.isActive??!0)||!o||!o.content){const l=!a||!(a.isActive??!0)?`Категория FAQ "${t}" не найдена или неактивна.`:`Статья FAQ "${e}" не найдена или не имеет контента.`;return d.jsx("div",{className:"p-4 text-center",children:d.jsx(mt,{message:l})})}return d.jsxs("div",{className:"p-4 pb-6 flex flex-col h-full",children:[d.jsxs("div",{className:"relative flex items-center justify-center h-12 mb-4 flex-shrink-0 border-b pb-4",children:[d.jsx("div",{className:"absolute left-0 h-9 w-9"})," ",d.jsx("h1",{className:"text-lg font-semibold text-center truncate max-w-[calc(100%-5rem)]",title:o.title,children:o.title}),d.jsx("div",{className:"h-9 w-9 absolute right-0"})," "]}),d.jsx("div",{className:U("flex-grow overflow-y-auto no-scrollbar","prose prose-sm dark:prose-invert","max-w-none","prose-headings:font-semibold prose-a:text-primary hover:prose-a:underline","prose-li:my-1 prose-p:leading-relaxed","prose-strong:font-semibold","prose-headings:mt-6 prose-headings:mb-2 first:prose-headings:mt-0","prose-ul:pl-5 prose-ol:pl-5"),children:d.jsx(ZW,{children:o.content})})]})},n9=()=>{const[t,e]=y.useState(""),[n,r]=y.useState(""),[i,s]=y.useState(!1),{toast:o}=En(),a=gt(),l=Tr(f=>f.login),c=kn(f=>f.login),u=async()=>{var f;s(!0);try{k.log("[AdminLogin] Attempting login via /Account/LoginByLogPassPair...");const p=await H4(t,n);if(p.isSuccess&&((f=p.resultObject)!=null&&f.jwt))k.log("[AdminLogin] API login successful. Setting user and admin state."),c(p.resultObject.userId,p.resultObject.jwt),l(),o({title:"Успешный вход",description:"Добро пожаловать, администратор!",variant:"success"}),a("/admin/panel");else throw new Error(p.errorMessage||"Не удалось войти. Проверьте логин и пароль.")}catch(p){k.error("[AdminLogin] Login failed:",p),o({title:"Ошибка входа",description:p.message||"Произошла неизвестная ошибка.",variant:"destructive"}),s(!1)}},h=t.length>0&&n.length>0&&!i;return d.jsx("div",{className:"flex items-center justify-center min-h-screen p-4 bg-muted/40",children:d.jsxs(bt,{className:"w-full max-w-sm shadow-lg rounded-xl",children:[d.jsxs(pr,{className:"items-center text-center space-y-2 pt-8 pb-6",children:[d.jsx(Lk,{className:"h-12 w-12 text-primary mb-2"}),d.jsx(Vr,{className:"text-2xl font-bold",children:"Вход для администратора"}),d.jsx(Nd,{children:"Введите учетные данные"})]}),d.jsxs(Gt,{className:"space-y-5 px-6 pb-8",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(st,{htmlFor:"username",children:"Логин"}),d.jsx($n,{id:"username",type:"text",placeholder:"Ваш логин",value:t,onChange:f=>e(f.target.value),disabled:i,autoComplete:"username"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(st,{htmlFor:"password",children:"Пароль"}),d.jsx($n,{id:"password",type:"password",placeholder:"••••••••",value:n,onChange:f=>r(f.target.value),disabled:i,autoComplete:"current-password"})]}),d.jsx(ke,{className:"w-full h-11 text-base font-semibold mt-4",onClick:u,disabled:!h,children:i?d.jsx(Ce,{size:"sm"}):"Войти"}),d.jsx(ke,{variant:"link",className:"text-xs text-muted-foreground hover:text-primary h-auto p-0 w-full mt-2",onClick:()=>a("/login"),children:"Вернуться к обычному входу"})]})]})})};var Uv="Switch",[r9,R8]=Dt(Uv),[i9,s9]=r9(Uv),wT=y.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:s,required:o,disabled:a,value:l="on",onCheckedChange:c,form:u,...h}=t,[f,p]=y.useState(null),g=Pe(e,b=>p(b)),m=y.useRef(!1),w=f?u||!!f.closest("form"):!0,[v=!1,x]=Cn({prop:i,defaultProp:s,onChange:c});return d.jsxs(i9,{scope:n,checked:v,disabled:a,children:[d.jsx(ae.button,{type:"button",role:"switch","aria-checked":v,"aria-required":o,"data-state":kT(v),"data-disabled":a?"":void 0,disabled:a,value:l,...h,ref:g,onClick:le(t.onClick,b=>{x(S=>!S),w&&(m.current=b.isPropagationStopped(),m.current||b.stopPropagation())})}),w&&d.jsx(o9,{control:f,bubbles:!m.current,name:r,value:l,checked:v,required:o,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});wT.displayName=Uv;var bT="SwitchThumb",ST=y.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,i=s9(bT,n);return d.jsx(ae.span,{"data-state":kT(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e})});ST.displayName=bT;var o9=t=>{const{control:e,checked:n,bubbles:r=!0,...i}=t,s=y.useRef(null),o=zd(n),a=$d(e);return y.useEffect(()=>{const l=s.current,c=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(c,"checked").set;if(o!==n&&h){const f=new Event("click",{bubbles:r});h.call(l,n),l.dispatchEvent(f)}},[o,n,r]),d.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:s,style:{...t.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function kT(t){return t?"checked":"unchecked"}var CT=wT,a9=ST;const Hv=y.forwardRef(({className:t,...e},n)=>d.jsx(CT,{className:U("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:d.jsx(a9,{className:U("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Hv.displayName=CT.displayName;var ET="AlertDialog",[l9,M8]=Dt(ET,[FE]),Wr=FE(),NT=t=>{const{__scopeAlertDialog:e,...n}=t,r=Wr(e);return d.jsx(nN,{...r,...n,modal:!0})};NT.displayName=ET;var c9="AlertDialogTrigger",_T=y.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Wr(n);return d.jsx(HF,{...i,...r,ref:e})});_T.displayName=c9;var u9="AlertDialogPortal",TT=t=>{const{__scopeAlertDialog:e,...n}=t,r=Wr(e);return d.jsx(rN,{...r,...n})};TT.displayName=u9;var d9="AlertDialogOverlay",AT=y.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Wr(n);return d.jsx(iv,{...i,...r,ref:e})});AT.displayName=d9;var mo="AlertDialogContent",[h9,f9]=l9(mo),PT=y.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...i}=t,s=Wr(n),o=y.useRef(null),a=Pe(e,o),l=y.useRef(null);return d.jsx(FF,{contentName:mo,titleName:jT,docsSlug:"alert-dialog",children:d.jsx(h9,{scope:n,cancelRef:l,children:d.jsxs(sv,{role:"alertdialog",...s,...i,ref:a,onOpenAutoFocus:le(i.onOpenAutoFocus,c=>{var u;c.preventDefault(),(u=l.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:c=>c.preventDefault(),onInteractOutside:c=>c.preventDefault(),children:[d.jsx(Zk,{children:r}),d.jsx(m9,{contentRef:o})]})})})});PT.displayName=mo;var jT="AlertDialogTitle",RT=y.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Wr(n);return d.jsx(ov,{...i,...r,ref:e})});RT.displayName=jT;var MT="AlertDialogDescription",IT=y.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Wr(n);return d.jsx(av,{...i,...r,ref:e})});IT.displayName=MT;var p9="AlertDialogAction",OT=y.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Wr(n);return d.jsx(Wd,{...i,...r,ref:e})});OT.displayName=p9;var LT="AlertDialogCancel",$T=y.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:i}=f9(LT,n),s=Wr(n),o=Pe(e,i);return d.jsx(Wd,{...s,...r,ref:o})});$T.displayName=LT;var m9=({contentRef:t})=>{const e=`\`${mo}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${mo}\` by passing a \`${MT}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${mo}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return y.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},g9=NT,v9=_T,y9=TT,DT=AT,zT=PT,FT=OT,BT=$T,VT=RT,UT=IT;const HT=g9,WT=v9,x9=y9,qT=y.forwardRef(({className:t,...e},n)=>d.jsx(DT,{className:U("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));qT.displayName=DT.displayName;const Wv=y.forwardRef(({className:t,...e},n)=>d.jsxs(x9,{children:[d.jsx(qT,{}),d.jsx(zT,{ref:n,className:U("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));Wv.displayName=zT.displayName;const qv=({className:t,...e})=>d.jsx("div",{className:U("flex flex-col space-y-2 text-center sm:text-left",t),...e});qv.displayName="AlertDialogHeader";const Kv=({className:t,...e})=>d.jsx("div",{className:U("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Kv.displayName="AlertDialogFooter";const Yv=y.forwardRef(({className:t,...e},n)=>d.jsx(VT,{ref:n,className:U("text-lg font-semibold",t),...e}));Yv.displayName=VT.displayName;const Gv=y.forwardRef(({className:t,...e},n)=>d.jsx(UT,{ref:n,className:U("text-sm text-muted-foreground",t),...e}));Gv.displayName=UT.displayName;const Zv=y.forwardRef(({className:t,...e},n)=>d.jsx(FT,{ref:n,className:U(Dl(),t),...e}));Zv.displayName=FT.displayName;const Xv=y.forwardRef(({className:t,...e},n)=>d.jsx(BT,{ref:n,className:U(Dl({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));Xv.displayName=BT.displayName;const w9=async t=>{const e="Failed to trigger Moex assets update.";k.log("[API/Admin] Triggering Moex assets update...");try{const n=await Xe.post("/api/Admin/FillDatabaseWithMoexAssets",null,{signal:t==null?void 0:t.signal});return k.log("[API/Admin] Update Moex Assets response:",n==null?void 0:n.data),ot(n,e)}catch(n){return n.name==="AbortError"?(k.log("[API/Admin updateMoexAssets] Request aborted."),{isSuccess:!1,errorMessage:"Request aborted",resultObject:null}):at(n,e)}},b9=async(t,e)=>{const n="Failed to get system variables.";if(!t||t.length===0)return{isSuccess:!0,errorMessage:null,resultObject:[]};k.log("[API/SystemVariables] Getting variables:",t);try{const r={SystemVariableNames:t},i=await Xe.post("/api/SystemVariables/GetSystemVariables",r,{signal:e==null?void 0:e.signal});k.log("[API/SystemVariables] Get response raw data:",i==null?void 0:i.data);const s=ot(i,n);return s.isSuccess&&s.resultObject===null&&(k.warn("[API/SystemVariables] getSystemVariables success but resultObject is null. Normalizing to empty array."),s.resultObject=[]),k.log("[API/SystemVariables] Get response processed:",s),s}catch(r){return r.name==="AbortError"?(k.log("[API/Admin getSystemVariables] Request aborted."),{isSuccess:!1,errorMessage:"Request aborted",resultObject:null}):at(r,n)}},S9=async(t,e)=>{const n="Failed to set system variables.";if(!t||t.length===0)return{isSuccess:!1,errorMessage:"No variables provided to set.",resultObject:null};k.log("[API/SystemVariables] Setting variables:",t);try{const r={SystemVariables:t},i=await Xe.post("/api/SystemVariables/SetSystemVariables",r,{signal:e==null?void 0:e.signal});return k.log("[API/SystemVariables] Set response:",i==null?void 0:i.data),ot(i,n)}catch(r){return r.name==="AbortError"?(k.log("[API/Admin setSystemVariables] Request aborted."),{isSuccess:!1,errorMessage:"Request aborted",resultObject:null}):at(r,n)}},xr=[{name:"telegramLink",backendName:"chat_link",label:"Ссылка на Telegram чат",placeholder:"https://t.me/your_chat",type:"url"}],k9=()=>{var fe;const[t,e]=y.useState(!1),[n,r]=y.useState({}),[i,s]=y.useState({}),[o,a]=y.useState(!0),[l,c]=y.useState(null),[u,h]=y.useState(!1),{toast:f}=En(),p=gt(),g=pn(),m=Tr(W=>W.logout),w=kn(W=>W.logout),{tg:v}=Zt(),{categories:x,toggleCategoryActive:b,addCategory:S,deleteCategory:N,updateCategoryTitle:C}=sn(),[_,P]=y.useState(""),[I,R]=y.useState(!1),[O,j]=y.useState(null),[F,M]=y.useState(""),D=y.useCallback(async W=>{const K=xr.map(ne=>ne.backendName||ne.name);if(K.length===0){a(!1);return}k.log("[AdminPanelPage] Fetching system variables (backend names):",K),a(!0),c(null);try{const ne=await b9(K,{signal:W});if(!W.aborted)if(ne.isSuccess&&ne.resultObject!==null){const Q={};xr.forEach(ge=>{var dt;const Te=ge.backendName||ge.name,nt=(dt=ne.resultObject)==null?void 0:dt.find(zt=>zt.name===Te);Q[ge.name]=(nt==null?void 0:nt.value)||""}),r(Q),s(Q),k.log("[AdminPanelPage] System variables fetched (UI state):",Q)}else if(ne.isSuccess&&ne.resultObject===null){k.warn("[AdminPanelPage] System variables fetch successful but resultObject is null. Setting defaults.");const Q={};xr.forEach(ge=>Q[ge.name]=""),r(Q),s(Q)}else throw new Error(ne.errorMessage||"Не удалось загрузить системные переменные.")}catch(ne){if(ne.name==="AbortError")k.log("[AdminPanelPage fetchSystemVariables] Request aborted.");else if(!W.aborted){k.error("[AdminPanelPage] Error fetching system variables:",ne),c(ne.message);const Q={};xr.forEach(ge=>Q[ge.name]=""),r(Q),s(Q)}}finally{W.aborted||a(!1)}},[]);y.useEffect(()=>{const W=new AbortController;return D(W.signal),()=>{W.abort()}},[D]),y.useEffect(()=>{var ne;const W=((ne=g.state)==null?void 0:ne.fromProfile)===!0,K=()=>p("/profile");return W&&v?(v.BackButton.show(),v.onEvent("backButtonClicked",K),k.log("[AdminPanelPage] Telegram BackButton shown and handler attached.")):v&&(v.BackButton.hide(),k.log("[AdminPanelPage] Telegram BackButton hidden.")),()=>{v&&(v.BackButton.hide(),v.offEvent("backButtonClicked",K),k.log("[AdminPanelPage] Telegram BackButton hidden and handler removed."))}},[v,p,(fe=g.state)==null?void 0:fe.fromProfile]);const L=async()=>{e(!0),k.log("[AdminPanelPage] Triggering Moex assets update...");try{const W=await w9();if(W.isSuccess)f({title:"Обновление запущено",description:"База данных активов обновляется в фоновом режиме.",variant:"success"});else throw new Error(W.errorMessage||"Не удалось запустить обновление.")}catch(W){k.error("[AdminPanelPage] Error triggering Moex update:",W),f({title:"Ошибка обновления",description:W.message,variant:"destructive"})}finally{e(!1)}},B=(W,K)=>{r(ne=>({...ne,[W]:K}))},A=async()=>{const W=xr.filter(K=>n[K.name]!==i[K.name]).map(K=>({Name:K.backendName||K.name,Value:n[K.name]}));if(W.length===0){f({title:"Нет изменений",description:"Значения системных переменных не были изменены.",duration:2e3});return}h(!0),c(null),k.log("[AdminPanelPage] Saving system variables payload:",W);try{const K=await S9(W);if(K.isSuccess){const ne={...i};W.forEach(Q=>{const ge=xr.find(Te=>(Te.backendName||Te.name)===Q.Name);ge&&(ne[ge.name]=Q.Value)}),s(ne),f({title:"Настройки сохранены",description:`Обновлено ${W.length} переменных.`,variant:"success"})}else throw new Error(K.errorMessage||"Не удалось сохранить настройки.")}catch(K){k.error("[AdminPanelPage] Error saving system variables:",K),c(K.message),f({title:"Ошибка сохранения",description:K.message,variant:"destructive"})}finally{h(!1)}},$=()=>{k.log("[AdminPanelPage] Logging out..."),m(),w(),f({title:"Выход выполнен",duration:2e3}),p("/login")},E=y.useCallback(W=>{b(W);const K=sn.getState().categories.find(ne=>ne.id===W);f({title:`Категория "${(K==null?void 0:K.title)||W}"`,description:`Теперь ${K!=null&&K.isActive?"активна":"скрыта"}`,duration:2e3})},[b,f]),z=y.useCallback(()=>{const W=_.trim();W?(R(!0),S(W)?(f({title:"Категория добавлена",description:`"${W}"`,variant:"success"}),P("")):f({title:"Ошибка",description:"Не удалось добавить категорию.",variant:"destructive"}),R(!1)):f({title:"Ошибка",description:"Название категории не может быть пустым.",variant:"destructive"})},[_,S,f]),q=y.useCallback((W,K)=>{N(W),f({title:"Категория удалена",description:`"${K}"`,variant:"success"})},[N,f]),T=y.useCallback((W,K)=>{j(W),M(K)},[]),J=y.useCallback(()=>{j(null),M("")},[]),he=y.useCallback(()=>{O&&F.trim()?(C(O,F),f({title:"Название обновлено",variant:"success",duration:1500}),J()):f({title:"Ошибка",description:"Название не может быть пустым.",variant:"destructive"})},[O,F,C,f,J]),ce=y.useCallback(W=>{p(`/admin/faq/${W}`)},[p]),re=xr.some(W=>n[W.name]!==i[W.name]);return d.jsx("div",{className:"flex items-center justify-center min-h-screen p-4 bg-muted/40 overflow-y-auto",children:d.jsxs(bt,{className:"w-full max-w-lg shadow-lg rounded-xl my-auto",children:[d.jsxs(pr,{className:"items-center text-center pt-6 pb-4 border-b relative",children:[" ",d.jsx(Vr,{className:"text-xl font-bold",children:"Панель администратора"})," ",d.jsx(Nd,{children:"Управление приложением"})," "]}),d.jsxs(Gt,{className:"p-6 space-y-6",children:[d.jsxs("div",{className:"space-y-3 p-4 border rounded-lg bg-card",children:[d.jsxs(st,{className:"flex items-center gap-2 font-medium text-base",children:[" ",d.jsx(WO,{className:"h-5 w-5 text-primary"})," База данных активов "]}),d.jsxs(ke,{className:"w-full h-10",onClick:L,disabled:t,children:[" ",t?d.jsx(Ce,{size:"sm"}):"Обновить активы с МосБиржи"," "]})]}),d.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-card",children:[d.jsxs(st,{className:"flex items-center gap-2 font-medium text-base",children:[" ",d.jsx(iL,{className:"h-5 w-5 text-primary"})," Системные настройки "]}),o?d.jsx("div",{className:"flex justify-center p-4",children:d.jsx(Ce,{})}):l?d.jsx(mt,{message:l}):xr.map(W=>d.jsxs("div",{className:"space-y-1.5",children:[d.jsx(st,{htmlFor:W.name,children:W.label}),d.jsx($n,{id:W.name,type:W.type||"text",value:n[W.name]??"",onChange:K=>B(W.name,K.target.value),placeholder:W.placeholder||"",disabled:u,className:"h-10"})]},W.name)),!o&&!l&&xr.length>0&&d.jsx(ke,{className:"w-full h-10 mt-3",onClick:A,disabled:u||!re,children:u?d.jsx(Ce,{size:"sm"}):"Сохранить настройки"})]}),d.jsxs("div",{className:"space-y-3 p-4 border rounded-lg bg-card",children:[d.jsxs(st,{className:"flex items-center gap-2 font-medium text-base",children:[" ",d.jsx(Du,{className:"h-5 w-5 text-primary"})," Управление FAQ "]}),d.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2 -mr-2",children:x.map(W=>d.jsxs("div",{className:U("flex items-center justify-between gap-2 p-2 rounded hover:bg-muted/50",!W.isActive&&"opacity-60"),children:[d.jsxs("div",{className:U("flex-grow mr-1 min-w-0"),children:[" ",O===W.id?d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx($n,{value:F,onChange:K=>M(K.target.value),className:"h-8 text-sm flex-grow",autoFocus:!0,onKeyDown:K=>K.key==="Enter"&&he()}),d.jsx(ke,{variant:"ghost",size:"icon",className:"h-7 w-7 text-success flex-shrink-0",onClick:he,children:d.jsx(jg,{size:16})})," ",d.jsx(ke,{variant:"ghost",size:"icon",className:"h-7 w-7 text-muted-foreground flex-shrink-0",onClick:J,children:d.jsx(Ed,{size:16})})," "]}):d.jsxs("span",{className:"text-sm truncate cursor-pointer group block",onClick:()=>T(W.id,W.title),children:[" ",W.title,d.jsx(Ok,{className:"h-3 w-3 inline-block ml-1 text-muted-foreground opacity-0 group-hover:opacity-60 transition-opacity"})]})]}),d.jsxs("div",{className:"flex items-center flex-shrink-0",children:[d.jsx(Hv,{id:`faq-active-${W.id}`,checked:W.isActive??!0,onCheckedChange:()=>E(W.id),className:"mr-2 scale-75","aria-label":`Активность категории ${W.title}`}),d.jsxs(ke,{variant:"ghost",size:"icon",className:"h-7 w-7 text-blue-600 hover:text-blue-700",onClick:()=>ce(W.id),children:[d.jsx($k,{className:"h-4 w-4"}),d.jsxs("span",{className:"sr-only",children:["Редактировать категорию ",W.title]})]}),d.jsxs(HT,{children:[d.jsx(WT,{asChild:!0,children:d.jsxs("span",{children:[" ",d.jsxs(ke,{variant:"ghost",size:"icon",className:"h-7 w-7 text-destructive hover:text-destructive",children:[d.jsx(Dk,{className:"h-4 w-4"}),d.jsxs("span",{className:"sr-only",children:["Удалить категорию ",W.title]})]})]})}),d.jsxs(Wv,{children:[d.jsxs(qv,{children:[d.jsx(Yv,{children:"Удалить категорию?"}),d.jsxs(Gv,{children:['Вы уверены, что хотите удалить категорию "',W.title||"Без названия",'" и все статьи в ней? Это действие необратимо.']})]}),d.jsxs(Kv,{children:[d.jsx(Xv,{children:"Отмена"}),d.jsx(Zv,{onClick:()=>q(W.id,W.title||""),className:Dl({variant:"destructive"}),children:"Удалить"})]})]})]})]})]},W.id))}),x.length===0?d.jsx("p",{className:"p-4 text-center text-muted-foreground",children:"Нет категорий FAQ."}):null,d.jsxs("div",{className:"flex items-center gap-2 pt-3 border-t",children:[d.jsx($n,{type:"text",placeholder:"Название новой категории...",value:_,onChange:W=>P(W.target.value),className:"h-9 flex-grow",disabled:I,onKeyDown:W=>W.key==="Enter"&&z()}),d.jsx(ke,{size:"sm",onClick:z,disabled:I||!_.trim(),className:"gap-1 h-9",children:I?d.jsx(Ce,{size:"sm"}):d.jsxs(d.Fragment,{children:[d.jsx(Rk,{size:16})," Добавить"]})})]})]}),d.jsxs(ke,{variant:"outline",className:"w-full mt-4 h-10",onClick:$,children:[" ",d.jsx(Ik,{className:"h-4 w-4 mr-2"})," Выйти из панели "]})]})]})})},KT=y.forwardRef(({className:t,...e},n)=>d.jsx("textarea",{className:U("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));KT.displayName="Textarea";const C9=({isOpen:t,onClose:e,categoryId:n,article:r})=>{const{toast:i}=En(),{updateArticle:s,addArticle:o}=sn(),[a,l]=y.useState(""),[c,u]=y.useState(""),[h,f]=y.useState(!1),p=r!=null;y.useEffect(()=>{t?(l(p?(r==null?void 0:r.title)??"":""),u(p?(r==null?void 0:r.content)??"":""),k.log(`[FaqArticleEditModal] Initialized. Mode: ${p?"Edit":"Create"}. Article ID: ${r==null?void 0:r.id}`)):(l(""),u(""))},[t,r,p]);const g=y.useCallback(async()=>{if(!a.trim()){i({title:"Ошибка",description:"Заголовок статьи не может быть пустым.",variant:"destructive"});return}f(!0);try{if(p&&r){k.log(`[FaqArticleEditModal] Updating article ${r.id}`);const w={},v=a.trim();v&&v!==((r==null?void 0:r.title)??"")&&(w.title=v),c!==((r==null?void 0:r.content)??"")&&(w.content=c),Object.keys(w).length>0&&s(n,r.id,w),i({title:"Сохранено",description:`Статья "${v}" обновлена.`,variant:"success"})}else{if(p)throw new Error("Ошибка: Попытка обновить несуществующую статью.");if(k.log(`[FaqArticleEditModal] Adding new article to category ${n}`),o(n,a,c))i({title:"Статья добавлена",description:`"${a.trim()}"`,variant:"success"});else throw new Error("Не удалось добавить статью в стор.")}await new Promise(w=>setTimeout(w,200)),e()}catch(w){k.error("[FaqArticleEditModal] Save error:",w),i({title:"Ошибка сохранения",description:w.message||"Не удалось сохранить изменения.",variant:"destructive"})}finally{f(!1)}},[p,r,n,a,c,s,o,e,i]),m=p?`Измените заголовок и содержание статьи "${(r==null?void 0:r.title)||"(загрузка...)"}".`:"Создайте новую статью в категории.";return d.jsx(Aa,{open:t,onOpenChange:e,children:d.jsxs(ao,{className:"max-w-3xl w-[90vw] h-[85vh] flex flex-col",children:[d.jsxs(lo,{children:[d.jsx(co,{children:p?"Редактировать статью":"Добавить новую статью"}),d.jsxs(Pa,{children:[m," Используйте Markdown."]})]}),d.jsxs("div",{className:"grid gap-4 py-4 flex-grow overflow-y-auto pr-6 -mr-6 pl-1",children:[d.jsxs("div",{className:"space-y-1",children:[d.jsx(st,{htmlFor:"article-title",children:"Заголовок"}),d.jsx($n,{id:"article-title",value:a,onChange:w=>l(w.target.value),placeholder:"Введите заголовок статьи...",disabled:h,className:"text-base"})]}),d.jsxs("div",{className:"space-y-1 flex flex-col flex-grow",children:[d.jsx(st,{htmlFor:"article-content",children:"Содержание (Markdown)"}),d.jsx(KT,{id:"article-content",value:c,onChange:w=>u(w.target.value),placeholder:"Введите содержание статьи...",disabled:h,className:"text-sm font-mono flex-grow"})]})]}),d.jsxs(lv,{className:"mt-4 flex-shrink-0 pt-4 border-t",children:[d.jsx(iN,{asChild:!0,children:d.jsx(ke,{type:"button",variant:"outline",disabled:h,children:"Отмена"})}),d.jsx(ke,{type:"button",onClick:g,disabled:h||!a.trim(),children:h?d.jsx(Ce,{size:"sm"}):d.jsxs(d.Fragment,{children:[d.jsx(jg,{size:16,className:"mr-1.5"})," ",p?"Сохранить":"Добавить"]})})]})]})})},E9=()=>{const{categoryId:t}=ys(),e=gt(),{toast:n}=En(),{deleteArticle:r,updateCategoryTitle:i,toggleCategoryActive:s}=sn(),o=sn.persist.hasHydrated(),{tg:a}=Zt(),l=sn(F=>{if(!o||!t)return;const M=F.categories.find(D=>D.id===t);return M?{id:M.id,title:M.title,articles:M.articles,isActive:M.isActive??!0}:void 0},io),[c,u]=y.useState(void 0),[h,f]=y.useState(!1),[p,g]=y.useState(null),[m,w]=y.useState("");y.useEffect(()=>{f(c!==void 0)},[c]),y.useEffect(()=>{const F=()=>e("/admin/panel");return a&&(a.BackButton.show(),a.onEvent("backButtonClicked",F),k.log("[AdminFaqCategoryPage] Telegram BackButton shown and handler attached.")),()=>{a&&(a.BackButton.hide(),a.offEvent("backButtonClicked",F),k.log("[AdminFaqCategoryPage] Telegram BackButton hidden and handler removed."))}},[a,e]);const v=y.useCallback(F=>{u(F)},[]),x=y.useCallback(()=>{u(null)},[]),b=y.useCallback((F,M)=>{t&&(r(t,F),n({title:"Статья удалена",description:`"${M}"`,variant:"success"}))},[t,r,n]),S=y.useCallback(()=>{u(void 0)},[]),N=y.useCallback((F,M)=>{g(F),w(M)},[]),C=y.useCallback(()=>{g(null),w("")},[]),_=y.useCallback(()=>{p&&m.trim()?(i(p,m),n({title:"Название обновлено",variant:"success",duration:1500}),C()):n({title:"Ошибка",description:"Название не может быть пустым.",variant:"destructive"})},[p,m,i,n,C]),P=y.useCallback(F=>{s(F);const M=sn.getState().categories.find(D=>D.id===F);n({title:`Категория "${(M==null?void 0:M.title)||F}"`,description:`Теперь ${M!=null&&M.isActive?"активна":"скрыта"}`,duration:2e3})},[s,n]);if(!o)return d.jsx("div",{className:"flex items-center justify-center h-screen",children:d.jsx(Ce,{size:"lg"})});if(!l)return d.jsx("div",{className:"p-4 text-center",children:d.jsx(mt,{message:`Категория FAQ "${t}" не найдена.`})});const{id:I,title:R,articles:O,isActive:j}=l;return d.jsxs("div",{className:"p-4 space-y-4 pb-4 flex flex-col h-full",children:[d.jsxs("div",{className:"relative flex items-center justify-center h-12 mb-2 flex-shrink-0",children:[d.jsx("div",{className:"absolute left-0 h-9 w-9"})," ",p===I?d.jsxs("div",{className:"flex items-center gap-1 flex-grow mx-10",children:[d.jsx($n,{value:m,onChange:F=>w(F.target.value),className:"h-9 text-lg font-semibold text-center flex-grow",autoFocus:!0,onKeyDown:F=>F.key==="Enter"&&_()}),d.jsx(ke,{variant:"ghost",size:"icon",className:"h-8 w-8 text-success",onClick:_,children:d.jsx(jg,{size:18})}),d.jsx(ke,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground",onClick:C,children:d.jsx(Ed,{size:18})})]}):d.jsxs("h1",{className:"text-lg font-semibold text-center truncate max-w-[calc(100%-5rem)] cursor-pointer group",title:`Редактировать название "${R}"`,onClick:()=>N(I,R),children:[R,d.jsx(Ok,{className:"h-3.5 w-3.5 inline-block ml-1.5 text-muted-foreground opacity-0 group-hover:opacity-60 transition-opacity"})]}),d.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 flex items-center gap-1",children:d.jsx(Hv,{id:`faq-active-${I}`,checked:j,onCheckedChange:()=>P(I),"aria-label":`Активность категории ${R}`})})]}),d.jsxs(bt,{className:"flex-grow shadow-sm border rounded-lg overflow-hidden flex flex-col",children:[d.jsx(pr,{className:"px-4 pt-4 pb-2 border-b",children:d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx(Vr,{className:"text-base",children:"Статьи в категории"}),d.jsxs(ke,{size:"sm",variant:"outline",onClick:x,className:"gap-1",children:[d.jsx(Rk,{size:16})," Добавить статью"]})]})}),d.jsx(Gt,{className:"p-0 flex-grow overflow-y-auto no-scrollbar",children:O.length>0?d.jsx("div",{className:"divide-y divide-border/60",children:O.map(F=>d.jsxs("div",{className:U("flex items-center justify-between gap-2 p-3 hover:bg-muted/50",!j&&"opacity-60"),children:[d.jsx("span",{className:"text-sm flex-grow mr-2 truncate",children:F.title}),d.jsxs("div",{className:"flex items-center flex-shrink-0",children:[d.jsxs(ke,{variant:"ghost",size:"icon",className:"h-8 w-8 text-blue-600 hover:text-blue-700",onClick:()=>v(F),children:[d.jsx($k,{className:"h-4 w-4"}),d.jsxs("span",{className:"sr-only",children:["Редактировать статью ",F.title]})]}),d.jsxs(HT,{children:[d.jsx(WT,{asChild:!0,children:d.jsxs(ke,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive",children:[d.jsx(Dk,{className:"h-4 w-4"}),d.jsxs("span",{className:"sr-only",children:["Удалить статью ",F.title]})]})}),d.jsxs(Wv,{children:[d.jsxs(qv,{children:[d.jsx(Yv,{children:"Удалить статью?"}),d.jsxs(Gv,{children:['Вы уверены, что хотите удалить статью "',F.title||"Без названия",'"? Это действие необратимо.']})]}),d.jsxs(Kv,{children:[d.jsx(Xv,{children:"Отмена"}),d.jsx(Zv,{onClick:()=>b(F.id,F.title||""),className:Dl({variant:"destructive"}),children:"Удалить"})]})]})]})]})]},F.id))}):d.jsx("p",{className:"p-6 text-center text-muted-foreground",children:"В этой категории пока нет статей."})})]}),I&&d.jsx(C9,{isOpen:h,onClose:S,categoryId:I,article:c})]})},N9=()=>{const{id:t}=ys(),e=Number(t),n=gt(),{tg:r}=Zt(),[i,s]=y.useState(null),[o,a]=y.useState("1M"),[l,c]=y.useState("line"),[u,h]=y.useState(null),[f,p]=y.useState(!0),[g,m]=y.useState(!0),[w,v]=y.useState(null),[x,b]=y.useState(null);y.useEffect(()=>{const C=new AbortController,_=C.signal;return(async()=>{if(!e||isNaN(e)){v("Неверный ID актива."),p(!1);return}p(!0),v(null);try{const I=await kk(e,{signal:_});_.aborted||(I.isSuccess&&I.resultObject?s(I.resultObject):v(I.errorMessage||`Актив ${e} не найден.`))}catch(I){I.name==="AbortError"?k.log(`[FullscreenChartPage fetchAsset] Request aborted for ID ${e}.`):_.aborted||v(I.message||"Ошибка загрузки данных актива.")}finally{_.aborted||p(!1)}})(),()=>{k.log(`[FullscreenChartPage fetchAsset] Cleanup: Aborting fetch for ID ${e}.`),C.abort()}},[e]),y.useEffect(()=>{const C=new AbortController,_=C.signal;return(async()=>{if(!(i!=null&&i.id)){h([]),m(!1),b(null);return}m(!0),b(null),k.log(`[FullscreenChartPage] Fetching history for asset ${i.id}, period ${o}`);try{const I=await Ek(i.id,o,{signal:_});_.aborted||(I.isSuccess&&Array.isArray(I.resultObject)?(h(I.resultObject),b(null),k.log(`[FullscreenChartPage] History loaded successfully. Points: ${I.resultObject.length}`)):(b(I.errorMessage||`Не удалось загрузить историю для ${o}.`),h([])))}catch(I){I.name==="AbortError"?k.log(`[FullscreenChartPage fetchChartHistory] Fetch aborted for period ${o}`):_.aborted||(b(I.message||"Ошибка загрузки истории цен."),h([]))}finally{_.aborted||m(!1)}})(),()=>{k.log(`[FullscreenChartPage fetchChartHistory] Cleanup: Aborting fetch for period ${o}`),C.abort()}},[i,o]),y.useEffect(()=>{const C=()=>n(`/asset/${e}`);return r&&(r.BackButton.show(),r.onEvent("backButtonClicked",C),k.log("[FullscreenChartPage] Telegram BackButton shown and handler attached.")),()=>{r&&(r.BackButton.hide(),r.offEvent("backButtonClicked",C),k.log("[FullscreenChartPage] Telegram BackButton hidden and handler removed."))}},[r,n,e]);const S=y.useMemo(()=>o==="1D"?"line":l,[o,l]),N=()=>d.jsxs("div",{className:"relative h-full w-full",children:[d.jsx("div",{className:U("absolute inset-0 transition-opacity duration-200",g?"opacity-50 pointer-events-none":"opacity-100"),children:u&&u.length>0?d.jsx(k_,{data:u,chartType:S,period:o}):!g&&!x?d.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Нет данных о цене за этот период."}):null}),g&&d.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-background/30 z-10",children:d.jsx(Ce,{size:"lg"})}),x&&!g&&d.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 z-10",children:d.jsxs("div",{className:"text-center p-4 border border-destructive/50 rounded-md bg-destructive/10 text-destructive",children:[" ",d.jsx("span",{className:"text-2xl mr-2",children:"⚠️"})," ",x," "]})})]});return f?d.jsx("div",{className:"flex items-center justify-center h-screen",children:d.jsx(Ce,{size:"lg"})}):i?d.jsxs("div",{className:"flex flex-col h-screen bg-background text-foreground p-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4 flex-shrink-0 h-9",children:[d.jsx("div",{className:"w-9"})," ",d.jsxs("div",{className:"text-center",children:[" ",d.jsxs("h1",{className:"text-base font-semibold truncate",children:[i.ticker," - ",Ao(i)]})," "]}),d.jsxs("div",{className:"flex items-center space-x-1",children:[d.jsx(ke,{variant:S==="line"?"secondary":"ghost",size:"icon",className:"h-8 w-8",onClick:()=>c("line"),title:"Линейный график",children:d.jsx(Mk,{className:"h-4 w-4"})}),d.jsx(ke,{variant:S==="candle"?"secondary":"ghost",size:"icon",className:"h-8 w-8",onClick:()=>c("candle"),title:"Свечной график",disabled:o==="1D",children:d.jsx(Tk,{className:"h-4 w-4"})})]})]}),d.jsx("div",{className:"mb-4 flex-shrink-0",children:d.jsx(rh,{defaultValue:o,onValueChange:C=>a(C),className:"w-full",children:d.jsxs(Hl,{className:"grid grid-cols-6 h-9 w-full",children:[" ",d.jsx(Nt,{value:"1D",className:"text-xs h-full",children:"1D"})," ",d.jsx(Nt,{value:"1W",className:"text-xs h-full",children:"1W"})," ",d.jsx(Nt,{value:"1M",className:"text-xs h-full",children:"1M"})," ",d.jsx(Nt,{value:"1Y",className:"text-xs h-full",children:"1Y"})," ",d.jsx(Nt,{value:"5Y",className:"text-xs h-full",children:"5Y"})," ",d.jsx(Nt,{value:"ALL",className:"text-xs h-full",children:"All"})," "]})})}),d.jsxs("div",{className:"flex-grow overflow-hidden",children:[" ",N()," "]})]}):d.jsxs("div",{className:"p-4 text-center",children:[" ",d.jsx(mt,{message:w||`Актив с ID ${e} не найден.`})," "]})};Ie.extend(Ll);Ie.extend($l);Ie.extend(cv);Ie.locale("ru");const _9=t=>{const e=t.split(/:: |\n/);return e.length>1?e.map((n,r)=>{const i=n.trim();if(!i)return null;const s=i.match(/^(.+?):\s*(.*)$/);if(s){const o=s[1].replace(/\.$/,"").trim(),a=s[2];return d.jsxs("div",{className:"flex",children:[" ",d.jsxs("span",{className:"text-muted-foreground mr-1",children:[o,":"]})," ",d.jsx("span",{className:"flex-1",children:a})," "]},r)}return d.jsx("div",{children:i},r)}).filter(Boolean):t},T9=t=>t.match(/^Покупка\s+/i)?"Покупка":t.match(/^Продажа\s+/i)?"Продажа":t,rb=80,ib=5,A9=({notification:t,currentFilter:e})=>{const{markAsRead:n,isMarkingAsRead:r}=nn(),{toast:i}=En(),s=!t.readByUserAt,o=r.has(t.id),a=y.useRef(null),l=y.useRef(null),c=y.useRef(null),u=y.useRef(null),h=y.useRef(!1),f=y.useRef(!1),[p,g]=y.useState(0),[m,w]=y.useState(!1),[v,x]=y.useState(!1),[b,S]=y.useState(!1),[N,C]=y.useState(!1),_=y.useCallback(async E=>{if(!s||o||v)return;k.log(`[NotificationItem handleMarkRead] Attempting markAsRead for ${t.id} from ${E}`),await n(t.id)?(k.log(`[NotificationItem handleMarkRead] Mark as read successful for ${t.id}.`),e===!1?(k.log("[NotificationItem handleMarkRead] Current filter is 'unread', starting animation."),x(!0)):(k.log("[NotificationItem handleMarkRead] Current filter is NOT 'unread', skipping animation."),E==="swipe"&&g(0))):(k.warn(`[NotificationItem handleMarkRead] Mark as read failed for ${t.id}. Animating back (if swipe).`),i({title:"Ошибка",description:"Не удалось отметить уведомление прочитанным.",variant:"destructive"}),E==="swipe"&&(w(!1),g(0)))},[t.id,s,o,v,n,i,e]),P=y.useCallback(E=>{if(!s||o||v||N||E.touches.length>1){l.current=null,c.current=null;return}l.current=E.touches[0].clientX,c.current=E.touches[0].clientY,u.current=l.current,h.current=!1,f.current=!1,w(!0),k.debug(`[NotificationItem TouchStart] Start X: ${l.current}, Y: ${c.current} for ${t.id}`)},[s,o,v,N,t.id]),I=y.useCallback(E=>{if(l.current===null||c.current===null||!m||o||v||N)return;u.current=E.touches[0].clientX;const z=E.touches[0].clientY,q=u.current-l.current,T=z-c.current;if(!h.current&&Math.abs(q)>ib&&Math.abs(q)>Math.abs(T))h.current=!0,k.debug(`[NotificationItem TouchMove] Swipe intent confirmed (horizontal) for ${t.id}`);else if(!h.current&&Math.abs(T)>=ib&&Math.abs(T)>Math.abs(q)){k.debug(`[NotificationItem TouchMove] Vertical scroll detected, cancelling swipe for ${t.id}`),w(!1),l.current=null,c.current=null;return}if(h.current){const J=Math.max(-100,Math.min(0,q));g(J)}},[m,o,v,N]),R=y.useCallback(()=>{const E=h.current,z=m;if(w(!1),l.current=null,c.current=null,h.current=!1,!z){k.debug("[NotificationItem TouchEnd] Swipe was not active. Resetting translate."),p!==0&&g(0);return}const q=p;k.debug(`[NotificationItem TouchEnd] End: finalTranslateX=${q}, wasIntentionalSwipe=${E} for ${t.id}`),E&&q<=-80?(k.log(`[NotificationItem TouchEnd] Threshold met for ${t.id}. Triggering handleMarkRead from swipe.`),f.current=!0,_("swipe")):E?(k.log(`[NotificationItem TouchEnd] Threshold not met for ${t.id}. Animating back.`),g(0)):p!==0&&g(0)},[p,_,m]),O=y.useCallback(()=>{k.debug(`[NotificationItem TouchCancel] Cancelled for ${t.id}. Resetting.`),w(!1),g(0),l.current=null,c.current=null,h.current=!1,f.current=!1},[]),j=()=>{!f.current&&s&&!o&&!v?(C(E=>!E),k.debug(`[NotificationItem Click] Toggled menu for ${t.id}. New state: ${!N}`)):k.debug(`[NotificationItem Click] Click ignored. didSwipeRef=${f.current}, isUnread=${s}, isProcessing=${o}, isAnimatingOut=${v}`),f.current=!1},F=E=>{E.stopPropagation(),s&&!o&&!v&&(k.log(`[NotificationItem MenuClick] Mark as read clicked for ${t.id}`),C(!1),_("menu"))};y.useEffect(()=>{const E=z=>{a.current&&!a.current.contains(z.target)&&N&&(k.debug(`[NotificationItem ClickOutside] Closing menu for ${t.id}`),C(!1))};return N?(document.addEventListener("mousedown",E),k.debug(`[NotificationItem Effect] Added click outside listener for ${t.id}`)):document.removeEventListener("mousedown",E),()=>{document.removeEventListener("mousedown",E)}},[N]);const M=()=>{v&&(k.log(`[NotificationItem AnimationEnd] Animation ended for ${t.id}. Hiding element.`),S(!0))},D=y.useMemo(()=>{try{const E=Ie(t.createdAt).tz("Europe/Moscow");return E.isValid()?E.format("D MMMM YYYY, HH:mm"):"Неверная дата"}catch(E){return k.error(`[NotificationItem] Error formatting date ${t.createdAt}:`,E),"Ошибка даты"}},[t.createdAt]),L=y.useMemo(()=>_9(t.content),[t.content]),B=y.useMemo(()=>T9(t.title),[t.title]);if(b)return null;const A={transform:`translateX(${p}px)`,transition:m?"none":"transform 0.2s ease-out","--swipe-translate-x":`${p}px`},$=s?Math.min(1,Math.abs(p)/rb):0;return d.jsxs("div",{ref:a,className:U("relative w-full bg-card",v&&"animate-slide-collapse-fade-out","overflow-hidden"),onTouchStart:P,onTouchMove:I,onTouchEnd:R,onTouchCancel:O,onAnimationEnd:M,style:A,children:[s&&d.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center justify-end pr-4 bg-green-600 pointer-events-none",style:{width:`${Math.abs(p)}px`,opacity:$},"aria-hidden":"true",children:Math.abs(p)>=rb*.8&&d.jsx($u,{className:"h-5 w-5 text-white"})}),d.jsxs("div",{className:U("relative flex items-start p-4 space-x-3 transition-colors w-full text-left bg-card",o&&"opacity-70 pointer-events-none",s&&!m&&!v&&"cursor-pointer hover:bg-muted/30"),onClick:j,"aria-label":`Уведомление "${t.title}"`,children:[d.jsx("div",{className:"flex-shrink-0 pt-1 w-6 h-6 flex items-center justify-center",children:o?d.jsx(Ce,{size:"sm"}):s?d.jsx("div",{className:"h-2.5 w-2.5 rounded-full bg-blue-500 mt-1",title:"Непрочитано"}):d.jsx(Ak,{className:"h-4 w-4 text-blue-600 dark:text-blue-500 opacity-80"})}),d.jsxs("div",{className:"flex-grow space-y-1",children:[d.jsxs("div",{className:"flex justify-between items-baseline",children:[d.jsxs("h4",{className:U("text-sm font-semibold leading-snug",s&&!o&&"font-bold"),children:[" ",B," "]}),d.jsxs("span",{className:"text-xs text-muted-foreground flex-shrink-0 ml-2 whitespace-nowrap",children:[" ",D," "]})]}),d.jsxs("div",{className:U("text-xs text-muted-foreground leading-snug space-y-0.5 mt-1"),children:[" ",L," "]})]}),N&&s&&!m&&!v&&d.jsx("div",{className:U("absolute z-10 w-auto min-w-[150px] rounded-md border bg-popover p-1 text-popover-foreground shadow-md","top-2 left-9"),children:d.jsxs(ke,{variant:"ghost",className:"w-full h-auto justify-start px-2 py-1.5 text-sm font-normal",onClick:F,disabled:o,children:[d.jsx($u,{className:"mr-2 h-4 w-4"}),d.jsx("span",{children:"Отметить прочитанным"})]})})]})]})},P9=()=>{const t=gt(),{tg:e}=Zt(),{toast:n}=En(),{notifications:r,filterReadStatus:i,totalCount:s,unreadCount:o,isLoading:a,error:l,fetchNotifications:c,setFilter:u,resetNotifications:h,notificationsEnabled:f}=nn(),p=y.useRef(null),[g,m]=y.useState(!1),w=i===!1?"unread":"all";y.useEffect(()=>(k.log("[NotificationsPage] Initializing, fetching first page."),c(1,i,!1),()=>{k.log("[NotificationsPage Initial Fetch] Cleanup: Resetting notifications."),h()}),[c,h]),y.useEffect(()=>{const C=()=>t("/profile");return e&&(e.BackButton.show(),e.onEvent("backButtonClicked",C)),()=>{e&&(e.BackButton.hide(),e.offEvent("backButtonClicked",C))}},[e,t]);const v=y.useCallback(()=>{!a&&r.length<s&&c(void 0,void 0,!0)},[a,r.length,s,c]);y.useEffect(()=>{const C=p.current;if(!C)return;const _=new IntersectionObserver(([P])=>{P.isIntersecting&&!a&&r.length<s&&(k.log("Intersection observer triggered load more history"),v())},{threshold:.1});return _.observe(C),()=>{C&&_.unobserve(C)}},[a,r.length,s,v]);const x=C=>{k.log(`[NotificationsPage] Tab changed to: ${C}`);let _=null;C==="unread"&&(_=!1),u(_)},b=async()=>{if(o===0||!f){n({title:"Нет непрочитанных уведомлений",duration:2e3});return}m(!0),k.log("[NotificationsPage] Marking all notifications as read via API...");try{const C=await kO();if(C.isSuccess)k.log("[NotificationsPage] Mark all successful. Updating UI optimistically."),n({title:"Успешно",description:"Все уведомления отмечены как прочитанные.",variant:"success"}),nn.setState(_=>({notifications:_.notifications.map(P=>P.readByUserAt?P:{...P,readByUserAt:new Date().toISOString()}),unreadCount:0}));else throw new Error(C.errorMessage||"Не удалось отметить все уведомления.")}catch(C){k.error("[NotificationsPage] Error marking all as read:",C),n({title:"Ошибка",description:C.message||"Произошла ошибка.",variant:"destructive"})}finally{m(!1)}},S=()=>{const C=i===!1,_=r.length===0||C&&o===0;return a&&r.length===0&&!l?d.jsx("div",{className:"flex justify-center items-center h-48",children:d.jsx(Ce,{size:"lg"})}):l&&r.length===0?d.jsx("div",{className:"p-6",children:d.jsx(mt,{message:l})}):_&&!a&&!l?d.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-center text-muted-foreground p-4",children:[d.jsx(Up,{className:"w-12 h-12 mb-3",strokeWidth:1}),d.jsx("p",{children:C?"Нет непрочитанных уведомлений.":"У вас пока нет уведомлений."})]}):d.jsxs("div",{className:"divide-y divide-border/60",children:[r.map(P=>d.jsx(A9,{notification:P,currentFilter:i},P.id)),d.jsx("div",{ref:p,style:{height:"10px"},"aria-hidden":"true"}),a&&r.length>0&&r.length<s&&d.jsx("div",{className:"flex justify-center p-4",children:d.jsx(Ce,{size:"sm"})})]})},N=o>0&&!g&&!a&&f;return d.jsxs("div",{className:"p-4 space-y-4 pb-4 flex flex-col h-full",children:[d.jsxs(bt,{className:"flex-shrink-0 shadow-sm border rounded-lg",children:[d.jsx(pr,{className:"pb-3 pt-4",children:d.jsxs("div",{className:"flex justify-between items-center h-8",children:[d.jsx("div",{className:"w-8 flex-shrink-0"}),d.jsx(Vr,{className:"text-lg font-semibold text-center flex-grow mx-2",children:"Уведомления"}),d.jsxs(ke,{variant:"ghost",size:"sm",className:U("h-7 px-2 text-xs disabled:opacity-50 flex-shrink-0",N?"text-primary hover:text-primary/80 hover:bg-primary/10":"text-muted-foreground pointer-events-none"),onClick:b,disabled:!N,title:f?N?"Отметить все как прочитанные":"Нет непрочитанных уведомлений":"Уведомления выключены",children:[g?d.jsx(Ce,{size:"sm"}):d.jsx(Ak,{className:"h-4 w-4 mr-1"}),"Прочитать все"]})]})}),d.jsx(Gt,{className:"pt-2 pb-3",children:d.jsx(rh,{value:w,onValueChange:x,className:"w-full",children:d.jsxs(Hl,{className:"grid w-full grid-cols-2 h-9 bg-muted p-1 rounded-lg",children:[d.jsx(Nt,{value:"all",className:U("text-sm h-full rounded-md px-3 transition-all",w==="all"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground/80 data-[state=inactive]:hover:text-foreground/80"),children:"Лента"}),d.jsx(Nt,{value:"unread",className:U("text-sm h-full rounded-md px-3 transition-all",w==="unread"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground/80 data-[state=inactive]:hover:text-foreground/80"),children:"Непрочитанные"})]})})})]}),d.jsxs(bt,{className:"shadow-sm border rounded-lg overflow-hidden flex flex-col flex-grow",children:[d.jsx(Gt,{className:"p-0 flex-grow overflow-y-auto no-scrollbar min-h-0",children:S()}),!a&&r.length>0&&i===null&&d.jsxs("div",{className:"text-xs text-center text-muted-foreground p-2 border-t",children:["Всего уведомлений: ",s]})]})]})},j9=()=>{const{unreadCount:t,notificationsEnabled:e}=nn(u=>({unreadCount:u.unreadCount,notificationsEnabled:u.notificationsEnabled})),n=[{to:"/portfolio",label:"Мои счета",Icon:lL,hasBadge:!0},{to:"/market",label:"Биржа",Icon:tL},{to:"/top10",label:"Топ 10",Icon:oL},{to:"/profile",label:"Профиль",Icon:VO}],r=()=>U("relative flex flex-col items-center justify-center flex-1 h-full group transition-all duration-200 ease-in-out","pt-1 p-1","focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 focus-visible:ring-offset-background rounded-md"),i=()=>" text-primary",s=()=>"text-muted-foreground hover:text-foreground/90",o="bg-primary/10 dark:bg-primary/15 rounded-lg",a=({isActive:u})=>U("h-5 w-5 mb-0.5 transition-transform duration-150",u?"scale-105":"scale-100 opacity-80 group-hover:opacity-100"),l=({isActive:u})=>U("text-[11px] leading-tight block",u?"font-semibold":"font-normal"),c=d.jsx("div",{className:U("absolute inset-x-1.5 bottom-1 h-[3px] rounded-full bg-primary")});return d.jsx("nav",{className:U("fixed bottom-0 left-0 right-0 h-16 bg-background/95 backdrop-blur-sm border-t border-border/50 shadow-[0_-2px_10px_rgba(0,0,0,0.05)] dark:shadow-[0_-2px_10px_rgba(0,0,0,0.2)]","flex justify-around items-stretch","px-1","safe-padding-bottom z-50"),style:{paddingBottom:"env(safe-area-inset-bottom)"},children:n.map(({to:u,label:h,Icon:f,hasBadge:p})=>d.jsx(Xj,{to:u,end:u==="/portfolio",children:({isActive:g})=>d.jsx("div",{className:U(r(),g?i():s()),children:d.jsxs("div",{className:U("relative flex flex-col items-center justify-center w-full h-full",g&&o),children:[p&&e&&d.jsx(Yk,{count:t,positionClasses:"absolute top-0.5 right-1.5 transform translate-x-1/2 -translate-y-1/2"}),d.jsx(f,{className:a({isActive:g}),strokeWidth:g?2.25:1.75}),d.jsx("span",{className:l({isActive:g}),children:h}),g&&c]})})},u))})};var Qv="ToastProvider",[Jv,R9,M9]=Pd("Toast"),[YT,I8]=Dt("Toast",[M9]),[I9,lh]=YT(Qv),GT=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:o}=t,[a,l]=y.useState(null),[c,u]=y.useState(0),h=y.useRef(!1),f=y.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Qv}\`. Expected non-empty \`string\`.`),d.jsx(Jv.Provider,{scope:e,children:d.jsx(I9,{scope:e,label:n,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:y.useCallback(()=>u(p=>p+1),[]),onToastRemove:y.useCallback(()=>u(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};GT.displayName=Qv;var ZT="ToastViewport",O9=["F8"],_m="toast.viewportPause",Tm="toast.viewportResume",XT=y.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=O9,label:i="Notifications ({hotkey})",...s}=t,o=lh(ZT,n),a=R9(n),l=y.useRef(null),c=y.useRef(null),u=y.useRef(null),h=y.useRef(null),f=Pe(e,h,o.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=o.toastCount>0;y.useEffect(()=>{const w=v=>{var b;r.length!==0&&r.every(S=>v[S]||v.code===S)&&((b=h.current)==null||b.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[r]),y.useEffect(()=>{const w=l.current,v=h.current;if(g&&w&&v){const x=()=>{if(!o.isClosePausedRef.current){const C=new CustomEvent(_m);v.dispatchEvent(C),o.isClosePausedRef.current=!0}},b=()=>{if(o.isClosePausedRef.current){const C=new CustomEvent(Tm);v.dispatchEvent(C),o.isClosePausedRef.current=!1}},S=C=>{!w.contains(C.relatedTarget)&&b()},N=()=>{w.contains(document.activeElement)||b()};return w.addEventListener("focusin",x),w.addEventListener("focusout",S),w.addEventListener("pointermove",x),w.addEventListener("pointerleave",N),window.addEventListener("blur",x),window.addEventListener("focus",b),()=>{w.removeEventListener("focusin",x),w.removeEventListener("focusout",S),w.removeEventListener("pointermove",x),w.removeEventListener("pointerleave",N),window.removeEventListener("blur",x),window.removeEventListener("focus",b)}}},[g,o.isClosePausedRef]);const m=y.useCallback(({tabbingDirection:w})=>{const x=a().map(b=>{const S=b.ref.current,N=[S,...Y9(S)];return w==="forwards"?N:N.reverse()});return(w==="forwards"?x.reverse():x).flat()},[a]);return y.useEffect(()=>{const w=h.current;if(w){const v=x=>{var N,C,_;const b=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!b){const P=document.activeElement,I=x.shiftKey;if(x.target===w&&I){(N=c.current)==null||N.focus();return}const j=m({tabbingDirection:I?"backwards":"forwards"}),F=j.findIndex(M=>M===P);Of(j.slice(F+1))?x.preventDefault():I?(C=c.current)==null||C.focus():(_=u.current)==null||_.focus()}};return w.addEventListener("keydown",v),()=>w.removeEventListener("keydown",v)}},[a,m]),d.jsxs(Z$,{ref:l,role:"region","aria-label":i.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&d.jsx(Am,{ref:c,onFocusFromOutsideViewport:()=>{const w=m({tabbingDirection:"forwards"});Of(w)}}),d.jsx(Jv.Slot,{scope:n,children:d.jsx(ae.ol,{tabIndex:-1,...s,ref:f})}),g&&d.jsx(Am,{ref:u,onFocusFromOutsideViewport:()=>{const w=m({tabbingDirection:"backwards"});Of(w)}})]})});XT.displayName=ZT;var QT="ToastFocusProxy",Am=y.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=t,s=lh(QT,n);return d.jsx(Fd,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=s.viewport)!=null&&c.contains(a))&&r()}})});Am.displayName=QT;var ch="Toast",L9="toast.swipeStart",$9="toast.swipeMove",D9="toast.swipeCancel",z9="toast.swipeEnd",JT=y.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:s,...o}=t,[a=!0,l]=Cn({prop:r,defaultProp:i,onChange:s});return d.jsx(Ur,{present:n||a,children:d.jsx(V9,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:It(t.onPause),onResume:It(t.onResume),onSwipeStart:le(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:le(t.onSwipeMove,c=>{const{x:u,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:le(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:le(t.onSwipeEnd,c=>{const{x:u,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});JT.displayName=ch;var[F9,B9]=YT(ch,{onClose(){}}),V9=y.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:p,...g}=t,m=lh(ch,n),[w,v]=y.useState(null),x=Pe(e,M=>v(M)),b=y.useRef(null),S=y.useRef(null),N=i||m.duration,C=y.useRef(0),_=y.useRef(N),P=y.useRef(0),{onToastAdd:I,onToastRemove:R}=m,O=It(()=>{var D;(w==null?void 0:w.contains(document.activeElement))&&((D=m.viewport)==null||D.focus()),o()}),j=y.useCallback(M=>{!M||M===1/0||(window.clearTimeout(P.current),C.current=new Date().getTime(),P.current=window.setTimeout(O,M))},[O]);y.useEffect(()=>{const M=m.viewport;if(M){const D=()=>{j(_.current),c==null||c()},L=()=>{const B=new Date().getTime()-C.current;_.current=_.current-B,window.clearTimeout(P.current),l==null||l()};return M.addEventListener(_m,L),M.addEventListener(Tm,D),()=>{M.removeEventListener(_m,L),M.removeEventListener(Tm,D)}}},[m.viewport,N,l,c,j]),y.useEffect(()=>{s&&!m.isClosePausedRef.current&&j(N)},[s,N,m.isClosePausedRef,j]),y.useEffect(()=>(I(),()=>R()),[I,R]);const F=y.useMemo(()=>w?oA(w):null,[w]);return m.viewport?d.jsxs(d.Fragment,{children:[F&&d.jsx(U9,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:F}),d.jsx(F9,{scope:n,onClose:O,children:gs.createPortal(d.jsx(Jv.ItemSlot,{scope:n,children:d.jsx(G$,{asChild:!0,onEscapeKeyDown:le(a,()=>{m.isFocusedToastEscapeKeyDownRef.current||O(),m.isFocusedToastEscapeKeyDownRef.current=!1}),children:d.jsx(ae.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":m.swipeDirection,...g,ref:x,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:le(t.onKeyDown,M=>{M.key==="Escape"&&(a==null||a(M.nativeEvent),M.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,O()))}),onPointerDown:le(t.onPointerDown,M=>{M.button===0&&(b.current={x:M.clientX,y:M.clientY})}),onPointerMove:le(t.onPointerMove,M=>{if(!b.current)return;const D=M.clientX-b.current.x,L=M.clientY-b.current.y,B=!!S.current,A=["left","right"].includes(m.swipeDirection),$=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,E=A?$(0,D):0,z=A?0:$(0,L),q=M.pointerType==="touch"?10:2,T={x:E,y:z},J={originalEvent:M,delta:T};B?(S.current=T,jc($9,h,J,{discrete:!1})):sb(T,m.swipeDirection,q)?(S.current=T,jc(L9,u,J,{discrete:!1}),M.target.setPointerCapture(M.pointerId)):(Math.abs(D)>q||Math.abs(L)>q)&&(b.current=null)}),onPointerUp:le(t.onPointerUp,M=>{const D=S.current,L=M.target;if(L.hasPointerCapture(M.pointerId)&&L.releasePointerCapture(M.pointerId),S.current=null,b.current=null,D){const B=M.currentTarget,A={originalEvent:M,delta:D};sb(D,m.swipeDirection,m.swipeThreshold)?jc(z9,p,A,{discrete:!0}):jc(D9,f,A,{discrete:!0}),B.addEventListener("click",$=>$.preventDefault(),{once:!0})}})})})}),m.viewport)})]}):null}),U9=t=>{const{__scopeToast:e,children:n,...r}=t,i=lh(ch,e),[s,o]=y.useState(!1),[a,l]=y.useState(!1);return q9(()=>o(!0)),y.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:d.jsx(Dd,{asChild:!0,children:d.jsx(Fd,{...r,children:s&&d.jsxs(d.Fragment,{children:[i.label," ",n]})})})},H9="ToastTitle",eA=y.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return d.jsx(ae.div,{...r,ref:e})});eA.displayName=H9;var W9="ToastDescription",tA=y.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return d.jsx(ae.div,{...r,ref:e})});tA.displayName=W9;var nA="ToastAction",rA=y.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?d.jsx(sA,{altText:n,asChild:!0,children:d.jsx(ey,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${nA}\`. Expected non-empty \`string\`.`),null)});rA.displayName=nA;var iA="ToastClose",ey=y.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,i=B9(iA,n);return d.jsx(sA,{asChild:!0,children:d.jsx(ae.button,{type:"button",...r,ref:e,onClick:le(t.onClick,i.onClose)})})});ey.displayName=iA;var sA=y.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...i}=t;return d.jsx(ae.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function oA(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),K9(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...oA(r))}}),e}function jc(t,e,n,{discrete:r}){const i=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?Qk(i,s):i.dispatchEvent(s)}var sb=(t,e,n=0)=>{const r=Math.abs(t.x),i=Math.abs(t.y),s=r>i;return e==="left"||e==="right"?s&&r>n:!s&&i>n};function q9(t=()=>{}){const e=It(t);ut(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function K9(t){return t.nodeType===t.ELEMENT_NODE}function Y9(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Of(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var G9=GT,aA=XT,lA=JT,cA=eA,uA=tA,dA=rA,hA=ey;const Z9=G9,fA=y.forwardRef(({className:t,...e},n)=>d.jsx(aA,{ref:n,className:U("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));fA.displayName=aA.displayName;const X9=Td("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground",success:"success group border-success bg-success text-success-foreground"}},defaultVariants:{variant:"default"}}),pA=y.forwardRef(({className:t,variant:e,...n},r)=>d.jsx(lA,{ref:r,className:U(X9({variant:e}),t),...n}));pA.displayName=lA.displayName;const Q9=y.forwardRef(({className:t,...e},n)=>d.jsx(dA,{ref:n,className:U("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive group-[.success]:border-muted/40 group-[.success]:hover:border-success/30 group-[.success]:hover:bg-success group-[.success]:hover:text-success-foreground group-[.success]:focus:ring-success",t),...e}));Q9.displayName=dA.displayName;const mA=y.forwardRef(({className:t,...e},n)=>d.jsx(hA,{ref:n,className:U("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600 group-[.success]:text-green-300 group-[.success]:hover:text-green-50 group-[.success]:focus:ring-green-400 group-[.success]:focus:ring-offset-green-600",t),"toast-close":"",...e,children:d.jsx(Ed,{className:"h-4 w-4"})}));mA.displayName=hA.displayName;const gA=y.forwardRef(({className:t,...e},n)=>d.jsx(cA,{ref:n,className:U("text-sm font-semibold",t),...e}));gA.displayName=cA.displayName;const vA=y.forwardRef(({className:t,...e},n)=>d.jsx(uA,{ref:n,className:U("text-sm opacity-90",t),...e}));vA.displayName=uA.displayName;function J9(){const{toasts:t,dismiss:e}=En();return d.jsxs(Z9,{children:[t.map(function({id:n,title:r,description:i,action:s,...o}){return d.jsxs(pA,{...o,onClick:()=>e(n),className:"cursor-pointer",children:[d.jsxs("div",{className:"grid gap-1",children:[r&&d.jsx(gA,{children:r}),i&&d.jsx(vA,{children:i})]}),s,d.jsx(mA,{})]},n)}),d.jsx(fA,{})]})}const e8=()=>{const{tg:t}=Zt(),e=Gi(r=>r.preference),n=()=>{const r=Gi.getState().preference,i=(t==null?void 0:t.colorScheme)??(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");let s;r==="light"?s="light":r==="dark"?s="dark":s=i,k.log(`[ThemeManager Apply] Applying effective theme: ${s} (Preference: ${r}, TG: ${i})`),s==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")};return y.useEffect(()=>{if(!t){k.warn("[ThemeManager] Telegram SDK not ready on mount. Initial theme relies on localStorage/system."),n();return}return t.onEvent("themeChanged",n),k.log("[ThemeManager] Subscribed to Telegram themeChanged event."),n(),()=>{t&&(t.offEvent("themeChanged",n),k.log("[ThemeManager] Unsubscribed from Telegram themeChanged event."))}},[t]),y.useEffect(()=>{k.log(`[ThemeManager Preference Effect] Preference changed to: ${e}`),n()},[e]),null};class t8 extends y.Component{constructor(){super(...arguments);ty(this,"state",{hasError:!1,error:null,errorInfo:null})}static getDerivedStateFromError(n){return{hasError:!0,error:n,errorInfo:null}}componentDidCatch(n,r){console.error("Uncaught error in ErrorBoundary:",n,r),this.setState({error:n,errorInfo:r})}render(){var n;return this.state.hasError?d.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 text-center",children:[d.jsx("h1",{className:"text-xl font-semibold text-destructive mb-4",children:"Что-то пошло не так..."}),d.jsx("p",{className:"text-destructive p-4 border border-destructive/50 rounded-md bg-destructive/10",children:((n=this.state.error)==null?void 0:n.message)||"Произошла ошибка рендеринга приложения."}),!1,d.jsx("button",{onClick:()=>window.location.reload(),className:"mt-6 px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary/90",children:"Перезагрузить страницу"})]}):this.props.children}}const ob=({children:t})=>{const{isAdminAuthenticated:e,isLoading:n}=Tr(),{isAuthenticated:r,isLoading:i,jwt:s}=kn(),o=pn();if(n||i)return k.log("[AdminGuard Simple] Waiting for auth states to load..."),d.jsx("div",{className:"flex-grow flex items-center justify-center h-screen",children:d.jsx(Ce,{size:"lg"})});if(!r||!e||!s){k.log("[AdminGuard Simple] Access denied. Redirecting.",{isUserAuthenticated:r,isAdminAuthenticated:e,hasJwt:!!s});const a=r?"/admin/login":"/login";return d.jsx(gi,{to:a,state:{from:o},replace:!0})}return k.log("[AdminGuard Simple] Access granted to admin panel."),t},wr=({children:t})=>{const{isAuthenticated:e,isLoading:n}=kn(),{accounts:r,isLoading:i,error:s,fetchPortfolio:o,isFetching:a,hasAttemptedFetch:l}=ur(),c=pn(),{fetchUnreadCount:u,hasFetchedInitialCount:h}=nn();if(k.log(`[ProtectedRoute] Rendering for path: ${c.pathname}. AuthLoading: ${n}, PortfolioLoading: ${i}, HasAttemptedFetch: ${l}`),y.useEffect(()=>{e&&!n&&!l&&!a&&!i&&(k.log("[ProtectedRoute Portfolio Effect] Authenticated. Triggering fetchPortfolio..."),o()),e&&!n&&!h&&(k.log("[ProtectedRoute Notification Effect] Authenticated. Triggering fetchUnreadCount..."),u(!0))},[e,n,l,a,i,o,h,u]),n)return k.log("[ProtectedRoute Render] Auth state is loading..."),d.jsx("div",{className:"flex-grow flex items-center justify-center h-screen",children:d.jsx(Ce,{size:"lg"})});if(!e)return c.pathname.startsWith("/admin")?(k.log(`[ProtectedRoute Render] User NOT authenticated on admin path ${c.pathname}. Passing through to AdminGuard.`),null):(k.log(`[ProtectedRoute Render] User NOT authenticated. Redirecting from ${c.pathname} to /login.`),d.jsx(gi,{to:"/login",state:{from:c},replace:!0}));const f=c.pathname.startsWith("/faq")||c.pathname.startsWith("/asset/")||c.pathname.startsWith("/profile")||c.pathname.startsWith("/notifications");if(!c.pathname.startsWith("/admin")&&!f){if(k.log(`[ProtectedRoute Render] User authenticated. Checking portfolio status for path: ${c.pathname}`),(a||i)&&!l)return k.log("[ProtectedRoute Render] Waiting for portfolio data (initial load)..."),d.jsx("div",{className:"flex-grow flex items-center justify-center h-screen",children:d.jsx(Ce,{size:"lg"})});if(l&&s&&!s.includes("401")&&!s.includes("Unauthorized"))return k.error("[ProtectedRoute Render] Portfolio fetch error:",s),d.jsxs("div",{className:"flex-grow flex flex-col items-center justify-center p-4 text-center",children:[d.jsx(mt,{message:`Ошибка загрузки данных портфеля: ${s}`}),d.jsx(ke,{variant:"outline",onClick:()=>o(!0),className:"mt-4",children:"Повторить"})]});if(l&&r===null&&!s&&!i&&!a)return k.error("[ProtectedRoute Render] Portfolio fetch attempted, no error, but accounts is still null."),d.jsx("div",{className:"p-4 text-center text-destructive",children:"Не удалось загрузить данные портфеля. Обновите страницу."});if(r!==null){if(r.length===0&&c.pathname!=="/register-initial")return k.log("[ProtectedRoute Render] No accounts found, redirecting to /register-initial"),d.jsx(gi,{to:"/register-initial",replace:!0});if(r.length>0&&c.pathname==="/register-initial")return k.log("[ProtectedRoute Render] Accounts exist, redirecting from /register-initial to /portfolio"),d.jsx(gi,{to:"/portfolio",replace:!0})}}return k.log(`[ProtectedRoute Render] All checks passed for path ${c.pathname}. Rendering children.`),t},n8=({children:t})=>{const{isAuthenticated:e,isLoading:n}=kn();return k.log(`[GuestGuard] Rendering. AuthLoading: ${n}, IsAuthenticated: ${e}`),n?d.jsx("div",{className:"flex-grow flex items-center justify-center h-screen",children:d.jsx(Ce,{})}):e?d.jsx(gi,{to:"/",replace:!0}):t},r8=()=>{const t=pn(),e=y.useRef(null),n=Sr.getState().resetMarketState;return k.log(`[AppLayout] Rendering for path: ${t.pathname}`),y.useEffect(()=>{const r=t.pathname;e.current==="/market"&&r!=="/market"&&!r.startsWith("/asset/")&&(k.log("[AppLayout Effect] Navigating away from Market via BottomNav/Other. Resetting Market state."),n()),e.current=r},[t.pathname]),d.jsxs("div",{className:"flex-grow flex flex-col overflow-hidden pb-16",children:[d.jsx("main",{className:"flex-grow overflow-y-auto no-scrollbar",children:d.jsxs(PS,{children:[d.jsx(Qe,{index:!0,element:d.jsx(gi,{to:"/portfolio",replace:!0})}),d.jsx(Qe,{path:"/portfolio",element:d.jsx(t$,{})}),d.jsx(Qe,{path:"/market",element:d.jsx(V5,{})}),d.jsx(Qe,{path:"/top10",element:d.jsx(K5,{})}),d.jsx(Qe,{path:"/profile",element:d.jsx(L4,{})}),d.jsx(Qe,{path:"/portfolio/:accountId",element:d.jsx(D$,{})}),d.jsx(Qe,{path:"*",element:d.jsx(gi,{to:"/portfolio",replace:!0})})," "]})}),d.jsx(j9,{})]})};function i8(){k.log("[App] Component rendering...");const{tg:t}=Zt();return y.useEffect(()=>{k.log("[App Effect] Running TG effect..."),t?(t.ready(),t.expand(),k.log("[App Effect] TG ready() and expand() called.")):k.warn("[App Effect] TG object not available yet.")},[t]),k.log("[App] Returning JSX structure..."),d.jsxs("div",{className:"flex flex-col min-h-screen bg-background text-foreground",children:[d.jsx(e8,{}),d.jsx(J9,{}),d.jsx(t8,{children:d.jsxs(PS,{children:[d.jsx(Qe,{path:"/login",element:d.jsx(n8,{children:d.jsx(q4,{})})}),d.jsx(Qe,{path:"/register-initial",element:d.jsx(wr,{children:d.jsx(V4,{})})}),d.jsx(Qe,{path:"/asset/:id",element:d.jsx(wr,{children:d.jsx($5,{})})}),d.jsx(Qe,{path:"/asset/:id/chart",element:d.jsx(wr,{children:d.jsx(N9,{})})}),d.jsx(Qe,{path:"/portfolio/:accountId/operations",element:d.jsx(wr,{children:d.jsx(r4,{})})}),d.jsx(Qe,{path:"/notifications",element:d.jsx(wr,{children:d.jsx(P9,{})})}),d.jsx(Qe,{path:"/faq",element:d.jsx(wr,{children:d.jsx(fV,{})})}),d.jsx(Qe,{path:"/faq/:categoryId",element:d.jsx(wr,{children:d.jsx(pV,{})})}),d.jsx(Qe,{path:"/faq/:categoryId/:articleId",element:d.jsx(wr,{children:d.jsx(t9,{})})}),d.jsx(Qe,{path:"/admin/login",element:d.jsx(n9,{})}),d.jsx(Qe,{path:"/admin/panel",element:d.jsx(ob,{children:d.jsx(k9,{})})}),d.jsx(Qe,{path:"/admin/faq/:categoryId",element:d.jsx(ob,{children:d.jsx(E9,{})})}),d.jsx(Qe,{path:"/*",element:d.jsx(wr,{children:d.jsx(r8,{})})})]})})]})}const s8=({message:t})=>d.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",padding:"20px",fontFamily:"sans-serif",textAlign:"center",backgroundColor:"#fef2f2",color:"#b91c1c"},children:[d.jsx(Rg,{style:{width:"48px",height:"48px",marginBottom:"16px",color:"#dc2626"}}),d.jsx("h1",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"8px"},children:"Ошибка загрузки приложения"}),d.jsx("p",{style:{marginBottom:"16px",fontSize:"0.9rem",color:"#7f1d1d"},children:"Не удалось загрузить необходимую конфигурацию. Пожалуйста, обратитесь в поддержку или попробуйте позже."}),d.jsxs("details",{style:{fontSize:"0.75rem",color:"#991b1b",maxWidth:"90%",overflowWrap:"break-word"},children:[d.jsx("summary",{style:{cursor:"pointer",fontWeight:"500"},children:"Детали ошибки"}),d.jsx("pre",{style:{marginTop:"8px",padding:"8px",backgroundColor:"#fee2e2",borderRadius:"4px",textAlign:"left",whiteSpace:"pre-wrap",wordBreak:"break-all",maxHeight:"200px",overflowY:"auto"},children:t})]})]});async function o8(){var n;console.log("[index.tsx] startApp() called.");const t=document.getElementById("root");if(!t){document.body.innerHTML='<div style="color: red; padding: 20px; font-family: sans-serif;">Fatal Error: Root element (#root) not found in HTML.</div>',console.error("[index.tsx] CRITICAL: Root element #root not found!");return}console.log("[index.tsx] Root element found. Creating React root...");const e=Lf.createRoot(t);console.log("[index.tsx] React root created.");try{console.log("[index.tsx] Initializing app config..."),await LM(),console.log("[index.tsx] App config initialized.");try{const r=Ml();$M(r)}catch(r){k.error("[index.tsx] Failed to get config after initialization to update logger:",r)}k.log("[index.tsx] Configuration loaded successfully (using logger)."),k.log("[index.tsx] Initializing Telegram SDK check..."),(n=window.Telegram)!=null&&n.WebApp?(window.Telegram.WebApp.ready(),window.Telegram.WebApp.expand(),k.log("[index.tsx] Telegram WebApp SDK initialized.")):k.warn("[index.tsx] Telegram WebApp SDK not found."),k.log("[index.tsx] Telegram SDK check complete."),k.log("[index.tsx] Rendering React App..."),e.render(d.jsx(Kj,{children:d.jsx(i8,{})})),k.log("[index.tsx] React App Rendered (or render initiated).")}catch(r){console.error("[index.tsx] CRITICAL: Failed during startApp:",r),e.render(d.jsx(s8,{message:(r==null?void 0:r.message)||"Unknown application startup error."}))}}console.log("[index.tsx] Script loaded, calling startApp()...");o8();
